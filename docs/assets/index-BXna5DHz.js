(function(){const c=document.createElement("link").relList;if(c&&c.supports&&c.supports("modulepreload"))return;for(const f of document.querySelectorAll('link[rel="modulepreload"]'))u(f);new MutationObserver(f=>{for(const m of f)if(m.type==="childList")for(const h of m.addedNodes)h.tagName==="LINK"&&h.rel==="modulepreload"&&u(h)}).observe(document,{childList:!0,subtree:!0});function o(f){const m={};return f.integrity&&(m.integrity=f.integrity),f.referrerPolicy&&(m.referrerPolicy=f.referrerPolicy),f.crossOrigin==="use-credentials"?m.credentials="include":f.crossOrigin==="anonymous"?m.credentials="omit":m.credentials="same-origin",m}function u(f){if(f.ep)return;f.ep=!0;const m=o(f);fetch(f.href,m)}})();function Jp(l){return l&&l.__esModule&&Object.prototype.hasOwnProperty.call(l,"default")?l.default:l}var ku={exports:{}},Ds={};var dp;function Yy(){if(dp)return Ds;dp=1;var l=Symbol.for("react.transitional.element"),c=Symbol.for("react.fragment");function o(u,f,m){var h=null;if(m!==void 0&&(h=""+m),f.key!==void 0&&(h=""+f.key),"key"in f){m={};for(var y in f)y!=="key"&&(m[y]=f[y])}else m=f;return f=m.ref,{$$typeof:l,type:u,key:h,ref:f!==void 0?f:null,props:m}}return Ds.Fragment=c,Ds.jsx=o,Ds.jsxs=o,Ds}var fp;function Ky(){return fp||(fp=1,ku.exports=Yy()),ku.exports}var s=Ky(),Ru={exports:{}},De={};var mp;function Qy(){if(mp)return De;mp=1;var l=Symbol.for("react.transitional.element"),c=Symbol.for("react.portal"),o=Symbol.for("react.fragment"),u=Symbol.for("react.strict_mode"),f=Symbol.for("react.profiler"),m=Symbol.for("react.consumer"),h=Symbol.for("react.context"),y=Symbol.for("react.forward_ref"),b=Symbol.for("react.suspense"),g=Symbol.for("react.memo"),S=Symbol.for("react.lazy"),x=Symbol.for("react.activity"),L=Symbol.iterator;function H(M){return M===null||typeof M!="object"?null:(M=L&&M[L]||M["@@iterator"],typeof M=="function"?M:null)}var D={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},U=Object.assign,k={};function $(M,G,J){this.props=M,this.context=G,this.refs=k,this.updater=J||D}$.prototype.isReactComponent={},$.prototype.setState=function(M,G){if(typeof M!="object"&&typeof M!="function"&&M!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,M,G,"setState")},$.prototype.forceUpdate=function(M){this.updater.enqueueForceUpdate(this,M,"forceUpdate")};function F(){}F.prototype=$.prototype;function ee(M,G,J){this.props=M,this.context=G,this.refs=k,this.updater=J||D}var de=ee.prototype=new F;de.constructor=ee,U(de,$.prototype),de.isPureReactComponent=!0;var be=Array.isArray;function re(){}var ce={H:null,A:null,T:null,S:null},Ae=Object.prototype.hasOwnProperty;function T(M,G,J){var te=J.ref;return{$$typeof:l,type:M,key:G,ref:te!==void 0?te:null,props:J}}function he(M,G){return T(M.type,G,M.props)}function P(M){return typeof M=="object"&&M!==null&&M.$$typeof===l}function le(M){var G={"=":"=0",":":"=2"};return"$"+M.replace(/[=:]/g,function(J){return G[J]})}var ve=/\/+/g;function ge(M,G){return typeof M=="object"&&M!==null&&M.key!=null?le(""+M.key):G.toString(36)}function pe(M){switch(M.status){case"fulfilled":return M.value;case"rejected":throw M.reason;default:switch(typeof M.status=="string"?M.then(re,re):(M.status="pending",M.then(function(G){M.status==="pending"&&(M.status="fulfilled",M.value=G)},function(G){M.status==="pending"&&(M.status="rejected",M.reason=G)})),M.status){case"fulfilled":return M.value;case"rejected":throw M.reason}}throw M}function E(M,G,J,te,fe){var I=typeof M;(I==="undefined"||I==="boolean")&&(M=null);var Se=!1;if(M===null)Se=!0;else switch(I){case"bigint":case"string":case"number":Se=!0;break;case"object":switch(M.$$typeof){case l:case c:Se=!0;break;case S:return Se=M._init,E(Se(M._payload),G,J,te,fe)}}if(Se)return fe=fe(M),Se=te===""?"."+ge(M,0):te,be(fe)?(J="",Se!=null&&(J=Se.replace(ve,"$&/")+"/"),E(fe,G,J,"",function(ft){return ft})):fe!=null&&(P(fe)&&(fe=he(fe,J+(fe.key==null||M&&M.key===fe.key?"":(""+fe.key).replace(ve,"$&/")+"/")+Se)),G.push(fe)),1;Se=0;var qe=te===""?".":te+":";if(be(M))for(var Le=0;Le<M.length;Le++)te=M[Le],I=qe+ge(te,Le),Se+=E(te,G,J,I,fe);else if(Le=H(M),typeof Le=="function")for(M=Le.call(M),Le=0;!(te=M.next()).done;)te=te.value,I=qe+ge(te,Le++),Se+=E(te,G,J,I,fe);else if(I==="object"){if(typeof M.then=="function")return E(pe(M),G,J,te,fe);throw G=String(M),Error("Objects are not valid as a React child (found: "+(G==="[object Object]"?"object with keys {"+Object.keys(M).join(", ")+"}":G)+"). If you meant to render a collection of children, use an array instead.")}return Se}function X(M,G,J){if(M==null)return M;var te=[],fe=0;return E(M,te,"","",function(I){return G.call(J,I,fe++)}),te}function W(M){if(M._status===-1){var G=M._result;G=G(),G.then(function(J){(M._status===0||M._status===-1)&&(M._status=1,M._result=J)},function(J){(M._status===0||M._status===-1)&&(M._status=2,M._result=J)}),M._status===-1&&(M._status=0,M._result=G)}if(M._status===1)return M._result.default;throw M._result}var xe=typeof reportError=="function"?reportError:function(M){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var G=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof M=="object"&&M!==null&&typeof M.message=="string"?String(M.message):String(M),error:M});if(!window.dispatchEvent(G))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",M);return}console.error(M)},je={map:X,forEach:function(M,G,J){X(M,function(){G.apply(this,arguments)},J)},count:function(M){var G=0;return X(M,function(){G++}),G},toArray:function(M){return X(M,function(G){return G})||[]},only:function(M){if(!P(M))throw Error("React.Children.only expected to receive a single React element child.");return M}};return De.Activity=x,De.Children=je,De.Component=$,De.Fragment=o,De.Profiler=f,De.PureComponent=ee,De.StrictMode=u,De.Suspense=b,De.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=ce,De.__COMPILER_RUNTIME={__proto__:null,c:function(M){return ce.H.useMemoCache(M)}},De.cache=function(M){return function(){return M.apply(null,arguments)}},De.cacheSignal=function(){return null},De.cloneElement=function(M,G,J){if(M==null)throw Error("The argument must be a React element, but you passed "+M+".");var te=U({},M.props),fe=M.key;if(G!=null)for(I in G.key!==void 0&&(fe=""+G.key),G)!Ae.call(G,I)||I==="key"||I==="__self"||I==="__source"||I==="ref"&&G.ref===void 0||(te[I]=G[I]);var I=arguments.length-2;if(I===1)te.children=J;else if(1<I){for(var Se=Array(I),qe=0;qe<I;qe++)Se[qe]=arguments[qe+2];te.children=Se}return T(M.type,fe,te)},De.createContext=function(M){return M={$$typeof:h,_currentValue:M,_currentValue2:M,_threadCount:0,Provider:null,Consumer:null},M.Provider=M,M.Consumer={$$typeof:m,_context:M},M},De.createElement=function(M,G,J){var te,fe={},I=null;if(G!=null)for(te in G.key!==void 0&&(I=""+G.key),G)Ae.call(G,te)&&te!=="key"&&te!=="__self"&&te!=="__source"&&(fe[te]=G[te]);var Se=arguments.length-2;if(Se===1)fe.children=J;else if(1<Se){for(var qe=Array(Se),Le=0;Le<Se;Le++)qe[Le]=arguments[Le+2];fe.children=qe}if(M&&M.defaultProps)for(te in Se=M.defaultProps,Se)fe[te]===void 0&&(fe[te]=Se[te]);return T(M,I,fe)},De.createRef=function(){return{current:null}},De.forwardRef=function(M){return{$$typeof:y,render:M}},De.isValidElement=P,De.lazy=function(M){return{$$typeof:S,_payload:{_status:-1,_result:M},_init:W}},De.memo=function(M,G){return{$$typeof:g,type:M,compare:G===void 0?null:G}},De.startTransition=function(M){var G=ce.T,J={};ce.T=J;try{var te=M(),fe=ce.S;fe!==null&&fe(J,te),typeof te=="object"&&te!==null&&typeof te.then=="function"&&te.then(re,xe)}catch(I){xe(I)}finally{G!==null&&J.types!==null&&(G.types=J.types),ce.T=G}},De.unstable_useCacheRefresh=function(){return ce.H.useCacheRefresh()},De.use=function(M){return ce.H.use(M)},De.useActionState=function(M,G,J){return ce.H.useActionState(M,G,J)},De.useCallback=function(M,G){return ce.H.useCallback(M,G)},De.useContext=function(M){return ce.H.useContext(M)},De.useDebugValue=function(){},De.useDeferredValue=function(M,G){return ce.H.useDeferredValue(M,G)},De.useEffect=function(M,G){return ce.H.useEffect(M,G)},De.useEffectEvent=function(M){return ce.H.useEffectEvent(M)},De.useId=function(){return ce.H.useId()},De.useImperativeHandle=function(M,G,J){return ce.H.useImperativeHandle(M,G,J)},De.useInsertionEffect=function(M,G){return ce.H.useInsertionEffect(M,G)},De.useLayoutEffect=function(M,G){return ce.H.useLayoutEffect(M,G)},De.useMemo=function(M,G){return ce.H.useMemo(M,G)},De.useOptimistic=function(M,G){return ce.H.useOptimistic(M,G)},De.useReducer=function(M,G,J){return ce.H.useReducer(M,G,J)},De.useRef=function(M){return ce.H.useRef(M)},De.useState=function(M){return ce.H.useState(M)},De.useSyncExternalStore=function(M,G,J){return ce.H.useSyncExternalStore(M,G,J)},De.useTransition=function(){return ce.H.useTransition()},De.version="19.2.4",De}var hp;function hd(){return hp||(hp=1,Ru.exports=Qy()),Ru.exports}var p=hd();const $y=Jp(p);var Du={exports:{}},Ls={},Lu={exports:{}},Ou={};var pp;function Xy(){return pp||(pp=1,(function(l){function c(E,X){var W=E.length;E.push(X);e:for(;0<W;){var xe=W-1>>>1,je=E[xe];if(0<f(je,X))E[xe]=X,E[W]=je,W=xe;else break e}}function o(E){return E.length===0?null:E[0]}function u(E){if(E.length===0)return null;var X=E[0],W=E.pop();if(W!==X){E[0]=W;e:for(var xe=0,je=E.length,M=je>>>1;xe<M;){var G=2*(xe+1)-1,J=E[G],te=G+1,fe=E[te];if(0>f(J,W))te<je&&0>f(fe,J)?(E[xe]=fe,E[te]=W,xe=te):(E[xe]=J,E[G]=W,xe=G);else if(te<je&&0>f(fe,W))E[xe]=fe,E[te]=W,xe=te;else break e}}return X}function f(E,X){var W=E.sortIndex-X.sortIndex;return W!==0?W:E.id-X.id}if(l.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var m=performance;l.unstable_now=function(){return m.now()}}else{var h=Date,y=h.now();l.unstable_now=function(){return h.now()-y}}var b=[],g=[],S=1,x=null,L=3,H=!1,D=!1,U=!1,k=!1,$=typeof setTimeout=="function"?setTimeout:null,F=typeof clearTimeout=="function"?clearTimeout:null,ee=typeof setImmediate<"u"?setImmediate:null;function de(E){for(var X=o(g);X!==null;){if(X.callback===null)u(g);else if(X.startTime<=E)u(g),X.sortIndex=X.expirationTime,c(b,X);else break;X=o(g)}}function be(E){if(U=!1,de(E),!D)if(o(b)!==null)D=!0,re||(re=!0,le());else{var X=o(g);X!==null&&pe(be,X.startTime-E)}}var re=!1,ce=-1,Ae=5,T=-1;function he(){return k?!0:!(l.unstable_now()-T<Ae)}function P(){if(k=!1,re){var E=l.unstable_now();T=E;var X=!0;try{e:{D=!1,U&&(U=!1,F(ce),ce=-1),H=!0;var W=L;try{t:{for(de(E),x=o(b);x!==null&&!(x.expirationTime>E&&he());){var xe=x.callback;if(typeof xe=="function"){x.callback=null,L=x.priorityLevel;var je=xe(x.expirationTime<=E);if(E=l.unstable_now(),typeof je=="function"){x.callback=je,de(E),X=!0;break t}x===o(b)&&u(b),de(E)}else u(b);x=o(b)}if(x!==null)X=!0;else{var M=o(g);M!==null&&pe(be,M.startTime-E),X=!1}}break e}finally{x=null,L=W,H=!1}X=void 0}}finally{X?le():re=!1}}}var le;if(typeof ee=="function")le=function(){ee(P)};else if(typeof MessageChannel<"u"){var ve=new MessageChannel,ge=ve.port2;ve.port1.onmessage=P,le=function(){ge.postMessage(null)}}else le=function(){$(P,0)};function pe(E,X){ce=$(function(){E(l.unstable_now())},X)}l.unstable_IdlePriority=5,l.unstable_ImmediatePriority=1,l.unstable_LowPriority=4,l.unstable_NormalPriority=3,l.unstable_Profiling=null,l.unstable_UserBlockingPriority=2,l.unstable_cancelCallback=function(E){E.callback=null},l.unstable_forceFrameRate=function(E){0>E||125<E?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):Ae=0<E?Math.floor(1e3/E):5},l.unstable_getCurrentPriorityLevel=function(){return L},l.unstable_next=function(E){switch(L){case 1:case 2:case 3:var X=3;break;default:X=L}var W=L;L=X;try{return E()}finally{L=W}},l.unstable_requestPaint=function(){k=!0},l.unstable_runWithPriority=function(E,X){switch(E){case 1:case 2:case 3:case 4:case 5:break;default:E=3}var W=L;L=E;try{return X()}finally{L=W}},l.unstable_scheduleCallback=function(E,X,W){var xe=l.unstable_now();switch(typeof W=="object"&&W!==null?(W=W.delay,W=typeof W=="number"&&0<W?xe+W:xe):W=xe,E){case 1:var je=-1;break;case 2:je=250;break;case 5:je=1073741823;break;case 4:je=1e4;break;default:je=5e3}return je=W+je,E={id:S++,callback:X,priorityLevel:E,startTime:W,expirationTime:je,sortIndex:-1},W>xe?(E.sortIndex=W,c(g,E),o(b)===null&&E===o(g)&&(U?(F(ce),ce=-1):U=!0,pe(be,W-xe))):(E.sortIndex=je,c(b,E),D||H||(D=!0,re||(re=!0,le()))),E},l.unstable_shouldYield=he,l.unstable_wrapCallback=function(E){var X=L;return function(){var W=L;L=X;try{return E.apply(this,arguments)}finally{L=W}}}})(Ou)),Ou}var vp;function Py(){return vp||(vp=1,Lu.exports=Xy()),Lu.exports}var zu={exports:{}},Pt={};var gp;function Zy(){if(gp)return Pt;gp=1;var l=hd();function c(b){var g="https://react.dev/errors/"+b;if(1<arguments.length){g+="?args[]="+encodeURIComponent(arguments[1]);for(var S=2;S<arguments.length;S++)g+="&args[]="+encodeURIComponent(arguments[S])}return"Minified React error #"+b+"; visit "+g+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function o(){}var u={d:{f:o,r:function(){throw Error(c(522))},D:o,C:o,L:o,m:o,X:o,S:o,M:o},p:0,findDOMNode:null},f=Symbol.for("react.portal");function m(b,g,S){var x=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:f,key:x==null?null:""+x,children:b,containerInfo:g,implementation:S}}var h=l.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function y(b,g){if(b==="font")return"";if(typeof g=="string")return g==="use-credentials"?g:""}return Pt.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=u,Pt.createPortal=function(b,g){var S=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!g||g.nodeType!==1&&g.nodeType!==9&&g.nodeType!==11)throw Error(c(299));return m(b,g,null,S)},Pt.flushSync=function(b){var g=h.T,S=u.p;try{if(h.T=null,u.p=2,b)return b()}finally{h.T=g,u.p=S,u.d.f()}},Pt.preconnect=function(b,g){typeof b=="string"&&(g?(g=g.crossOrigin,g=typeof g=="string"?g==="use-credentials"?g:"":void 0):g=null,u.d.C(b,g))},Pt.prefetchDNS=function(b){typeof b=="string"&&u.d.D(b)},Pt.preinit=function(b,g){if(typeof b=="string"&&g&&typeof g.as=="string"){var S=g.as,x=y(S,g.crossOrigin),L=typeof g.integrity=="string"?g.integrity:void 0,H=typeof g.fetchPriority=="string"?g.fetchPriority:void 0;S==="style"?u.d.S(b,typeof g.precedence=="string"?g.precedence:void 0,{crossOrigin:x,integrity:L,fetchPriority:H}):S==="script"&&u.d.X(b,{crossOrigin:x,integrity:L,fetchPriority:H,nonce:typeof g.nonce=="string"?g.nonce:void 0})}},Pt.preinitModule=function(b,g){if(typeof b=="string")if(typeof g=="object"&&g!==null){if(g.as==null||g.as==="script"){var S=y(g.as,g.crossOrigin);u.d.M(b,{crossOrigin:S,integrity:typeof g.integrity=="string"?g.integrity:void 0,nonce:typeof g.nonce=="string"?g.nonce:void 0})}}else g==null&&u.d.M(b)},Pt.preload=function(b,g){if(typeof b=="string"&&typeof g=="object"&&g!==null&&typeof g.as=="string"){var S=g.as,x=y(S,g.crossOrigin);u.d.L(b,S,{crossOrigin:x,integrity:typeof g.integrity=="string"?g.integrity:void 0,nonce:typeof g.nonce=="string"?g.nonce:void 0,type:typeof g.type=="string"?g.type:void 0,fetchPriority:typeof g.fetchPriority=="string"?g.fetchPriority:void 0,referrerPolicy:typeof g.referrerPolicy=="string"?g.referrerPolicy:void 0,imageSrcSet:typeof g.imageSrcSet=="string"?g.imageSrcSet:void 0,imageSizes:typeof g.imageSizes=="string"?g.imageSizes:void 0,media:typeof g.media=="string"?g.media:void 0})}},Pt.preloadModule=function(b,g){if(typeof b=="string")if(g){var S=y(g.as,g.crossOrigin);u.d.m(b,{as:typeof g.as=="string"&&g.as!=="script"?g.as:void 0,crossOrigin:S,integrity:typeof g.integrity=="string"?g.integrity:void 0})}else u.d.m(b)},Pt.requestFormReset=function(b){u.d.r(b)},Pt.unstable_batchedUpdates=function(b,g){return b(g)},Pt.useFormState=function(b,g,S){return h.H.useFormState(b,g,S)},Pt.useFormStatus=function(){return h.H.useHostTransitionStatus()},Pt.version="19.2.4",Pt}var yp;function Jy(){if(yp)return zu.exports;yp=1;function l(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(l)}catch(c){console.error(c)}}return l(),zu.exports=Zy(),zu.exports}var bp;function Fy(){if(bp)return Ls;bp=1;var l=Py(),c=hd(),o=Jy();function u(e){var t="https://react.dev/errors/"+e;if(1<arguments.length){t+="?args[]="+encodeURIComponent(arguments[1]);for(var n=2;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n])}return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function f(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function m(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,(t.flags&4098)!==0&&(n=t.return),e=t.return;while(e)}return t.tag===3?n:null}function h(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function y(e){if(e.tag===31){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function b(e){if(m(e)!==e)throw Error(u(188))}function g(e){var t=e.alternate;if(!t){if(t=m(e),t===null)throw Error(u(188));return t!==e?null:e}for(var n=e,a=t;;){var i=n.return;if(i===null)break;var r=i.alternate;if(r===null){if(a=i.return,a!==null){n=a;continue}break}if(i.child===r.child){for(r=i.child;r;){if(r===n)return b(i),e;if(r===a)return b(i),t;r=r.sibling}throw Error(u(188))}if(n.return!==a.return)n=i,a=r;else{for(var d=!1,v=i.child;v;){if(v===n){d=!0,n=i,a=r;break}if(v===a){d=!0,a=i,n=r;break}v=v.sibling}if(!d){for(v=r.child;v;){if(v===n){d=!0,n=r,a=i;break}if(v===a){d=!0,a=r,n=i;break}v=v.sibling}if(!d)throw Error(u(189))}}if(n.alternate!==a)throw Error(u(190))}if(n.tag!==3)throw Error(u(188));return n.stateNode.current===n?e:t}function S(e){var t=e.tag;if(t===5||t===26||t===27||t===6)return e;for(e=e.child;e!==null;){if(t=S(e),t!==null)return t;e=e.sibling}return null}var x=Object.assign,L=Symbol.for("react.element"),H=Symbol.for("react.transitional.element"),D=Symbol.for("react.portal"),U=Symbol.for("react.fragment"),k=Symbol.for("react.strict_mode"),$=Symbol.for("react.profiler"),F=Symbol.for("react.consumer"),ee=Symbol.for("react.context"),de=Symbol.for("react.forward_ref"),be=Symbol.for("react.suspense"),re=Symbol.for("react.suspense_list"),ce=Symbol.for("react.memo"),Ae=Symbol.for("react.lazy"),T=Symbol.for("react.activity"),he=Symbol.for("react.memo_cache_sentinel"),P=Symbol.iterator;function le(e){return e===null||typeof e!="object"?null:(e=P&&e[P]||e["@@iterator"],typeof e=="function"?e:null)}var ve=Symbol.for("react.client.reference");function ge(e){if(e==null)return null;if(typeof e=="function")return e.$$typeof===ve?null:e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case U:return"Fragment";case $:return"Profiler";case k:return"StrictMode";case be:return"Suspense";case re:return"SuspenseList";case T:return"Activity"}if(typeof e=="object")switch(e.$$typeof){case D:return"Portal";case ee:return e.displayName||"Context";case F:return(e._context.displayName||"Context")+".Consumer";case de:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case ce:return t=e.displayName||null,t!==null?t:ge(e.type)||"Memo";case Ae:t=e._payload,e=e._init;try{return ge(e(t))}catch{}}return null}var pe=Array.isArray,E=c.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,X=o.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,W={pending:!1,data:null,method:null,action:null},xe=[],je=-1;function M(e){return{current:e}}function G(e){0>je||(e.current=xe[je],xe[je]=null,je--)}function J(e,t){je++,xe[je]=e.current,e.current=t}var te=M(null),fe=M(null),I=M(null),Se=M(null);function qe(e,t){switch(J(I,t),J(fe,e),J(te,null),t.nodeType){case 9:case 11:e=(e=t.documentElement)&&(e=e.namespaceURI)?Lh(e):0;break;default:if(e=t.tagName,t=t.namespaceURI)t=Lh(t),e=Oh(t,e);else switch(e){case"svg":e=1;break;case"math":e=2;break;default:e=0}}G(te),J(te,e)}function Le(){G(te),G(fe),G(I)}function ft(e){e.memoizedState!==null&&J(Se,e);var t=te.current,n=Oh(t,e.type);t!==n&&(J(fe,e),J(te,n))}function ze(e){fe.current===e&&(G(te),G(fe)),Se.current===e&&(G(Se),As._currentValue=W)}var rt,mt;function K(e){if(rt===void 0)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);rt=t&&t[1]||"",mt=-1<n.stack.indexOf(`
    at`)?" (<anonymous>)":-1<n.stack.indexOf("@")?"@unknown:0:0":""}return`
`+rt+e+mt}var ae=!1;function ie(e,t){if(!e||ae)return"";ae=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var a={DetermineComponentFrameRoot:function(){try{if(t){var Q=function(){throw Error()};if(Object.defineProperty(Q.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(Q,[])}catch(z){var R=z}Reflect.construct(e,[],Q)}else{try{Q.call()}catch(z){R=z}e.call(Q.prototype)}}else{try{throw Error()}catch(z){R=z}(Q=e())&&typeof Q.catch=="function"&&Q.catch(function(){})}}catch(z){if(z&&R&&typeof z.stack=="string")return[z.stack,R.stack]}return[null,null]}};a.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var i=Object.getOwnPropertyDescriptor(a.DetermineComponentFrameRoot,"name");i&&i.configurable&&Object.defineProperty(a.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var r=a.DetermineComponentFrameRoot(),d=r[0],v=r[1];if(d&&v){var j=d.split(`
`),w=v.split(`
`);for(i=a=0;a<j.length&&!j[a].includes("DetermineComponentFrameRoot");)a++;for(;i<w.length&&!w[i].includes("DetermineComponentFrameRoot");)i++;if(a===j.length||i===w.length)for(a=j.length-1,i=w.length-1;1<=a&&0<=i&&j[a]!==w[i];)i--;for(;1<=a&&0<=i;a--,i--)if(j[a]!==w[i]){if(a!==1||i!==1)do if(a--,i--,0>i||j[a]!==w[i]){var V=`
`+j[a].replace(" at new "," at ");return e.displayName&&V.includes("<anonymous>")&&(V=V.replace("<anonymous>",e.displayName)),V}while(1<=a&&0<=i);break}}}finally{ae=!1,Error.prepareStackTrace=n}return(n=e?e.displayName||e.name:"")?K(n):""}function Ne(e,t){switch(e.tag){case 26:case 27:case 5:return K(e.type);case 16:return K("Lazy");case 13:return e.child!==t&&t!==null?K("Suspense Fallback"):K("Suspense");case 19:return K("SuspenseList");case 0:case 15:return ie(e.type,!1);case 11:return ie(e.type.render,!1);case 1:return ie(e.type,!0);case 31:return K("Activity");default:return""}}function we(e){try{var t="",n=null;do t+=Ne(e,n),n=e,e=e.return;while(e);return t}catch(a){return`
Error generating stack: `+a.message+`
`+a.stack}}var Pe=Object.prototype.hasOwnProperty,ke=l.unstable_scheduleCallback,Ee=l.unstable_cancelCallback,Ct=l.unstable_shouldYield,Qt=l.unstable_requestPaint,lt=l.unstable_now,tn=l.unstable_getCurrentPriorityLevel,Tn=l.unstable_ImmediatePriority,nn=l.unstable_UserBlockingPriority,O=l.unstable_NormalPriority,Z=l.unstable_LowPriority,Te=l.unstable_IdlePriority,Lt=l.log,it=l.unstable_setDisableYieldValue,Jt=null,Ie=null;function zt(e){if(typeof Lt=="function"&&it(e),Ie&&typeof Ie.setStrictMode=="function")try{Ie.setStrictMode(Jt,e)}catch{}}var gt=Math.clz32?Math.clz32:oa,Ga=Math.log,Hn=Math.LN2;function oa(e){return e>>>=0,e===0?32:31-(Ga(e)/Hn|0)|0}var se=256,We=262144,_t=4194304;function yt(e){var t=e&42;if(t!==0)return t;switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return e&261888;case 262144:case 524288:case 1048576:case 2097152:return e&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return e&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return e}}function ht(e,t,n){var a=e.pendingLanes;if(a===0)return 0;var i=0,r=e.suspendedLanes,d=e.pingedLanes;e=e.warmLanes;var v=a&134217727;return v!==0?(a=v&~r,a!==0?i=yt(a):(d&=v,d!==0?i=yt(d):n||(n=v&~e,n!==0&&(i=yt(n))))):(v=a&~r,v!==0?i=yt(v):d!==0?i=yt(d):n||(n=a&~e,n!==0&&(i=yt(n)))),i===0?0:t!==0&&t!==i&&(t&r)===0&&(r=i&-i,n=t&-t,r>=n||r===32&&(n&4194048)!==0)?t:i}function an(e,t){return(e.pendingLanes&~(e.suspendedLanes&~e.pingedLanes)&t)===0}function Va(e,t){switch(e){case 1:case 2:case 4:case 8:case 64:return t+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function ua(){var e=_t;return _t<<=1,(_t&62914560)===0&&(_t=4194304),e}function Un(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function $t(e,t){e.pendingLanes|=t,t!==268435456&&(e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0)}function ln(e,t,n,a,i,r){var d=e.pendingLanes;e.pendingLanes=n,e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0,e.expiredLanes&=n,e.entangledLanes&=n,e.errorRecoveryDisabledLanes&=n,e.shellSuspendCounter=0;var v=e.entanglements,j=e.expirationTimes,w=e.hiddenUpdates;for(n=d&~n;0<n;){var V=31-gt(n),Q=1<<V;v[V]=0,j[V]=-1;var R=w[V];if(R!==null)for(w[V]=null,V=0;V<R.length;V++){var z=R[V];z!==null&&(z.lane&=-536870913)}n&=~Q}a!==0&&Gn(e,a,0),r!==0&&i===0&&e.tag!==0&&(e.suspendedLanes|=r&~(d&~t))}function Gn(e,t,n){e.pendingLanes|=t,e.suspendedLanes&=~t;var a=31-gt(t);e.entangledLanes|=t,e.entanglements[a]=e.entanglements[a]|1073741824|n&261930}function da(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var a=31-gt(n),i=1<<a;i&t|e[a]&t&&(e[a]|=t),n&=~i}}function fa(e,t){var n=t&-t;return n=(n&42)!==0?1:Ya(n),(n&(e.suspendedLanes|t))!==0?0:n}function Ya(e){switch(e){case 2:e=1;break;case 8:e=4;break;case 32:e=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:e=128;break;case 268435456:e=134217728;break;default:e=0}return e}function xl(e){return e&=-e,2<e?8<e?(e&134217727)!==0?32:268435456:8:2}function Zl(){var e=X.p;return e!==0?e:(e=window.event,e===void 0?32:lp(e.type))}function Jl(e,t){var n=X.p;try{return X.p=e,t()}finally{X.p=n}}var Wn=Math.random().toString(36).slice(2),At="__reactFiber$"+Wn,Bt="__reactProps$"+Wn,mn="__reactContainer$"+Wn,Ka="__reactEvents$"+Wn,Hi="__reactListeners$"+Wn,Fs="__reactHandles$"+Wn,Ui="__reactResources$"+Wn,ea="__reactMarker$"+Wn;function Fl(e){delete e[At],delete e[Bt],delete e[Ka],delete e[Hi],delete e[Fs]}function ma(e){var t=e[At];if(t)return t;for(var n=e.parentNode;n;){if(t=n[mn]||n[At]){if(n=t.alternate,t.child!==null||n!==null&&n.child!==null)for(e=Vh(e);e!==null;){if(n=e[At])return n;e=Vh(e)}return t}e=n,n=e.parentNode}return null}function Ft(e){if(e=e[At]||e[mn]){var t=e.tag;if(t===5||t===6||t===13||t===31||t===26||t===27||t===3)return e}return null}function hn(e){var t=e.tag;if(t===5||t===26||t===27||t===6)return e.stateNode;throw Error(u(33))}function ta(e){var t=e[Ui];return t||(t=e[Ui]={hoistableStyles:new Map,hoistableScripts:new Map}),t}function ot(e){e[ea]=!0}var Il=new Set,ha={};function qt(e,t){B(e,t),B(e+"Capture",t)}function B(e,t){for(ha[e]=t,e=0;e<t.length;e++)Il.add(t[e])}var ut=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),pa={},Qa={};function pn(e){return Pe.call(Qa,e)?!0:Pe.call(pa,e)?!1:ut.test(e)?Qa[e]=!0:(pa[e]=!0,!1)}function va(e,t,n){if(pn(t))if(n===null)e.removeAttribute(t);else{switch(typeof n){case"undefined":case"function":case"symbol":e.removeAttribute(t);return;case"boolean":var a=t.toLowerCase().slice(0,5);if(a!=="data-"&&a!=="aria-"){e.removeAttribute(t);return}}e.setAttribute(t,""+n)}}function Cn(e,t,n){if(n===null)e.removeAttribute(t);else{switch(typeof n){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(t);return}e.setAttribute(t,""+n)}}function Xt(e,t,n,a){if(a===null)e.removeAttribute(n);else{switch(typeof a){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(n);return}e.setAttributeNS(t,n,""+a)}}function sn(e){switch(typeof e){case"bigint":case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function ga(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function Is(e,t,n){var a=Object.getOwnPropertyDescriptor(e.constructor.prototype,t);if(!e.hasOwnProperty(t)&&typeof a<"u"&&typeof a.get=="function"&&typeof a.set=="function"){var i=a.get,r=a.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return i.call(this)},set:function(d){n=""+d,r.call(this,d)}}),Object.defineProperty(e,t,{enumerable:a.enumerable}),{getValue:function(){return n},setValue:function(d){n=""+d},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function Gi(e){if(!e._valueTracker){var t=ga(e)?"checked":"value";e._valueTracker=Is(e,t,""+e[t])}}function Ws(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),a="";return e&&(a=ga(e)?e.checked?"true":"false":e.value),e=a,e!==n?(t.setValue(e),!0):!1}function Wl(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}var ei=/[\n"\\]/g;function Ht(e){return e.replace(ei,function(t){return"\\"+t.charCodeAt(0).toString(16)+" "})}function Vi(e,t,n,a,i,r,d,v){e.name="",d!=null&&typeof d!="function"&&typeof d!="symbol"&&typeof d!="boolean"?e.type=d:e.removeAttribute("type"),t!=null?d==="number"?(t===0&&e.value===""||e.value!=t)&&(e.value=""+sn(t)):e.value!==""+sn(t)&&(e.value=""+sn(t)):d!=="submit"&&d!=="reset"||e.removeAttribute("value"),t!=null?Sl(e,d,sn(t)):n!=null?Sl(e,d,sn(n)):a!=null&&e.removeAttribute("value"),i==null&&r!=null&&(e.defaultChecked=!!r),i!=null&&(e.checked=i&&typeof i!="function"&&typeof i!="symbol"),v!=null&&typeof v!="function"&&typeof v!="symbol"&&typeof v!="boolean"?e.name=""+sn(v):e.removeAttribute("name")}function ec(e,t,n,a,i,r,d,v){if(r!=null&&typeof r!="function"&&typeof r!="symbol"&&typeof r!="boolean"&&(e.type=r),t!=null||n!=null){if(!(r!=="submit"&&r!=="reset"||t!=null)){Gi(e);return}n=n!=null?""+sn(n):"",t=t!=null?""+sn(t):n,v||t===e.value||(e.value=t),e.defaultValue=t}a=a??i,a=typeof a!="function"&&typeof a!="symbol"&&!!a,e.checked=v?e.checked:!!a,e.defaultChecked=!!a,d!=null&&typeof d!="function"&&typeof d!="symbol"&&typeof d!="boolean"&&(e.name=d),Gi(e)}function Sl(e,t,n){t==="number"&&Wl(e.ownerDocument)===e||e.defaultValue===""+n||(e.defaultValue=""+n)}function $a(e,t,n,a){if(e=e.options,t){t={};for(var i=0;i<n.length;i++)t["$"+n[i]]=!0;for(n=0;n<e.length;n++)i=t.hasOwnProperty("$"+e[n].value),e[n].selected!==i&&(e[n].selected=i),i&&a&&(e[n].defaultSelected=!0)}else{for(n=""+sn(n),t=null,i=0;i<e.length;i++){if(e[i].value===n){e[i].selected=!0,a&&(e[i].defaultSelected=!0);return}t!==null||e[i].disabled||(t=e[i])}t!==null&&(t.selected=!0)}}function Vn(e,t,n){if(t!=null&&(t=""+sn(t),t!==e.value&&(e.value=t),n==null)){e.defaultValue!==t&&(e.defaultValue=t);return}e.defaultValue=n!=null?""+sn(n):""}function Yi(e,t,n,a){if(t==null){if(a!=null){if(n!=null)throw Error(u(92));if(pe(a)){if(1<a.length)throw Error(u(93));a=a[0]}n=a}n==null&&(n=""),t=n}n=sn(t),e.defaultValue=n,a=e.textContent,a===n&&a!==""&&a!==null&&(e.value=a),Gi(e)}function It(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&n.nodeType===3){n.nodeValue=t;return}}e.textContent=t}var Dr=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function tc(e,t,n){var a=t.indexOf("--")===0;n==null||typeof n=="boolean"||n===""?a?e.setProperty(t,""):t==="float"?e.cssFloat="":e[t]="":a?e.setProperty(t,n):typeof n!="number"||n===0||Dr.has(t)?t==="float"?e.cssFloat=n:e[t]=(""+n).trim():e[t]=n+"px"}function nc(e,t,n){if(t!=null&&typeof t!="object")throw Error(u(62));if(e=e.style,n!=null){for(var a in n)!n.hasOwnProperty(a)||t!=null&&t.hasOwnProperty(a)||(a.indexOf("--")===0?e.setProperty(a,""):a==="float"?e.cssFloat="":e[a]="");for(var i in t)a=t[i],t.hasOwnProperty(i)&&n[i]!==a&&tc(e,i,a)}else for(var r in t)t.hasOwnProperty(r)&&tc(e,r,t[r])}function _l(e){if(e.indexOf("-")===-1)return!1;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Ki=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),ya=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function jl(e){return ya.test(""+e)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":e}function Yn(){}var ti=null;function na(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var Xa=null,Pa=null;function ac(e){var t=Ft(e);if(t&&(e=t.stateNode)){var n=e[Bt]||null;e:switch(e=t.stateNode,t.type){case"input":if(Vi(e,n.value,n.defaultValue,n.defaultValue,n.checked,n.defaultChecked,n.type,n.name),t=n.name,n.type==="radio"&&t!=null){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll('input[name="'+Ht(""+t)+'"][type="radio"]'),t=0;t<n.length;t++){var a=n[t];if(a!==e&&a.form===e.form){var i=a[Bt]||null;if(!i)throw Error(u(90));Vi(a,i.value,i.defaultValue,i.defaultValue,i.checked,i.defaultChecked,i.type,i.name)}}for(t=0;t<n.length;t++)a=n[t],a.form===e.form&&Ws(a)}break e;case"textarea":Vn(e,n.value,n.defaultValue);break e;case"select":t=n.value,t!=null&&$a(e,!!n.multiple,t,!1)}}}var Qi=!1;function lc(e,t,n){if(Qi)return e(t,n);Qi=!0;try{var a=e(t);return a}finally{if(Qi=!1,(Xa!==null||Pa!==null)&&(Uc(),Xa&&(t=Xa,e=Pa,Pa=Xa=null,ac(t),e)))for(t=0;t<e.length;t++)ac(e[t])}}function Ml(e,t){var n=e.stateNode;if(n===null)return null;var a=n[Bt]||null;if(a===null)return null;n=a[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(a=!a.disabled)||(e=e.type,a=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!a;break e;default:e=!1}if(e)return null;if(n&&typeof n!="function")throw Error(u(231,t,typeof n));return n}var Kn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),$i=!1;if(Kn)try{var Nl={};Object.defineProperty(Nl,"passive",{get:function(){$i=!0}}),window.addEventListener("test",Nl,Nl),window.removeEventListener("test",Nl,Nl)}catch{$i=!1}var vn=null,Xi=null,ni=null;function Pi(){if(ni)return ni;var e,t=Xi,n=t.length,a,i="value"in vn?vn.value:vn.textContent,r=i.length;for(e=0;e<n&&t[e]===i[e];e++);var d=n-e;for(a=1;a<=d&&t[n-a]===i[r-a];a++);return ni=i.slice(e,1<a?1-a:void 0)}function _(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function q(){return!0}function ne(){return!1}function oe(e){function t(n,a,i,r,d){this._reactName=n,this._targetInst=i,this.type=a,this.nativeEvent=r,this.target=d,this.currentTarget=null;for(var v in e)e.hasOwnProperty(v)&&(n=e[v],this[v]=n?n(r):r[v]);return this.isDefaultPrevented=(r.defaultPrevented!=null?r.defaultPrevented:r.returnValue===!1)?q:ne,this.isPropagationStopped=ne,this}return x(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=q)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=q)},persist:function(){},isPersistent:q}),t}var Re={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Ce=oe(Re),Ye=x({},Re,{view:0,detail:0}),Wt=oe(Ye),Qn,$n,jt,An=x({},Ye,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Or,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==jt&&(jt&&e.type==="mousemove"?(Qn=e.screenX-jt.screenX,$n=e.screenY-jt.screenY):$n=Qn=0,jt=e),Qn)},movementY:function(e){return"movementY"in e?e.movementY:$n}}),Zi=oe(An),El=x({},An,{dataTransfer:0}),Yv=oe(El),Kv=x({},Ye,{relatedTarget:0}),Lr=oe(Kv),Qv=x({},Re,{animationName:0,elapsedTime:0,pseudoElement:0}),$v=oe(Qv),Xv=x({},Re,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),Pv=oe(Xv),Zv=x({},Re,{data:0}),Bd=oe(Zv),Jv={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Fv={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Iv={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Wv(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=Iv[e])?!!t[e]:!1}function Or(){return Wv}var eg=x({},Ye,{key:function(e){if(e.key){var t=Jv[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=_(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?Fv[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Or,charCode:function(e){return e.type==="keypress"?_(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?_(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),tg=oe(eg),ng=x({},An,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),qd=oe(ng),ag=x({},Ye,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Or}),lg=oe(ag),ig=x({},Re,{propertyName:0,elapsedTime:0,pseudoElement:0}),sg=oe(ig),cg=x({},An,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),rg=oe(cg),og=x({},Re,{newState:0,oldState:0}),ug=oe(og),dg=[9,13,27,32],zr=Kn&&"CompositionEvent"in window,Ji=null;Kn&&"documentMode"in document&&(Ji=document.documentMode);var fg=Kn&&"TextEvent"in window&&!Ji,Hd=Kn&&(!zr||Ji&&8<Ji&&11>=Ji),Ud=" ",Gd=!1;function Vd(e,t){switch(e){case"keyup":return dg.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Yd(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var ai=!1;function mg(e,t){switch(e){case"compositionend":return Yd(t);case"keypress":return t.which!==32?null:(Gd=!0,Ud);case"textInput":return e=t.data,e===Ud&&Gd?null:e;default:return null}}function hg(e,t){if(ai)return e==="compositionend"||!zr&&Vd(e,t)?(e=Pi(),ni=Xi=vn=null,ai=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Hd&&t.locale!=="ko"?null:t.data;default:return null}}var pg={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Kd(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!pg[e.type]:t==="textarea"}function Qd(e,t,n,a){Xa?Pa?Pa.push(a):Pa=[a]:Xa=a,t=Xc(t,"onChange"),0<t.length&&(n=new Ce("onChange","change",null,n,a),e.push({event:n,listeners:t}))}var Fi=null,Ii=null;function vg(e){Ch(e,0)}function ic(e){var t=hn(e);if(Ws(t))return e}function $d(e,t){if(e==="change")return t}var Xd=!1;if(Kn){var Br;if(Kn){var qr="oninput"in document;if(!qr){var Pd=document.createElement("div");Pd.setAttribute("oninput","return;"),qr=typeof Pd.oninput=="function"}Br=qr}else Br=!1;Xd=Br&&(!document.documentMode||9<document.documentMode)}function Zd(){Fi&&(Fi.detachEvent("onpropertychange",Jd),Ii=Fi=null)}function Jd(e){if(e.propertyName==="value"&&ic(Ii)){var t=[];Qd(t,Ii,e,na(e)),lc(vg,t)}}function gg(e,t,n){e==="focusin"?(Zd(),Fi=t,Ii=n,Fi.attachEvent("onpropertychange",Jd)):e==="focusout"&&Zd()}function yg(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return ic(Ii)}function bg(e,t){if(e==="click")return ic(t)}function xg(e,t){if(e==="input"||e==="change")return ic(t)}function Sg(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var gn=typeof Object.is=="function"?Object.is:Sg;function Wi(e,t){if(gn(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var n=Object.keys(e),a=Object.keys(t);if(n.length!==a.length)return!1;for(a=0;a<n.length;a++){var i=n[a];if(!Pe.call(t,i)||!gn(e[i],t[i]))return!1}return!0}function Fd(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function Id(e,t){var n=Fd(e);e=0;for(var a;n;){if(n.nodeType===3){if(a=e+n.textContent.length,e<=t&&a>=t)return{node:n,offset:t-e};e=a}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=Fd(n)}}function Wd(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?Wd(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function ef(e){e=e!=null&&e.ownerDocument!=null&&e.ownerDocument.defaultView!=null?e.ownerDocument.defaultView:window;for(var t=Wl(e.document);t instanceof e.HTMLIFrameElement;){try{var n=typeof t.contentWindow.location.href=="string"}catch{n=!1}if(n)e=t.contentWindow;else break;t=Wl(e.document)}return t}function Hr(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}var _g=Kn&&"documentMode"in document&&11>=document.documentMode,li=null,Ur=null,es=null,Gr=!1;function tf(e,t,n){var a=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;Gr||li==null||li!==Wl(a)||(a=li,"selectionStart"in a&&Hr(a)?a={start:a.selectionStart,end:a.selectionEnd}:(a=(a.ownerDocument&&a.ownerDocument.defaultView||window).getSelection(),a={anchorNode:a.anchorNode,anchorOffset:a.anchorOffset,focusNode:a.focusNode,focusOffset:a.focusOffset}),es&&Wi(es,a)||(es=a,a=Xc(Ur,"onSelect"),0<a.length&&(t=new Ce("onSelect","select",null,t,n),e.push({event:t,listeners:a}),t.target=li)))}function Tl(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var ii={animationend:Tl("Animation","AnimationEnd"),animationiteration:Tl("Animation","AnimationIteration"),animationstart:Tl("Animation","AnimationStart"),transitionrun:Tl("Transition","TransitionRun"),transitionstart:Tl("Transition","TransitionStart"),transitioncancel:Tl("Transition","TransitionCancel"),transitionend:Tl("Transition","TransitionEnd")},Vr={},nf={};Kn&&(nf=document.createElement("div").style,"AnimationEvent"in window||(delete ii.animationend.animation,delete ii.animationiteration.animation,delete ii.animationstart.animation),"TransitionEvent"in window||delete ii.transitionend.transition);function Cl(e){if(Vr[e])return Vr[e];if(!ii[e])return e;var t=ii[e],n;for(n in t)if(t.hasOwnProperty(n)&&n in nf)return Vr[e]=t[n];return e}var af=Cl("animationend"),lf=Cl("animationiteration"),sf=Cl("animationstart"),jg=Cl("transitionrun"),Mg=Cl("transitionstart"),Ng=Cl("transitioncancel"),cf=Cl("transitionend"),rf=new Map,Yr="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Yr.push("scrollEnd");function Xn(e,t){rf.set(e,t),qt(t,[e])}var sc=typeof reportError=="function"?reportError:function(e){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var t=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof e=="object"&&e!==null&&typeof e.message=="string"?String(e.message):String(e),error:e});if(!window.dispatchEvent(t))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",e);return}console.error(e)},wn=[],si=0,Kr=0;function cc(){for(var e=si,t=Kr=si=0;t<e;){var n=wn[t];wn[t++]=null;var a=wn[t];wn[t++]=null;var i=wn[t];wn[t++]=null;var r=wn[t];if(wn[t++]=null,a!==null&&i!==null){var d=a.pending;d===null?i.next=i:(i.next=d.next,d.next=i),a.pending=i}r!==0&&of(n,i,r)}}function rc(e,t,n,a){wn[si++]=e,wn[si++]=t,wn[si++]=n,wn[si++]=a,Kr|=a,e.lanes|=a,e=e.alternate,e!==null&&(e.lanes|=a)}function Qr(e,t,n,a){return rc(e,t,n,a),oc(e)}function Al(e,t){return rc(e,null,null,t),oc(e)}function of(e,t,n){e.lanes|=n;var a=e.alternate;a!==null&&(a.lanes|=n);for(var i=!1,r=e.return;r!==null;)r.childLanes|=n,a=r.alternate,a!==null&&(a.childLanes|=n),r.tag===22&&(e=r.stateNode,e===null||e._visibility&1||(i=!0)),e=r,r=r.return;return e.tag===3?(r=e.stateNode,i&&t!==null&&(i=31-gt(n),e=r.hiddenUpdates,a=e[i],a===null?e[i]=[t]:a.push(t),t.lane=n|536870912),r):null}function oc(e){if(50<_s)throw _s=0,tu=null,Error(u(185));for(var t=e.return;t!==null;)e=t,t=e.return;return e.tag===3?e.stateNode:null}var ci={};function Eg(e,t,n,a){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=a,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function yn(e,t,n,a){return new Eg(e,t,n,a)}function $r(e){return e=e.prototype,!(!e||!e.isReactComponent)}function ba(e,t){var n=e.alternate;return n===null?(n=yn(e.tag,t,e.key,e.mode),n.elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=e.flags&65011712,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n.refCleanup=e.refCleanup,n}function uf(e,t){e.flags&=65011714;var n=e.alternate;return n===null?(e.childLanes=0,e.lanes=t,e.child=null,e.subtreeFlags=0,e.memoizedProps=null,e.memoizedState=null,e.updateQueue=null,e.dependencies=null,e.stateNode=null):(e.childLanes=n.childLanes,e.lanes=n.lanes,e.child=n.child,e.subtreeFlags=0,e.deletions=null,e.memoizedProps=n.memoizedProps,e.memoizedState=n.memoizedState,e.updateQueue=n.updateQueue,e.type=n.type,t=n.dependencies,e.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),e}function uc(e,t,n,a,i,r){var d=0;if(a=e,typeof e=="function")$r(e)&&(d=1);else if(typeof e=="string")d=ky(e,n,te.current)?26:e==="html"||e==="head"||e==="body"?27:5;else e:switch(e){case T:return e=yn(31,n,t,i),e.elementType=T,e.lanes=r,e;case U:return wl(n.children,i,r,t);case k:d=8,i|=24;break;case $:return e=yn(12,n,t,i|2),e.elementType=$,e.lanes=r,e;case be:return e=yn(13,n,t,i),e.elementType=be,e.lanes=r,e;case re:return e=yn(19,n,t,i),e.elementType=re,e.lanes=r,e;default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case ee:d=10;break e;case F:d=9;break e;case de:d=11;break e;case ce:d=14;break e;case Ae:d=16,a=null;break e}d=29,n=Error(u(130,e===null?"null":typeof e,"")),a=null}return t=yn(d,n,t,i),t.elementType=e,t.type=a,t.lanes=r,t}function wl(e,t,n,a){return e=yn(7,e,a,t),e.lanes=n,e}function Xr(e,t,n){return e=yn(6,e,null,t),e.lanes=n,e}function df(e){var t=yn(18,null,null,0);return t.stateNode=e,t}function Pr(e,t,n){return t=yn(4,e.children!==null?e.children:[],e.key,t),t.lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}var ff=new WeakMap;function kn(e,t){if(typeof e=="object"&&e!==null){var n=ff.get(e);return n!==void 0?n:(t={value:e,source:t,stack:we(t)},ff.set(e,t),t)}return{value:e,source:t,stack:we(t)}}var ri=[],oi=0,dc=null,ts=0,Rn=[],Dn=0,Za=null,aa=1,la="";function xa(e,t){ri[oi++]=ts,ri[oi++]=dc,dc=e,ts=t}function mf(e,t,n){Rn[Dn++]=aa,Rn[Dn++]=la,Rn[Dn++]=Za,Za=e;var a=aa;e=la;var i=32-gt(a)-1;a&=~(1<<i),n+=1;var r=32-gt(t)+i;if(30<r){var d=i-i%5;r=(a&(1<<d)-1).toString(32),a>>=d,i-=d,aa=1<<32-gt(t)+i|n<<i|a,la=r+e}else aa=1<<r|n<<i|a,la=e}function Zr(e){e.return!==null&&(xa(e,1),mf(e,1,0))}function Jr(e){for(;e===dc;)dc=ri[--oi],ri[oi]=null,ts=ri[--oi],ri[oi]=null;for(;e===Za;)Za=Rn[--Dn],Rn[Dn]=null,la=Rn[--Dn],Rn[Dn]=null,aa=Rn[--Dn],Rn[Dn]=null}function hf(e,t){Rn[Dn++]=aa,Rn[Dn++]=la,Rn[Dn++]=Za,aa=t.id,la=t.overflow,Za=e}var Ut=null,st=null,Ke=!1,Ja=null,Ln=!1,Fr=Error(u(519));function Fa(e){var t=Error(u(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw ns(kn(t,e)),Fr}function pf(e){var t=e.stateNode,n=e.type,a=e.memoizedProps;switch(t[At]=e,t[Bt]=a,n){case"dialog":Ue("cancel",t),Ue("close",t);break;case"iframe":case"object":case"embed":Ue("load",t);break;case"video":case"audio":for(n=0;n<Ms.length;n++)Ue(Ms[n],t);break;case"source":Ue("error",t);break;case"img":case"image":case"link":Ue("error",t),Ue("load",t);break;case"details":Ue("toggle",t);break;case"input":Ue("invalid",t),ec(t,a.value,a.defaultValue,a.checked,a.defaultChecked,a.type,a.name,!0);break;case"select":Ue("invalid",t);break;case"textarea":Ue("invalid",t),Yi(t,a.value,a.defaultValue,a.children)}n=a.children,typeof n!="string"&&typeof n!="number"&&typeof n!="bigint"||t.textContent===""+n||a.suppressHydrationWarning===!0||Rh(t.textContent,n)?(a.popover!=null&&(Ue("beforetoggle",t),Ue("toggle",t)),a.onScroll!=null&&Ue("scroll",t),a.onScrollEnd!=null&&Ue("scrollend",t),a.onClick!=null&&(t.onclick=Yn),t=!0):t=!1,t||Fa(e,!0)}function vf(e){for(Ut=e.return;Ut;)switch(Ut.tag){case 5:case 31:case 13:Ln=!1;return;case 27:case 3:Ln=!0;return;default:Ut=Ut.return}}function ui(e){if(e!==Ut)return!1;if(!Ke)return vf(e),Ke=!0,!1;var t=e.tag,n;if((n=t!==3&&t!==27)&&((n=t===5)&&(n=e.type,n=!(n!=="form"&&n!=="button")||vu(e.type,e.memoizedProps)),n=!n),n&&st&&Fa(e),vf(e),t===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(u(317));st=Gh(e)}else if(t===31){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(u(317));st=Gh(e)}else t===27?(t=st,dl(e.type)?(e=Su,Su=null,st=e):st=t):st=Ut?zn(e.stateNode.nextSibling):null;return!0}function kl(){st=Ut=null,Ke=!1}function Ir(){var e=Ja;return e!==null&&(un===null?un=e:un.push.apply(un,e),Ja=null),e}function ns(e){Ja===null?Ja=[e]:Ja.push(e)}var Wr=M(null),Rl=null,Sa=null;function Ia(e,t,n){J(Wr,t._currentValue),t._currentValue=n}function _a(e){e._currentValue=Wr.current,G(Wr)}function eo(e,t,n){for(;e!==null;){var a=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,a!==null&&(a.childLanes|=t)):a!==null&&(a.childLanes&t)!==t&&(a.childLanes|=t),e===n)break;e=e.return}}function to(e,t,n,a){var i=e.child;for(i!==null&&(i.return=e);i!==null;){var r=i.dependencies;if(r!==null){var d=i.child;r=r.firstContext;e:for(;r!==null;){var v=r;r=i;for(var j=0;j<t.length;j++)if(v.context===t[j]){r.lanes|=n,v=r.alternate,v!==null&&(v.lanes|=n),eo(r.return,n,e),a||(d=null);break e}r=v.next}}else if(i.tag===18){if(d=i.return,d===null)throw Error(u(341));d.lanes|=n,r=d.alternate,r!==null&&(r.lanes|=n),eo(d,n,e),d=null}else d=i.child;if(d!==null)d.return=i;else for(d=i;d!==null;){if(d===e){d=null;break}if(i=d.sibling,i!==null){i.return=d.return,d=i;break}d=d.return}i=d}}function di(e,t,n,a){e=null;for(var i=t,r=!1;i!==null;){if(!r){if((i.flags&524288)!==0)r=!0;else if((i.flags&262144)!==0)break}if(i.tag===10){var d=i.alternate;if(d===null)throw Error(u(387));if(d=d.memoizedProps,d!==null){var v=i.type;gn(i.pendingProps.value,d.value)||(e!==null?e.push(v):e=[v])}}else if(i===Se.current){if(d=i.alternate,d===null)throw Error(u(387));d.memoizedState.memoizedState!==i.memoizedState.memoizedState&&(e!==null?e.push(As):e=[As])}i=i.return}e!==null&&to(t,e,n,a),t.flags|=262144}function fc(e){for(e=e.firstContext;e!==null;){if(!gn(e.context._currentValue,e.memoizedValue))return!0;e=e.next}return!1}function Dl(e){Rl=e,Sa=null,e=e.dependencies,e!==null&&(e.firstContext=null)}function Gt(e){return gf(Rl,e)}function mc(e,t){return Rl===null&&Dl(e),gf(e,t)}function gf(e,t){var n=t._currentValue;if(t={context:t,memoizedValue:n,next:null},Sa===null){if(e===null)throw Error(u(308));Sa=t,e.dependencies={lanes:0,firstContext:t},e.flags|=524288}else Sa=Sa.next=t;return n}var Tg=typeof AbortController<"u"?AbortController:function(){var e=[],t=this.signal={aborted:!1,addEventListener:function(n,a){e.push(a)}};this.abort=function(){t.aborted=!0,e.forEach(function(n){return n()})}},Cg=l.unstable_scheduleCallback,Ag=l.unstable_NormalPriority,Mt={$$typeof:ee,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function no(){return{controller:new Tg,data:new Map,refCount:0}}function as(e){e.refCount--,e.refCount===0&&Cg(Ag,function(){e.controller.abort()})}var ls=null,ao=0,fi=0,mi=null;function wg(e,t){if(ls===null){var n=ls=[];ao=0,fi=cu(),mi={status:"pending",value:void 0,then:function(a){n.push(a)}}}return ao++,t.then(yf,yf),t}function yf(){if(--ao===0&&ls!==null){mi!==null&&(mi.status="fulfilled");var e=ls;ls=null,fi=0,mi=null;for(var t=0;t<e.length;t++)(0,e[t])()}}function kg(e,t){var n=[],a={status:"pending",value:null,reason:null,then:function(i){n.push(i)}};return e.then(function(){a.status="fulfilled",a.value=t;for(var i=0;i<n.length;i++)(0,n[i])(t)},function(i){for(a.status="rejected",a.reason=i,i=0;i<n.length;i++)(0,n[i])(void 0)}),a}var bf=E.S;E.S=function(e,t){nh=lt(),typeof t=="object"&&t!==null&&typeof t.then=="function"&&wg(e,t),bf!==null&&bf(e,t)};var Ll=M(null);function lo(){var e=Ll.current;return e!==null?e:at.pooledCache}function hc(e,t){t===null?J(Ll,Ll.current):J(Ll,t.pool)}function xf(){var e=lo();return e===null?null:{parent:Mt._currentValue,pool:e}}var hi=Error(u(460)),io=Error(u(474)),pc=Error(u(542)),vc={then:function(){}};function Sf(e){return e=e.status,e==="fulfilled"||e==="rejected"}function _f(e,t,n){switch(n=e[n],n===void 0?e.push(t):n!==t&&(t.then(Yn,Yn),t=n),t.status){case"fulfilled":return t.value;case"rejected":throw e=t.reason,Mf(e),e;default:if(typeof t.status=="string")t.then(Yn,Yn);else{if(e=at,e!==null&&100<e.shellSuspendCounter)throw Error(u(482));e=t,e.status="pending",e.then(function(a){if(t.status==="pending"){var i=t;i.status="fulfilled",i.value=a}},function(a){if(t.status==="pending"){var i=t;i.status="rejected",i.reason=a}})}switch(t.status){case"fulfilled":return t.value;case"rejected":throw e=t.reason,Mf(e),e}throw zl=t,hi}}function Ol(e){try{var t=e._init;return t(e._payload)}catch(n){throw n!==null&&typeof n=="object"&&typeof n.then=="function"?(zl=n,hi):n}}var zl=null;function jf(){if(zl===null)throw Error(u(459));var e=zl;return zl=null,e}function Mf(e){if(e===hi||e===pc)throw Error(u(483))}var pi=null,is=0;function gc(e){var t=is;return is+=1,pi===null&&(pi=[]),_f(pi,e,t)}function ss(e,t){t=t.props.ref,e.ref=t!==void 0?t:null}function yc(e,t){throw t.$$typeof===L?Error(u(525)):(e=Object.prototype.toString.call(t),Error(u(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)))}function Nf(e){function t(C,N){if(e){var A=C.deletions;A===null?(C.deletions=[N],C.flags|=16):A.push(N)}}function n(C,N){if(!e)return null;for(;N!==null;)t(C,N),N=N.sibling;return null}function a(C){for(var N=new Map;C!==null;)C.key!==null?N.set(C.key,C):N.set(C.index,C),C=C.sibling;return N}function i(C,N){return C=ba(C,N),C.index=0,C.sibling=null,C}function r(C,N,A){return C.index=A,e?(A=C.alternate,A!==null?(A=A.index,A<N?(C.flags|=67108866,N):A):(C.flags|=67108866,N)):(C.flags|=1048576,N)}function d(C){return e&&C.alternate===null&&(C.flags|=67108866),C}function v(C,N,A,Y){return N===null||N.tag!==6?(N=Xr(A,C.mode,Y),N.return=C,N):(N=i(N,A),N.return=C,N)}function j(C,N,A,Y){var ye=A.type;return ye===U?V(C,N,A.props.children,Y,A.key):N!==null&&(N.elementType===ye||typeof ye=="object"&&ye!==null&&ye.$$typeof===Ae&&Ol(ye)===N.type)?(N=i(N,A.props),ss(N,A),N.return=C,N):(N=uc(A.type,A.key,A.props,null,C.mode,Y),ss(N,A),N.return=C,N)}function w(C,N,A,Y){return N===null||N.tag!==4||N.stateNode.containerInfo!==A.containerInfo||N.stateNode.implementation!==A.implementation?(N=Pr(A,C.mode,Y),N.return=C,N):(N=i(N,A.children||[]),N.return=C,N)}function V(C,N,A,Y,ye){return N===null||N.tag!==7?(N=wl(A,C.mode,Y,ye),N.return=C,N):(N=i(N,A),N.return=C,N)}function Q(C,N,A){if(typeof N=="string"&&N!==""||typeof N=="number"||typeof N=="bigint")return N=Xr(""+N,C.mode,A),N.return=C,N;if(typeof N=="object"&&N!==null){switch(N.$$typeof){case H:return A=uc(N.type,N.key,N.props,null,C.mode,A),ss(A,N),A.return=C,A;case D:return N=Pr(N,C.mode,A),N.return=C,N;case Ae:return N=Ol(N),Q(C,N,A)}if(pe(N)||le(N))return N=wl(N,C.mode,A,null),N.return=C,N;if(typeof N.then=="function")return Q(C,gc(N),A);if(N.$$typeof===ee)return Q(C,mc(C,N),A);yc(C,N)}return null}function R(C,N,A,Y){var ye=N!==null?N.key:null;if(typeof A=="string"&&A!==""||typeof A=="number"||typeof A=="bigint")return ye!==null?null:v(C,N,""+A,Y);if(typeof A=="object"&&A!==null){switch(A.$$typeof){case H:return A.key===ye?j(C,N,A,Y):null;case D:return A.key===ye?w(C,N,A,Y):null;case Ae:return A=Ol(A),R(C,N,A,Y)}if(pe(A)||le(A))return ye!==null?null:V(C,N,A,Y,null);if(typeof A.then=="function")return R(C,N,gc(A),Y);if(A.$$typeof===ee)return R(C,N,mc(C,A),Y);yc(C,A)}return null}function z(C,N,A,Y,ye){if(typeof Y=="string"&&Y!==""||typeof Y=="number"||typeof Y=="bigint")return C=C.get(A)||null,v(N,C,""+Y,ye);if(typeof Y=="object"&&Y!==null){switch(Y.$$typeof){case H:return C=C.get(Y.key===null?A:Y.key)||null,j(N,C,Y,ye);case D:return C=C.get(Y.key===null?A:Y.key)||null,w(N,C,Y,ye);case Ae:return Y=Ol(Y),z(C,N,A,Y,ye)}if(pe(Y)||le(Y))return C=C.get(A)||null,V(N,C,Y,ye,null);if(typeof Y.then=="function")return z(C,N,A,gc(Y),ye);if(Y.$$typeof===ee)return z(C,N,A,mc(N,Y),ye);yc(N,Y)}return null}function ue(C,N,A,Y){for(var ye=null,Qe=null,me=N,Be=N=0,Ve=null;me!==null&&Be<A.length;Be++){me.index>Be?(Ve=me,me=null):Ve=me.sibling;var $e=R(C,me,A[Be],Y);if($e===null){me===null&&(me=Ve);break}e&&me&&$e.alternate===null&&t(C,me),N=r($e,N,Be),Qe===null?ye=$e:Qe.sibling=$e,Qe=$e,me=Ve}if(Be===A.length)return n(C,me),Ke&&xa(C,Be),ye;if(me===null){for(;Be<A.length;Be++)me=Q(C,A[Be],Y),me!==null&&(N=r(me,N,Be),Qe===null?ye=me:Qe.sibling=me,Qe=me);return Ke&&xa(C,Be),ye}for(me=a(me);Be<A.length;Be++)Ve=z(me,C,Be,A[Be],Y),Ve!==null&&(e&&Ve.alternate!==null&&me.delete(Ve.key===null?Be:Ve.key),N=r(Ve,N,Be),Qe===null?ye=Ve:Qe.sibling=Ve,Qe=Ve);return e&&me.forEach(function(vl){return t(C,vl)}),Ke&&xa(C,Be),ye}function _e(C,N,A,Y){if(A==null)throw Error(u(151));for(var ye=null,Qe=null,me=N,Be=N=0,Ve=null,$e=A.next();me!==null&&!$e.done;Be++,$e=A.next()){me.index>Be?(Ve=me,me=null):Ve=me.sibling;var vl=R(C,me,$e.value,Y);if(vl===null){me===null&&(me=Ve);break}e&&me&&vl.alternate===null&&t(C,me),N=r(vl,N,Be),Qe===null?ye=vl:Qe.sibling=vl,Qe=vl,me=Ve}if($e.done)return n(C,me),Ke&&xa(C,Be),ye;if(me===null){for(;!$e.done;Be++,$e=A.next())$e=Q(C,$e.value,Y),$e!==null&&(N=r($e,N,Be),Qe===null?ye=$e:Qe.sibling=$e,Qe=$e);return Ke&&xa(C,Be),ye}for(me=a(me);!$e.done;Be++,$e=A.next())$e=z(me,C,Be,$e.value,Y),$e!==null&&(e&&$e.alternate!==null&&me.delete($e.key===null?Be:$e.key),N=r($e,N,Be),Qe===null?ye=$e:Qe.sibling=$e,Qe=$e);return e&&me.forEach(function(Vy){return t(C,Vy)}),Ke&&xa(C,Be),ye}function nt(C,N,A,Y){if(typeof A=="object"&&A!==null&&A.type===U&&A.key===null&&(A=A.props.children),typeof A=="object"&&A!==null){switch(A.$$typeof){case H:e:{for(var ye=A.key;N!==null;){if(N.key===ye){if(ye=A.type,ye===U){if(N.tag===7){n(C,N.sibling),Y=i(N,A.props.children),Y.return=C,C=Y;break e}}else if(N.elementType===ye||typeof ye=="object"&&ye!==null&&ye.$$typeof===Ae&&Ol(ye)===N.type){n(C,N.sibling),Y=i(N,A.props),ss(Y,A),Y.return=C,C=Y;break e}n(C,N);break}else t(C,N);N=N.sibling}A.type===U?(Y=wl(A.props.children,C.mode,Y,A.key),Y.return=C,C=Y):(Y=uc(A.type,A.key,A.props,null,C.mode,Y),ss(Y,A),Y.return=C,C=Y)}return d(C);case D:e:{for(ye=A.key;N!==null;){if(N.key===ye)if(N.tag===4&&N.stateNode.containerInfo===A.containerInfo&&N.stateNode.implementation===A.implementation){n(C,N.sibling),Y=i(N,A.children||[]),Y.return=C,C=Y;break e}else{n(C,N);break}else t(C,N);N=N.sibling}Y=Pr(A,C.mode,Y),Y.return=C,C=Y}return d(C);case Ae:return A=Ol(A),nt(C,N,A,Y)}if(pe(A))return ue(C,N,A,Y);if(le(A)){if(ye=le(A),typeof ye!="function")throw Error(u(150));return A=ye.call(A),_e(C,N,A,Y)}if(typeof A.then=="function")return nt(C,N,gc(A),Y);if(A.$$typeof===ee)return nt(C,N,mc(C,A),Y);yc(C,A)}return typeof A=="string"&&A!==""||typeof A=="number"||typeof A=="bigint"?(A=""+A,N!==null&&N.tag===6?(n(C,N.sibling),Y=i(N,A),Y.return=C,C=Y):(n(C,N),Y=Xr(A,C.mode,Y),Y.return=C,C=Y),d(C)):n(C,N)}return function(C,N,A,Y){try{is=0;var ye=nt(C,N,A,Y);return pi=null,ye}catch(me){if(me===hi||me===pc)throw me;var Qe=yn(29,me,null,C.mode);return Qe.lanes=Y,Qe.return=C,Qe}}}var Bl=Nf(!0),Ef=Nf(!1),Wa=!1;function so(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function co(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,callbacks:null})}function el(e){return{lane:e,tag:0,payload:null,callback:null,next:null}}function tl(e,t,n){var a=e.updateQueue;if(a===null)return null;if(a=a.shared,(Ze&2)!==0){var i=a.pending;return i===null?t.next=t:(t.next=i.next,i.next=t),a.pending=t,t=oc(e),of(e,null,n),t}return rc(e,a,t,n),oc(e)}function cs(e,t,n){if(t=t.updateQueue,t!==null&&(t=t.shared,(n&4194048)!==0)){var a=t.lanes;a&=e.pendingLanes,n|=a,t.lanes=n,da(e,n)}}function ro(e,t){var n=e.updateQueue,a=e.alternate;if(a!==null&&(a=a.updateQueue,n===a)){var i=null,r=null;if(n=n.firstBaseUpdate,n!==null){do{var d={lane:n.lane,tag:n.tag,payload:n.payload,callback:null,next:null};r===null?i=r=d:r=r.next=d,n=n.next}while(n!==null);r===null?i=r=t:r=r.next=t}else i=r=t;n={baseState:a.baseState,firstBaseUpdate:i,lastBaseUpdate:r,shared:a.shared,callbacks:a.callbacks},e.updateQueue=n;return}e=n.lastBaseUpdate,e===null?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}var oo=!1;function rs(){if(oo){var e=mi;if(e!==null)throw e}}function os(e,t,n,a){oo=!1;var i=e.updateQueue;Wa=!1;var r=i.firstBaseUpdate,d=i.lastBaseUpdate,v=i.shared.pending;if(v!==null){i.shared.pending=null;var j=v,w=j.next;j.next=null,d===null?r=w:d.next=w,d=j;var V=e.alternate;V!==null&&(V=V.updateQueue,v=V.lastBaseUpdate,v!==d&&(v===null?V.firstBaseUpdate=w:v.next=w,V.lastBaseUpdate=j))}if(r!==null){var Q=i.baseState;d=0,V=w=j=null,v=r;do{var R=v.lane&-536870913,z=R!==v.lane;if(z?(Ge&R)===R:(a&R)===R){R!==0&&R===fi&&(oo=!0),V!==null&&(V=V.next={lane:0,tag:v.tag,payload:v.payload,callback:null,next:null});e:{var ue=e,_e=v;R=t;var nt=n;switch(_e.tag){case 1:if(ue=_e.payload,typeof ue=="function"){Q=ue.call(nt,Q,R);break e}Q=ue;break e;case 3:ue.flags=ue.flags&-65537|128;case 0:if(ue=_e.payload,R=typeof ue=="function"?ue.call(nt,Q,R):ue,R==null)break e;Q=x({},Q,R);break e;case 2:Wa=!0}}R=v.callback,R!==null&&(e.flags|=64,z&&(e.flags|=8192),z=i.callbacks,z===null?i.callbacks=[R]:z.push(R))}else z={lane:R,tag:v.tag,payload:v.payload,callback:v.callback,next:null},V===null?(w=V=z,j=Q):V=V.next=z,d|=R;if(v=v.next,v===null){if(v=i.shared.pending,v===null)break;z=v,v=z.next,z.next=null,i.lastBaseUpdate=z,i.shared.pending=null}}while(!0);V===null&&(j=Q),i.baseState=j,i.firstBaseUpdate=w,i.lastBaseUpdate=V,r===null&&(i.shared.lanes=0),sl|=d,e.lanes=d,e.memoizedState=Q}}function Tf(e,t){if(typeof e!="function")throw Error(u(191,e));e.call(t)}function Cf(e,t){var n=e.callbacks;if(n!==null)for(e.callbacks=null,e=0;e<n.length;e++)Tf(n[e],t)}var vi=M(null),bc=M(0);function Af(e,t){e=ka,J(bc,e),J(vi,t),ka=e|t.baseLanes}function uo(){J(bc,ka),J(vi,vi.current)}function fo(){ka=bc.current,G(vi),G(bc)}var bn=M(null),On=null;function nl(e){var t=e.alternate;J(bt,bt.current&1),J(bn,e),On===null&&(t===null||vi.current!==null||t.memoizedState!==null)&&(On=e)}function mo(e){J(bt,bt.current),J(bn,e),On===null&&(On=e)}function wf(e){e.tag===22?(J(bt,bt.current),J(bn,e),On===null&&(On=e)):al()}function al(){J(bt,bt.current),J(bn,bn.current)}function xn(e){G(bn),On===e&&(On=null),G(bt)}var bt=M(0);function xc(e){for(var t=e;t!==null;){if(t.tag===13){var n=t.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||bu(n)||xu(n)))return t}else if(t.tag===19&&(t.memoizedProps.revealOrder==="forwards"||t.memoizedProps.revealOrder==="backwards"||t.memoizedProps.revealOrder==="unstable_legacy-backwards"||t.memoizedProps.revealOrder==="together")){if((t.flags&128)!==0)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var ja=0,Oe=null,et=null,Nt=null,Sc=!1,gi=!1,ql=!1,_c=0,us=0,yi=null,Rg=0;function pt(){throw Error(u(321))}function ho(e,t){if(t===null)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!gn(e[n],t[n]))return!1;return!0}function po(e,t,n,a,i,r){return ja=r,Oe=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,E.H=e===null||e.memoizedState===null?mm:wo,ql=!1,r=n(a,i),ql=!1,gi&&(r=Rf(t,n,a,i)),kf(e),r}function kf(e){E.H=ms;var t=et!==null&&et.next!==null;if(ja=0,Nt=et=Oe=null,Sc=!1,us=0,yi=null,t)throw Error(u(300));e===null||Et||(e=e.dependencies,e!==null&&fc(e)&&(Et=!0))}function Rf(e,t,n,a){Oe=e;var i=0;do{if(gi&&(yi=null),us=0,gi=!1,25<=i)throw Error(u(301));if(i+=1,Nt=et=null,e.updateQueue!=null){var r=e.updateQueue;r.lastEffect=null,r.events=null,r.stores=null,r.memoCache!=null&&(r.memoCache.index=0)}E.H=hm,r=t(n,a)}while(gi);return r}function Dg(){var e=E.H,t=e.useState()[0];return t=typeof t.then=="function"?ds(t):t,e=e.useState()[0],(et!==null?et.memoizedState:null)!==e&&(Oe.flags|=1024),t}function vo(){var e=_c!==0;return _c=0,e}function go(e,t,n){t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~n}function yo(e){if(Sc){for(e=e.memoizedState;e!==null;){var t=e.queue;t!==null&&(t.pending=null),e=e.next}Sc=!1}ja=0,Nt=et=Oe=null,gi=!1,us=_c=0,yi=null}function en(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Nt===null?Oe.memoizedState=Nt=e:Nt=Nt.next=e,Nt}function xt(){if(et===null){var e=Oe.alternate;e=e!==null?e.memoizedState:null}else e=et.next;var t=Nt===null?Oe.memoizedState:Nt.next;if(t!==null)Nt=t,et=e;else{if(e===null)throw Oe.alternate===null?Error(u(467)):Error(u(310));et=e,e={memoizedState:et.memoizedState,baseState:et.baseState,baseQueue:et.baseQueue,queue:et.queue,next:null},Nt===null?Oe.memoizedState=Nt=e:Nt=Nt.next=e}return Nt}function jc(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function ds(e){var t=us;return us+=1,yi===null&&(yi=[]),e=_f(yi,e,t),t=Oe,(Nt===null?t.memoizedState:Nt.next)===null&&(t=t.alternate,E.H=t===null||t.memoizedState===null?mm:wo),e}function Mc(e){if(e!==null&&typeof e=="object"){if(typeof e.then=="function")return ds(e);if(e.$$typeof===ee)return Gt(e)}throw Error(u(438,String(e)))}function bo(e){var t=null,n=Oe.updateQueue;if(n!==null&&(t=n.memoCache),t==null){var a=Oe.alternate;a!==null&&(a=a.updateQueue,a!==null&&(a=a.memoCache,a!=null&&(t={data:a.data.map(function(i){return i.slice()}),index:0})))}if(t==null&&(t={data:[],index:0}),n===null&&(n=jc(),Oe.updateQueue=n),n.memoCache=t,n=t.data[t.index],n===void 0)for(n=t.data[t.index]=Array(e),a=0;a<e;a++)n[a]=he;return t.index++,n}function Ma(e,t){return typeof t=="function"?t(e):t}function Nc(e){var t=xt();return xo(t,et,e)}function xo(e,t,n){var a=e.queue;if(a===null)throw Error(u(311));a.lastRenderedReducer=n;var i=e.baseQueue,r=a.pending;if(r!==null){if(i!==null){var d=i.next;i.next=r.next,r.next=d}t.baseQueue=i=r,a.pending=null}if(r=e.baseState,i===null)e.memoizedState=r;else{t=i.next;var v=d=null,j=null,w=t,V=!1;do{var Q=w.lane&-536870913;if(Q!==w.lane?(Ge&Q)===Q:(ja&Q)===Q){var R=w.revertLane;if(R===0)j!==null&&(j=j.next={lane:0,revertLane:0,gesture:null,action:w.action,hasEagerState:w.hasEagerState,eagerState:w.eagerState,next:null}),Q===fi&&(V=!0);else if((ja&R)===R){w=w.next,R===fi&&(V=!0);continue}else Q={lane:0,revertLane:w.revertLane,gesture:null,action:w.action,hasEagerState:w.hasEagerState,eagerState:w.eagerState,next:null},j===null?(v=j=Q,d=r):j=j.next=Q,Oe.lanes|=R,sl|=R;Q=w.action,ql&&n(r,Q),r=w.hasEagerState?w.eagerState:n(r,Q)}else R={lane:Q,revertLane:w.revertLane,gesture:w.gesture,action:w.action,hasEagerState:w.hasEagerState,eagerState:w.eagerState,next:null},j===null?(v=j=R,d=r):j=j.next=R,Oe.lanes|=Q,sl|=Q;w=w.next}while(w!==null&&w!==t);if(j===null?d=r:j.next=v,!gn(r,e.memoizedState)&&(Et=!0,V&&(n=mi,n!==null)))throw n;e.memoizedState=r,e.baseState=d,e.baseQueue=j,a.lastRenderedState=r}return i===null&&(a.lanes=0),[e.memoizedState,a.dispatch]}function So(e){var t=xt(),n=t.queue;if(n===null)throw Error(u(311));n.lastRenderedReducer=e;var a=n.dispatch,i=n.pending,r=t.memoizedState;if(i!==null){n.pending=null;var d=i=i.next;do r=e(r,d.action),d=d.next;while(d!==i);gn(r,t.memoizedState)||(Et=!0),t.memoizedState=r,t.baseQueue===null&&(t.baseState=r),n.lastRenderedState=r}return[r,a]}function Df(e,t,n){var a=Oe,i=xt(),r=Ke;if(r){if(n===void 0)throw Error(u(407));n=n()}else n=t();var d=!gn((et||i).memoizedState,n);if(d&&(i.memoizedState=n,Et=!0),i=i.queue,Mo(zf.bind(null,a,i,e),[e]),i.getSnapshot!==t||d||Nt!==null&&Nt.memoizedState.tag&1){if(a.flags|=2048,bi(9,{destroy:void 0},Of.bind(null,a,i,n,t),null),at===null)throw Error(u(349));r||(ja&127)!==0||Lf(a,t,n)}return n}function Lf(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},t=Oe.updateQueue,t===null?(t=jc(),Oe.updateQueue=t,t.stores=[e]):(n=t.stores,n===null?t.stores=[e]:n.push(e))}function Of(e,t,n,a){t.value=n,t.getSnapshot=a,Bf(t)&&qf(e)}function zf(e,t,n){return n(function(){Bf(t)&&qf(e)})}function Bf(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!gn(e,n)}catch{return!0}}function qf(e){var t=Al(e,2);t!==null&&dn(t,e,2)}function _o(e){var t=en();if(typeof e=="function"){var n=e;if(e=n(),ql){zt(!0);try{n()}finally{zt(!1)}}}return t.memoizedState=t.baseState=e,t.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ma,lastRenderedState:e},t}function Hf(e,t,n,a){return e.baseState=n,xo(e,et,typeof a=="function"?a:Ma)}function Lg(e,t,n,a,i){if(Cc(e))throw Error(u(485));if(e=t.action,e!==null){var r={payload:i,action:e,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(d){r.listeners.push(d)}};E.T!==null?n(!0):r.isTransition=!1,a(r),n=t.pending,n===null?(r.next=t.pending=r,Uf(t,r)):(r.next=n.next,t.pending=n.next=r)}}function Uf(e,t){var n=t.action,a=t.payload,i=e.state;if(t.isTransition){var r=E.T,d={};E.T=d;try{var v=n(i,a),j=E.S;j!==null&&j(d,v),Gf(e,t,v)}catch(w){jo(e,t,w)}finally{r!==null&&d.types!==null&&(r.types=d.types),E.T=r}}else try{r=n(i,a),Gf(e,t,r)}catch(w){jo(e,t,w)}}function Gf(e,t,n){n!==null&&typeof n=="object"&&typeof n.then=="function"?n.then(function(a){Vf(e,t,a)},function(a){return jo(e,t,a)}):Vf(e,t,n)}function Vf(e,t,n){t.status="fulfilled",t.value=n,Yf(t),e.state=n,t=e.pending,t!==null&&(n=t.next,n===t?e.pending=null:(n=n.next,t.next=n,Uf(e,n)))}function jo(e,t,n){var a=e.pending;if(e.pending=null,a!==null){a=a.next;do t.status="rejected",t.reason=n,Yf(t),t=t.next;while(t!==a)}e.action=null}function Yf(e){e=e.listeners;for(var t=0;t<e.length;t++)(0,e[t])()}function Kf(e,t){return t}function Qf(e,t){if(Ke){var n=at.formState;if(n!==null){e:{var a=Oe;if(Ke){if(st){t:{for(var i=st,r=Ln;i.nodeType!==8;){if(!r){i=null;break t}if(i=zn(i.nextSibling),i===null){i=null;break t}}r=i.data,i=r==="F!"||r==="F"?i:null}if(i){st=zn(i.nextSibling),a=i.data==="F!";break e}}Fa(a)}a=!1}a&&(t=n[0])}}return n=en(),n.memoizedState=n.baseState=t,a={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Kf,lastRenderedState:t},n.queue=a,n=um.bind(null,Oe,a),a.dispatch=n,a=_o(!1),r=Ao.bind(null,Oe,!1,a.queue),a=en(),i={state:t,dispatch:null,action:e,pending:null},a.queue=i,n=Lg.bind(null,Oe,i,r,n),i.dispatch=n,a.memoizedState=e,[t,n,!1]}function $f(e){var t=xt();return Xf(t,et,e)}function Xf(e,t,n){if(t=xo(e,t,Kf)[0],e=Nc(Ma)[0],typeof t=="object"&&t!==null&&typeof t.then=="function")try{var a=ds(t)}catch(d){throw d===hi?pc:d}else a=t;t=xt();var i=t.queue,r=i.dispatch;return n!==t.memoizedState&&(Oe.flags|=2048,bi(9,{destroy:void 0},Og.bind(null,i,n),null)),[a,r,e]}function Og(e,t){e.action=t}function Pf(e){var t=xt(),n=et;if(n!==null)return Xf(t,n,e);xt(),t=t.memoizedState,n=xt();var a=n.queue.dispatch;return n.memoizedState=e,[t,a,!1]}function bi(e,t,n,a){return e={tag:e,create:n,deps:a,inst:t,next:null},t=Oe.updateQueue,t===null&&(t=jc(),Oe.updateQueue=t),n=t.lastEffect,n===null?t.lastEffect=e.next=e:(a=n.next,n.next=e,e.next=a,t.lastEffect=e),e}function Zf(){return xt().memoizedState}function Ec(e,t,n,a){var i=en();Oe.flags|=e,i.memoizedState=bi(1|t,{destroy:void 0},n,a===void 0?null:a)}function Tc(e,t,n,a){var i=xt();a=a===void 0?null:a;var r=i.memoizedState.inst;et!==null&&a!==null&&ho(a,et.memoizedState.deps)?i.memoizedState=bi(t,r,n,a):(Oe.flags|=e,i.memoizedState=bi(1|t,r,n,a))}function Jf(e,t){Ec(8390656,8,e,t)}function Mo(e,t){Tc(2048,8,e,t)}function zg(e){Oe.flags|=4;var t=Oe.updateQueue;if(t===null)t=jc(),Oe.updateQueue=t,t.events=[e];else{var n=t.events;n===null?t.events=[e]:n.push(e)}}function Ff(e){var t=xt().memoizedState;return zg({ref:t,nextImpl:e}),function(){if((Ze&2)!==0)throw Error(u(440));return t.impl.apply(void 0,arguments)}}function If(e,t){return Tc(4,2,e,t)}function Wf(e,t){return Tc(4,4,e,t)}function em(e,t){if(typeof t=="function"){e=e();var n=t(e);return function(){typeof n=="function"?n():t(null)}}if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function tm(e,t,n){n=n!=null?n.concat([e]):null,Tc(4,4,em.bind(null,t,e),n)}function No(){}function nm(e,t){var n=xt();t=t===void 0?null:t;var a=n.memoizedState;return t!==null&&ho(t,a[1])?a[0]:(n.memoizedState=[e,t],e)}function am(e,t){var n=xt();t=t===void 0?null:t;var a=n.memoizedState;if(t!==null&&ho(t,a[1]))return a[0];if(a=e(),ql){zt(!0);try{e()}finally{zt(!1)}}return n.memoizedState=[a,t],a}function Eo(e,t,n){return n===void 0||(ja&1073741824)!==0&&(Ge&261930)===0?e.memoizedState=t:(e.memoizedState=n,e=lh(),Oe.lanes|=e,sl|=e,n)}function lm(e,t,n,a){return gn(n,t)?n:vi.current!==null?(e=Eo(e,n,a),gn(e,t)||(Et=!0),e):(ja&42)===0||(ja&1073741824)!==0&&(Ge&261930)===0?(Et=!0,e.memoizedState=n):(e=lh(),Oe.lanes|=e,sl|=e,t)}function im(e,t,n,a,i){var r=X.p;X.p=r!==0&&8>r?r:8;var d=E.T,v={};E.T=v,Ao(e,!1,t,n);try{var j=i(),w=E.S;if(w!==null&&w(v,j),j!==null&&typeof j=="object"&&typeof j.then=="function"){var V=kg(j,a);fs(e,t,V,jn(e))}else fs(e,t,a,jn(e))}catch(Q){fs(e,t,{then:function(){},status:"rejected",reason:Q},jn())}finally{X.p=r,d!==null&&v.types!==null&&(d.types=v.types),E.T=d}}function Bg(){}function To(e,t,n,a){if(e.tag!==5)throw Error(u(476));var i=sm(e).queue;im(e,i,t,W,n===null?Bg:function(){return cm(e),n(a)})}function sm(e){var t=e.memoizedState;if(t!==null)return t;t={memoizedState:W,baseState:W,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ma,lastRenderedState:W},next:null};var n={};return t.next={memoizedState:n,baseState:n,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ma,lastRenderedState:n},next:null},e.memoizedState=t,e=e.alternate,e!==null&&(e.memoizedState=t),t}function cm(e){var t=sm(e);t.next===null&&(t=e.alternate.memoizedState),fs(e,t.next.queue,{},jn())}function Co(){return Gt(As)}function rm(){return xt().memoizedState}function om(){return xt().memoizedState}function qg(e){for(var t=e.return;t!==null;){switch(t.tag){case 24:case 3:var n=jn();e=el(n);var a=tl(t,e,n);a!==null&&(dn(a,t,n),cs(a,t,n)),t={cache:no()},e.payload=t;return}t=t.return}}function Hg(e,t,n){var a=jn();n={lane:a,revertLane:0,gesture:null,action:n,hasEagerState:!1,eagerState:null,next:null},Cc(e)?dm(t,n):(n=Qr(e,t,n,a),n!==null&&(dn(n,e,a),fm(n,t,a)))}function um(e,t,n){var a=jn();fs(e,t,n,a)}function fs(e,t,n,a){var i={lane:a,revertLane:0,gesture:null,action:n,hasEagerState:!1,eagerState:null,next:null};if(Cc(e))dm(t,i);else{var r=e.alternate;if(e.lanes===0&&(r===null||r.lanes===0)&&(r=t.lastRenderedReducer,r!==null))try{var d=t.lastRenderedState,v=r(d,n);if(i.hasEagerState=!0,i.eagerState=v,gn(v,d))return rc(e,t,i,0),at===null&&cc(),!1}catch{}if(n=Qr(e,t,i,a),n!==null)return dn(n,e,a),fm(n,t,a),!0}return!1}function Ao(e,t,n,a){if(a={lane:2,revertLane:cu(),gesture:null,action:a,hasEagerState:!1,eagerState:null,next:null},Cc(e)){if(t)throw Error(u(479))}else t=Qr(e,n,a,2),t!==null&&dn(t,e,2)}function Cc(e){var t=e.alternate;return e===Oe||t!==null&&t===Oe}function dm(e,t){gi=Sc=!0;var n=e.pending;n===null?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function fm(e,t,n){if((n&4194048)!==0){var a=t.lanes;a&=e.pendingLanes,n|=a,t.lanes=n,da(e,n)}}var ms={readContext:Gt,use:Mc,useCallback:pt,useContext:pt,useEffect:pt,useImperativeHandle:pt,useLayoutEffect:pt,useInsertionEffect:pt,useMemo:pt,useReducer:pt,useRef:pt,useState:pt,useDebugValue:pt,useDeferredValue:pt,useTransition:pt,useSyncExternalStore:pt,useId:pt,useHostTransitionStatus:pt,useFormState:pt,useActionState:pt,useOptimistic:pt,useMemoCache:pt,useCacheRefresh:pt};ms.useEffectEvent=pt;var mm={readContext:Gt,use:Mc,useCallback:function(e,t){return en().memoizedState=[e,t===void 0?null:t],e},useContext:Gt,useEffect:Jf,useImperativeHandle:function(e,t,n){n=n!=null?n.concat([e]):null,Ec(4194308,4,em.bind(null,t,e),n)},useLayoutEffect:function(e,t){return Ec(4194308,4,e,t)},useInsertionEffect:function(e,t){Ec(4,2,e,t)},useMemo:function(e,t){var n=en();t=t===void 0?null:t;var a=e();if(ql){zt(!0);try{e()}finally{zt(!1)}}return n.memoizedState=[a,t],a},useReducer:function(e,t,n){var a=en();if(n!==void 0){var i=n(t);if(ql){zt(!0);try{n(t)}finally{zt(!1)}}}else i=t;return a.memoizedState=a.baseState=i,e={pending:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:i},a.queue=e,e=e.dispatch=Hg.bind(null,Oe,e),[a.memoizedState,e]},useRef:function(e){var t=en();return e={current:e},t.memoizedState=e},useState:function(e){e=_o(e);var t=e.queue,n=um.bind(null,Oe,t);return t.dispatch=n,[e.memoizedState,n]},useDebugValue:No,useDeferredValue:function(e,t){var n=en();return Eo(n,e,t)},useTransition:function(){var e=_o(!1);return e=im.bind(null,Oe,e.queue,!0,!1),en().memoizedState=e,[!1,e]},useSyncExternalStore:function(e,t,n){var a=Oe,i=en();if(Ke){if(n===void 0)throw Error(u(407));n=n()}else{if(n=t(),at===null)throw Error(u(349));(Ge&127)!==0||Lf(a,t,n)}i.memoizedState=n;var r={value:n,getSnapshot:t};return i.queue=r,Jf(zf.bind(null,a,r,e),[e]),a.flags|=2048,bi(9,{destroy:void 0},Of.bind(null,a,r,n,t),null),n},useId:function(){var e=en(),t=at.identifierPrefix;if(Ke){var n=la,a=aa;n=(a&~(1<<32-gt(a)-1)).toString(32)+n,t="_"+t+"R_"+n,n=_c++,0<n&&(t+="H"+n.toString(32)),t+="_"}else n=Rg++,t="_"+t+"r_"+n.toString(32)+"_";return e.memoizedState=t},useHostTransitionStatus:Co,useFormState:Qf,useActionState:Qf,useOptimistic:function(e){var t=en();t.memoizedState=t.baseState=e;var n={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return t.queue=n,t=Ao.bind(null,Oe,!0,n),n.dispatch=t,[e,t]},useMemoCache:bo,useCacheRefresh:function(){return en().memoizedState=qg.bind(null,Oe)},useEffectEvent:function(e){var t=en(),n={impl:e};return t.memoizedState=n,function(){if((Ze&2)!==0)throw Error(u(440));return n.impl.apply(void 0,arguments)}}},wo={readContext:Gt,use:Mc,useCallback:nm,useContext:Gt,useEffect:Mo,useImperativeHandle:tm,useInsertionEffect:If,useLayoutEffect:Wf,useMemo:am,useReducer:Nc,useRef:Zf,useState:function(){return Nc(Ma)},useDebugValue:No,useDeferredValue:function(e,t){var n=xt();return lm(n,et.memoizedState,e,t)},useTransition:function(){var e=Nc(Ma)[0],t=xt().memoizedState;return[typeof e=="boolean"?e:ds(e),t]},useSyncExternalStore:Df,useId:rm,useHostTransitionStatus:Co,useFormState:$f,useActionState:$f,useOptimistic:function(e,t){var n=xt();return Hf(n,et,e,t)},useMemoCache:bo,useCacheRefresh:om};wo.useEffectEvent=Ff;var hm={readContext:Gt,use:Mc,useCallback:nm,useContext:Gt,useEffect:Mo,useImperativeHandle:tm,useInsertionEffect:If,useLayoutEffect:Wf,useMemo:am,useReducer:So,useRef:Zf,useState:function(){return So(Ma)},useDebugValue:No,useDeferredValue:function(e,t){var n=xt();return et===null?Eo(n,e,t):lm(n,et.memoizedState,e,t)},useTransition:function(){var e=So(Ma)[0],t=xt().memoizedState;return[typeof e=="boolean"?e:ds(e),t]},useSyncExternalStore:Df,useId:rm,useHostTransitionStatus:Co,useFormState:Pf,useActionState:Pf,useOptimistic:function(e,t){var n=xt();return et!==null?Hf(n,et,e,t):(n.baseState=e,[e,n.queue.dispatch])},useMemoCache:bo,useCacheRefresh:om};hm.useEffectEvent=Ff;function ko(e,t,n,a){t=e.memoizedState,n=n(a,t),n=n==null?t:x({},t,n),e.memoizedState=n,e.lanes===0&&(e.updateQueue.baseState=n)}var Ro={enqueueSetState:function(e,t,n){e=e._reactInternals;var a=jn(),i=el(a);i.payload=t,n!=null&&(i.callback=n),t=tl(e,i,a),t!==null&&(dn(t,e,a),cs(t,e,a))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var a=jn(),i=el(a);i.tag=1,i.payload=t,n!=null&&(i.callback=n),t=tl(e,i,a),t!==null&&(dn(t,e,a),cs(t,e,a))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=jn(),a=el(n);a.tag=2,t!=null&&(a.callback=t),t=tl(e,a,n),t!==null&&(dn(t,e,n),cs(t,e,n))}};function pm(e,t,n,a,i,r,d){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(a,r,d):t.prototype&&t.prototype.isPureReactComponent?!Wi(n,a)||!Wi(i,r):!0}function vm(e,t,n,a){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(n,a),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(n,a),t.state!==e&&Ro.enqueueReplaceState(t,t.state,null)}function Hl(e,t){var n=t;if("ref"in t){n={};for(var a in t)a!=="ref"&&(n[a]=t[a])}if(e=e.defaultProps){n===t&&(n=x({},n));for(var i in e)n[i]===void 0&&(n[i]=e[i])}return n}function gm(e){sc(e)}function ym(e){console.error(e)}function bm(e){sc(e)}function Ac(e,t){try{var n=e.onUncaughtError;n(t.value,{componentStack:t.stack})}catch(a){setTimeout(function(){throw a})}}function xm(e,t,n){try{var a=e.onCaughtError;a(n.value,{componentStack:n.stack,errorBoundary:t.tag===1?t.stateNode:null})}catch(i){setTimeout(function(){throw i})}}function Do(e,t,n){return n=el(n),n.tag=3,n.payload={element:null},n.callback=function(){Ac(e,t)},n}function Sm(e){return e=el(e),e.tag=3,e}function _m(e,t,n,a){var i=n.type.getDerivedStateFromError;if(typeof i=="function"){var r=a.value;e.payload=function(){return i(r)},e.callback=function(){xm(t,n,a)}}var d=n.stateNode;d!==null&&typeof d.componentDidCatch=="function"&&(e.callback=function(){xm(t,n,a),typeof i!="function"&&(cl===null?cl=new Set([this]):cl.add(this));var v=a.stack;this.componentDidCatch(a.value,{componentStack:v!==null?v:""})})}function Ug(e,t,n,a,i){if(n.flags|=32768,a!==null&&typeof a=="object"&&typeof a.then=="function"){if(t=n.alternate,t!==null&&di(t,n,i,!0),n=bn.current,n!==null){switch(n.tag){case 31:case 13:return On===null?Gc():n.alternate===null&&vt===0&&(vt=3),n.flags&=-257,n.flags|=65536,n.lanes=i,a===vc?n.flags|=16384:(t=n.updateQueue,t===null?n.updateQueue=new Set([a]):t.add(a),lu(e,a,i)),!1;case 22:return n.flags|=65536,a===vc?n.flags|=16384:(t=n.updateQueue,t===null?(t={transitions:null,markerInstances:null,retryQueue:new Set([a])},n.updateQueue=t):(n=t.retryQueue,n===null?t.retryQueue=new Set([a]):n.add(a)),lu(e,a,i)),!1}throw Error(u(435,n.tag))}return lu(e,a,i),Gc(),!1}if(Ke)return t=bn.current,t!==null?((t.flags&65536)===0&&(t.flags|=256),t.flags|=65536,t.lanes=i,a!==Fr&&(e=Error(u(422),{cause:a}),ns(kn(e,n)))):(a!==Fr&&(t=Error(u(423),{cause:a}),ns(kn(t,n))),e=e.current.alternate,e.flags|=65536,i&=-i,e.lanes|=i,a=kn(a,n),i=Do(e.stateNode,a,i),ro(e,i),vt!==4&&(vt=2)),!1;var r=Error(u(520),{cause:a});if(r=kn(r,n),Ss===null?Ss=[r]:Ss.push(r),vt!==4&&(vt=2),t===null)return!0;a=kn(a,n),n=t;do{switch(n.tag){case 3:return n.flags|=65536,e=i&-i,n.lanes|=e,e=Do(n.stateNode,a,e),ro(n,e),!1;case 1:if(t=n.type,r=n.stateNode,(n.flags&128)===0&&(typeof t.getDerivedStateFromError=="function"||r!==null&&typeof r.componentDidCatch=="function"&&(cl===null||!cl.has(r))))return n.flags|=65536,i&=-i,n.lanes|=i,i=Sm(i),_m(i,e,n,a),ro(n,i),!1}n=n.return}while(n!==null);return!1}var Lo=Error(u(461)),Et=!1;function Vt(e,t,n,a){t.child=e===null?Ef(t,null,n,a):Bl(t,e.child,n,a)}function jm(e,t,n,a,i){n=n.render;var r=t.ref;if("ref"in a){var d={};for(var v in a)v!=="ref"&&(d[v]=a[v])}else d=a;return Dl(t),a=po(e,t,n,d,r,i),v=vo(),e!==null&&!Et?(go(e,t,i),Na(e,t,i)):(Ke&&v&&Zr(t),t.flags|=1,Vt(e,t,a,i),t.child)}function Mm(e,t,n,a,i){if(e===null){var r=n.type;return typeof r=="function"&&!$r(r)&&r.defaultProps===void 0&&n.compare===null?(t.tag=15,t.type=r,Nm(e,t,r,a,i)):(e=uc(n.type,null,a,t,t.mode,i),e.ref=t.ref,e.return=t,t.child=e)}if(r=e.child,!Vo(e,i)){var d=r.memoizedProps;if(n=n.compare,n=n!==null?n:Wi,n(d,a)&&e.ref===t.ref)return Na(e,t,i)}return t.flags|=1,e=ba(r,a),e.ref=t.ref,e.return=t,t.child=e}function Nm(e,t,n,a,i){if(e!==null){var r=e.memoizedProps;if(Wi(r,a)&&e.ref===t.ref)if(Et=!1,t.pendingProps=a=r,Vo(e,i))(e.flags&131072)!==0&&(Et=!0);else return t.lanes=e.lanes,Na(e,t,i)}return Oo(e,t,n,a,i)}function Em(e,t,n,a){var i=a.children,r=e!==null?e.memoizedState:null;if(e===null&&t.stateNode===null&&(t.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),a.mode==="hidden"){if((t.flags&128)!==0){if(r=r!==null?r.baseLanes|n:n,e!==null){for(a=t.child=e.child,i=0;a!==null;)i=i|a.lanes|a.childLanes,a=a.sibling;a=i&~r}else a=0,t.child=null;return Tm(e,t,r,n,a)}if((n&536870912)!==0)t.memoizedState={baseLanes:0,cachePool:null},e!==null&&hc(t,r!==null?r.cachePool:null),r!==null?Af(t,r):uo(),wf(t);else return a=t.lanes=536870912,Tm(e,t,r!==null?r.baseLanes|n:n,n,a)}else r!==null?(hc(t,r.cachePool),Af(t,r),al(),t.memoizedState=null):(e!==null&&hc(t,null),uo(),al());return Vt(e,t,i,n),t.child}function hs(e,t){return e!==null&&e.tag===22||t.stateNode!==null||(t.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),t.sibling}function Tm(e,t,n,a,i){var r=lo();return r=r===null?null:{parent:Mt._currentValue,pool:r},t.memoizedState={baseLanes:n,cachePool:r},e!==null&&hc(t,null),uo(),wf(t),e!==null&&di(e,t,a,!0),t.childLanes=i,null}function wc(e,t){return t=Rc({mode:t.mode,children:t.children},e.mode),t.ref=e.ref,e.child=t,t.return=e,t}function Cm(e,t,n){return Bl(t,e.child,null,n),e=wc(t,t.pendingProps),e.flags|=2,xn(t),t.memoizedState=null,e}function Gg(e,t,n){var a=t.pendingProps,i=(t.flags&128)!==0;if(t.flags&=-129,e===null){if(Ke){if(a.mode==="hidden")return e=wc(t,a),t.lanes=536870912,hs(null,e);if(mo(t),(e=st)?(e=Uh(e,Ln),e=e!==null&&e.data==="&"?e:null,e!==null&&(t.memoizedState={dehydrated:e,treeContext:Za!==null?{id:aa,overflow:la}:null,retryLane:536870912,hydrationErrors:null},n=df(e),n.return=t,t.child=n,Ut=t,st=null)):e=null,e===null)throw Fa(t);return t.lanes=536870912,null}return wc(t,a)}var r=e.memoizedState;if(r!==null){var d=r.dehydrated;if(mo(t),i)if(t.flags&256)t.flags&=-257,t=Cm(e,t,n);else if(t.memoizedState!==null)t.child=e.child,t.flags|=128,t=null;else throw Error(u(558));else if(Et||di(e,t,n,!1),i=(n&e.childLanes)!==0,Et||i){if(a=at,a!==null&&(d=fa(a,n),d!==0&&d!==r.retryLane))throw r.retryLane=d,Al(e,d),dn(a,e,d),Lo;Gc(),t=Cm(e,t,n)}else e=r.treeContext,st=zn(d.nextSibling),Ut=t,Ke=!0,Ja=null,Ln=!1,e!==null&&hf(t,e),t=wc(t,a),t.flags|=4096;return t}return e=ba(e.child,{mode:a.mode,children:a.children}),e.ref=t.ref,t.child=e,e.return=t,e}function kc(e,t){var n=t.ref;if(n===null)e!==null&&e.ref!==null&&(t.flags|=4194816);else{if(typeof n!="function"&&typeof n!="object")throw Error(u(284));(e===null||e.ref!==n)&&(t.flags|=4194816)}}function Oo(e,t,n,a,i){return Dl(t),n=po(e,t,n,a,void 0,i),a=vo(),e!==null&&!Et?(go(e,t,i),Na(e,t,i)):(Ke&&a&&Zr(t),t.flags|=1,Vt(e,t,n,i),t.child)}function Am(e,t,n,a,i,r){return Dl(t),t.updateQueue=null,n=Rf(t,a,n,i),kf(e),a=vo(),e!==null&&!Et?(go(e,t,r),Na(e,t,r)):(Ke&&a&&Zr(t),t.flags|=1,Vt(e,t,n,r),t.child)}function wm(e,t,n,a,i){if(Dl(t),t.stateNode===null){var r=ci,d=n.contextType;typeof d=="object"&&d!==null&&(r=Gt(d)),r=new n(a,r),t.memoizedState=r.state!==null&&r.state!==void 0?r.state:null,r.updater=Ro,t.stateNode=r,r._reactInternals=t,r=t.stateNode,r.props=a,r.state=t.memoizedState,r.refs={},so(t),d=n.contextType,r.context=typeof d=="object"&&d!==null?Gt(d):ci,r.state=t.memoizedState,d=n.getDerivedStateFromProps,typeof d=="function"&&(ko(t,n,d,a),r.state=t.memoizedState),typeof n.getDerivedStateFromProps=="function"||typeof r.getSnapshotBeforeUpdate=="function"||typeof r.UNSAFE_componentWillMount!="function"&&typeof r.componentWillMount!="function"||(d=r.state,typeof r.componentWillMount=="function"&&r.componentWillMount(),typeof r.UNSAFE_componentWillMount=="function"&&r.UNSAFE_componentWillMount(),d!==r.state&&Ro.enqueueReplaceState(r,r.state,null),os(t,a,r,i),rs(),r.state=t.memoizedState),typeof r.componentDidMount=="function"&&(t.flags|=4194308),a=!0}else if(e===null){r=t.stateNode;var v=t.memoizedProps,j=Hl(n,v);r.props=j;var w=r.context,V=n.contextType;d=ci,typeof V=="object"&&V!==null&&(d=Gt(V));var Q=n.getDerivedStateFromProps;V=typeof Q=="function"||typeof r.getSnapshotBeforeUpdate=="function",v=t.pendingProps!==v,V||typeof r.UNSAFE_componentWillReceiveProps!="function"&&typeof r.componentWillReceiveProps!="function"||(v||w!==d)&&vm(t,r,a,d),Wa=!1;var R=t.memoizedState;r.state=R,os(t,a,r,i),rs(),w=t.memoizedState,v||R!==w||Wa?(typeof Q=="function"&&(ko(t,n,Q,a),w=t.memoizedState),(j=Wa||pm(t,n,j,a,R,w,d))?(V||typeof r.UNSAFE_componentWillMount!="function"&&typeof r.componentWillMount!="function"||(typeof r.componentWillMount=="function"&&r.componentWillMount(),typeof r.UNSAFE_componentWillMount=="function"&&r.UNSAFE_componentWillMount()),typeof r.componentDidMount=="function"&&(t.flags|=4194308)):(typeof r.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=a,t.memoizedState=w),r.props=a,r.state=w,r.context=d,a=j):(typeof r.componentDidMount=="function"&&(t.flags|=4194308),a=!1)}else{r=t.stateNode,co(e,t),d=t.memoizedProps,V=Hl(n,d),r.props=V,Q=t.pendingProps,R=r.context,w=n.contextType,j=ci,typeof w=="object"&&w!==null&&(j=Gt(w)),v=n.getDerivedStateFromProps,(w=typeof v=="function"||typeof r.getSnapshotBeforeUpdate=="function")||typeof r.UNSAFE_componentWillReceiveProps!="function"&&typeof r.componentWillReceiveProps!="function"||(d!==Q||R!==j)&&vm(t,r,a,j),Wa=!1,R=t.memoizedState,r.state=R,os(t,a,r,i),rs();var z=t.memoizedState;d!==Q||R!==z||Wa||e!==null&&e.dependencies!==null&&fc(e.dependencies)?(typeof v=="function"&&(ko(t,n,v,a),z=t.memoizedState),(V=Wa||pm(t,n,V,a,R,z,j)||e!==null&&e.dependencies!==null&&fc(e.dependencies))?(w||typeof r.UNSAFE_componentWillUpdate!="function"&&typeof r.componentWillUpdate!="function"||(typeof r.componentWillUpdate=="function"&&r.componentWillUpdate(a,z,j),typeof r.UNSAFE_componentWillUpdate=="function"&&r.UNSAFE_componentWillUpdate(a,z,j)),typeof r.componentDidUpdate=="function"&&(t.flags|=4),typeof r.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof r.componentDidUpdate!="function"||d===e.memoizedProps&&R===e.memoizedState||(t.flags|=4),typeof r.getSnapshotBeforeUpdate!="function"||d===e.memoizedProps&&R===e.memoizedState||(t.flags|=1024),t.memoizedProps=a,t.memoizedState=z),r.props=a,r.state=z,r.context=j,a=V):(typeof r.componentDidUpdate!="function"||d===e.memoizedProps&&R===e.memoizedState||(t.flags|=4),typeof r.getSnapshotBeforeUpdate!="function"||d===e.memoizedProps&&R===e.memoizedState||(t.flags|=1024),a=!1)}return r=a,kc(e,t),a=(t.flags&128)!==0,r||a?(r=t.stateNode,n=a&&typeof n.getDerivedStateFromError!="function"?null:r.render(),t.flags|=1,e!==null&&a?(t.child=Bl(t,e.child,null,i),t.child=Bl(t,null,n,i)):Vt(e,t,n,i),t.memoizedState=r.state,e=t.child):e=Na(e,t,i),e}function km(e,t,n,a){return kl(),t.flags|=256,Vt(e,t,n,a),t.child}var zo={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Bo(e){return{baseLanes:e,cachePool:xf()}}function qo(e,t,n){return e=e!==null?e.childLanes&~n:0,t&&(e|=_n),e}function Rm(e,t,n){var a=t.pendingProps,i=!1,r=(t.flags&128)!==0,d;if((d=r)||(d=e!==null&&e.memoizedState===null?!1:(bt.current&2)!==0),d&&(i=!0,t.flags&=-129),d=(t.flags&32)!==0,t.flags&=-33,e===null){if(Ke){if(i?nl(t):al(),(e=st)?(e=Uh(e,Ln),e=e!==null&&e.data!=="&"?e:null,e!==null&&(t.memoizedState={dehydrated:e,treeContext:Za!==null?{id:aa,overflow:la}:null,retryLane:536870912,hydrationErrors:null},n=df(e),n.return=t,t.child=n,Ut=t,st=null)):e=null,e===null)throw Fa(t);return xu(e)?t.lanes=32:t.lanes=536870912,null}var v=a.children;return a=a.fallback,i?(al(),i=t.mode,v=Rc({mode:"hidden",children:v},i),a=wl(a,i,n,null),v.return=t,a.return=t,v.sibling=a,t.child=v,a=t.child,a.memoizedState=Bo(n),a.childLanes=qo(e,d,n),t.memoizedState=zo,hs(null,a)):(nl(t),Ho(t,v))}var j=e.memoizedState;if(j!==null&&(v=j.dehydrated,v!==null)){if(r)t.flags&256?(nl(t),t.flags&=-257,t=Uo(e,t,n)):t.memoizedState!==null?(al(),t.child=e.child,t.flags|=128,t=null):(al(),v=a.fallback,i=t.mode,a=Rc({mode:"visible",children:a.children},i),v=wl(v,i,n,null),v.flags|=2,a.return=t,v.return=t,a.sibling=v,t.child=a,Bl(t,e.child,null,n),a=t.child,a.memoizedState=Bo(n),a.childLanes=qo(e,d,n),t.memoizedState=zo,t=hs(null,a));else if(nl(t),xu(v)){if(d=v.nextSibling&&v.nextSibling.dataset,d)var w=d.dgst;d=w,a=Error(u(419)),a.stack="",a.digest=d,ns({value:a,source:null,stack:null}),t=Uo(e,t,n)}else if(Et||di(e,t,n,!1),d=(n&e.childLanes)!==0,Et||d){if(d=at,d!==null&&(a=fa(d,n),a!==0&&a!==j.retryLane))throw j.retryLane=a,Al(e,a),dn(d,e,a),Lo;bu(v)||Gc(),t=Uo(e,t,n)}else bu(v)?(t.flags|=192,t.child=e.child,t=null):(e=j.treeContext,st=zn(v.nextSibling),Ut=t,Ke=!0,Ja=null,Ln=!1,e!==null&&hf(t,e),t=Ho(t,a.children),t.flags|=4096);return t}return i?(al(),v=a.fallback,i=t.mode,j=e.child,w=j.sibling,a=ba(j,{mode:"hidden",children:a.children}),a.subtreeFlags=j.subtreeFlags&65011712,w!==null?v=ba(w,v):(v=wl(v,i,n,null),v.flags|=2),v.return=t,a.return=t,a.sibling=v,t.child=a,hs(null,a),a=t.child,v=e.child.memoizedState,v===null?v=Bo(n):(i=v.cachePool,i!==null?(j=Mt._currentValue,i=i.parent!==j?{parent:j,pool:j}:i):i=xf(),v={baseLanes:v.baseLanes|n,cachePool:i}),a.memoizedState=v,a.childLanes=qo(e,d,n),t.memoizedState=zo,hs(e.child,a)):(nl(t),n=e.child,e=n.sibling,n=ba(n,{mode:"visible",children:a.children}),n.return=t,n.sibling=null,e!==null&&(d=t.deletions,d===null?(t.deletions=[e],t.flags|=16):d.push(e)),t.child=n,t.memoizedState=null,n)}function Ho(e,t){return t=Rc({mode:"visible",children:t},e.mode),t.return=e,e.child=t}function Rc(e,t){return e=yn(22,e,null,t),e.lanes=0,e}function Uo(e,t,n){return Bl(t,e.child,null,n),e=Ho(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function Dm(e,t,n){e.lanes|=t;var a=e.alternate;a!==null&&(a.lanes|=t),eo(e.return,t,n)}function Go(e,t,n,a,i,r){var d=e.memoizedState;d===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:a,tail:n,tailMode:i,treeForkCount:r}:(d.isBackwards=t,d.rendering=null,d.renderingStartTime=0,d.last=a,d.tail=n,d.tailMode=i,d.treeForkCount=r)}function Lm(e,t,n){var a=t.pendingProps,i=a.revealOrder,r=a.tail;a=a.children;var d=bt.current,v=(d&2)!==0;if(v?(d=d&1|2,t.flags|=128):d&=1,J(bt,d),Vt(e,t,a,n),a=Ke?ts:0,!v&&e!==null&&(e.flags&128)!==0)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&Dm(e,n,t);else if(e.tag===19)Dm(e,n,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}switch(i){case"forwards":for(n=t.child,i=null;n!==null;)e=n.alternate,e!==null&&xc(e)===null&&(i=n),n=n.sibling;n=i,n===null?(i=t.child,t.child=null):(i=n.sibling,n.sibling=null),Go(t,!1,i,n,r,a);break;case"backwards":case"unstable_legacy-backwards":for(n=null,i=t.child,t.child=null;i!==null;){if(e=i.alternate,e!==null&&xc(e)===null){t.child=i;break}e=i.sibling,i.sibling=n,n=i,i=e}Go(t,!0,n,null,r,a);break;case"together":Go(t,!1,null,null,void 0,a);break;default:t.memoizedState=null}return t.child}function Na(e,t,n){if(e!==null&&(t.dependencies=e.dependencies),sl|=t.lanes,(n&t.childLanes)===0)if(e!==null){if(di(e,t,n,!1),(n&t.childLanes)===0)return null}else return null;if(e!==null&&t.child!==e.child)throw Error(u(153));if(t.child!==null){for(e=t.child,n=ba(e,e.pendingProps),t.child=n,n.return=t;e.sibling!==null;)e=e.sibling,n=n.sibling=ba(e,e.pendingProps),n.return=t;n.sibling=null}return t.child}function Vo(e,t){return(e.lanes&t)!==0?!0:(e=e.dependencies,!!(e!==null&&fc(e)))}function Vg(e,t,n){switch(t.tag){case 3:qe(t,t.stateNode.containerInfo),Ia(t,Mt,e.memoizedState.cache),kl();break;case 27:case 5:ft(t);break;case 4:qe(t,t.stateNode.containerInfo);break;case 10:Ia(t,t.type,t.memoizedProps.value);break;case 31:if(t.memoizedState!==null)return t.flags|=128,mo(t),null;break;case 13:var a=t.memoizedState;if(a!==null)return a.dehydrated!==null?(nl(t),t.flags|=128,null):(n&t.child.childLanes)!==0?Rm(e,t,n):(nl(t),e=Na(e,t,n),e!==null?e.sibling:null);nl(t);break;case 19:var i=(e.flags&128)!==0;if(a=(n&t.childLanes)!==0,a||(di(e,t,n,!1),a=(n&t.childLanes)!==0),i){if(a)return Lm(e,t,n);t.flags|=128}if(i=t.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),J(bt,bt.current),a)break;return null;case 22:return t.lanes=0,Em(e,t,n,t.pendingProps);case 24:Ia(t,Mt,e.memoizedState.cache)}return Na(e,t,n)}function Om(e,t,n){if(e!==null)if(e.memoizedProps!==t.pendingProps)Et=!0;else{if(!Vo(e,n)&&(t.flags&128)===0)return Et=!1,Vg(e,t,n);Et=(e.flags&131072)!==0}else Et=!1,Ke&&(t.flags&1048576)!==0&&mf(t,ts,t.index);switch(t.lanes=0,t.tag){case 16:e:{var a=t.pendingProps;if(e=Ol(t.elementType),t.type=e,typeof e=="function")$r(e)?(a=Hl(e,a),t.tag=1,t=wm(null,t,e,a,n)):(t.tag=0,t=Oo(null,t,e,a,n));else{if(e!=null){var i=e.$$typeof;if(i===de){t.tag=11,t=jm(null,t,e,a,n);break e}else if(i===ce){t.tag=14,t=Mm(null,t,e,a,n);break e}}throw t=ge(e)||e,Error(u(306,t,""))}}return t;case 0:return Oo(e,t,t.type,t.pendingProps,n);case 1:return a=t.type,i=Hl(a,t.pendingProps),wm(e,t,a,i,n);case 3:e:{if(qe(t,t.stateNode.containerInfo),e===null)throw Error(u(387));a=t.pendingProps;var r=t.memoizedState;i=r.element,co(e,t),os(t,a,null,n);var d=t.memoizedState;if(a=d.cache,Ia(t,Mt,a),a!==r.cache&&to(t,[Mt],n,!0),rs(),a=d.element,r.isDehydrated)if(r={element:a,isDehydrated:!1,cache:d.cache},t.updateQueue.baseState=r,t.memoizedState=r,t.flags&256){t=km(e,t,a,n);break e}else if(a!==i){i=kn(Error(u(424)),t),ns(i),t=km(e,t,a,n);break e}else for(e=t.stateNode.containerInfo,e.nodeType===9?e=e.body:e=e.nodeName==="HTML"?e.ownerDocument.body:e,st=zn(e.firstChild),Ut=t,Ke=!0,Ja=null,Ln=!0,n=Ef(t,null,a,n),t.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(kl(),a===i){t=Na(e,t,n);break e}Vt(e,t,a,n)}t=t.child}return t;case 26:return kc(e,t),e===null?(n=$h(t.type,null,t.pendingProps,null))?t.memoizedState=n:Ke||(n=t.type,e=t.pendingProps,a=Pc(I.current).createElement(n),a[At]=t,a[Bt]=e,Yt(a,n,e),ot(a),t.stateNode=a):t.memoizedState=$h(t.type,e.memoizedProps,t.pendingProps,e.memoizedState),null;case 27:return ft(t),e===null&&Ke&&(a=t.stateNode=Yh(t.type,t.pendingProps,I.current),Ut=t,Ln=!0,i=st,dl(t.type)?(Su=i,st=zn(a.firstChild)):st=i),Vt(e,t,t.pendingProps.children,n),kc(e,t),e===null&&(t.flags|=4194304),t.child;case 5:return e===null&&Ke&&((i=a=st)&&(a=yy(a,t.type,t.pendingProps,Ln),a!==null?(t.stateNode=a,Ut=t,st=zn(a.firstChild),Ln=!1,i=!0):i=!1),i||Fa(t)),ft(t),i=t.type,r=t.pendingProps,d=e!==null?e.memoizedProps:null,a=r.children,vu(i,r)?a=null:d!==null&&vu(i,d)&&(t.flags|=32),t.memoizedState!==null&&(i=po(e,t,Dg,null,null,n),As._currentValue=i),kc(e,t),Vt(e,t,a,n),t.child;case 6:return e===null&&Ke&&((e=n=st)&&(n=by(n,t.pendingProps,Ln),n!==null?(t.stateNode=n,Ut=t,st=null,e=!0):e=!1),e||Fa(t)),null;case 13:return Rm(e,t,n);case 4:return qe(t,t.stateNode.containerInfo),a=t.pendingProps,e===null?t.child=Bl(t,null,a,n):Vt(e,t,a,n),t.child;case 11:return jm(e,t,t.type,t.pendingProps,n);case 7:return Vt(e,t,t.pendingProps,n),t.child;case 8:return Vt(e,t,t.pendingProps.children,n),t.child;case 12:return Vt(e,t,t.pendingProps.children,n),t.child;case 10:return a=t.pendingProps,Ia(t,t.type,a.value),Vt(e,t,a.children,n),t.child;case 9:return i=t.type._context,a=t.pendingProps.children,Dl(t),i=Gt(i),a=a(i),t.flags|=1,Vt(e,t,a,n),t.child;case 14:return Mm(e,t,t.type,t.pendingProps,n);case 15:return Nm(e,t,t.type,t.pendingProps,n);case 19:return Lm(e,t,n);case 31:return Gg(e,t,n);case 22:return Em(e,t,n,t.pendingProps);case 24:return Dl(t),a=Gt(Mt),e===null?(i=lo(),i===null&&(i=at,r=no(),i.pooledCache=r,r.refCount++,r!==null&&(i.pooledCacheLanes|=n),i=r),t.memoizedState={parent:a,cache:i},so(t),Ia(t,Mt,i)):((e.lanes&n)!==0&&(co(e,t),os(t,null,null,n),rs()),i=e.memoizedState,r=t.memoizedState,i.parent!==a?(i={parent:a,cache:a},t.memoizedState=i,t.lanes===0&&(t.memoizedState=t.updateQueue.baseState=i),Ia(t,Mt,a)):(a=r.cache,Ia(t,Mt,a),a!==i.cache&&to(t,[Mt],n,!0))),Vt(e,t,t.pendingProps.children,n),t.child;case 29:throw t.pendingProps}throw Error(u(156,t.tag))}function Ea(e){e.flags|=4}function Yo(e,t,n,a,i){if((t=(e.mode&32)!==0)&&(t=!1),t){if(e.flags|=16777216,(i&335544128)===i)if(e.stateNode.complete)e.flags|=8192;else if(rh())e.flags|=8192;else throw zl=vc,io}else e.flags&=-16777217}function zm(e,t){if(t.type!=="stylesheet"||(t.state.loading&4)!==0)e.flags&=-16777217;else if(e.flags|=16777216,!Fh(t))if(rh())e.flags|=8192;else throw zl=vc,io}function Dc(e,t){t!==null&&(e.flags|=4),e.flags&16384&&(t=e.tag!==22?ua():536870912,e.lanes|=t,ji|=t)}function ps(e,t){if(!Ke)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;t!==null;)t.alternate!==null&&(n=t),t=t.sibling;n===null?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var a=null;n!==null;)n.alternate!==null&&(a=n),n=n.sibling;a===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:a.sibling=null}}function ct(e){var t=e.alternate!==null&&e.alternate.child===e.child,n=0,a=0;if(t)for(var i=e.child;i!==null;)n|=i.lanes|i.childLanes,a|=i.subtreeFlags&65011712,a|=i.flags&65011712,i.return=e,i=i.sibling;else for(i=e.child;i!==null;)n|=i.lanes|i.childLanes,a|=i.subtreeFlags,a|=i.flags,i.return=e,i=i.sibling;return e.subtreeFlags|=a,e.childLanes=n,t}function Yg(e,t,n){var a=t.pendingProps;switch(Jr(t),t.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return ct(t),null;case 1:return ct(t),null;case 3:return n=t.stateNode,a=null,e!==null&&(a=e.memoizedState.cache),t.memoizedState.cache!==a&&(t.flags|=2048),_a(Mt),Le(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),(e===null||e.child===null)&&(ui(t)?Ea(t):e===null||e.memoizedState.isDehydrated&&(t.flags&256)===0||(t.flags|=1024,Ir())),ct(t),null;case 26:var i=t.type,r=t.memoizedState;return e===null?(Ea(t),r!==null?(ct(t),zm(t,r)):(ct(t),Yo(t,i,null,a,n))):r?r!==e.memoizedState?(Ea(t),ct(t),zm(t,r)):(ct(t),t.flags&=-16777217):(e=e.memoizedProps,e!==a&&Ea(t),ct(t),Yo(t,i,e,a,n)),null;case 27:if(ze(t),n=I.current,i=t.type,e!==null&&t.stateNode!=null)e.memoizedProps!==a&&Ea(t);else{if(!a){if(t.stateNode===null)throw Error(u(166));return ct(t),null}e=te.current,ui(t)?pf(t):(e=Yh(i,a,n),t.stateNode=e,Ea(t))}return ct(t),null;case 5:if(ze(t),i=t.type,e!==null&&t.stateNode!=null)e.memoizedProps!==a&&Ea(t);else{if(!a){if(t.stateNode===null)throw Error(u(166));return ct(t),null}if(r=te.current,ui(t))pf(t);else{var d=Pc(I.current);switch(r){case 1:r=d.createElementNS("http://www.w3.org/2000/svg",i);break;case 2:r=d.createElementNS("http://www.w3.org/1998/Math/MathML",i);break;default:switch(i){case"svg":r=d.createElementNS("http://www.w3.org/2000/svg",i);break;case"math":r=d.createElementNS("http://www.w3.org/1998/Math/MathML",i);break;case"script":r=d.createElement("div"),r.innerHTML="<script><\/script>",r=r.removeChild(r.firstChild);break;case"select":r=typeof a.is=="string"?d.createElement("select",{is:a.is}):d.createElement("select"),a.multiple?r.multiple=!0:a.size&&(r.size=a.size);break;default:r=typeof a.is=="string"?d.createElement(i,{is:a.is}):d.createElement(i)}}r[At]=t,r[Bt]=a;e:for(d=t.child;d!==null;){if(d.tag===5||d.tag===6)r.appendChild(d.stateNode);else if(d.tag!==4&&d.tag!==27&&d.child!==null){d.child.return=d,d=d.child;continue}if(d===t)break e;for(;d.sibling===null;){if(d.return===null||d.return===t)break e;d=d.return}d.sibling.return=d.return,d=d.sibling}t.stateNode=r;e:switch(Yt(r,i,a),i){case"button":case"input":case"select":case"textarea":a=!!a.autoFocus;break e;case"img":a=!0;break e;default:a=!1}a&&Ea(t)}}return ct(t),Yo(t,t.type,e===null?null:e.memoizedProps,t.pendingProps,n),null;case 6:if(e&&t.stateNode!=null)e.memoizedProps!==a&&Ea(t);else{if(typeof a!="string"&&t.stateNode===null)throw Error(u(166));if(e=I.current,ui(t)){if(e=t.stateNode,n=t.memoizedProps,a=null,i=Ut,i!==null)switch(i.tag){case 27:case 5:a=i.memoizedProps}e[At]=t,e=!!(e.nodeValue===n||a!==null&&a.suppressHydrationWarning===!0||Rh(e.nodeValue,n)),e||Fa(t,!0)}else e=Pc(e).createTextNode(a),e[At]=t,t.stateNode=e}return ct(t),null;case 31:if(n=t.memoizedState,e===null||e.memoizedState!==null){if(a=ui(t),n!==null){if(e===null){if(!a)throw Error(u(318));if(e=t.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(u(557));e[At]=t}else kl(),(t.flags&128)===0&&(t.memoizedState=null),t.flags|=4;ct(t),e=!1}else n=Ir(),e!==null&&e.memoizedState!==null&&(e.memoizedState.hydrationErrors=n),e=!0;if(!e)return t.flags&256?(xn(t),t):(xn(t),null);if((t.flags&128)!==0)throw Error(u(558))}return ct(t),null;case 13:if(a=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(i=ui(t),a!==null&&a.dehydrated!==null){if(e===null){if(!i)throw Error(u(318));if(i=t.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(u(317));i[At]=t}else kl(),(t.flags&128)===0&&(t.memoizedState=null),t.flags|=4;ct(t),i=!1}else i=Ir(),e!==null&&e.memoizedState!==null&&(e.memoizedState.hydrationErrors=i),i=!0;if(!i)return t.flags&256?(xn(t),t):(xn(t),null)}return xn(t),(t.flags&128)!==0?(t.lanes=n,t):(n=a!==null,e=e!==null&&e.memoizedState!==null,n&&(a=t.child,i=null,a.alternate!==null&&a.alternate.memoizedState!==null&&a.alternate.memoizedState.cachePool!==null&&(i=a.alternate.memoizedState.cachePool.pool),r=null,a.memoizedState!==null&&a.memoizedState.cachePool!==null&&(r=a.memoizedState.cachePool.pool),r!==i&&(a.flags|=2048)),n!==e&&n&&(t.child.flags|=8192),Dc(t,t.updateQueue),ct(t),null);case 4:return Le(),e===null&&du(t.stateNode.containerInfo),ct(t),null;case 10:return _a(t.type),ct(t),null;case 19:if(G(bt),a=t.memoizedState,a===null)return ct(t),null;if(i=(t.flags&128)!==0,r=a.rendering,r===null)if(i)ps(a,!1);else{if(vt!==0||e!==null&&(e.flags&128)!==0)for(e=t.child;e!==null;){if(r=xc(e),r!==null){for(t.flags|=128,ps(a,!1),e=r.updateQueue,t.updateQueue=e,Dc(t,e),t.subtreeFlags=0,e=n,n=t.child;n!==null;)uf(n,e),n=n.sibling;return J(bt,bt.current&1|2),Ke&&xa(t,a.treeForkCount),t.child}e=e.sibling}a.tail!==null&&lt()>qc&&(t.flags|=128,i=!0,ps(a,!1),t.lanes=4194304)}else{if(!i)if(e=xc(r),e!==null){if(t.flags|=128,i=!0,e=e.updateQueue,t.updateQueue=e,Dc(t,e),ps(a,!0),a.tail===null&&a.tailMode==="hidden"&&!r.alternate&&!Ke)return ct(t),null}else 2*lt()-a.renderingStartTime>qc&&n!==536870912&&(t.flags|=128,i=!0,ps(a,!1),t.lanes=4194304);a.isBackwards?(r.sibling=t.child,t.child=r):(e=a.last,e!==null?e.sibling=r:t.child=r,a.last=r)}return a.tail!==null?(e=a.tail,a.rendering=e,a.tail=e.sibling,a.renderingStartTime=lt(),e.sibling=null,n=bt.current,J(bt,i?n&1|2:n&1),Ke&&xa(t,a.treeForkCount),e):(ct(t),null);case 22:case 23:return xn(t),fo(),a=t.memoizedState!==null,e!==null?e.memoizedState!==null!==a&&(t.flags|=8192):a&&(t.flags|=8192),a?(n&536870912)!==0&&(t.flags&128)===0&&(ct(t),t.subtreeFlags&6&&(t.flags|=8192)):ct(t),n=t.updateQueue,n!==null&&Dc(t,n.retryQueue),n=null,e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(n=e.memoizedState.cachePool.pool),a=null,t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(a=t.memoizedState.cachePool.pool),a!==n&&(t.flags|=2048),e!==null&&G(Ll),null;case 24:return n=null,e!==null&&(n=e.memoizedState.cache),t.memoizedState.cache!==n&&(t.flags|=2048),_a(Mt),ct(t),null;case 25:return null;case 30:return null}throw Error(u(156,t.tag))}function Kg(e,t){switch(Jr(t),t.tag){case 1:return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return _a(Mt),Le(),e=t.flags,(e&65536)!==0&&(e&128)===0?(t.flags=e&-65537|128,t):null;case 26:case 27:case 5:return ze(t),null;case 31:if(t.memoizedState!==null){if(xn(t),t.alternate===null)throw Error(u(340));kl()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 13:if(xn(t),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(u(340));kl()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return G(bt),null;case 4:return Le(),null;case 10:return _a(t.type),null;case 22:case 23:return xn(t),fo(),e!==null&&G(Ll),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 24:return _a(Mt),null;case 25:return null;default:return null}}function Bm(e,t){switch(Jr(t),t.tag){case 3:_a(Mt),Le();break;case 26:case 27:case 5:ze(t);break;case 4:Le();break;case 31:t.memoizedState!==null&&xn(t);break;case 13:xn(t);break;case 19:G(bt);break;case 10:_a(t.type);break;case 22:case 23:xn(t),fo(),e!==null&&G(Ll);break;case 24:_a(Mt)}}function vs(e,t){try{var n=t.updateQueue,a=n!==null?n.lastEffect:null;if(a!==null){var i=a.next;n=i;do{if((n.tag&e)===e){a=void 0;var r=n.create,d=n.inst;a=r(),d.destroy=a}n=n.next}while(n!==i)}}catch(v){Fe(t,t.return,v)}}function ll(e,t,n){try{var a=t.updateQueue,i=a!==null?a.lastEffect:null;if(i!==null){var r=i.next;a=r;do{if((a.tag&e)===e){var d=a.inst,v=d.destroy;if(v!==void 0){d.destroy=void 0,i=t;var j=n,w=v;try{w()}catch(V){Fe(i,j,V)}}}a=a.next}while(a!==r)}}catch(V){Fe(t,t.return,V)}}function qm(e){var t=e.updateQueue;if(t!==null){var n=e.stateNode;try{Cf(t,n)}catch(a){Fe(e,e.return,a)}}}function Hm(e,t,n){n.props=Hl(e.type,e.memoizedProps),n.state=e.memoizedState;try{n.componentWillUnmount()}catch(a){Fe(e,t,a)}}function gs(e,t){try{var n=e.ref;if(n!==null){switch(e.tag){case 26:case 27:case 5:var a=e.stateNode;break;case 30:a=e.stateNode;break;default:a=e.stateNode}typeof n=="function"?e.refCleanup=n(a):n.current=a}}catch(i){Fe(e,t,i)}}function ia(e,t){var n=e.ref,a=e.refCleanup;if(n!==null)if(typeof a=="function")try{a()}catch(i){Fe(e,t,i)}finally{e.refCleanup=null,e=e.alternate,e!=null&&(e.refCleanup=null)}else if(typeof n=="function")try{n(null)}catch(i){Fe(e,t,i)}else n.current=null}function Um(e){var t=e.type,n=e.memoizedProps,a=e.stateNode;try{e:switch(t){case"button":case"input":case"select":case"textarea":n.autoFocus&&a.focus();break e;case"img":n.src?a.src=n.src:n.srcSet&&(a.srcset=n.srcSet)}}catch(i){Fe(e,e.return,i)}}function Ko(e,t,n){try{var a=e.stateNode;fy(a,e.type,n,t),a[Bt]=t}catch(i){Fe(e,e.return,i)}}function Gm(e){return e.tag===5||e.tag===3||e.tag===26||e.tag===27&&dl(e.type)||e.tag===4}function Qo(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||Gm(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.tag===27&&dl(e.type)||e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function $o(e,t,n){var a=e.tag;if(a===5||a===6)e=e.stateNode,t?(n.nodeType===9?n.body:n.nodeName==="HTML"?n.ownerDocument.body:n).insertBefore(e,t):(t=n.nodeType===9?n.body:n.nodeName==="HTML"?n.ownerDocument.body:n,t.appendChild(e),n=n._reactRootContainer,n!=null||t.onclick!==null||(t.onclick=Yn));else if(a!==4&&(a===27&&dl(e.type)&&(n=e.stateNode,t=null),e=e.child,e!==null))for($o(e,t,n),e=e.sibling;e!==null;)$o(e,t,n),e=e.sibling}function Lc(e,t,n){var a=e.tag;if(a===5||a===6)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(a!==4&&(a===27&&dl(e.type)&&(n=e.stateNode),e=e.child,e!==null))for(Lc(e,t,n),e=e.sibling;e!==null;)Lc(e,t,n),e=e.sibling}function Vm(e){var t=e.stateNode,n=e.memoizedProps;try{for(var a=e.type,i=t.attributes;i.length;)t.removeAttributeNode(i[0]);Yt(t,a,n),t[At]=e,t[Bt]=n}catch(r){Fe(e,e.return,r)}}var Ta=!1,Tt=!1,Xo=!1,Ym=typeof WeakSet=="function"?WeakSet:Set,Ot=null;function Qg(e,t){if(e=e.containerInfo,hu=tr,e=ef(e),Hr(e)){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{n=(n=e.ownerDocument)&&n.defaultView||window;var a=n.getSelection&&n.getSelection();if(a&&a.rangeCount!==0){n=a.anchorNode;var i=a.anchorOffset,r=a.focusNode;a=a.focusOffset;try{n.nodeType,r.nodeType}catch{n=null;break e}var d=0,v=-1,j=-1,w=0,V=0,Q=e,R=null;t:for(;;){for(var z;Q!==n||i!==0&&Q.nodeType!==3||(v=d+i),Q!==r||a!==0&&Q.nodeType!==3||(j=d+a),Q.nodeType===3&&(d+=Q.nodeValue.length),(z=Q.firstChild)!==null;)R=Q,Q=z;for(;;){if(Q===e)break t;if(R===n&&++w===i&&(v=d),R===r&&++V===a&&(j=d),(z=Q.nextSibling)!==null)break;Q=R,R=Q.parentNode}Q=z}n=v===-1||j===-1?null:{start:v,end:j}}else n=null}n=n||{start:0,end:0}}else n=null;for(pu={focusedElem:e,selectionRange:n},tr=!1,Ot=t;Ot!==null;)if(t=Ot,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,Ot=e;else for(;Ot!==null;){switch(t=Ot,r=t.alternate,e=t.flags,t.tag){case 0:if((e&4)!==0&&(e=t.updateQueue,e=e!==null?e.events:null,e!==null))for(n=0;n<e.length;n++)i=e[n],i.ref.impl=i.nextImpl;break;case 11:case 15:break;case 1:if((e&1024)!==0&&r!==null){e=void 0,n=t,i=r.memoizedProps,r=r.memoizedState,a=n.stateNode;try{var ue=Hl(n.type,i);e=a.getSnapshotBeforeUpdate(ue,r),a.__reactInternalSnapshotBeforeUpdate=e}catch(_e){Fe(n,n.return,_e)}}break;case 3:if((e&1024)!==0){if(e=t.stateNode.containerInfo,n=e.nodeType,n===9)yu(e);else if(n===1)switch(e.nodeName){case"HEAD":case"HTML":case"BODY":yu(e);break;default:e.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((e&1024)!==0)throw Error(u(163))}if(e=t.sibling,e!==null){e.return=t.return,Ot=e;break}Ot=t.return}}function Km(e,t,n){var a=n.flags;switch(n.tag){case 0:case 11:case 15:Aa(e,n),a&4&&vs(5,n);break;case 1:if(Aa(e,n),a&4)if(e=n.stateNode,t===null)try{e.componentDidMount()}catch(d){Fe(n,n.return,d)}else{var i=Hl(n.type,t.memoizedProps);t=t.memoizedState;try{e.componentDidUpdate(i,t,e.__reactInternalSnapshotBeforeUpdate)}catch(d){Fe(n,n.return,d)}}a&64&&qm(n),a&512&&gs(n,n.return);break;case 3:if(Aa(e,n),a&64&&(e=n.updateQueue,e!==null)){if(t=null,n.child!==null)switch(n.child.tag){case 27:case 5:t=n.child.stateNode;break;case 1:t=n.child.stateNode}try{Cf(e,t)}catch(d){Fe(n,n.return,d)}}break;case 27:t===null&&a&4&&Vm(n);case 26:case 5:Aa(e,n),t===null&&a&4&&Um(n),a&512&&gs(n,n.return);break;case 12:Aa(e,n);break;case 31:Aa(e,n),a&4&&Xm(e,n);break;case 13:Aa(e,n),a&4&&Pm(e,n),a&64&&(e=n.memoizedState,e!==null&&(e=e.dehydrated,e!==null&&(n=ey.bind(null,n),xy(e,n))));break;case 22:if(a=n.memoizedState!==null||Ta,!a){t=t!==null&&t.memoizedState!==null||Tt,i=Ta;var r=Tt;Ta=a,(Tt=t)&&!r?wa(e,n,(n.subtreeFlags&8772)!==0):Aa(e,n),Ta=i,Tt=r}break;case 30:break;default:Aa(e,n)}}function Qm(e){var t=e.alternate;t!==null&&(e.alternate=null,Qm(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&Fl(t)),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}var dt=null,cn=!1;function Ca(e,t,n){for(n=n.child;n!==null;)$m(e,t,n),n=n.sibling}function $m(e,t,n){if(Ie&&typeof Ie.onCommitFiberUnmount=="function")try{Ie.onCommitFiberUnmount(Jt,n)}catch{}switch(n.tag){case 26:Tt||ia(n,t),Ca(e,t,n),n.memoizedState?n.memoizedState.count--:n.stateNode&&(n=n.stateNode,n.parentNode.removeChild(n));break;case 27:Tt||ia(n,t);var a=dt,i=cn;dl(n.type)&&(dt=n.stateNode,cn=!1),Ca(e,t,n),Es(n.stateNode),dt=a,cn=i;break;case 5:Tt||ia(n,t);case 6:if(a=dt,i=cn,dt=null,Ca(e,t,n),dt=a,cn=i,dt!==null)if(cn)try{(dt.nodeType===9?dt.body:dt.nodeName==="HTML"?dt.ownerDocument.body:dt).removeChild(n.stateNode)}catch(r){Fe(n,t,r)}else try{dt.removeChild(n.stateNode)}catch(r){Fe(n,t,r)}break;case 18:dt!==null&&(cn?(e=dt,qh(e.nodeType===9?e.body:e.nodeName==="HTML"?e.ownerDocument.body:e,n.stateNode),ki(e)):qh(dt,n.stateNode));break;case 4:a=dt,i=cn,dt=n.stateNode.containerInfo,cn=!0,Ca(e,t,n),dt=a,cn=i;break;case 0:case 11:case 14:case 15:ll(2,n,t),Tt||ll(4,n,t),Ca(e,t,n);break;case 1:Tt||(ia(n,t),a=n.stateNode,typeof a.componentWillUnmount=="function"&&Hm(n,t,a)),Ca(e,t,n);break;case 21:Ca(e,t,n);break;case 22:Tt=(a=Tt)||n.memoizedState!==null,Ca(e,t,n),Tt=a;break;default:Ca(e,t,n)}}function Xm(e,t){if(t.memoizedState===null&&(e=t.alternate,e!==null&&(e=e.memoizedState,e!==null))){e=e.dehydrated;try{ki(e)}catch(n){Fe(t,t.return,n)}}}function Pm(e,t){if(t.memoizedState===null&&(e=t.alternate,e!==null&&(e=e.memoizedState,e!==null&&(e=e.dehydrated,e!==null))))try{ki(e)}catch(n){Fe(t,t.return,n)}}function $g(e){switch(e.tag){case 31:case 13:case 19:var t=e.stateNode;return t===null&&(t=e.stateNode=new Ym),t;case 22:return e=e.stateNode,t=e._retryCache,t===null&&(t=e._retryCache=new Ym),t;default:throw Error(u(435,e.tag))}}function Oc(e,t){var n=$g(e);t.forEach(function(a){if(!n.has(a)){n.add(a);var i=ty.bind(null,e,a);a.then(i,i)}})}function rn(e,t){var n=t.deletions;if(n!==null)for(var a=0;a<n.length;a++){var i=n[a],r=e,d=t,v=d;e:for(;v!==null;){switch(v.tag){case 27:if(dl(v.type)){dt=v.stateNode,cn=!1;break e}break;case 5:dt=v.stateNode,cn=!1;break e;case 3:case 4:dt=v.stateNode.containerInfo,cn=!0;break e}v=v.return}if(dt===null)throw Error(u(160));$m(r,d,i),dt=null,cn=!1,r=i.alternate,r!==null&&(r.return=null),i.return=null}if(t.subtreeFlags&13886)for(t=t.child;t!==null;)Zm(t,e),t=t.sibling}var Pn=null;function Zm(e,t){var n=e.alternate,a=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:rn(t,e),on(e),a&4&&(ll(3,e,e.return),vs(3,e),ll(5,e,e.return));break;case 1:rn(t,e),on(e),a&512&&(Tt||n===null||ia(n,n.return)),a&64&&Ta&&(e=e.updateQueue,e!==null&&(a=e.callbacks,a!==null&&(n=e.shared.hiddenCallbacks,e.shared.hiddenCallbacks=n===null?a:n.concat(a))));break;case 26:var i=Pn;if(rn(t,e),on(e),a&512&&(Tt||n===null||ia(n,n.return)),a&4){var r=n!==null?n.memoizedState:null;if(a=e.memoizedState,n===null)if(a===null)if(e.stateNode===null){e:{a=e.type,n=e.memoizedProps,i=i.ownerDocument||i;t:switch(a){case"title":r=i.getElementsByTagName("title")[0],(!r||r[ea]||r[At]||r.namespaceURI==="http://www.w3.org/2000/svg"||r.hasAttribute("itemprop"))&&(r=i.createElement(a),i.head.insertBefore(r,i.querySelector("head > title"))),Yt(r,a,n),r[At]=e,ot(r),a=r;break e;case"link":var d=Zh("link","href",i).get(a+(n.href||""));if(d){for(var v=0;v<d.length;v++)if(r=d[v],r.getAttribute("href")===(n.href==null||n.href===""?null:n.href)&&r.getAttribute("rel")===(n.rel==null?null:n.rel)&&r.getAttribute("title")===(n.title==null?null:n.title)&&r.getAttribute("crossorigin")===(n.crossOrigin==null?null:n.crossOrigin)){d.splice(v,1);break t}}r=i.createElement(a),Yt(r,a,n),i.head.appendChild(r);break;case"meta":if(d=Zh("meta","content",i).get(a+(n.content||""))){for(v=0;v<d.length;v++)if(r=d[v],r.getAttribute("content")===(n.content==null?null:""+n.content)&&r.getAttribute("name")===(n.name==null?null:n.name)&&r.getAttribute("property")===(n.property==null?null:n.property)&&r.getAttribute("http-equiv")===(n.httpEquiv==null?null:n.httpEquiv)&&r.getAttribute("charset")===(n.charSet==null?null:n.charSet)){d.splice(v,1);break t}}r=i.createElement(a),Yt(r,a,n),i.head.appendChild(r);break;default:throw Error(u(468,a))}r[At]=e,ot(r),a=r}e.stateNode=a}else Jh(i,e.type,e.stateNode);else e.stateNode=Ph(i,a,e.memoizedProps);else r!==a?(r===null?n.stateNode!==null&&(n=n.stateNode,n.parentNode.removeChild(n)):r.count--,a===null?Jh(i,e.type,e.stateNode):Ph(i,a,e.memoizedProps)):a===null&&e.stateNode!==null&&Ko(e,e.memoizedProps,n.memoizedProps)}break;case 27:rn(t,e),on(e),a&512&&(Tt||n===null||ia(n,n.return)),n!==null&&a&4&&Ko(e,e.memoizedProps,n.memoizedProps);break;case 5:if(rn(t,e),on(e),a&512&&(Tt||n===null||ia(n,n.return)),e.flags&32){i=e.stateNode;try{It(i,"")}catch(ue){Fe(e,e.return,ue)}}a&4&&e.stateNode!=null&&(i=e.memoizedProps,Ko(e,i,n!==null?n.memoizedProps:i)),a&1024&&(Xo=!0);break;case 6:if(rn(t,e),on(e),a&4){if(e.stateNode===null)throw Error(u(162));a=e.memoizedProps,n=e.stateNode;try{n.nodeValue=a}catch(ue){Fe(e,e.return,ue)}}break;case 3:if(Fc=null,i=Pn,Pn=Zc(t.containerInfo),rn(t,e),Pn=i,on(e),a&4&&n!==null&&n.memoizedState.isDehydrated)try{ki(t.containerInfo)}catch(ue){Fe(e,e.return,ue)}Xo&&(Xo=!1,Jm(e));break;case 4:a=Pn,Pn=Zc(e.stateNode.containerInfo),rn(t,e),on(e),Pn=a;break;case 12:rn(t,e),on(e);break;case 31:rn(t,e),on(e),a&4&&(a=e.updateQueue,a!==null&&(e.updateQueue=null,Oc(e,a)));break;case 13:rn(t,e),on(e),e.child.flags&8192&&e.memoizedState!==null!=(n!==null&&n.memoizedState!==null)&&(Bc=lt()),a&4&&(a=e.updateQueue,a!==null&&(e.updateQueue=null,Oc(e,a)));break;case 22:i=e.memoizedState!==null;var j=n!==null&&n.memoizedState!==null,w=Ta,V=Tt;if(Ta=w||i,Tt=V||j,rn(t,e),Tt=V,Ta=w,on(e),a&8192)e:for(t=e.stateNode,t._visibility=i?t._visibility&-2:t._visibility|1,i&&(n===null||j||Ta||Tt||Ul(e)),n=null,t=e;;){if(t.tag===5||t.tag===26){if(n===null){j=n=t;try{if(r=j.stateNode,i)d=r.style,typeof d.setProperty=="function"?d.setProperty("display","none","important"):d.display="none";else{v=j.stateNode;var Q=j.memoizedProps.style,R=Q!=null&&Q.hasOwnProperty("display")?Q.display:null;v.style.display=R==null||typeof R=="boolean"?"":(""+R).trim()}}catch(ue){Fe(j,j.return,ue)}}}else if(t.tag===6){if(n===null){j=t;try{j.stateNode.nodeValue=i?"":j.memoizedProps}catch(ue){Fe(j,j.return,ue)}}}else if(t.tag===18){if(n===null){j=t;try{var z=j.stateNode;i?Hh(z,!0):Hh(j.stateNode,!1)}catch(ue){Fe(j,j.return,ue)}}}else if((t.tag!==22&&t.tag!==23||t.memoizedState===null||t===e)&&t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;n===t&&(n=null),t=t.return}n===t&&(n=null),t.sibling.return=t.return,t=t.sibling}a&4&&(a=e.updateQueue,a!==null&&(n=a.retryQueue,n!==null&&(a.retryQueue=null,Oc(e,n))));break;case 19:rn(t,e),on(e),a&4&&(a=e.updateQueue,a!==null&&(e.updateQueue=null,Oc(e,a)));break;case 30:break;case 21:break;default:rn(t,e),on(e)}}function on(e){var t=e.flags;if(t&2){try{for(var n,a=e.return;a!==null;){if(Gm(a)){n=a;break}a=a.return}if(n==null)throw Error(u(160));switch(n.tag){case 27:var i=n.stateNode,r=Qo(e);Lc(e,r,i);break;case 5:var d=n.stateNode;n.flags&32&&(It(d,""),n.flags&=-33);var v=Qo(e);Lc(e,v,d);break;case 3:case 4:var j=n.stateNode.containerInfo,w=Qo(e);$o(e,w,j);break;default:throw Error(u(161))}}catch(V){Fe(e,e.return,V)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function Jm(e){if(e.subtreeFlags&1024)for(e=e.child;e!==null;){var t=e;Jm(t),t.tag===5&&t.flags&1024&&t.stateNode.reset(),e=e.sibling}}function Aa(e,t){if(t.subtreeFlags&8772)for(t=t.child;t!==null;)Km(e,t.alternate,t),t=t.sibling}function Ul(e){for(e=e.child;e!==null;){var t=e;switch(t.tag){case 0:case 11:case 14:case 15:ll(4,t,t.return),Ul(t);break;case 1:ia(t,t.return);var n=t.stateNode;typeof n.componentWillUnmount=="function"&&Hm(t,t.return,n),Ul(t);break;case 27:Es(t.stateNode);case 26:case 5:ia(t,t.return),Ul(t);break;case 22:t.memoizedState===null&&Ul(t);break;case 30:Ul(t);break;default:Ul(t)}e=e.sibling}}function wa(e,t,n){for(n=n&&(t.subtreeFlags&8772)!==0,t=t.child;t!==null;){var a=t.alternate,i=e,r=t,d=r.flags;switch(r.tag){case 0:case 11:case 15:wa(i,r,n),vs(4,r);break;case 1:if(wa(i,r,n),a=r,i=a.stateNode,typeof i.componentDidMount=="function")try{i.componentDidMount()}catch(w){Fe(a,a.return,w)}if(a=r,i=a.updateQueue,i!==null){var v=a.stateNode;try{var j=i.shared.hiddenCallbacks;if(j!==null)for(i.shared.hiddenCallbacks=null,i=0;i<j.length;i++)Tf(j[i],v)}catch(w){Fe(a,a.return,w)}}n&&d&64&&qm(r),gs(r,r.return);break;case 27:Vm(r);case 26:case 5:wa(i,r,n),n&&a===null&&d&4&&Um(r),gs(r,r.return);break;case 12:wa(i,r,n);break;case 31:wa(i,r,n),n&&d&4&&Xm(i,r);break;case 13:wa(i,r,n),n&&d&4&&Pm(i,r);break;case 22:r.memoizedState===null&&wa(i,r,n),gs(r,r.return);break;case 30:break;default:wa(i,r,n)}t=t.sibling}}function Po(e,t){var n=null;e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(n=e.memoizedState.cachePool.pool),e=null,t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(e=t.memoizedState.cachePool.pool),e!==n&&(e!=null&&e.refCount++,n!=null&&as(n))}function Zo(e,t){e=null,t.alternate!==null&&(e=t.alternate.memoizedState.cache),t=t.memoizedState.cache,t!==e&&(t.refCount++,e!=null&&as(e))}function Zn(e,t,n,a){if(t.subtreeFlags&10256)for(t=t.child;t!==null;)Fm(e,t,n,a),t=t.sibling}function Fm(e,t,n,a){var i=t.flags;switch(t.tag){case 0:case 11:case 15:Zn(e,t,n,a),i&2048&&vs(9,t);break;case 1:Zn(e,t,n,a);break;case 3:Zn(e,t,n,a),i&2048&&(e=null,t.alternate!==null&&(e=t.alternate.memoizedState.cache),t=t.memoizedState.cache,t!==e&&(t.refCount++,e!=null&&as(e)));break;case 12:if(i&2048){Zn(e,t,n,a),e=t.stateNode;try{var r=t.memoizedProps,d=r.id,v=r.onPostCommit;typeof v=="function"&&v(d,t.alternate===null?"mount":"update",e.passiveEffectDuration,-0)}catch(j){Fe(t,t.return,j)}}else Zn(e,t,n,a);break;case 31:Zn(e,t,n,a);break;case 13:Zn(e,t,n,a);break;case 23:break;case 22:r=t.stateNode,d=t.alternate,t.memoizedState!==null?r._visibility&2?Zn(e,t,n,a):ys(e,t):r._visibility&2?Zn(e,t,n,a):(r._visibility|=2,xi(e,t,n,a,(t.subtreeFlags&10256)!==0||!1)),i&2048&&Po(d,t);break;case 24:Zn(e,t,n,a),i&2048&&Zo(t.alternate,t);break;default:Zn(e,t,n,a)}}function xi(e,t,n,a,i){for(i=i&&((t.subtreeFlags&10256)!==0||!1),t=t.child;t!==null;){var r=e,d=t,v=n,j=a,w=d.flags;switch(d.tag){case 0:case 11:case 15:xi(r,d,v,j,i),vs(8,d);break;case 23:break;case 22:var V=d.stateNode;d.memoizedState!==null?V._visibility&2?xi(r,d,v,j,i):ys(r,d):(V._visibility|=2,xi(r,d,v,j,i)),i&&w&2048&&Po(d.alternate,d);break;case 24:xi(r,d,v,j,i),i&&w&2048&&Zo(d.alternate,d);break;default:xi(r,d,v,j,i)}t=t.sibling}}function ys(e,t){if(t.subtreeFlags&10256)for(t=t.child;t!==null;){var n=e,a=t,i=a.flags;switch(a.tag){case 22:ys(n,a),i&2048&&Po(a.alternate,a);break;case 24:ys(n,a),i&2048&&Zo(a.alternate,a);break;default:ys(n,a)}t=t.sibling}}var bs=8192;function Si(e,t,n){if(e.subtreeFlags&bs)for(e=e.child;e!==null;)Im(e,t,n),e=e.sibling}function Im(e,t,n){switch(e.tag){case 26:Si(e,t,n),e.flags&bs&&e.memoizedState!==null&&Ry(n,Pn,e.memoizedState,e.memoizedProps);break;case 5:Si(e,t,n);break;case 3:case 4:var a=Pn;Pn=Zc(e.stateNode.containerInfo),Si(e,t,n),Pn=a;break;case 22:e.memoizedState===null&&(a=e.alternate,a!==null&&a.memoizedState!==null?(a=bs,bs=16777216,Si(e,t,n),bs=a):Si(e,t,n));break;default:Si(e,t,n)}}function Wm(e){var t=e.alternate;if(t!==null&&(e=t.child,e!==null)){t.child=null;do t=e.sibling,e.sibling=null,e=t;while(e!==null)}}function xs(e){var t=e.deletions;if((e.flags&16)!==0){if(t!==null)for(var n=0;n<t.length;n++){var a=t[n];Ot=a,th(a,e)}Wm(e)}if(e.subtreeFlags&10256)for(e=e.child;e!==null;)eh(e),e=e.sibling}function eh(e){switch(e.tag){case 0:case 11:case 15:xs(e),e.flags&2048&&ll(9,e,e.return);break;case 3:xs(e);break;case 12:xs(e);break;case 22:var t=e.stateNode;e.memoizedState!==null&&t._visibility&2&&(e.return===null||e.return.tag!==13)?(t._visibility&=-3,zc(e)):xs(e);break;default:xs(e)}}function zc(e){var t=e.deletions;if((e.flags&16)!==0){if(t!==null)for(var n=0;n<t.length;n++){var a=t[n];Ot=a,th(a,e)}Wm(e)}for(e=e.child;e!==null;){switch(t=e,t.tag){case 0:case 11:case 15:ll(8,t,t.return),zc(t);break;case 22:n=t.stateNode,n._visibility&2&&(n._visibility&=-3,zc(t));break;default:zc(t)}e=e.sibling}}function th(e,t){for(;Ot!==null;){var n=Ot;switch(n.tag){case 0:case 11:case 15:ll(8,n,t);break;case 23:case 22:if(n.memoizedState!==null&&n.memoizedState.cachePool!==null){var a=n.memoizedState.cachePool.pool;a!=null&&a.refCount++}break;case 24:as(n.memoizedState.cache)}if(a=n.child,a!==null)a.return=n,Ot=a;else e:for(n=e;Ot!==null;){a=Ot;var i=a.sibling,r=a.return;if(Qm(a),a===n){Ot=null;break e}if(i!==null){i.return=r,Ot=i;break e}Ot=r}}}var Xg={getCacheForType:function(e){var t=Gt(Mt),n=t.data.get(e);return n===void 0&&(n=e(),t.data.set(e,n)),n},cacheSignal:function(){return Gt(Mt).controller.signal}},Pg=typeof WeakMap=="function"?WeakMap:Map,Ze=0,at=null,He=null,Ge=0,Je=0,Sn=null,il=!1,_i=!1,Jo=!1,ka=0,vt=0,sl=0,Gl=0,Fo=0,_n=0,ji=0,Ss=null,un=null,Io=!1,Bc=0,nh=0,qc=1/0,Hc=null,cl=null,wt=0,rl=null,Mi=null,Ra=0,Wo=0,eu=null,ah=null,_s=0,tu=null;function jn(){return(Ze&2)!==0&&Ge!==0?Ge&-Ge:E.T!==null?cu():Zl()}function lh(){if(_n===0)if((Ge&536870912)===0||Ke){var e=We;We<<=1,(We&3932160)===0&&(We=262144),_n=e}else _n=536870912;return e=bn.current,e!==null&&(e.flags|=32),_n}function dn(e,t,n){(e===at&&(Je===2||Je===9)||e.cancelPendingCommit!==null)&&(Ni(e,0),ol(e,Ge,_n,!1)),$t(e,n),((Ze&2)===0||e!==at)&&(e===at&&((Ze&2)===0&&(Gl|=n),vt===4&&ol(e,Ge,_n,!1)),sa(e))}function ih(e,t,n){if((Ze&6)!==0)throw Error(u(327));var a=!n&&(t&127)===0&&(t&e.expiredLanes)===0||an(e,t),i=a?Fg(e,t):au(e,t,!0),r=a;do{if(i===0){_i&&!a&&ol(e,t,0,!1);break}else{if(n=e.current.alternate,r&&!Zg(n)){i=au(e,t,!1),r=!1;continue}if(i===2){if(r=t,e.errorRecoveryDisabledLanes&r)var d=0;else d=e.pendingLanes&-536870913,d=d!==0?d:d&536870912?536870912:0;if(d!==0){t=d;e:{var v=e;i=Ss;var j=v.current.memoizedState.isDehydrated;if(j&&(Ni(v,d).flags|=256),d=au(v,d,!1),d!==2){if(Jo&&!j){v.errorRecoveryDisabledLanes|=r,Gl|=r,i=4;break e}r=un,un=i,r!==null&&(un===null?un=r:un.push.apply(un,r))}i=d}if(r=!1,i!==2)continue}}if(i===1){Ni(e,0),ol(e,t,0,!0);break}e:{switch(a=e,r=i,r){case 0:case 1:throw Error(u(345));case 4:if((t&4194048)!==t)break;case 6:ol(a,t,_n,!il);break e;case 2:un=null;break;case 3:case 5:break;default:throw Error(u(329))}if((t&62914560)===t&&(i=Bc+300-lt(),10<i)){if(ol(a,t,_n,!il),ht(a,0,!0)!==0)break e;Ra=t,a.timeoutHandle=zh(sh.bind(null,a,n,un,Hc,Io,t,_n,Gl,ji,il,r,"Throttled",-0,0),i);break e}sh(a,n,un,Hc,Io,t,_n,Gl,ji,il,r,null,-0,0)}}break}while(!0);sa(e)}function sh(e,t,n,a,i,r,d,v,j,w,V,Q,R,z){if(e.timeoutHandle=-1,Q=t.subtreeFlags,Q&8192||(Q&16785408)===16785408){Q={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:Yn},Im(t,r,Q);var ue=(r&62914560)===r?Bc-lt():(r&4194048)===r?nh-lt():0;if(ue=Dy(Q,ue),ue!==null){Ra=r,e.cancelPendingCommit=ue(hh.bind(null,e,t,r,n,a,i,d,v,j,V,Q,null,R,z)),ol(e,r,d,!w);return}}hh(e,t,r,n,a,i,d,v,j)}function Zg(e){for(var t=e;;){var n=t.tag;if((n===0||n===11||n===15)&&t.flags&16384&&(n=t.updateQueue,n!==null&&(n=n.stores,n!==null)))for(var a=0;a<n.length;a++){var i=n[a],r=i.getSnapshot;i=i.value;try{if(!gn(r(),i))return!1}catch{return!1}}if(n=t.child,t.subtreeFlags&16384&&n!==null)n.return=t,t=n;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function ol(e,t,n,a){t&=~Fo,t&=~Gl,e.suspendedLanes|=t,e.pingedLanes&=~t,a&&(e.warmLanes|=t),a=e.expirationTimes;for(var i=t;0<i;){var r=31-gt(i),d=1<<r;a[r]=-1,i&=~d}n!==0&&Gn(e,n,t)}function Uc(){return(Ze&6)===0?(js(0),!1):!0}function nu(){if(He!==null){if(Je===0)var e=He.return;else e=He,Sa=Rl=null,yo(e),pi=null,is=0,e=He;for(;e!==null;)Bm(e.alternate,e),e=e.return;He=null}}function Ni(e,t){var n=e.timeoutHandle;n!==-1&&(e.timeoutHandle=-1,py(n)),n=e.cancelPendingCommit,n!==null&&(e.cancelPendingCommit=null,n()),Ra=0,nu(),at=e,He=n=ba(e.current,null),Ge=t,Je=0,Sn=null,il=!1,_i=an(e,t),Jo=!1,ji=_n=Fo=Gl=sl=vt=0,un=Ss=null,Io=!1,(t&8)!==0&&(t|=t&32);var a=e.entangledLanes;if(a!==0)for(e=e.entanglements,a&=t;0<a;){var i=31-gt(a),r=1<<i;t|=e[i],a&=~r}return ka=t,cc(),n}function ch(e,t){Oe=null,E.H=ms,t===hi||t===pc?(t=jf(),Je=3):t===io?(t=jf(),Je=4):Je=t===Lo?8:t!==null&&typeof t=="object"&&typeof t.then=="function"?6:1,Sn=t,He===null&&(vt=1,Ac(e,kn(t,e.current)))}function rh(){var e=bn.current;return e===null?!0:(Ge&4194048)===Ge?On===null:(Ge&62914560)===Ge||(Ge&536870912)!==0?e===On:!1}function oh(){var e=E.H;return E.H=ms,e===null?ms:e}function uh(){var e=E.A;return E.A=Xg,e}function Gc(){vt=4,il||(Ge&4194048)!==Ge&&bn.current!==null||(_i=!0),(sl&134217727)===0&&(Gl&134217727)===0||at===null||ol(at,Ge,_n,!1)}function au(e,t,n){var a=Ze;Ze|=2;var i=oh(),r=uh();(at!==e||Ge!==t)&&(Hc=null,Ni(e,t)),t=!1;var d=vt;e:do try{if(Je!==0&&He!==null){var v=He,j=Sn;switch(Je){case 8:nu(),d=6;break e;case 3:case 2:case 9:case 6:bn.current===null&&(t=!0);var w=Je;if(Je=0,Sn=null,Ei(e,v,j,w),n&&_i){d=0;break e}break;default:w=Je,Je=0,Sn=null,Ei(e,v,j,w)}}Jg(),d=vt;break}catch(V){ch(e,V)}while(!0);return t&&e.shellSuspendCounter++,Sa=Rl=null,Ze=a,E.H=i,E.A=r,He===null&&(at=null,Ge=0,cc()),d}function Jg(){for(;He!==null;)dh(He)}function Fg(e,t){var n=Ze;Ze|=2;var a=oh(),i=uh();at!==e||Ge!==t?(Hc=null,qc=lt()+500,Ni(e,t)):_i=an(e,t);e:do try{if(Je!==0&&He!==null){t=He;var r=Sn;t:switch(Je){case 1:Je=0,Sn=null,Ei(e,t,r,1);break;case 2:case 9:if(Sf(r)){Je=0,Sn=null,fh(t);break}t=function(){Je!==2&&Je!==9||at!==e||(Je=7),sa(e)},r.then(t,t);break e;case 3:Je=7;break e;case 4:Je=5;break e;case 7:Sf(r)?(Je=0,Sn=null,fh(t)):(Je=0,Sn=null,Ei(e,t,r,7));break;case 5:var d=null;switch(He.tag){case 26:d=He.memoizedState;case 5:case 27:var v=He;if(d?Fh(d):v.stateNode.complete){Je=0,Sn=null;var j=v.sibling;if(j!==null)He=j;else{var w=v.return;w!==null?(He=w,Vc(w)):He=null}break t}}Je=0,Sn=null,Ei(e,t,r,5);break;case 6:Je=0,Sn=null,Ei(e,t,r,6);break;case 8:nu(),vt=6;break e;default:throw Error(u(462))}}Ig();break}catch(V){ch(e,V)}while(!0);return Sa=Rl=null,E.H=a,E.A=i,Ze=n,He!==null?0:(at=null,Ge=0,cc(),vt)}function Ig(){for(;He!==null&&!Ct();)dh(He)}function dh(e){var t=Om(e.alternate,e,ka);e.memoizedProps=e.pendingProps,t===null?Vc(e):He=t}function fh(e){var t=e,n=t.alternate;switch(t.tag){case 15:case 0:t=Am(n,t,t.pendingProps,t.type,void 0,Ge);break;case 11:t=Am(n,t,t.pendingProps,t.type.render,t.ref,Ge);break;case 5:yo(t);default:Bm(n,t),t=He=uf(t,ka),t=Om(n,t,ka)}e.memoizedProps=e.pendingProps,t===null?Vc(e):He=t}function Ei(e,t,n,a){Sa=Rl=null,yo(t),pi=null,is=0;var i=t.return;try{if(Ug(e,i,t,n,Ge)){vt=1,Ac(e,kn(n,e.current)),He=null;return}}catch(r){if(i!==null)throw He=i,r;vt=1,Ac(e,kn(n,e.current)),He=null;return}t.flags&32768?(Ke||a===1?e=!0:_i||(Ge&536870912)!==0?e=!1:(il=e=!0,(a===2||a===9||a===3||a===6)&&(a=bn.current,a!==null&&a.tag===13&&(a.flags|=16384))),mh(t,e)):Vc(t)}function Vc(e){var t=e;do{if((t.flags&32768)!==0){mh(t,il);return}e=t.return;var n=Yg(t.alternate,t,ka);if(n!==null){He=n;return}if(t=t.sibling,t!==null){He=t;return}He=t=e}while(t!==null);vt===0&&(vt=5)}function mh(e,t){do{var n=Kg(e.alternate,e);if(n!==null){n.flags&=32767,He=n;return}if(n=e.return,n!==null&&(n.flags|=32768,n.subtreeFlags=0,n.deletions=null),!t&&(e=e.sibling,e!==null)){He=e;return}He=e=n}while(e!==null);vt=6,He=null}function hh(e,t,n,a,i,r,d,v,j){e.cancelPendingCommit=null;do Yc();while(wt!==0);if((Ze&6)!==0)throw Error(u(327));if(t!==null){if(t===e.current)throw Error(u(177));if(r=t.lanes|t.childLanes,r|=Kr,ln(e,n,r,d,v,j),e===at&&(He=at=null,Ge=0),Mi=t,rl=e,Ra=n,Wo=r,eu=i,ah=a,(t.subtreeFlags&10256)!==0||(t.flags&10256)!==0?(e.callbackNode=null,e.callbackPriority=0,ny(O,function(){return bh(),null})):(e.callbackNode=null,e.callbackPriority=0),a=(t.flags&13878)!==0,(t.subtreeFlags&13878)!==0||a){a=E.T,E.T=null,i=X.p,X.p=2,d=Ze,Ze|=4;try{Qg(e,t,n)}finally{Ze=d,X.p=i,E.T=a}}wt=1,ph(),vh(),gh()}}function ph(){if(wt===1){wt=0;var e=rl,t=Mi,n=(t.flags&13878)!==0;if((t.subtreeFlags&13878)!==0||n){n=E.T,E.T=null;var a=X.p;X.p=2;var i=Ze;Ze|=4;try{Zm(t,e);var r=pu,d=ef(e.containerInfo),v=r.focusedElem,j=r.selectionRange;if(d!==v&&v&&v.ownerDocument&&Wd(v.ownerDocument.documentElement,v)){if(j!==null&&Hr(v)){var w=j.start,V=j.end;if(V===void 0&&(V=w),"selectionStart"in v)v.selectionStart=w,v.selectionEnd=Math.min(V,v.value.length);else{var Q=v.ownerDocument||document,R=Q&&Q.defaultView||window;if(R.getSelection){var z=R.getSelection(),ue=v.textContent.length,_e=Math.min(j.start,ue),nt=j.end===void 0?_e:Math.min(j.end,ue);!z.extend&&_e>nt&&(d=nt,nt=_e,_e=d);var C=Id(v,_e),N=Id(v,nt);if(C&&N&&(z.rangeCount!==1||z.anchorNode!==C.node||z.anchorOffset!==C.offset||z.focusNode!==N.node||z.focusOffset!==N.offset)){var A=Q.createRange();A.setStart(C.node,C.offset),z.removeAllRanges(),_e>nt?(z.addRange(A),z.extend(N.node,N.offset)):(A.setEnd(N.node,N.offset),z.addRange(A))}}}}for(Q=[],z=v;z=z.parentNode;)z.nodeType===1&&Q.push({element:z,left:z.scrollLeft,top:z.scrollTop});for(typeof v.focus=="function"&&v.focus(),v=0;v<Q.length;v++){var Y=Q[v];Y.element.scrollLeft=Y.left,Y.element.scrollTop=Y.top}}tr=!!hu,pu=hu=null}finally{Ze=i,X.p=a,E.T=n}}e.current=t,wt=2}}function vh(){if(wt===2){wt=0;var e=rl,t=Mi,n=(t.flags&8772)!==0;if((t.subtreeFlags&8772)!==0||n){n=E.T,E.T=null;var a=X.p;X.p=2;var i=Ze;Ze|=4;try{Km(e,t.alternate,t)}finally{Ze=i,X.p=a,E.T=n}}wt=3}}function gh(){if(wt===4||wt===3){wt=0,Qt();var e=rl,t=Mi,n=Ra,a=ah;(t.subtreeFlags&10256)!==0||(t.flags&10256)!==0?wt=5:(wt=0,Mi=rl=null,yh(e,e.pendingLanes));var i=e.pendingLanes;if(i===0&&(cl=null),xl(n),t=t.stateNode,Ie&&typeof Ie.onCommitFiberRoot=="function")try{Ie.onCommitFiberRoot(Jt,t,void 0,(t.current.flags&128)===128)}catch{}if(a!==null){t=E.T,i=X.p,X.p=2,E.T=null;try{for(var r=e.onRecoverableError,d=0;d<a.length;d++){var v=a[d];r(v.value,{componentStack:v.stack})}}finally{E.T=t,X.p=i}}(Ra&3)!==0&&Yc(),sa(e),i=e.pendingLanes,(n&261930)!==0&&(i&42)!==0?e===tu?_s++:(_s=0,tu=e):_s=0,js(0)}}function yh(e,t){(e.pooledCacheLanes&=t)===0&&(t=e.pooledCache,t!=null&&(e.pooledCache=null,as(t)))}function Yc(){return ph(),vh(),gh(),bh()}function bh(){if(wt!==5)return!1;var e=rl,t=Wo;Wo=0;var n=xl(Ra),a=E.T,i=X.p;try{X.p=32>n?32:n,E.T=null,n=eu,eu=null;var r=rl,d=Ra;if(wt=0,Mi=rl=null,Ra=0,(Ze&6)!==0)throw Error(u(331));var v=Ze;if(Ze|=4,eh(r.current),Fm(r,r.current,d,n),Ze=v,js(0,!1),Ie&&typeof Ie.onPostCommitFiberRoot=="function")try{Ie.onPostCommitFiberRoot(Jt,r)}catch{}return!0}finally{X.p=i,E.T=a,yh(e,t)}}function xh(e,t,n){t=kn(n,t),t=Do(e.stateNode,t,2),e=tl(e,t,2),e!==null&&($t(e,2),sa(e))}function Fe(e,t,n){if(e.tag===3)xh(e,e,n);else for(;t!==null;){if(t.tag===3){xh(t,e,n);break}else if(t.tag===1){var a=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof a.componentDidCatch=="function"&&(cl===null||!cl.has(a))){e=kn(n,e),n=Sm(2),a=tl(t,n,2),a!==null&&(_m(n,a,t,e),$t(a,2),sa(a));break}}t=t.return}}function lu(e,t,n){var a=e.pingCache;if(a===null){a=e.pingCache=new Pg;var i=new Set;a.set(t,i)}else i=a.get(t),i===void 0&&(i=new Set,a.set(t,i));i.has(n)||(Jo=!0,i.add(n),e=Wg.bind(null,e,t,n),t.then(e,e))}function Wg(e,t,n){var a=e.pingCache;a!==null&&a.delete(t),e.pingedLanes|=e.suspendedLanes&n,e.warmLanes&=~n,at===e&&(Ge&n)===n&&(vt===4||vt===3&&(Ge&62914560)===Ge&&300>lt()-Bc?(Ze&2)===0&&Ni(e,0):Fo|=n,ji===Ge&&(ji=0)),sa(e)}function Sh(e,t){t===0&&(t=ua()),e=Al(e,t),e!==null&&($t(e,t),sa(e))}function ey(e){var t=e.memoizedState,n=0;t!==null&&(n=t.retryLane),Sh(e,n)}function ty(e,t){var n=0;switch(e.tag){case 31:case 13:var a=e.stateNode,i=e.memoizedState;i!==null&&(n=i.retryLane);break;case 19:a=e.stateNode;break;case 22:a=e.stateNode._retryCache;break;default:throw Error(u(314))}a!==null&&a.delete(t),Sh(e,n)}function ny(e,t){return ke(e,t)}var Kc=null,Ti=null,iu=!1,Qc=!1,su=!1,ul=0;function sa(e){e!==Ti&&e.next===null&&(Ti===null?Kc=Ti=e:Ti=Ti.next=e),Qc=!0,iu||(iu=!0,ly())}function js(e,t){if(!su&&Qc){su=!0;do for(var n=!1,a=Kc;a!==null;){if(e!==0){var i=a.pendingLanes;if(i===0)var r=0;else{var d=a.suspendedLanes,v=a.pingedLanes;r=(1<<31-gt(42|e)+1)-1,r&=i&~(d&~v),r=r&201326741?r&201326741|1:r?r|2:0}r!==0&&(n=!0,Nh(a,r))}else r=Ge,r=ht(a,a===at?r:0,a.cancelPendingCommit!==null||a.timeoutHandle!==-1),(r&3)===0||an(a,r)||(n=!0,Nh(a,r));a=a.next}while(n);su=!1}}function ay(){_h()}function _h(){Qc=iu=!1;var e=0;ul!==0&&hy()&&(e=ul);for(var t=lt(),n=null,a=Kc;a!==null;){var i=a.next,r=jh(a,t);r===0?(a.next=null,n===null?Kc=i:n.next=i,i===null&&(Ti=n)):(n=a,(e!==0||(r&3)!==0)&&(Qc=!0)),a=i}wt!==0&&wt!==5||js(e),ul!==0&&(ul=0)}function jh(e,t){for(var n=e.suspendedLanes,a=e.pingedLanes,i=e.expirationTimes,r=e.pendingLanes&-62914561;0<r;){var d=31-gt(r),v=1<<d,j=i[d];j===-1?((v&n)===0||(v&a)!==0)&&(i[d]=Va(v,t)):j<=t&&(e.expiredLanes|=v),r&=~v}if(t=at,n=Ge,n=ht(e,e===t?n:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),a=e.callbackNode,n===0||e===t&&(Je===2||Je===9)||e.cancelPendingCommit!==null)return a!==null&&a!==null&&Ee(a),e.callbackNode=null,e.callbackPriority=0;if((n&3)===0||an(e,n)){if(t=n&-n,t===e.callbackPriority)return t;switch(a!==null&&Ee(a),xl(n)){case 2:case 8:n=nn;break;case 32:n=O;break;case 268435456:n=Te;break;default:n=O}return a=Mh.bind(null,e),n=ke(n,a),e.callbackPriority=t,e.callbackNode=n,t}return a!==null&&a!==null&&Ee(a),e.callbackPriority=2,e.callbackNode=null,2}function Mh(e,t){if(wt!==0&&wt!==5)return e.callbackNode=null,e.callbackPriority=0,null;var n=e.callbackNode;if(Yc()&&e.callbackNode!==n)return null;var a=Ge;return a=ht(e,e===at?a:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),a===0?null:(ih(e,a,t),jh(e,lt()),e.callbackNode!=null&&e.callbackNode===n?Mh.bind(null,e):null)}function Nh(e,t){if(Yc())return null;ih(e,t,!0)}function ly(){vy(function(){(Ze&6)!==0?ke(Tn,ay):_h()})}function cu(){if(ul===0){var e=fi;e===0&&(e=se,se<<=1,(se&261888)===0&&(se=256)),ul=e}return ul}function Eh(e){return e==null||typeof e=="symbol"||typeof e=="boolean"?null:typeof e=="function"?e:jl(""+e)}function Th(e,t){var n=t.ownerDocument.createElement("input");return n.name=t.name,n.value=t.value,e.id&&n.setAttribute("form",e.id),t.parentNode.insertBefore(n,t),e=new FormData(e),n.parentNode.removeChild(n),e}function iy(e,t,n,a,i){if(t==="submit"&&n&&n.stateNode===i){var r=Eh((i[Bt]||null).action),d=a.submitter;d&&(t=(t=d[Bt]||null)?Eh(t.formAction):d.getAttribute("formAction"),t!==null&&(r=t,d=null));var v=new Ce("action","action",null,a,i);e.push({event:v,listeners:[{instance:null,listener:function(){if(a.defaultPrevented){if(ul!==0){var j=d?Th(i,d):new FormData(i);To(n,{pending:!0,data:j,method:i.method,action:r},null,j)}}else typeof r=="function"&&(v.preventDefault(),j=d?Th(i,d):new FormData(i),To(n,{pending:!0,data:j,method:i.method,action:r},r,j))},currentTarget:i}]})}}for(var ru=0;ru<Yr.length;ru++){var ou=Yr[ru],sy=ou.toLowerCase(),cy=ou[0].toUpperCase()+ou.slice(1);Xn(sy,"on"+cy)}Xn(af,"onAnimationEnd"),Xn(lf,"onAnimationIteration"),Xn(sf,"onAnimationStart"),Xn("dblclick","onDoubleClick"),Xn("focusin","onFocus"),Xn("focusout","onBlur"),Xn(jg,"onTransitionRun"),Xn(Mg,"onTransitionStart"),Xn(Ng,"onTransitionCancel"),Xn(cf,"onTransitionEnd"),B("onMouseEnter",["mouseout","mouseover"]),B("onMouseLeave",["mouseout","mouseover"]),B("onPointerEnter",["pointerout","pointerover"]),B("onPointerLeave",["pointerout","pointerover"]),qt("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),qt("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),qt("onBeforeInput",["compositionend","keypress","textInput","paste"]),qt("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),qt("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),qt("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Ms="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),ry=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Ms));function Ch(e,t){t=(t&4)!==0;for(var n=0;n<e.length;n++){var a=e[n],i=a.event;a=a.listeners;e:{var r=void 0;if(t)for(var d=a.length-1;0<=d;d--){var v=a[d],j=v.instance,w=v.currentTarget;if(v=v.listener,j!==r&&i.isPropagationStopped())break e;r=v,i.currentTarget=w;try{r(i)}catch(V){sc(V)}i.currentTarget=null,r=j}else for(d=0;d<a.length;d++){if(v=a[d],j=v.instance,w=v.currentTarget,v=v.listener,j!==r&&i.isPropagationStopped())break e;r=v,i.currentTarget=w;try{r(i)}catch(V){sc(V)}i.currentTarget=null,r=j}}}}function Ue(e,t){var n=t[Ka];n===void 0&&(n=t[Ka]=new Set);var a=e+"__bubble";n.has(a)||(Ah(t,e,2,!1),n.add(a))}function uu(e,t,n){var a=0;t&&(a|=4),Ah(n,e,a,t)}var $c="_reactListening"+Math.random().toString(36).slice(2);function du(e){if(!e[$c]){e[$c]=!0,Il.forEach(function(n){n!=="selectionchange"&&(ry.has(n)||uu(n,!1,e),uu(n,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[$c]||(t[$c]=!0,uu("selectionchange",!1,t))}}function Ah(e,t,n,a){switch(lp(t)){case 2:var i=zy;break;case 8:i=By;break;default:i=Eu}n=i.bind(null,t,n,e),i=void 0,!$i||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(i=!0),a?i!==void 0?e.addEventListener(t,n,{capture:!0,passive:i}):e.addEventListener(t,n,!0):i!==void 0?e.addEventListener(t,n,{passive:i}):e.addEventListener(t,n,!1)}function fu(e,t,n,a,i){var r=a;if((t&1)===0&&(t&2)===0&&a!==null)e:for(;;){if(a===null)return;var d=a.tag;if(d===3||d===4){var v=a.stateNode.containerInfo;if(v===i)break;if(d===4)for(d=a.return;d!==null;){var j=d.tag;if((j===3||j===4)&&d.stateNode.containerInfo===i)return;d=d.return}for(;v!==null;){if(d=ma(v),d===null)return;if(j=d.tag,j===5||j===6||j===26||j===27){a=r=d;continue e}v=v.parentNode}}a=a.return}lc(function(){var w=r,V=na(n),Q=[];e:{var R=rf.get(e);if(R!==void 0){var z=Ce,ue=e;switch(e){case"keypress":if(_(n)===0)break e;case"keydown":case"keyup":z=tg;break;case"focusin":ue="focus",z=Lr;break;case"focusout":ue="blur",z=Lr;break;case"beforeblur":case"afterblur":z=Lr;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":z=Zi;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":z=Yv;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":z=lg;break;case af:case lf:case sf:z=$v;break;case cf:z=sg;break;case"scroll":case"scrollend":z=Wt;break;case"wheel":z=rg;break;case"copy":case"cut":case"paste":z=Pv;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":z=qd;break;case"toggle":case"beforetoggle":z=ug}var _e=(t&4)!==0,nt=!_e&&(e==="scroll"||e==="scrollend"),C=_e?R!==null?R+"Capture":null:R;_e=[];for(var N=w,A;N!==null;){var Y=N;if(A=Y.stateNode,Y=Y.tag,Y!==5&&Y!==26&&Y!==27||A===null||C===null||(Y=Ml(N,C),Y!=null&&_e.push(Ns(N,Y,A))),nt)break;N=N.return}0<_e.length&&(R=new z(R,ue,null,n,V),Q.push({event:R,listeners:_e}))}}if((t&7)===0){e:{if(R=e==="mouseover"||e==="pointerover",z=e==="mouseout"||e==="pointerout",R&&n!==ti&&(ue=n.relatedTarget||n.fromElement)&&(ma(ue)||ue[mn]))break e;if((z||R)&&(R=V.window===V?V:(R=V.ownerDocument)?R.defaultView||R.parentWindow:window,z?(ue=n.relatedTarget||n.toElement,z=w,ue=ue?ma(ue):null,ue!==null&&(nt=m(ue),_e=ue.tag,ue!==nt||_e!==5&&_e!==27&&_e!==6)&&(ue=null)):(z=null,ue=w),z!==ue)){if(_e=Zi,Y="onMouseLeave",C="onMouseEnter",N="mouse",(e==="pointerout"||e==="pointerover")&&(_e=qd,Y="onPointerLeave",C="onPointerEnter",N="pointer"),nt=z==null?R:hn(z),A=ue==null?R:hn(ue),R=new _e(Y,N+"leave",z,n,V),R.target=nt,R.relatedTarget=A,Y=null,ma(V)===w&&(_e=new _e(C,N+"enter",ue,n,V),_e.target=A,_e.relatedTarget=nt,Y=_e),nt=Y,z&&ue)t:{for(_e=oy,C=z,N=ue,A=0,Y=C;Y;Y=_e(Y))A++;Y=0;for(var ye=N;ye;ye=_e(ye))Y++;for(;0<A-Y;)C=_e(C),A--;for(;0<Y-A;)N=_e(N),Y--;for(;A--;){if(C===N||N!==null&&C===N.alternate){_e=C;break t}C=_e(C),N=_e(N)}_e=null}else _e=null;z!==null&&wh(Q,R,z,_e,!1),ue!==null&&nt!==null&&wh(Q,nt,ue,_e,!0)}}e:{if(R=w?hn(w):window,z=R.nodeName&&R.nodeName.toLowerCase(),z==="select"||z==="input"&&R.type==="file")var Qe=$d;else if(Kd(R))if(Xd)Qe=xg;else{Qe=yg;var me=gg}else z=R.nodeName,!z||z.toLowerCase()!=="input"||R.type!=="checkbox"&&R.type!=="radio"?w&&_l(w.elementType)&&(Qe=$d):Qe=bg;if(Qe&&(Qe=Qe(e,w))){Qd(Q,Qe,n,V);break e}me&&me(e,R,w),e==="focusout"&&w&&R.type==="number"&&w.memoizedProps.value!=null&&Sl(R,"number",R.value)}switch(me=w?hn(w):window,e){case"focusin":(Kd(me)||me.contentEditable==="true")&&(li=me,Ur=w,es=null);break;case"focusout":es=Ur=li=null;break;case"mousedown":Gr=!0;break;case"contextmenu":case"mouseup":case"dragend":Gr=!1,tf(Q,n,V);break;case"selectionchange":if(_g)break;case"keydown":case"keyup":tf(Q,n,V)}var Be;if(zr)e:{switch(e){case"compositionstart":var Ve="onCompositionStart";break e;case"compositionend":Ve="onCompositionEnd";break e;case"compositionupdate":Ve="onCompositionUpdate";break e}Ve=void 0}else ai?Vd(e,n)&&(Ve="onCompositionEnd"):e==="keydown"&&n.keyCode===229&&(Ve="onCompositionStart");Ve&&(Hd&&n.locale!=="ko"&&(ai||Ve!=="onCompositionStart"?Ve==="onCompositionEnd"&&ai&&(Be=Pi()):(vn=V,Xi="value"in vn?vn.value:vn.textContent,ai=!0)),me=Xc(w,Ve),0<me.length&&(Ve=new Bd(Ve,e,null,n,V),Q.push({event:Ve,listeners:me}),Be?Ve.data=Be:(Be=Yd(n),Be!==null&&(Ve.data=Be)))),(Be=fg?mg(e,n):hg(e,n))&&(Ve=Xc(w,"onBeforeInput"),0<Ve.length&&(me=new Bd("onBeforeInput","beforeinput",null,n,V),Q.push({event:me,listeners:Ve}),me.data=Be)),iy(Q,e,w,n,V)}Ch(Q,t)})}function Ns(e,t,n){return{instance:e,listener:t,currentTarget:n}}function Xc(e,t){for(var n=t+"Capture",a=[];e!==null;){var i=e,r=i.stateNode;if(i=i.tag,i!==5&&i!==26&&i!==27||r===null||(i=Ml(e,n),i!=null&&a.unshift(Ns(e,i,r)),i=Ml(e,t),i!=null&&a.push(Ns(e,i,r))),e.tag===3)return a;e=e.return}return[]}function oy(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5&&e.tag!==27);return e||null}function wh(e,t,n,a,i){for(var r=t._reactName,d=[];n!==null&&n!==a;){var v=n,j=v.alternate,w=v.stateNode;if(v=v.tag,j!==null&&j===a)break;v!==5&&v!==26&&v!==27||w===null||(j=w,i?(w=Ml(n,r),w!=null&&d.unshift(Ns(n,w,j))):i||(w=Ml(n,r),w!=null&&d.push(Ns(n,w,j)))),n=n.return}d.length!==0&&e.push({event:t,listeners:d})}var uy=/\r\n?/g,dy=/\u0000|\uFFFD/g;function kh(e){return(typeof e=="string"?e:""+e).replace(uy,`
`).replace(dy,"")}function Rh(e,t){return t=kh(t),kh(e)===t}function tt(e,t,n,a,i,r){switch(n){case"children":typeof a=="string"?t==="body"||t==="textarea"&&a===""||It(e,a):(typeof a=="number"||typeof a=="bigint")&&t!=="body"&&It(e,""+a);break;case"className":Cn(e,"class",a);break;case"tabIndex":Cn(e,"tabindex",a);break;case"dir":case"role":case"viewBox":case"width":case"height":Cn(e,n,a);break;case"style":nc(e,a,r);break;case"data":if(t!=="object"){Cn(e,"data",a);break}case"src":case"href":if(a===""&&(t!=="a"||n!=="href")){e.removeAttribute(n);break}if(a==null||typeof a=="function"||typeof a=="symbol"||typeof a=="boolean"){e.removeAttribute(n);break}a=jl(""+a),e.setAttribute(n,a);break;case"action":case"formAction":if(typeof a=="function"){e.setAttribute(n,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof r=="function"&&(n==="formAction"?(t!=="input"&&tt(e,t,"name",i.name,i,null),tt(e,t,"formEncType",i.formEncType,i,null),tt(e,t,"formMethod",i.formMethod,i,null),tt(e,t,"formTarget",i.formTarget,i,null)):(tt(e,t,"encType",i.encType,i,null),tt(e,t,"method",i.method,i,null),tt(e,t,"target",i.target,i,null)));if(a==null||typeof a=="symbol"||typeof a=="boolean"){e.removeAttribute(n);break}a=jl(""+a),e.setAttribute(n,a);break;case"onClick":a!=null&&(e.onclick=Yn);break;case"onScroll":a!=null&&Ue("scroll",e);break;case"onScrollEnd":a!=null&&Ue("scrollend",e);break;case"dangerouslySetInnerHTML":if(a!=null){if(typeof a!="object"||!("__html"in a))throw Error(u(61));if(n=a.__html,n!=null){if(i.children!=null)throw Error(u(60));e.innerHTML=n}}break;case"multiple":e.multiple=a&&typeof a!="function"&&typeof a!="symbol";break;case"muted":e.muted=a&&typeof a!="function"&&typeof a!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(a==null||typeof a=="function"||typeof a=="boolean"||typeof a=="symbol"){e.removeAttribute("xlink:href");break}n=jl(""+a),e.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",n);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":a!=null&&typeof a!="function"&&typeof a!="symbol"?e.setAttribute(n,""+a):e.removeAttribute(n);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":a&&typeof a!="function"&&typeof a!="symbol"?e.setAttribute(n,""):e.removeAttribute(n);break;case"capture":case"download":a===!0?e.setAttribute(n,""):a!==!1&&a!=null&&typeof a!="function"&&typeof a!="symbol"?e.setAttribute(n,a):e.removeAttribute(n);break;case"cols":case"rows":case"size":case"span":a!=null&&typeof a!="function"&&typeof a!="symbol"&&!isNaN(a)&&1<=a?e.setAttribute(n,a):e.removeAttribute(n);break;case"rowSpan":case"start":a==null||typeof a=="function"||typeof a=="symbol"||isNaN(a)?e.removeAttribute(n):e.setAttribute(n,a);break;case"popover":Ue("beforetoggle",e),Ue("toggle",e),va(e,"popover",a);break;case"xlinkActuate":Xt(e,"http://www.w3.org/1999/xlink","xlink:actuate",a);break;case"xlinkArcrole":Xt(e,"http://www.w3.org/1999/xlink","xlink:arcrole",a);break;case"xlinkRole":Xt(e,"http://www.w3.org/1999/xlink","xlink:role",a);break;case"xlinkShow":Xt(e,"http://www.w3.org/1999/xlink","xlink:show",a);break;case"xlinkTitle":Xt(e,"http://www.w3.org/1999/xlink","xlink:title",a);break;case"xlinkType":Xt(e,"http://www.w3.org/1999/xlink","xlink:type",a);break;case"xmlBase":Xt(e,"http://www.w3.org/XML/1998/namespace","xml:base",a);break;case"xmlLang":Xt(e,"http://www.w3.org/XML/1998/namespace","xml:lang",a);break;case"xmlSpace":Xt(e,"http://www.w3.org/XML/1998/namespace","xml:space",a);break;case"is":va(e,"is",a);break;case"innerText":case"textContent":break;default:(!(2<n.length)||n[0]!=="o"&&n[0]!=="O"||n[1]!=="n"&&n[1]!=="N")&&(n=Ki.get(n)||n,va(e,n,a))}}function mu(e,t,n,a,i,r){switch(n){case"style":nc(e,a,r);break;case"dangerouslySetInnerHTML":if(a!=null){if(typeof a!="object"||!("__html"in a))throw Error(u(61));if(n=a.__html,n!=null){if(i.children!=null)throw Error(u(60));e.innerHTML=n}}break;case"children":typeof a=="string"?It(e,a):(typeof a=="number"||typeof a=="bigint")&&It(e,""+a);break;case"onScroll":a!=null&&Ue("scroll",e);break;case"onScrollEnd":a!=null&&Ue("scrollend",e);break;case"onClick":a!=null&&(e.onclick=Yn);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!ha.hasOwnProperty(n))e:{if(n[0]==="o"&&n[1]==="n"&&(i=n.endsWith("Capture"),t=n.slice(2,i?n.length-7:void 0),r=e[Bt]||null,r=r!=null?r[n]:null,typeof r=="function"&&e.removeEventListener(t,r,i),typeof a=="function")){typeof r!="function"&&r!==null&&(n in e?e[n]=null:e.hasAttribute(n)&&e.removeAttribute(n)),e.addEventListener(t,a,i);break e}n in e?e[n]=a:a===!0?e.setAttribute(n,""):va(e,n,a)}}}function Yt(e,t,n){switch(t){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Ue("error",e),Ue("load",e);var a=!1,i=!1,r;for(r in n)if(n.hasOwnProperty(r)){var d=n[r];if(d!=null)switch(r){case"src":a=!0;break;case"srcSet":i=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(u(137,t));default:tt(e,t,r,d,n,null)}}i&&tt(e,t,"srcSet",n.srcSet,n,null),a&&tt(e,t,"src",n.src,n,null);return;case"input":Ue("invalid",e);var v=r=d=i=null,j=null,w=null;for(a in n)if(n.hasOwnProperty(a)){var V=n[a];if(V!=null)switch(a){case"name":i=V;break;case"type":d=V;break;case"checked":j=V;break;case"defaultChecked":w=V;break;case"value":r=V;break;case"defaultValue":v=V;break;case"children":case"dangerouslySetInnerHTML":if(V!=null)throw Error(u(137,t));break;default:tt(e,t,a,V,n,null)}}ec(e,r,v,j,w,d,i,!1);return;case"select":Ue("invalid",e),a=d=r=null;for(i in n)if(n.hasOwnProperty(i)&&(v=n[i],v!=null))switch(i){case"value":r=v;break;case"defaultValue":d=v;break;case"multiple":a=v;default:tt(e,t,i,v,n,null)}t=r,n=d,e.multiple=!!a,t!=null?$a(e,!!a,t,!1):n!=null&&$a(e,!!a,n,!0);return;case"textarea":Ue("invalid",e),r=i=a=null;for(d in n)if(n.hasOwnProperty(d)&&(v=n[d],v!=null))switch(d){case"value":a=v;break;case"defaultValue":i=v;break;case"children":r=v;break;case"dangerouslySetInnerHTML":if(v!=null)throw Error(u(91));break;default:tt(e,t,d,v,n,null)}Yi(e,a,i,r);return;case"option":for(j in n)n.hasOwnProperty(j)&&(a=n[j],a!=null)&&(j==="selected"?e.selected=a&&typeof a!="function"&&typeof a!="symbol":tt(e,t,j,a,n,null));return;case"dialog":Ue("beforetoggle",e),Ue("toggle",e),Ue("cancel",e),Ue("close",e);break;case"iframe":case"object":Ue("load",e);break;case"video":case"audio":for(a=0;a<Ms.length;a++)Ue(Ms[a],e);break;case"image":Ue("error",e),Ue("load",e);break;case"details":Ue("toggle",e);break;case"embed":case"source":case"link":Ue("error",e),Ue("load",e);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(w in n)if(n.hasOwnProperty(w)&&(a=n[w],a!=null))switch(w){case"children":case"dangerouslySetInnerHTML":throw Error(u(137,t));default:tt(e,t,w,a,n,null)}return;default:if(_l(t)){for(V in n)n.hasOwnProperty(V)&&(a=n[V],a!==void 0&&mu(e,t,V,a,n,void 0));return}}for(v in n)n.hasOwnProperty(v)&&(a=n[v],a!=null&&tt(e,t,v,a,n,null))}function fy(e,t,n,a){switch(t){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var i=null,r=null,d=null,v=null,j=null,w=null,V=null;for(z in n){var Q=n[z];if(n.hasOwnProperty(z)&&Q!=null)switch(z){case"checked":break;case"value":break;case"defaultValue":j=Q;default:a.hasOwnProperty(z)||tt(e,t,z,null,a,Q)}}for(var R in a){var z=a[R];if(Q=n[R],a.hasOwnProperty(R)&&(z!=null||Q!=null))switch(R){case"type":r=z;break;case"name":i=z;break;case"checked":w=z;break;case"defaultChecked":V=z;break;case"value":d=z;break;case"defaultValue":v=z;break;case"children":case"dangerouslySetInnerHTML":if(z!=null)throw Error(u(137,t));break;default:z!==Q&&tt(e,t,R,z,a,Q)}}Vi(e,d,v,j,w,V,r,i);return;case"select":z=d=v=R=null;for(r in n)if(j=n[r],n.hasOwnProperty(r)&&j!=null)switch(r){case"value":break;case"multiple":z=j;default:a.hasOwnProperty(r)||tt(e,t,r,null,a,j)}for(i in a)if(r=a[i],j=n[i],a.hasOwnProperty(i)&&(r!=null||j!=null))switch(i){case"value":R=r;break;case"defaultValue":v=r;break;case"multiple":d=r;default:r!==j&&tt(e,t,i,r,a,j)}t=v,n=d,a=z,R!=null?$a(e,!!n,R,!1):!!a!=!!n&&(t!=null?$a(e,!!n,t,!0):$a(e,!!n,n?[]:"",!1));return;case"textarea":z=R=null;for(v in n)if(i=n[v],n.hasOwnProperty(v)&&i!=null&&!a.hasOwnProperty(v))switch(v){case"value":break;case"children":break;default:tt(e,t,v,null,a,i)}for(d in a)if(i=a[d],r=n[d],a.hasOwnProperty(d)&&(i!=null||r!=null))switch(d){case"value":R=i;break;case"defaultValue":z=i;break;case"children":break;case"dangerouslySetInnerHTML":if(i!=null)throw Error(u(91));break;default:i!==r&&tt(e,t,d,i,a,r)}Vn(e,R,z);return;case"option":for(var ue in n)R=n[ue],n.hasOwnProperty(ue)&&R!=null&&!a.hasOwnProperty(ue)&&(ue==="selected"?e.selected=!1:tt(e,t,ue,null,a,R));for(j in a)R=a[j],z=n[j],a.hasOwnProperty(j)&&R!==z&&(R!=null||z!=null)&&(j==="selected"?e.selected=R&&typeof R!="function"&&typeof R!="symbol":tt(e,t,j,R,a,z));return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var _e in n)R=n[_e],n.hasOwnProperty(_e)&&R!=null&&!a.hasOwnProperty(_e)&&tt(e,t,_e,null,a,R);for(w in a)if(R=a[w],z=n[w],a.hasOwnProperty(w)&&R!==z&&(R!=null||z!=null))switch(w){case"children":case"dangerouslySetInnerHTML":if(R!=null)throw Error(u(137,t));break;default:tt(e,t,w,R,a,z)}return;default:if(_l(t)){for(var nt in n)R=n[nt],n.hasOwnProperty(nt)&&R!==void 0&&!a.hasOwnProperty(nt)&&mu(e,t,nt,void 0,a,R);for(V in a)R=a[V],z=n[V],!a.hasOwnProperty(V)||R===z||R===void 0&&z===void 0||mu(e,t,V,R,a,z);return}}for(var C in n)R=n[C],n.hasOwnProperty(C)&&R!=null&&!a.hasOwnProperty(C)&&tt(e,t,C,null,a,R);for(Q in a)R=a[Q],z=n[Q],!a.hasOwnProperty(Q)||R===z||R==null&&z==null||tt(e,t,Q,R,a,z)}function Dh(e){switch(e){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function my(){if(typeof performance.getEntriesByType=="function"){for(var e=0,t=0,n=performance.getEntriesByType("resource"),a=0;a<n.length;a++){var i=n[a],r=i.transferSize,d=i.initiatorType,v=i.duration;if(r&&v&&Dh(d)){for(d=0,v=i.responseEnd,a+=1;a<n.length;a++){var j=n[a],w=j.startTime;if(w>v)break;var V=j.transferSize,Q=j.initiatorType;V&&Dh(Q)&&(j=j.responseEnd,d+=V*(j<v?1:(v-w)/(j-w)))}if(--a,t+=8*(r+d)/(i.duration/1e3),e++,10<e)break}}if(0<e)return t/e/1e6}return navigator.connection&&(e=navigator.connection.downlink,typeof e=="number")?e:5}var hu=null,pu=null;function Pc(e){return e.nodeType===9?e:e.ownerDocument}function Lh(e){switch(e){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function Oh(e,t){if(e===0)switch(t){case"svg":return 1;case"math":return 2;default:return 0}return e===1&&t==="foreignObject"?0:e}function vu(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.children=="bigint"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var gu=null;function hy(){var e=window.event;return e&&e.type==="popstate"?e===gu?!1:(gu=e,!0):(gu=null,!1)}var zh=typeof setTimeout=="function"?setTimeout:void 0,py=typeof clearTimeout=="function"?clearTimeout:void 0,Bh=typeof Promise=="function"?Promise:void 0,vy=typeof queueMicrotask=="function"?queueMicrotask:typeof Bh<"u"?function(e){return Bh.resolve(null).then(e).catch(gy)}:zh;function gy(e){setTimeout(function(){throw e})}function dl(e){return e==="head"}function qh(e,t){var n=t,a=0;do{var i=n.nextSibling;if(e.removeChild(n),i&&i.nodeType===8)if(n=i.data,n==="/$"||n==="/&"){if(a===0){e.removeChild(i),ki(t);return}a--}else if(n==="$"||n==="$?"||n==="$~"||n==="$!"||n==="&")a++;else if(n==="html")Es(e.ownerDocument.documentElement);else if(n==="head"){n=e.ownerDocument.head,Es(n);for(var r=n.firstChild;r;){var d=r.nextSibling,v=r.nodeName;r[ea]||v==="SCRIPT"||v==="STYLE"||v==="LINK"&&r.rel.toLowerCase()==="stylesheet"||n.removeChild(r),r=d}}else n==="body"&&Es(e.ownerDocument.body);n=i}while(n);ki(t)}function Hh(e,t){var n=e;e=0;do{var a=n.nextSibling;if(n.nodeType===1?t?(n._stashedDisplay=n.style.display,n.style.display="none"):(n.style.display=n._stashedDisplay||"",n.getAttribute("style")===""&&n.removeAttribute("style")):n.nodeType===3&&(t?(n._stashedText=n.nodeValue,n.nodeValue=""):n.nodeValue=n._stashedText||""),a&&a.nodeType===8)if(n=a.data,n==="/$"){if(e===0)break;e--}else n!=="$"&&n!=="$?"&&n!=="$~"&&n!=="$!"||e++;n=a}while(n)}function yu(e){var t=e.firstChild;for(t&&t.nodeType===10&&(t=t.nextSibling);t;){var n=t;switch(t=t.nextSibling,n.nodeName){case"HTML":case"HEAD":case"BODY":yu(n),Fl(n);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(n.rel.toLowerCase()==="stylesheet")continue}e.removeChild(n)}}function yy(e,t,n,a){for(;e.nodeType===1;){var i=n;if(e.nodeName.toLowerCase()!==t.toLowerCase()){if(!a&&(e.nodeName!=="INPUT"||e.type!=="hidden"))break}else if(a){if(!e[ea])switch(t){case"meta":if(!e.hasAttribute("itemprop"))break;return e;case"link":if(r=e.getAttribute("rel"),r==="stylesheet"&&e.hasAttribute("data-precedence"))break;if(r!==i.rel||e.getAttribute("href")!==(i.href==null||i.href===""?null:i.href)||e.getAttribute("crossorigin")!==(i.crossOrigin==null?null:i.crossOrigin)||e.getAttribute("title")!==(i.title==null?null:i.title))break;return e;case"style":if(e.hasAttribute("data-precedence"))break;return e;case"script":if(r=e.getAttribute("src"),(r!==(i.src==null?null:i.src)||e.getAttribute("type")!==(i.type==null?null:i.type)||e.getAttribute("crossorigin")!==(i.crossOrigin==null?null:i.crossOrigin))&&r&&e.hasAttribute("async")&&!e.hasAttribute("itemprop"))break;return e;default:return e}}else if(t==="input"&&e.type==="hidden"){var r=i.name==null?null:""+i.name;if(i.type==="hidden"&&e.getAttribute("name")===r)return e}else return e;if(e=zn(e.nextSibling),e===null)break}return null}function by(e,t,n){if(t==="")return null;for(;e.nodeType!==3;)if((e.nodeType!==1||e.nodeName!=="INPUT"||e.type!=="hidden")&&!n||(e=zn(e.nextSibling),e===null))return null;return e}function Uh(e,t){for(;e.nodeType!==8;)if((e.nodeType!==1||e.nodeName!=="INPUT"||e.type!=="hidden")&&!t||(e=zn(e.nextSibling),e===null))return null;return e}function bu(e){return e.data==="$?"||e.data==="$~"}function xu(e){return e.data==="$!"||e.data==="$?"&&e.ownerDocument.readyState!=="loading"}function xy(e,t){var n=e.ownerDocument;if(e.data==="$~")e._reactRetry=t;else if(e.data!=="$?"||n.readyState!=="loading")t();else{var a=function(){t(),n.removeEventListener("DOMContentLoaded",a)};n.addEventListener("DOMContentLoaded",a),e._reactRetry=a}}function zn(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?"||t==="$~"||t==="&"||t==="F!"||t==="F")break;if(t==="/$"||t==="/&")return null}}return e}var Su=null;function Gh(e){e=e.nextSibling;for(var t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="/$"||n==="/&"){if(t===0)return zn(e.nextSibling);t--}else n!=="$"&&n!=="$!"&&n!=="$?"&&n!=="$~"&&n!=="&"||t++}e=e.nextSibling}return null}function Vh(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="$"||n==="$!"||n==="$?"||n==="$~"||n==="&"){if(t===0)return e;t--}else n!=="/$"&&n!=="/&"||t++}e=e.previousSibling}return null}function Yh(e,t,n){switch(t=Pc(n),e){case"html":if(e=t.documentElement,!e)throw Error(u(452));return e;case"head":if(e=t.head,!e)throw Error(u(453));return e;case"body":if(e=t.body,!e)throw Error(u(454));return e;default:throw Error(u(451))}}function Es(e){for(var t=e.attributes;t.length;)e.removeAttributeNode(t[0]);Fl(e)}var Bn=new Map,Kh=new Set;function Zc(e){return typeof e.getRootNode=="function"?e.getRootNode():e.nodeType===9?e:e.ownerDocument}var Da=X.d;X.d={f:Sy,r:_y,D:jy,C:My,L:Ny,m:Ey,X:Cy,S:Ty,M:Ay};function Sy(){var e=Da.f(),t=Uc();return e||t}function _y(e){var t=Ft(e);t!==null&&t.tag===5&&t.type==="form"?cm(t):Da.r(e)}var Ci=typeof document>"u"?null:document;function Qh(e,t,n){var a=Ci;if(a&&typeof t=="string"&&t){var i=Ht(t);i='link[rel="'+e+'"][href="'+i+'"]',typeof n=="string"&&(i+='[crossorigin="'+n+'"]'),Kh.has(i)||(Kh.add(i),e={rel:e,crossOrigin:n,href:t},a.querySelector(i)===null&&(t=a.createElement("link"),Yt(t,"link",e),ot(t),a.head.appendChild(t)))}}function jy(e){Da.D(e),Qh("dns-prefetch",e,null)}function My(e,t){Da.C(e,t),Qh("preconnect",e,t)}function Ny(e,t,n){Da.L(e,t,n);var a=Ci;if(a&&e&&t){var i='link[rel="preload"][as="'+Ht(t)+'"]';t==="image"&&n&&n.imageSrcSet?(i+='[imagesrcset="'+Ht(n.imageSrcSet)+'"]',typeof n.imageSizes=="string"&&(i+='[imagesizes="'+Ht(n.imageSizes)+'"]')):i+='[href="'+Ht(e)+'"]';var r=i;switch(t){case"style":r=Ai(e);break;case"script":r=wi(e)}Bn.has(r)||(e=x({rel:"preload",href:t==="image"&&n&&n.imageSrcSet?void 0:e,as:t},n),Bn.set(r,e),a.querySelector(i)!==null||t==="style"&&a.querySelector(Ts(r))||t==="script"&&a.querySelector(Cs(r))||(t=a.createElement("link"),Yt(t,"link",e),ot(t),a.head.appendChild(t)))}}function Ey(e,t){Da.m(e,t);var n=Ci;if(n&&e){var a=t&&typeof t.as=="string"?t.as:"script",i='link[rel="modulepreload"][as="'+Ht(a)+'"][href="'+Ht(e)+'"]',r=i;switch(a){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":r=wi(e)}if(!Bn.has(r)&&(e=x({rel:"modulepreload",href:e},t),Bn.set(r,e),n.querySelector(i)===null)){switch(a){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(n.querySelector(Cs(r)))return}a=n.createElement("link"),Yt(a,"link",e),ot(a),n.head.appendChild(a)}}}function Ty(e,t,n){Da.S(e,t,n);var a=Ci;if(a&&e){var i=ta(a).hoistableStyles,r=Ai(e);t=t||"default";var d=i.get(r);if(!d){var v={loading:0,preload:null};if(d=a.querySelector(Ts(r)))v.loading=5;else{e=x({rel:"stylesheet",href:e,"data-precedence":t},n),(n=Bn.get(r))&&_u(e,n);var j=d=a.createElement("link");ot(j),Yt(j,"link",e),j._p=new Promise(function(w,V){j.onload=w,j.onerror=V}),j.addEventListener("load",function(){v.loading|=1}),j.addEventListener("error",function(){v.loading|=2}),v.loading|=4,Jc(d,t,a)}d={type:"stylesheet",instance:d,count:1,state:v},i.set(r,d)}}}function Cy(e,t){Da.X(e,t);var n=Ci;if(n&&e){var a=ta(n).hoistableScripts,i=wi(e),r=a.get(i);r||(r=n.querySelector(Cs(i)),r||(e=x({src:e,async:!0},t),(t=Bn.get(i))&&ju(e,t),r=n.createElement("script"),ot(r),Yt(r,"link",e),n.head.appendChild(r)),r={type:"script",instance:r,count:1,state:null},a.set(i,r))}}function Ay(e,t){Da.M(e,t);var n=Ci;if(n&&e){var a=ta(n).hoistableScripts,i=wi(e),r=a.get(i);r||(r=n.querySelector(Cs(i)),r||(e=x({src:e,async:!0,type:"module"},t),(t=Bn.get(i))&&ju(e,t),r=n.createElement("script"),ot(r),Yt(r,"link",e),n.head.appendChild(r)),r={type:"script",instance:r,count:1,state:null},a.set(i,r))}}function $h(e,t,n,a){var i=(i=I.current)?Zc(i):null;if(!i)throw Error(u(446));switch(e){case"meta":case"title":return null;case"style":return typeof n.precedence=="string"&&typeof n.href=="string"?(t=Ai(n.href),n=ta(i).hoistableStyles,a=n.get(t),a||(a={type:"style",instance:null,count:0,state:null},n.set(t,a)),a):{type:"void",instance:null,count:0,state:null};case"link":if(n.rel==="stylesheet"&&typeof n.href=="string"&&typeof n.precedence=="string"){e=Ai(n.href);var r=ta(i).hoistableStyles,d=r.get(e);if(d||(i=i.ownerDocument||i,d={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},r.set(e,d),(r=i.querySelector(Ts(e)))&&!r._p&&(d.instance=r,d.state.loading=5),Bn.has(e)||(n={rel:"preload",as:"style",href:n.href,crossOrigin:n.crossOrigin,integrity:n.integrity,media:n.media,hrefLang:n.hrefLang,referrerPolicy:n.referrerPolicy},Bn.set(e,n),r||wy(i,e,n,d.state))),t&&a===null)throw Error(u(528,""));return d}if(t&&a!==null)throw Error(u(529,""));return null;case"script":return t=n.async,n=n.src,typeof n=="string"&&t&&typeof t!="function"&&typeof t!="symbol"?(t=wi(n),n=ta(i).hoistableScripts,a=n.get(t),a||(a={type:"script",instance:null,count:0,state:null},n.set(t,a)),a):{type:"void",instance:null,count:0,state:null};default:throw Error(u(444,e))}}function Ai(e){return'href="'+Ht(e)+'"'}function Ts(e){return'link[rel="stylesheet"]['+e+"]"}function Xh(e){return x({},e,{"data-precedence":e.precedence,precedence:null})}function wy(e,t,n,a){e.querySelector('link[rel="preload"][as="style"]['+t+"]")?a.loading=1:(t=e.createElement("link"),a.preload=t,t.addEventListener("load",function(){return a.loading|=1}),t.addEventListener("error",function(){return a.loading|=2}),Yt(t,"link",n),ot(t),e.head.appendChild(t))}function wi(e){return'[src="'+Ht(e)+'"]'}function Cs(e){return"script[async]"+e}function Ph(e,t,n){if(t.count++,t.instance===null)switch(t.type){case"style":var a=e.querySelector('style[data-href~="'+Ht(n.href)+'"]');if(a)return t.instance=a,ot(a),a;var i=x({},n,{"data-href":n.href,"data-precedence":n.precedence,href:null,precedence:null});return a=(e.ownerDocument||e).createElement("style"),ot(a),Yt(a,"style",i),Jc(a,n.precedence,e),t.instance=a;case"stylesheet":i=Ai(n.href);var r=e.querySelector(Ts(i));if(r)return t.state.loading|=4,t.instance=r,ot(r),r;a=Xh(n),(i=Bn.get(i))&&_u(a,i),r=(e.ownerDocument||e).createElement("link"),ot(r);var d=r;return d._p=new Promise(function(v,j){d.onload=v,d.onerror=j}),Yt(r,"link",a),t.state.loading|=4,Jc(r,n.precedence,e),t.instance=r;case"script":return r=wi(n.src),(i=e.querySelector(Cs(r)))?(t.instance=i,ot(i),i):(a=n,(i=Bn.get(r))&&(a=x({},n),ju(a,i)),e=e.ownerDocument||e,i=e.createElement("script"),ot(i),Yt(i,"link",a),e.head.appendChild(i),t.instance=i);case"void":return null;default:throw Error(u(443,t.type))}else t.type==="stylesheet"&&(t.state.loading&4)===0&&(a=t.instance,t.state.loading|=4,Jc(a,n.precedence,e));return t.instance}function Jc(e,t,n){for(var a=n.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),i=a.length?a[a.length-1]:null,r=i,d=0;d<a.length;d++){var v=a[d];if(v.dataset.precedence===t)r=v;else if(r!==i)break}r?r.parentNode.insertBefore(e,r.nextSibling):(t=n.nodeType===9?n.head:n,t.insertBefore(e,t.firstChild))}function _u(e,t){e.crossOrigin==null&&(e.crossOrigin=t.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=t.referrerPolicy),e.title==null&&(e.title=t.title)}function ju(e,t){e.crossOrigin==null&&(e.crossOrigin=t.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=t.referrerPolicy),e.integrity==null&&(e.integrity=t.integrity)}var Fc=null;function Zh(e,t,n){if(Fc===null){var a=new Map,i=Fc=new Map;i.set(n,a)}else i=Fc,a=i.get(n),a||(a=new Map,i.set(n,a));if(a.has(e))return a;for(a.set(e,null),n=n.getElementsByTagName(e),i=0;i<n.length;i++){var r=n[i];if(!(r[ea]||r[At]||e==="link"&&r.getAttribute("rel")==="stylesheet")&&r.namespaceURI!=="http://www.w3.org/2000/svg"){var d=r.getAttribute(t)||"";d=e+d;var v=a.get(d);v?v.push(r):a.set(d,[r])}}return a}function Jh(e,t,n){e=e.ownerDocument||e,e.head.insertBefore(n,t==="title"?e.querySelector("head > title"):null)}function ky(e,t,n){if(n===1||t.itemProp!=null)return!1;switch(e){case"meta":case"title":return!0;case"style":if(typeof t.precedence!="string"||typeof t.href!="string"||t.href==="")break;return!0;case"link":if(typeof t.rel!="string"||typeof t.href!="string"||t.href===""||t.onLoad||t.onError)break;return t.rel==="stylesheet"?(e=t.disabled,typeof t.precedence=="string"&&e==null):!0;case"script":if(t.async&&typeof t.async!="function"&&typeof t.async!="symbol"&&!t.onLoad&&!t.onError&&t.src&&typeof t.src=="string")return!0}return!1}function Fh(e){return!(e.type==="stylesheet"&&(e.state.loading&3)===0)}function Ry(e,t,n,a){if(n.type==="stylesheet"&&(typeof a.media!="string"||matchMedia(a.media).matches!==!1)&&(n.state.loading&4)===0){if(n.instance===null){var i=Ai(a.href),r=t.querySelector(Ts(i));if(r){t=r._p,t!==null&&typeof t=="object"&&typeof t.then=="function"&&(e.count++,e=Ic.bind(e),t.then(e,e)),n.state.loading|=4,n.instance=r,ot(r);return}r=t.ownerDocument||t,a=Xh(a),(i=Bn.get(i))&&_u(a,i),r=r.createElement("link"),ot(r);var d=r;d._p=new Promise(function(v,j){d.onload=v,d.onerror=j}),Yt(r,"link",a),n.instance=r}e.stylesheets===null&&(e.stylesheets=new Map),e.stylesheets.set(n,t),(t=n.state.preload)&&(n.state.loading&3)===0&&(e.count++,n=Ic.bind(e),t.addEventListener("load",n),t.addEventListener("error",n))}}var Mu=0;function Dy(e,t){return e.stylesheets&&e.count===0&&er(e,e.stylesheets),0<e.count||0<e.imgCount?function(n){var a=setTimeout(function(){if(e.stylesheets&&er(e,e.stylesheets),e.unsuspend){var r=e.unsuspend;e.unsuspend=null,r()}},6e4+t);0<e.imgBytes&&Mu===0&&(Mu=62500*my());var i=setTimeout(function(){if(e.waitingForImages=!1,e.count===0&&(e.stylesheets&&er(e,e.stylesheets),e.unsuspend)){var r=e.unsuspend;e.unsuspend=null,r()}},(e.imgBytes>Mu?50:800)+t);return e.unsuspend=n,function(){e.unsuspend=null,clearTimeout(a),clearTimeout(i)}}:null}function Ic(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)er(this,this.stylesheets);else if(this.unsuspend){var e=this.unsuspend;this.unsuspend=null,e()}}}var Wc=null;function er(e,t){e.stylesheets=null,e.unsuspend!==null&&(e.count++,Wc=new Map,t.forEach(Ly,e),Wc=null,Ic.call(e))}function Ly(e,t){if(!(t.state.loading&4)){var n=Wc.get(e);if(n)var a=n.get(null);else{n=new Map,Wc.set(e,n);for(var i=e.querySelectorAll("link[data-precedence],style[data-precedence]"),r=0;r<i.length;r++){var d=i[r];(d.nodeName==="LINK"||d.getAttribute("media")!=="not all")&&(n.set(d.dataset.precedence,d),a=d)}a&&n.set(null,a)}i=t.instance,d=i.getAttribute("data-precedence"),r=n.get(d)||a,r===a&&n.set(null,i),n.set(d,i),this.count++,a=Ic.bind(this),i.addEventListener("load",a),i.addEventListener("error",a),r?r.parentNode.insertBefore(i,r.nextSibling):(e=e.nodeType===9?e.head:e,e.insertBefore(i,e.firstChild)),t.state.loading|=4}}var As={$$typeof:ee,Provider:null,Consumer:null,_currentValue:W,_currentValue2:W,_threadCount:0};function Oy(e,t,n,a,i,r,d,v,j){this.tag=1,this.containerInfo=e,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Un(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Un(0),this.hiddenUpdates=Un(null),this.identifierPrefix=a,this.onUncaughtError=i,this.onCaughtError=r,this.onRecoverableError=d,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=j,this.incompleteTransitions=new Map}function Ih(e,t,n,a,i,r,d,v,j,w,V,Q){return e=new Oy(e,t,n,d,j,w,V,Q,v),t=1,r===!0&&(t|=24),r=yn(3,null,null,t),e.current=r,r.stateNode=e,t=no(),t.refCount++,e.pooledCache=t,t.refCount++,r.memoizedState={element:a,isDehydrated:n,cache:t},so(r),e}function Wh(e){return e?(e=ci,e):ci}function ep(e,t,n,a,i,r){i=Wh(i),a.context===null?a.context=i:a.pendingContext=i,a=el(t),a.payload={element:n},r=r===void 0?null:r,r!==null&&(a.callback=r),n=tl(e,a,t),n!==null&&(dn(n,e,t),cs(n,e,t))}function tp(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var n=e.retryLane;e.retryLane=n!==0&&n<t?n:t}}function Nu(e,t){tp(e,t),(e=e.alternate)&&tp(e,t)}function np(e){if(e.tag===13||e.tag===31){var t=Al(e,67108864);t!==null&&dn(t,e,67108864),Nu(e,67108864)}}function ap(e){if(e.tag===13||e.tag===31){var t=jn();t=Ya(t);var n=Al(e,t);n!==null&&dn(n,e,t),Nu(e,t)}}var tr=!0;function zy(e,t,n,a){var i=E.T;E.T=null;var r=X.p;try{X.p=2,Eu(e,t,n,a)}finally{X.p=r,E.T=i}}function By(e,t,n,a){var i=E.T;E.T=null;var r=X.p;try{X.p=8,Eu(e,t,n,a)}finally{X.p=r,E.T=i}}function Eu(e,t,n,a){if(tr){var i=Tu(a);if(i===null)fu(e,t,a,nr,n),ip(e,a);else if(Hy(i,e,t,n,a))a.stopPropagation();else if(ip(e,a),t&4&&-1<qy.indexOf(e)){for(;i!==null;){var r=Ft(i);if(r!==null)switch(r.tag){case 3:if(r=r.stateNode,r.current.memoizedState.isDehydrated){var d=yt(r.pendingLanes);if(d!==0){var v=r;for(v.pendingLanes|=2,v.entangledLanes|=2;d;){var j=1<<31-gt(d);v.entanglements[1]|=j,d&=~j}sa(r),(Ze&6)===0&&(qc=lt()+500,js(0))}}break;case 31:case 13:v=Al(r,2),v!==null&&dn(v,r,2),Uc(),Nu(r,2)}if(r=Tu(a),r===null&&fu(e,t,a,nr,n),r===i)break;i=r}i!==null&&a.stopPropagation()}else fu(e,t,a,null,n)}}function Tu(e){return e=na(e),Cu(e)}var nr=null;function Cu(e){if(nr=null,e=ma(e),e!==null){var t=m(e);if(t===null)e=null;else{var n=t.tag;if(n===13){if(e=h(t),e!==null)return e;e=null}else if(n===31){if(e=y(t),e!==null)return e;e=null}else if(n===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null)}}return nr=e,null}function lp(e){switch(e){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(tn()){case Tn:return 2;case nn:return 8;case O:case Z:return 32;case Te:return 268435456;default:return 32}default:return 32}}var Au=!1,fl=null,ml=null,hl=null,ws=new Map,ks=new Map,pl=[],qy="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function ip(e,t){switch(e){case"focusin":case"focusout":fl=null;break;case"dragenter":case"dragleave":ml=null;break;case"mouseover":case"mouseout":hl=null;break;case"pointerover":case"pointerout":ws.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":ks.delete(t.pointerId)}}function Rs(e,t,n,a,i,r){return e===null||e.nativeEvent!==r?(e={blockedOn:t,domEventName:n,eventSystemFlags:a,nativeEvent:r,targetContainers:[i]},t!==null&&(t=Ft(t),t!==null&&np(t)),e):(e.eventSystemFlags|=a,t=e.targetContainers,i!==null&&t.indexOf(i)===-1&&t.push(i),e)}function Hy(e,t,n,a,i){switch(t){case"focusin":return fl=Rs(fl,e,t,n,a,i),!0;case"dragenter":return ml=Rs(ml,e,t,n,a,i),!0;case"mouseover":return hl=Rs(hl,e,t,n,a,i),!0;case"pointerover":var r=i.pointerId;return ws.set(r,Rs(ws.get(r)||null,e,t,n,a,i)),!0;case"gotpointercapture":return r=i.pointerId,ks.set(r,Rs(ks.get(r)||null,e,t,n,a,i)),!0}return!1}function sp(e){var t=ma(e.target);if(t!==null){var n=m(t);if(n!==null){if(t=n.tag,t===13){if(t=h(n),t!==null){e.blockedOn=t,Jl(e.priority,function(){ap(n)});return}}else if(t===31){if(t=y(n),t!==null){e.blockedOn=t,Jl(e.priority,function(){ap(n)});return}}else if(t===3&&n.stateNode.current.memoizedState.isDehydrated){e.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}e.blockedOn=null}function ar(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var n=Tu(e.nativeEvent);if(n===null){n=e.nativeEvent;var a=new n.constructor(n.type,n);ti=a,n.target.dispatchEvent(a),ti=null}else return t=Ft(n),t!==null&&np(t),e.blockedOn=n,!1;t.shift()}return!0}function cp(e,t,n){ar(e)&&n.delete(t)}function Uy(){Au=!1,fl!==null&&ar(fl)&&(fl=null),ml!==null&&ar(ml)&&(ml=null),hl!==null&&ar(hl)&&(hl=null),ws.forEach(cp),ks.forEach(cp)}function lr(e,t){e.blockedOn===t&&(e.blockedOn=null,Au||(Au=!0,l.unstable_scheduleCallback(l.unstable_NormalPriority,Uy)))}var ir=null;function rp(e){ir!==e&&(ir=e,l.unstable_scheduleCallback(l.unstable_NormalPriority,function(){ir===e&&(ir=null);for(var t=0;t<e.length;t+=3){var n=e[t],a=e[t+1],i=e[t+2];if(typeof a!="function"){if(Cu(a||n)===null)continue;break}var r=Ft(n);r!==null&&(e.splice(t,3),t-=3,To(r,{pending:!0,data:i,method:n.method,action:a},a,i))}}))}function ki(e){function t(j){return lr(j,e)}fl!==null&&lr(fl,e),ml!==null&&lr(ml,e),hl!==null&&lr(hl,e),ws.forEach(t),ks.forEach(t);for(var n=0;n<pl.length;n++){var a=pl[n];a.blockedOn===e&&(a.blockedOn=null)}for(;0<pl.length&&(n=pl[0],n.blockedOn===null);)sp(n),n.blockedOn===null&&pl.shift();if(n=(e.ownerDocument||e).$$reactFormReplay,n!=null)for(a=0;a<n.length;a+=3){var i=n[a],r=n[a+1],d=i[Bt]||null;if(typeof r=="function")d||rp(n);else if(d){var v=null;if(r&&r.hasAttribute("formAction")){if(i=r,d=r[Bt]||null)v=d.formAction;else if(Cu(i)!==null)continue}else v=d.action;typeof v=="function"?n[a+1]=v:(n.splice(a,3),a-=3),rp(n)}}}function op(){function e(r){r.canIntercept&&r.info==="react-transition"&&r.intercept({handler:function(){return new Promise(function(d){return i=d})},focusReset:"manual",scroll:"manual"})}function t(){i!==null&&(i(),i=null),a||setTimeout(n,20)}function n(){if(!a&&!navigation.transition){var r=navigation.currentEntry;r&&r.url!=null&&navigation.navigate(r.url,{state:r.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var a=!1,i=null;return navigation.addEventListener("navigate",e),navigation.addEventListener("navigatesuccess",t),navigation.addEventListener("navigateerror",t),setTimeout(n,100),function(){a=!0,navigation.removeEventListener("navigate",e),navigation.removeEventListener("navigatesuccess",t),navigation.removeEventListener("navigateerror",t),i!==null&&(i(),i=null)}}}function wu(e){this._internalRoot=e}sr.prototype.render=wu.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(u(409));var n=t.current,a=jn();ep(n,a,e,t,null,null)},sr.prototype.unmount=wu.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;ep(e.current,2,null,e,null,null),Uc(),t[mn]=null}};function sr(e){this._internalRoot=e}sr.prototype.unstable_scheduleHydration=function(e){if(e){var t=Zl();e={blockedOn:null,target:e,priority:t};for(var n=0;n<pl.length&&t!==0&&t<pl[n].priority;n++);pl.splice(n,0,e),n===0&&sp(e)}};var up=c.version;if(up!=="19.2.4")throw Error(u(527,up,"19.2.4"));X.findDOMNode=function(e){var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(u(188)):(e=Object.keys(e).join(","),Error(u(268,e)));return e=g(t),e=e!==null?S(e):null,e=e===null?null:e.stateNode,e};var Gy={bundleType:0,version:"19.2.4",rendererPackageName:"react-dom",currentDispatcherRef:E,reconcilerVersion:"19.2.4"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var cr=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!cr.isDisabled&&cr.supportsFiber)try{Jt=cr.inject(Gy),Ie=cr}catch{}}return Ls.createRoot=function(e,t){if(!f(e))throw Error(u(299));var n=!1,a="",i=gm,r=ym,d=bm;return t!=null&&(t.unstable_strictMode===!0&&(n=!0),t.identifierPrefix!==void 0&&(a=t.identifierPrefix),t.onUncaughtError!==void 0&&(i=t.onUncaughtError),t.onCaughtError!==void 0&&(r=t.onCaughtError),t.onRecoverableError!==void 0&&(d=t.onRecoverableError)),t=Ih(e,1,!1,null,null,n,a,null,i,r,d,op),e[mn]=t.current,du(e),new wu(t)},Ls.hydrateRoot=function(e,t,n){if(!f(e))throw Error(u(299));var a=!1,i="",r=gm,d=ym,v=bm,j=null;return n!=null&&(n.unstable_strictMode===!0&&(a=!0),n.identifierPrefix!==void 0&&(i=n.identifierPrefix),n.onUncaughtError!==void 0&&(r=n.onUncaughtError),n.onCaughtError!==void 0&&(d=n.onCaughtError),n.onRecoverableError!==void 0&&(v=n.onRecoverableError),n.formState!==void 0&&(j=n.formState)),t=Ih(e,1,!0,t,n??null,a,i,j,r,d,v,op),t.context=Wh(null),n=t.current,a=jn(),a=Ya(a),i=el(a),i.callback=null,tl(n,i,a),n=a,t.current.lanes=n,$t(t,n),sa(t),e[mn]=t.current,du(e),new sr(t)},Ls.version="19.2.4",Ls}var xp;function Iy(){if(xp)return Du.exports;xp=1;function l(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(l)}catch(c){console.error(c)}}return l(),Du.exports=Fy(),Du.exports}var Wy=Iy();const eb=Jp(Wy);var Sp="popstate";function _p(l){return typeof l=="object"&&l!=null&&"pathname"in l&&"search"in l&&"hash"in l&&"state"in l&&"key"in l}function tb(l={}){function c(u,f){let m=f.state?.masked,{pathname:h,search:y,hash:b}=m||u.location;return nd("",{pathname:h,search:y,hash:b},f.state&&f.state.usr||null,f.state&&f.state.key||"default",m?{pathname:u.location.pathname,search:u.location.search,hash:u.location.hash}:void 0)}function o(u,f){return typeof f=="string"?f:Us(f)}return ab(c,o,null,l)}function Dt(l,c){if(l===!1||l===null||typeof l>"u")throw new Error(c)}function In(l,c){if(!l){typeof console<"u"&&console.warn(c);try{throw new Error(c)}catch{}}}function nb(){return Math.random().toString(36).substring(2,10)}function jp(l,c){return{usr:l.state,key:l.key,idx:c,masked:l.unstable_mask?{pathname:l.pathname,search:l.search,hash:l.hash}:void 0}}function nd(l,c,o=null,u,f){return{pathname:typeof l=="string"?l:l.pathname,search:"",hash:"",...typeof c=="string"?Qs(c):c,state:o,key:c&&c.key||u||nb(),unstable_mask:f}}function Us({pathname:l="/",search:c="",hash:o=""}){return c&&c!=="?"&&(l+=c.charAt(0)==="?"?c:"?"+c),o&&o!=="#"&&(l+=o.charAt(0)==="#"?o:"#"+o),l}function Qs(l){let c={};if(l){let o=l.indexOf("#");o>=0&&(c.hash=l.substring(o),l=l.substring(0,o));let u=l.indexOf("?");u>=0&&(c.search=l.substring(u),l=l.substring(0,u)),l&&(c.pathname=l)}return c}function ab(l,c,o,u={}){let{window:f=document.defaultView,v5Compat:m=!1}=u,h=f.history,y="POP",b=null,g=S();g==null&&(g=0,h.replaceState({...h.state,idx:g},""));function S(){return(h.state||{idx:null}).idx}function x(){y="POP";let k=S(),$=k==null?null:k-g;g=k,b&&b({action:y,location:U.location,delta:$})}function L(k,$){y="PUSH";let F=_p(k)?k:nd(U.location,k,$);g=S()+1;let ee=jp(F,g),de=U.createHref(F.unstable_mask||F);try{h.pushState(ee,"",de)}catch(be){if(be instanceof DOMException&&be.name==="DataCloneError")throw be;f.location.assign(de)}m&&b&&b({action:y,location:U.location,delta:1})}function H(k,$){y="REPLACE";let F=_p(k)?k:nd(U.location,k,$);g=S();let ee=jp(F,g),de=U.createHref(F.unstable_mask||F);h.replaceState(ee,"",de),m&&b&&b({action:y,location:U.location,delta:0})}function D(k){return lb(k)}let U={get action(){return y},get location(){return l(f,h)},listen(k){if(b)throw new Error("A history only accepts one active listener");return f.addEventListener(Sp,x),b=k,()=>{f.removeEventListener(Sp,x),b=null}},createHref(k){return c(f,k)},createURL:D,encodeLocation(k){let $=D(k);return{pathname:$.pathname,search:$.search,hash:$.hash}},push:L,replace:H,go(k){return h.go(k)}};return U}function lb(l,c=!1){let o="http://localhost";typeof window<"u"&&(o=window.location.origin!=="null"?window.location.origin:window.location.href),Dt(o,"No window.location.(origin|href) available to create URL");let u=typeof l=="string"?l:Us(l);return u=u.replace(/ $/,"%20"),!c&&u.startsWith("//")&&(u=o+u),new URL(u,o)}function Fp(l,c,o="/"){return ib(l,c,o,!1)}function ib(l,c,o,u){let f=typeof c=="string"?Qs(c):c,m=qa(f.pathname||"/",o);if(m==null)return null;let h=Ip(l);sb(h);let y=null;for(let b=0;y==null&&b<h.length;++b){let g=gb(m);y=pb(h[b],g,u)}return y}function Ip(l,c=[],o=[],u="",f=!1){let m=(h,y,b=f,g)=>{let S={relativePath:g===void 0?h.path||"":g,caseSensitive:h.caseSensitive===!0,childrenIndex:y,route:h};if(S.relativePath.startsWith("/")){if(!S.relativePath.startsWith(u)&&b)return;Dt(S.relativePath.startsWith(u),`Absolute route path "${S.relativePath}" nested under path "${u}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),S.relativePath=S.relativePath.slice(u.length)}let x=ca([u,S.relativePath]),L=o.concat(S);h.children&&h.children.length>0&&(Dt(h.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${x}".`),Ip(h.children,c,L,x,b)),!(h.path==null&&!h.index)&&c.push({path:x,score:mb(x,h.index),routesMeta:L})};return l.forEach((h,y)=>{if(h.path===""||!h.path?.includes("?"))m(h,y);else for(let b of Wp(h.path))m(h,y,!0,b)}),c}function Wp(l){let c=l.split("/");if(c.length===0)return[];let[o,...u]=c,f=o.endsWith("?"),m=o.replace(/\?$/,"");if(u.length===0)return f?[m,""]:[m];let h=Wp(u.join("/")),y=[];return y.push(...h.map(b=>b===""?m:[m,b].join("/"))),f&&y.push(...h),y.map(b=>l.startsWith("/")&&b===""?"/":b)}function sb(l){l.sort((c,o)=>c.score!==o.score?o.score-c.score:hb(c.routesMeta.map(u=>u.childrenIndex),o.routesMeta.map(u=>u.childrenIndex)))}var cb=/^:[\w-]+$/,rb=3,ob=2,ub=1,db=10,fb=-2,Mp=l=>l==="*";function mb(l,c){let o=l.split("/"),u=o.length;return o.some(Mp)&&(u+=fb),c&&(u+=ob),o.filter(f=>!Mp(f)).reduce((f,m)=>f+(cb.test(m)?rb:m===""?ub:db),u)}function hb(l,c){return l.length===c.length&&l.slice(0,-1).every((u,f)=>u===c[f])?l[l.length-1]-c[c.length-1]:0}function pb(l,c,o=!1){let{routesMeta:u}=l,f={},m="/",h=[];for(let y=0;y<u.length;++y){let b=u[y],g=y===u.length-1,S=m==="/"?c:c.slice(m.length)||"/",x=yr({path:b.relativePath,caseSensitive:b.caseSensitive,end:g},S),L=b.route;if(!x&&g&&o&&!u[u.length-1].route.index&&(x=yr({path:b.relativePath,caseSensitive:b.caseSensitive,end:!1},S)),!x)return null;Object.assign(f,x.params),h.push({params:f,pathname:ca([m,x.pathname]),pathnameBase:Sb(ca([m,x.pathnameBase])),route:L}),x.pathnameBase!=="/"&&(m=ca([m,x.pathnameBase]))}return h}function yr(l,c){typeof l=="string"&&(l={path:l,caseSensitive:!1,end:!0});let[o,u]=vb(l.path,l.caseSensitive,l.end),f=c.match(o);if(!f)return null;let m=f[0],h=m.replace(/(.)\/+$/,"$1"),y=f.slice(1);return{params:u.reduce((g,{paramName:S,isOptional:x},L)=>{if(S==="*"){let D=y[L]||"";h=m.slice(0,m.length-D.length).replace(/(.)\/+$/,"$1")}const H=y[L];return x&&!H?g[S]=void 0:g[S]=(H||"").replace(/%2F/g,"/"),g},{}),pathname:m,pathnameBase:h,pattern:l}}function vb(l,c=!1,o=!0){In(l==="*"||!l.endsWith("*")||l.endsWith("/*"),`Route path "${l}" will be treated as if it were "${l.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${l.replace(/\*$/,"/*")}".`);let u=[],f="^"+l.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(h,y,b,g,S)=>{if(u.push({paramName:y,isOptional:b!=null}),b){let x=S.charAt(g+h.length);return x&&x!=="/"?"/([^\\/]*)":"(?:/([^\\/]*))?"}return"/([^\\/]+)"}).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return l.endsWith("*")?(u.push({paramName:"*"}),f+=l==="*"||l==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):o?f+="\\/*$":l!==""&&l!=="/"&&(f+="(?:(?=\\/|$))"),[new RegExp(f,c?void 0:"i"),u]}function gb(l){try{return l.split("/").map(c=>decodeURIComponent(c).replace(/\//g,"%2F")).join("/")}catch(c){return In(!1,`The URL path "${l}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${c}).`),l}}function qa(l,c){if(c==="/")return l;if(!l.toLowerCase().startsWith(c.toLowerCase()))return null;let o=c.endsWith("/")?c.length-1:c.length,u=l.charAt(o);return u&&u!=="/"?null:l.slice(o)||"/"}var yb=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i;function bb(l,c="/"){let{pathname:o,search:u="",hash:f=""}=typeof l=="string"?Qs(l):l,m;return o?(o=o.replace(/\/\/+/g,"/"),o.startsWith("/")?m=Np(o.substring(1),"/"):m=Np(o,c)):m=c,{pathname:m,search:_b(u),hash:jb(f)}}function Np(l,c){let o=c.replace(/\/+$/,"").split("/");return l.split("/").forEach(f=>{f===".."?o.length>1&&o.pop():f!=="."&&o.push(f)}),o.length>1?o.join("/"):"/"}function Bu(l,c,o,u){return`Cannot include a '${l}' character in a manually specified \`to.${c}\` field [${JSON.stringify(u)}].  Please separate it out to the \`to.${o}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function xb(l){return l.filter((c,o)=>o===0||c.route.path&&c.route.path.length>0)}function ev(l){let c=xb(l);return c.map((o,u)=>u===c.length-1?o.pathname:o.pathnameBase)}function pd(l,c,o,u=!1){let f;typeof l=="string"?f=Qs(l):(f={...l},Dt(!f.pathname||!f.pathname.includes("?"),Bu("?","pathname","search",f)),Dt(!f.pathname||!f.pathname.includes("#"),Bu("#","pathname","hash",f)),Dt(!f.search||!f.search.includes("#"),Bu("#","search","hash",f)));let m=l===""||f.pathname==="",h=m?"/":f.pathname,y;if(h==null)y=o;else{let x=c.length-1;if(!u&&h.startsWith("..")){let L=h.split("/");for(;L[0]==="..";)L.shift(),x-=1;f.pathname=L.join("/")}y=x>=0?c[x]:"/"}let b=bb(f,y),g=h&&h!=="/"&&h.endsWith("/"),S=(m||h===".")&&o.endsWith("/");return!b.pathname.endsWith("/")&&(g||S)&&(b.pathname+="/"),b}var ca=l=>l.join("/").replace(/\/\/+/g,"/"),Sb=l=>l.replace(/\/+$/,"").replace(/^\/*/,"/"),_b=l=>!l||l==="?"?"":l.startsWith("?")?l:"?"+l,jb=l=>!l||l==="#"?"":l.startsWith("#")?l:"#"+l,Mb=class{constructor(l,c,o,u=!1){this.status=l,this.statusText=c||"",this.internal=u,o instanceof Error?(this.data=o.toString(),this.error=o):this.data=o}};function Nb(l){return l!=null&&typeof l.status=="number"&&typeof l.statusText=="string"&&typeof l.internal=="boolean"&&"data"in l}function Eb(l){return l.map(c=>c.route.path).filter(Boolean).join("/").replace(/\/\/*/g,"/")||"/"}var tv=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";function nv(l,c){let o=l;if(typeof o!="string"||!yb.test(o))return{absoluteURL:void 0,isExternal:!1,to:o};let u=o,f=!1;if(tv)try{let m=new URL(window.location.href),h=o.startsWith("//")?new URL(m.protocol+o):new URL(o),y=qa(h.pathname,c);h.origin===m.origin&&y!=null?o=y+h.search+h.hash:f=!0}catch{In(!1,`<Link to="${o}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}return{absoluteURL:u,isExternal:f,to:o}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");var av=["POST","PUT","PATCH","DELETE"];new Set(av);var Tb=["GET",...av];new Set(Tb);var qi=p.createContext(null);qi.displayName="DataRouter";var Er=p.createContext(null);Er.displayName="DataRouterState";var Cb=p.createContext(!1),lv=p.createContext({isTransitioning:!1});lv.displayName="ViewTransition";var Ab=p.createContext(new Map);Ab.displayName="Fetchers";var wb=p.createContext(null);wb.displayName="Await";var qn=p.createContext(null);qn.displayName="Navigation";var Tr=p.createContext(null);Tr.displayName="Location";var Ua=p.createContext({outlet:null,matches:[],isDataRoute:!1});Ua.displayName="Route";var vd=p.createContext(null);vd.displayName="RouteError";var iv="REACT_ROUTER_ERROR",kb="REDIRECT",Rb="ROUTE_ERROR_RESPONSE";function Db(l){if(l.startsWith(`${iv}:${kb}:{`))try{let c=JSON.parse(l.slice(28));if(typeof c=="object"&&c&&typeof c.status=="number"&&typeof c.statusText=="string"&&typeof c.location=="string"&&typeof c.reloadDocument=="boolean"&&typeof c.replace=="boolean")return c}catch{}}function Lb(l){if(l.startsWith(`${iv}:${Rb}:{`))try{let c=JSON.parse(l.slice(40));if(typeof c=="object"&&c&&typeof c.status=="number"&&typeof c.statusText=="string")return new Mb(c.status,c.statusText,c.data)}catch{}}function Ob(l,{relative:c}={}){Dt($s(),"useHref() may be used only in the context of a <Router> component.");let{basename:o,navigator:u}=p.useContext(qn),{hash:f,pathname:m,search:h}=Ps(l,{relative:c}),y=m;return o!=="/"&&(y=m==="/"?o:ca([o,m])),u.createHref({pathname:y,search:h,hash:f})}function $s(){return p.useContext(Tr)!=null}function ra(){return Dt($s(),"useLocation() may be used only in the context of a <Router> component."),p.useContext(Tr).location}var sv="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function cv(l){p.useContext(qn).static||p.useLayoutEffect(l)}function Xs(){let{isDataRoute:l}=p.useContext(Ua);return l?Pb():zb()}function zb(){Dt($s(),"useNavigate() may be used only in the context of a <Router> component.");let l=p.useContext(qi),{basename:c,navigator:o}=p.useContext(qn),{matches:u}=p.useContext(Ua),{pathname:f}=ra(),m=JSON.stringify(ev(u)),h=p.useRef(!1);return cv(()=>{h.current=!0}),p.useCallback((b,g={})=>{if(In(h.current,sv),!h.current)return;if(typeof b=="number"){o.go(b);return}let S=pd(b,JSON.parse(m),f,g.relative==="path");l==null&&c!=="/"&&(S.pathname=S.pathname==="/"?c:ca([c,S.pathname])),(g.replace?o.replace:o.push)(S,g.state,g)},[c,o,m,f,l])}p.createContext(null);function Ps(l,{relative:c}={}){let{matches:o}=p.useContext(Ua),{pathname:u}=ra(),f=JSON.stringify(ev(o));return p.useMemo(()=>pd(l,JSON.parse(f),u,c==="path"),[l,f,u,c])}function Bb(l,c){return rv(l)}function rv(l,c,o){Dt($s(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:u}=p.useContext(qn),{matches:f}=p.useContext(Ua),m=f[f.length-1],h=m?m.params:{},y=m?m.pathname:"/",b=m?m.pathnameBase:"/",g=m&&m.route;{let k=g&&g.path||"";uv(y,!g||k.endsWith("*")||k.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${y}" (under <Route path="${k}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${k}"> to <Route path="${k==="/"?"*":`${k}/*`}">.`)}let S=ra(),x;x=S;let L=x.pathname||"/",H=L;if(b!=="/"){let k=b.replace(/^\//,"").split("/");H="/"+L.replace(/^\//,"").split("/").slice(k.length).join("/")}let D=Fp(l,{pathname:H});return In(g||D!=null,`No routes matched location "${x.pathname}${x.search}${x.hash}" `),In(D==null||D[D.length-1].route.element!==void 0||D[D.length-1].route.Component!==void 0||D[D.length-1].route.lazy!==void 0,`Matched leaf route at location "${x.pathname}${x.search}${x.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`),Vb(D&&D.map(k=>Object.assign({},k,{params:Object.assign({},h,k.params),pathname:ca([b,u.encodeLocation?u.encodeLocation(k.pathname.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:k.pathname]),pathnameBase:k.pathnameBase==="/"?b:ca([b,u.encodeLocation?u.encodeLocation(k.pathnameBase.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:k.pathnameBase])})),f,o)}function qb(){let l=Xb(),c=Nb(l)?`${l.status} ${l.statusText}`:l instanceof Error?l.message:JSON.stringify(l),o=l instanceof Error?l.stack:null,u="rgba(200,200,200, 0.5)",f={padding:"0.5rem",backgroundColor:u},m={padding:"2px 4px",backgroundColor:u},h=null;return console.error("Error handled by React Router default ErrorBoundary:",l),h=p.createElement(p.Fragment,null,p.createElement("p",null," Hey developer "),p.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",p.createElement("code",{style:m},"ErrorBoundary")," or"," ",p.createElement("code",{style:m},"errorElement")," prop on your route.")),p.createElement(p.Fragment,null,p.createElement("h2",null,"Unexpected Application Error!"),p.createElement("h3",{style:{fontStyle:"italic"}},c),o?p.createElement("pre",{style:f},o):null,h)}var Hb=p.createElement(qb,null),ov=class extends p.Component{constructor(l){super(l),this.state={location:l.location,revalidation:l.revalidation,error:l.error}}static getDerivedStateFromError(l){return{error:l}}static getDerivedStateFromProps(l,c){return c.location!==l.location||c.revalidation!=="idle"&&l.revalidation==="idle"?{error:l.error,location:l.location,revalidation:l.revalidation}:{error:l.error!==void 0?l.error:c.error,location:c.location,revalidation:l.revalidation||c.revalidation}}componentDidCatch(l,c){this.props.onError?this.props.onError(l,c):console.error("React Router caught the following error during render",l)}render(){let l=this.state.error;if(this.context&&typeof l=="object"&&l&&"digest"in l&&typeof l.digest=="string"){const o=Lb(l.digest);o&&(l=o)}let c=l!==void 0?p.createElement(Ua.Provider,{value:this.props.routeContext},p.createElement(vd.Provider,{value:l,children:this.props.component})):this.props.children;return this.context?p.createElement(Ub,{error:l},c):c}};ov.contextType=Cb;var qu=new WeakMap;function Ub({children:l,error:c}){let{basename:o}=p.useContext(qn);if(typeof c=="object"&&c&&"digest"in c&&typeof c.digest=="string"){let u=Db(c.digest);if(u){let f=qu.get(c);if(f)throw f;let m=nv(u.location,o);if(tv&&!qu.get(c))if(m.isExternal||u.reloadDocument)window.location.href=m.absoluteURL||m.to;else{const h=Promise.resolve().then(()=>window.__reactRouterDataRouter.navigate(m.to,{replace:u.replace}));throw qu.set(c,h),h}return p.createElement("meta",{httpEquiv:"refresh",content:`0;url=${m.absoluteURL||m.to}`})}}return l}function Gb({routeContext:l,match:c,children:o}){let u=p.useContext(qi);return u&&u.static&&u.staticContext&&(c.route.errorElement||c.route.ErrorBoundary)&&(u.staticContext._deepestRenderedBoundaryId=c.route.id),p.createElement(Ua.Provider,{value:l},o)}function Vb(l,c=[],o){let u=o?.state;if(l==null){if(!u)return null;if(u.errors)l=u.matches;else if(c.length===0&&!u.initialized&&u.matches.length>0)l=u.matches;else return null}let f=l,m=u?.errors;if(m!=null){let S=f.findIndex(x=>x.route.id&&m?.[x.route.id]!==void 0);Dt(S>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(m).join(",")}`),f=f.slice(0,Math.min(f.length,S+1))}let h=!1,y=-1;if(o&&u){h=u.renderFallback;for(let S=0;S<f.length;S++){let x=f[S];if((x.route.HydrateFallback||x.route.hydrateFallbackElement)&&(y=S),x.route.id){let{loaderData:L,errors:H}=u,D=x.route.loader&&!L.hasOwnProperty(x.route.id)&&(!H||H[x.route.id]===void 0);if(x.route.lazy||D){o.isStatic&&(h=!0),y>=0?f=f.slice(0,y+1):f=[f[0]];break}}}}let b=o?.onError,g=u&&b?(S,x)=>{b(S,{location:u.location,params:u.matches?.[0]?.params??{},unstable_pattern:Eb(u.matches),errorInfo:x})}:void 0;return f.reduceRight((S,x,L)=>{let H,D=!1,U=null,k=null;u&&(H=m&&x.route.id?m[x.route.id]:void 0,U=x.route.errorElement||Hb,h&&(y<0&&L===0?(uv("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),D=!0,k=null):y===L&&(D=!0,k=x.route.hydrateFallbackElement||null)));let $=c.concat(f.slice(0,L+1)),F=()=>{let ee;return H?ee=U:D?ee=k:x.route.Component?ee=p.createElement(x.route.Component,null):x.route.element?ee=x.route.element:ee=S,p.createElement(Gb,{match:x,routeContext:{outlet:S,matches:$,isDataRoute:u!=null},children:ee})};return u&&(x.route.ErrorBoundary||x.route.errorElement||L===0)?p.createElement(ov,{location:u.location,revalidation:u.revalidation,component:U,error:H,children:F(),routeContext:{outlet:null,matches:$,isDataRoute:!0},onError:g}):F()},null)}function gd(l){return`${l} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function Yb(l){let c=p.useContext(qi);return Dt(c,gd(l)),c}function Kb(l){let c=p.useContext(Er);return Dt(c,gd(l)),c}function Qb(l){let c=p.useContext(Ua);return Dt(c,gd(l)),c}function yd(l){let c=Qb(l),o=c.matches[c.matches.length-1];return Dt(o.route.id,`${l} can only be used on routes that contain a unique "id"`),o.route.id}function $b(){return yd("useRouteId")}function Xb(){let l=p.useContext(vd),c=Kb("useRouteError"),o=yd("useRouteError");return l!==void 0?l:c.errors?.[o]}function Pb(){let{router:l}=Yb("useNavigate"),c=yd("useNavigate"),o=p.useRef(!1);return cv(()=>{o.current=!0}),p.useCallback(async(f,m={})=>{In(o.current,sv),o.current&&(typeof f=="number"?await l.navigate(f):await l.navigate(f,{fromRouteId:c,...m}))},[l,c])}var Ep={};function uv(l,c,o){!c&&!Ep[l]&&(Ep[l]=!0,In(!1,o))}p.memo(Zb);function Zb({routes:l,future:c,state:o,isStatic:u,onError:f}){return rv(l,void 0,{state:o,isStatic:u,onError:f})}function Jb({basename:l="/",children:c=null,location:o,navigationType:u="POP",navigator:f,static:m=!1,unstable_useTransitions:h}){Dt(!$s(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let y=l.replace(/^\/*/,"/"),b=p.useMemo(()=>({basename:y,navigator:f,static:m,unstable_useTransitions:h,future:{}}),[y,f,m,h]);typeof o=="string"&&(o=Qs(o));let{pathname:g="/",search:S="",hash:x="",state:L=null,key:H="default",unstable_mask:D}=o,U=p.useMemo(()=>{let k=qa(g,y);return k==null?null:{location:{pathname:k,search:S,hash:x,state:L,key:H,unstable_mask:D},navigationType:u}},[y,g,S,x,L,H,u,D]);return In(U!=null,`<Router basename="${y}"> is not able to match the URL "${g}${S}${x}" because it does not start with the basename, so the <Router> won't render anything.`),U==null?null:p.createElement(qn.Provider,{value:b},p.createElement(Tr.Provider,{children:c,value:U}))}var fr="get",mr="application/x-www-form-urlencoded";function Cr(l){return typeof HTMLElement<"u"&&l instanceof HTMLElement}function Fb(l){return Cr(l)&&l.tagName.toLowerCase()==="button"}function Ib(l){return Cr(l)&&l.tagName.toLowerCase()==="form"}function Wb(l){return Cr(l)&&l.tagName.toLowerCase()==="input"}function e0(l){return!!(l.metaKey||l.altKey||l.ctrlKey||l.shiftKey)}function t0(l,c){return l.button===0&&(!c||c==="_self")&&!e0(l)}function ad(l=""){return new URLSearchParams(typeof l=="string"||Array.isArray(l)||l instanceof URLSearchParams?l:Object.keys(l).reduce((c,o)=>{let u=l[o];return c.concat(Array.isArray(u)?u.map(f=>[o,f]):[[o,u]])},[]))}function n0(l,c){let o=ad(l);return c&&c.forEach((u,f)=>{o.has(f)||c.getAll(f).forEach(m=>{o.append(f,m)})}),o}var rr=null;function a0(){if(rr===null)try{new FormData(document.createElement("form"),0),rr=!1}catch{rr=!0}return rr}var l0=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function Hu(l){return l!=null&&!l0.has(l)?(In(!1,`"${l}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${mr}"`),null):l}function i0(l,c){let o,u,f,m,h;if(Ib(l)){let y=l.getAttribute("action");u=y?qa(y,c):null,o=l.getAttribute("method")||fr,f=Hu(l.getAttribute("enctype"))||mr,m=new FormData(l)}else if(Fb(l)||Wb(l)&&(l.type==="submit"||l.type==="image")){let y=l.form;if(y==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let b=l.getAttribute("formaction")||y.getAttribute("action");if(u=b?qa(b,c):null,o=l.getAttribute("formmethod")||y.getAttribute("method")||fr,f=Hu(l.getAttribute("formenctype"))||Hu(y.getAttribute("enctype"))||mr,m=new FormData(y,l),!a0()){let{name:g,type:S,value:x}=l;if(S==="image"){let L=g?`${g}.`:"";m.append(`${L}x`,"0"),m.append(`${L}y`,"0")}else g&&m.append(g,x)}}else{if(Cr(l))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');o=fr,u=null,f=mr,h=l}return m&&f==="text/plain"&&(h=m,m=void 0),{action:u,method:o.toLowerCase(),encType:f,formData:m,body:h}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function bd(l,c){if(l===!1||l===null||typeof l>"u")throw new Error(c)}function s0(l,c,o,u){let f=typeof l=="string"?new URL(l,typeof window>"u"?"server://singlefetch/":window.location.origin):l;return o?f.pathname.endsWith("/")?f.pathname=`${f.pathname}_.${u}`:f.pathname=`${f.pathname}.${u}`:f.pathname==="/"?f.pathname=`_root.${u}`:c&&qa(f.pathname,c)==="/"?f.pathname=`${c.replace(/\/$/,"")}/_root.${u}`:f.pathname=`${f.pathname.replace(/\/$/,"")}.${u}`,f}async function c0(l,c){if(l.id in c)return c[l.id];try{let o=await import(l.module);return c[l.id]=o,o}catch(o){return console.error(`Error loading route module \`${l.module}\`, reloading page...`),console.error(o),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function r0(l){return l==null?!1:l.href==null?l.rel==="preload"&&typeof l.imageSrcSet=="string"&&typeof l.imageSizes=="string":typeof l.rel=="string"&&typeof l.href=="string"}async function o0(l,c,o){let u=await Promise.all(l.map(async f=>{let m=c.routes[f.route.id];if(m){let h=await c0(m,o);return h.links?h.links():[]}return[]}));return m0(u.flat(1).filter(r0).filter(f=>f.rel==="stylesheet"||f.rel==="preload").map(f=>f.rel==="stylesheet"?{...f,rel:"prefetch",as:"style"}:{...f,rel:"prefetch"}))}function Tp(l,c,o,u,f,m){let h=(b,g)=>o[g]?b.route.id!==o[g].route.id:!0,y=(b,g)=>o[g].pathname!==b.pathname||o[g].route.path?.endsWith("*")&&o[g].params["*"]!==b.params["*"];return m==="assets"?c.filter((b,g)=>h(b,g)||y(b,g)):m==="data"?c.filter((b,g)=>{let S=u.routes[b.route.id];if(!S||!S.hasLoader)return!1;if(h(b,g)||y(b,g))return!0;if(b.route.shouldRevalidate){let x=b.route.shouldRevalidate({currentUrl:new URL(f.pathname+f.search+f.hash,window.origin),currentParams:o[0]?.params||{},nextUrl:new URL(l,window.origin),nextParams:b.params,defaultShouldRevalidate:!0});if(typeof x=="boolean")return x}return!0}):[]}function u0(l,c,{includeHydrateFallback:o}={}){return d0(l.map(u=>{let f=c.routes[u.route.id];if(!f)return[];let m=[f.module];return f.clientActionModule&&(m=m.concat(f.clientActionModule)),f.clientLoaderModule&&(m=m.concat(f.clientLoaderModule)),o&&f.hydrateFallbackModule&&(m=m.concat(f.hydrateFallbackModule)),f.imports&&(m=m.concat(f.imports)),m}).flat(1))}function d0(l){return[...new Set(l)]}function f0(l){let c={},o=Object.keys(l).sort();for(let u of o)c[u]=l[u];return c}function m0(l,c){let o=new Set;return new Set(c),l.reduce((u,f)=>{let m=JSON.stringify(f0(f));return o.has(m)||(o.add(m),u.push({key:m,link:f})),u},[])}function dv(){let l=p.useContext(qi);return bd(l,"You must render this element inside a <DataRouterContext.Provider> element"),l}function h0(){let l=p.useContext(Er);return bd(l,"You must render this element inside a <DataRouterStateContext.Provider> element"),l}var xd=p.createContext(void 0);xd.displayName="FrameworkContext";function fv(){let l=p.useContext(xd);return bd(l,"You must render this element inside a <HydratedRouter> element"),l}function p0(l,c){let o=p.useContext(xd),[u,f]=p.useState(!1),[m,h]=p.useState(!1),{onFocus:y,onBlur:b,onMouseEnter:g,onMouseLeave:S,onTouchStart:x}=c,L=p.useRef(null);p.useEffect(()=>{if(l==="render"&&h(!0),l==="viewport"){let U=$=>{$.forEach(F=>{h(F.isIntersecting)})},k=new IntersectionObserver(U,{threshold:.5});return L.current&&k.observe(L.current),()=>{k.disconnect()}}},[l]),p.useEffect(()=>{if(u){let U=setTimeout(()=>{h(!0)},100);return()=>{clearTimeout(U)}}},[u]);let H=()=>{f(!0)},D=()=>{f(!1),h(!1)};return o?l!=="intent"?[m,L,{}]:[m,L,{onFocus:Os(y,H),onBlur:Os(b,D),onMouseEnter:Os(g,H),onMouseLeave:Os(S,D),onTouchStart:Os(x,H)}]:[!1,L,{}]}function Os(l,c){return o=>{l&&l(o),o.defaultPrevented||c(o)}}function v0({page:l,...c}){let{router:o}=dv(),u=p.useMemo(()=>Fp(o.routes,l,o.basename),[o.routes,l,o.basename]);return u?p.createElement(y0,{page:l,matches:u,...c}):null}function g0(l){let{manifest:c,routeModules:o}=fv(),[u,f]=p.useState([]);return p.useEffect(()=>{let m=!1;return o0(l,c,o).then(h=>{m||f(h)}),()=>{m=!0}},[l,c,o]),u}function y0({page:l,matches:c,...o}){let u=ra(),{future:f,manifest:m,routeModules:h}=fv(),{basename:y}=dv(),{loaderData:b,matches:g}=h0(),S=p.useMemo(()=>Tp(l,c,g,m,u,"data"),[l,c,g,m,u]),x=p.useMemo(()=>Tp(l,c,g,m,u,"assets"),[l,c,g,m,u]),L=p.useMemo(()=>{if(l===u.pathname+u.search+u.hash)return[];let U=new Set,k=!1;if(c.forEach(F=>{let ee=m.routes[F.route.id];!ee||!ee.hasLoader||(!S.some(de=>de.route.id===F.route.id)&&F.route.id in b&&h[F.route.id]?.shouldRevalidate||ee.hasClientLoader?k=!0:U.add(F.route.id))}),U.size===0)return[];let $=s0(l,y,f.unstable_trailingSlashAwareDataRequests,"data");return k&&U.size>0&&$.searchParams.set("_routes",c.filter(F=>U.has(F.route.id)).map(F=>F.route.id).join(",")),[$.pathname+$.search]},[y,f.unstable_trailingSlashAwareDataRequests,b,u,m,S,c,l,h]),H=p.useMemo(()=>u0(x,m),[x,m]),D=g0(x);return p.createElement(p.Fragment,null,L.map(U=>p.createElement("link",{key:U,rel:"prefetch",as:"fetch",href:U,...o})),H.map(U=>p.createElement("link",{key:U,rel:"modulepreload",href:U,...o})),D.map(({key:U,link:k})=>p.createElement("link",{key:U,nonce:o.nonce,...k,crossOrigin:k.crossOrigin??o.crossOrigin})))}function b0(...l){return c=>{l.forEach(o=>{typeof o=="function"?o(c):o!=null&&(o.current=c)})}}var x0=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{x0&&(window.__reactRouterVersion="7.13.1")}catch{}function S0({basename:l,children:c,unstable_useTransitions:o,window:u}){let f=p.useRef();f.current==null&&(f.current=tb({window:u,v5Compat:!0}));let m=f.current,[h,y]=p.useState({action:m.action,location:m.location}),b=p.useCallback(g=>{o===!1?y(g):p.startTransition(()=>y(g))},[o]);return p.useLayoutEffect(()=>m.listen(b),[m,b]),p.createElement(Jb,{basename:l,children:c,location:h.location,navigationType:h.action,navigator:m,unstable_useTransitions:o})}var mv=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Gs=p.forwardRef(function({onClick:c,discover:o="render",prefetch:u="none",relative:f,reloadDocument:m,replace:h,unstable_mask:y,state:b,target:g,to:S,preventScrollReset:x,viewTransition:L,unstable_defaultShouldRevalidate:H,...D},U){let{basename:k,navigator:$,unstable_useTransitions:F}=p.useContext(qn),ee=typeof S=="string"&&mv.test(S),de=nv(S,k);S=de.to;let be=Ob(S,{relative:f}),re=ra(),ce=null;if(y){let pe=pd(y,[],re.unstable_mask?re.unstable_mask.pathname:"/",!0);k!=="/"&&(pe.pathname=pe.pathname==="/"?k:ca([k,pe.pathname])),ce=$.createHref(pe)}let[Ae,T,he]=p0(u,D),P=M0(S,{replace:h,unstable_mask:y,state:b,target:g,preventScrollReset:x,relative:f,viewTransition:L,unstable_defaultShouldRevalidate:H,unstable_useTransitions:F});function le(pe){c&&c(pe),pe.defaultPrevented||P(pe)}let ve=!(de.isExternal||m),ge=p.createElement("a",{...D,...he,href:(ve?ce:void 0)||de.absoluteURL||be,onClick:ve?le:c,ref:b0(U,T),target:g,"data-discover":!ee&&o==="render"?"true":void 0});return Ae&&!ee?p.createElement(p.Fragment,null,ge,p.createElement(v0,{page:be})):ge});Gs.displayName="Link";var La=p.forwardRef(function({"aria-current":c="page",caseSensitive:o=!1,className:u="",end:f=!1,style:m,to:h,viewTransition:y,children:b,...g},S){let x=Ps(h,{relative:g.relative}),L=ra(),H=p.useContext(Er),{navigator:D,basename:U}=p.useContext(qn),k=H!=null&&A0(x)&&y===!0,$=D.encodeLocation?D.encodeLocation(x).pathname:x.pathname,F=L.pathname,ee=H&&H.navigation&&H.navigation.location?H.navigation.location.pathname:null;o||(F=F.toLowerCase(),ee=ee?ee.toLowerCase():null,$=$.toLowerCase()),ee&&U&&(ee=qa(ee,U)||ee);const de=$!=="/"&&$.endsWith("/")?$.length-1:$.length;let be=F===$||!f&&F.startsWith($)&&F.charAt(de)==="/",re=ee!=null&&(ee===$||!f&&ee.startsWith($)&&ee.charAt($.length)==="/"),ce={isActive:be,isPending:re,isTransitioning:k},Ae=be?c:void 0,T;typeof u=="function"?T=u(ce):T=[u,be?"active":null,re?"pending":null,k?"transitioning":null].filter(Boolean).join(" ");let he=typeof m=="function"?m(ce):m;return p.createElement(Gs,{...g,"aria-current":Ae,className:T,ref:S,style:he,to:h,viewTransition:y},typeof b=="function"?b(ce):b)});La.displayName="NavLink";var _0=p.forwardRef(({discover:l="render",fetcherKey:c,navigate:o,reloadDocument:u,replace:f,state:m,method:h=fr,action:y,onSubmit:b,relative:g,preventScrollReset:S,viewTransition:x,unstable_defaultShouldRevalidate:L,...H},D)=>{let{unstable_useTransitions:U}=p.useContext(qn),k=T0(),$=C0(y,{relative:g}),F=h.toLowerCase()==="get"?"get":"post",ee=typeof y=="string"&&mv.test(y),de=be=>{if(b&&b(be),be.defaultPrevented)return;be.preventDefault();let re=be.nativeEvent.submitter,ce=re?.getAttribute("formmethod")||h,Ae=()=>k(re||be.currentTarget,{fetcherKey:c,method:ce,navigate:o,replace:f,state:m,relative:g,preventScrollReset:S,viewTransition:x,unstable_defaultShouldRevalidate:L});U&&o!==!1?p.startTransition(()=>Ae()):Ae()};return p.createElement("form",{ref:D,method:F,action:$,onSubmit:u?b:de,...H,"data-discover":!ee&&l==="render"?"true":void 0})});_0.displayName="Form";function j0(l){return`${l} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function hv(l){let c=p.useContext(qi);return Dt(c,j0(l)),c}function M0(l,{target:c,replace:o,unstable_mask:u,state:f,preventScrollReset:m,relative:h,viewTransition:y,unstable_defaultShouldRevalidate:b,unstable_useTransitions:g}={}){let S=Xs(),x=ra(),L=Ps(l,{relative:h});return p.useCallback(H=>{if(t0(H,c)){H.preventDefault();let D=o!==void 0?o:Us(x)===Us(L),U=()=>S(l,{replace:D,unstable_mask:u,state:f,preventScrollReset:m,relative:h,viewTransition:y,unstable_defaultShouldRevalidate:b});g?p.startTransition(()=>U()):U()}},[x,S,L,o,u,f,c,l,m,h,y,b,g])}function pv(l){In(typeof URLSearchParams<"u","You cannot use the `useSearchParams` hook in a browser that does not support the URLSearchParams API. If you need to support Internet Explorer 11, we recommend you load a polyfill such as https://github.com/ungap/url-search-params.");let c=p.useRef(ad(l)),o=p.useRef(!1),u=ra(),f=p.useMemo(()=>n0(u.search,o.current?null:c.current),[u.search]),m=Xs(),h=p.useCallback((y,b)=>{const g=ad(typeof y=="function"?y(new URLSearchParams(f)):y);o.current=!0,m("?"+g,b)},[m,f]);return[f,h]}var N0=0,E0=()=>`__${String(++N0)}__`;function T0(){let{router:l}=hv("useSubmit"),{basename:c}=p.useContext(qn),o=$b(),u=l.fetch,f=l.navigate;return p.useCallback(async(m,h={})=>{let{action:y,method:b,encType:g,formData:S,body:x}=i0(m,c);if(h.navigate===!1){let L=h.fetcherKey||E0();await u(L,o,h.action||y,{unstable_defaultShouldRevalidate:h.unstable_defaultShouldRevalidate,preventScrollReset:h.preventScrollReset,formData:S,body:x,formMethod:h.method||b,formEncType:h.encType||g,flushSync:h.flushSync})}else await f(h.action||y,{unstable_defaultShouldRevalidate:h.unstable_defaultShouldRevalidate,preventScrollReset:h.preventScrollReset,formData:S,body:x,formMethod:h.method||b,formEncType:h.encType||g,replace:h.replace,state:h.state,fromRouteId:o,flushSync:h.flushSync,viewTransition:h.viewTransition})},[u,f,c,o])}function C0(l,{relative:c}={}){let{basename:o}=p.useContext(qn),u=p.useContext(Ua);Dt(u,"useFormAction must be used inside a RouteContext");let[f]=u.matches.slice(-1),m={...Ps(l||".",{relative:c})},h=ra();if(l==null){m.search=h.search;let y=new URLSearchParams(m.search),b=y.getAll("index");if(b.some(S=>S==="")){y.delete("index"),b.filter(x=>x).forEach(x=>y.append("index",x));let S=y.toString();m.search=S?`?${S}`:""}}return(!l||l===".")&&f.route.index&&(m.search=m.search?m.search.replace(/^\?/,"?index&"):"?index"),o!=="/"&&(m.pathname=m.pathname==="/"?o:ca([o,m.pathname])),Us(m)}function A0(l,{relative:c}={}){let o=p.useContext(lv);Dt(o!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:u}=hv("useViewTransitionState"),f=Ps(l,{relative:c});if(!o.isTransitioning)return!1;let m=qa(o.currentLocation.pathname,u)||o.currentLocation.pathname,h=qa(o.nextLocation.pathname,u)||o.nextLocation.pathname;return yr(f.pathname,h)!=null||yr(f.pathname,m)!=null}const Ar={trainingModes:{scale_degree:!0,functional_interval:!0,functional_harmony:!1,timing_grid:!1,phrase_recall:!1},voiceExercises:{interval_echo:!0,degree_match:!0,motif_match:!1}};function $l(){return Object.entries(Ar.trainingModes).filter(([,l])=>l).map(([l])=>l)}function br(l){return Ar.trainingModes[l]}function Jn(l){const c=$l(),o=(l??[]).filter(br);return o.length>0?o:[c[0]??"scale_degree"]}function vv(){return Object.entries(Ar.voiceExercises).filter(([,l])=>l).map(([l])=>l)}function w0(l){return Ar.voiceExercises[l]}function k0(l){return l&&w0(l)?l:vv()[0]??"interval_echo"}const Zt=["C","Db","D","Eb","E","F","Gb","G","Ab","A","Bb","B"];function R0(l){return Zt.indexOf(l)}function Me(l){return 440*Math.pow(2,(l-69)/12)}function D0(l){return 69+12*Math.log2(l/440)}function Zs(l,c){return 12*(c+1)+R0(l)}function L0(l,c){return l+c}function Rt(l){const c=Math.round(l),o=(c%12+12)%12,u=Math.floor(c/12)-1;return{name:Zt[o],octave:u}}function Ba(l){const c=Rt(l);return`${c.name}${c.octave}`}function O0(l,c){const o=c==="maj"?4:c==="min"||c==="dim"?3:4,u=c==="maj"||c==="min"?7:c==="dim"?6:8;return[l,l+o,l+u]}function z0(l){if(!l)return null;try{return JSON.parse(l)}catch{return null}}function Xl(l,c){return z0(localStorage.getItem(l))??c}function fn(l,c){localStorage.setItem(l,JSON.stringify(c))}function B0(l){localStorage.removeItem(l)}function q0(l,c,o="application/json"){const u=new Blob([c],{type:o}),f=URL.createObjectURL(u),m=document.createElement("a");m.href=f,m.download=l,m.click(),URL.revokeObjectURL(f)}const gv="et_training_settings_v1",zi={showAnswerNoteNames:!1,allowPromptReplay:!1,showExplainWhy:!0,showIntervalNames:!0,showSemitoneCount:!1,showSolfege:!1,enforceSinging:!1,requireMicForSinging:!1,droneEnabled:!1,allowKeyboardInput:!1,showChordTones:!1,showScaleMap:!1,showPianoStrip:!1},Sd={freePracticePresets:[],freePracticeToggles:zi};function xr(){const l=Xl(gv,Sd);return{freePracticePresets:(l.freePracticePresets??[]).map((o,u)=>({id:o.id??`preset_${u}`,name:o.name??`Preset ${u+1}`,modePool:Jn(o.modePool),tonicMode:o.tonicMode??"random",fixedTonic:o.fixedTonic??"C",intervalLevel:o.intervalLevel??1,degreeLevel:o.degreeLevel??1,harmonyLevel:o.harmonyLevel??1,timingLevel:o.timingLevel??1,phraseLevel:o.phraseLevel??1,dictationInputMode:o.dictationInputMode??"multiple_choice",tonalMode:o.tonalMode??"major",intervalPlaybackVariant:o.intervalPlaybackVariant??"scale_context",harmonyPlaybackVariant:o.harmonyPlaybackVariant??"block",toggles:{...zi,...o.toggles??{}}})),freePracticeToggles:{...zi,...l.freePracticeToggles??{}}}}function Vs(l){fn(gv,l)}function H0(l){return{sessionType:"guided",modePool:Jn(l??$l()),intervalLevel:1,degreeLevel:1,harmonyLevel:1,timingLevel:1,phraseLevel:1,dictationInputMode:"multiple_choice",tonalMode:"major",intervalPlaybackVariant:"scale_context",harmonyPlaybackVariant:"block",randomTonicEvery:3,singingQuota:.5,predictiveResolutionChance:.25}}const U0=[{mode:"functional_interval",title:"Intervals"},{mode:"scale_degree",title:"Scale Degrees"},{mode:"functional_harmony",title:"Harmony"},{mode:"timing_grid",title:"Rhythm"},{mode:"phrase_recall",title:"Phrases"}],or={1:"Level 1: seconds only.",2:"Level 2: add 3rds.",3:"Level 3: add 4ths and 5ths.",4:"Level 4: add octaves."},G0={1:"Level 1: fixed tonic for the whole run.",2:"Level 2: limited tonic pool that rotates inside one 3-key set.",3:"Level 3: fully randomized across all 12 tonics."},Yl=["C","G","D","A","E","B","Gb","Db","Ab","Eb","Bb","F"],ld="quickplay_default",Cp={default:{id:ld,name:"Quickplay",settings:{modePool:Jn(["scale_degree","functional_interval"]),tonicMode:"random",fixedTonic:"C",tonicPool:void 0,intervalLevel:1,degreeLevel:1,harmonyLevel:1,timingLevel:1,phraseLevel:1,dictationInputMode:"multiple_choice",tonalMode:"major",intervalPlaybackVariant:"scale_context",harmonyPlaybackVariant:"block",toggles:{...zi,showAnswerNoteNames:!0,allowPromptReplay:!0,droneEnabled:!0,enforceSinging:!0,requireMicForSinging:!1,showExplainWhy:!0,showIntervalNames:!0,showSolfege:!0,showScaleMap:!0,showPianoStrip:!0}}}};function yv(l="default"){return Cp[l??"default"]??Cp.default}function V0(){return Yl.map(l=>({value:l,label:bv(l).join(" / ")}))}function bv(l){const c=Yl.indexOf(l),o=Yl[(c+Yl.length-1)%Yl.length],u=Yl[(c+1)%Yl.length];return[l,u,o]}function id(l){const c=Jn(l);return c.length>0?c:Jn($l())}function Y0(l,c){const o=yv(l),u=id(c.modePool),f=c.tonicSourceLevel===2?bv(c.fixedPoolRoot):void 0,m=c.tonicSourceLevel===1?"fixed":"random",h=c.tonicSourceLevel===1?c.fixedTonic:f?.[0]??Zt[0];return{presetId:o.id,settings:{...o.settings,modePool:u,tonicMode:m,fixedTonic:h,tonicPool:f,intervalLevel:c.intervalLevel,degreeLevel:c.degreeLevel}}}const K0=[{mode:"functional_interval",title:"Intervals",description:"Functional movement against tonic."},{mode:"scale_degree",title:"Scale Degrees",description:"Anchored tonic hearing with stability feedback."}];function Q0(){const l=Xs(),[c,o]=p.useState(null),u=p.useRef(null),f=p.useRef(null),m=p.useMemo(()=>c?`${c.title} Mode`:"",[c]);function h(){o(null)}function y(g){c&&(l(`${g}?mode=${c.mode}`),o(null))}function b(){if(!c)return;const g=new URLSearchParams({quickplay:"default",quickplayTopics:c.mode,quickplayTonicLevel:"1",quickplayFixedTonic:"C",quickplayFixedPool:"C",quickplayIntervalLevel:"1",quickplayDegreeLevel:"1"});l(`/practice?${g.toString()}`),o(null)}return p.useEffect(()=>{if(!c)return;function g(S){if(S.key==="Escape"){o(null);return}if(S.key!=="Tab")return;const x=f.current;if(!x)return;const L=x.querySelectorAll('button:not([disabled]), [href], input:not([disabled]), select:not([disabled]), textarea:not([disabled]), [tabindex]:not([tabindex="-1"])');if(L.length===0)return;const H=L[0],D=L[L.length-1],U=document.activeElement;if(S.shiftKey){(U===H||U==null||!x.contains(U))&&(S.preventDefault(),D.focus());return}(U===D||U==null||!x.contains(U))&&(S.preventDefault(),H.focus())}return window.addEventListener("keydown",g),()=>window.removeEventListener("keydown",g)},[c]),p.useEffect(()=>{c&&u.current?.focus()},[c]),s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"split-grid",children:[K0.map(g=>s.jsxs("button",{type:"button",className:"mode-card mode-card--button mode-card--practice",onClick:()=>o(g),children:[s.jsx("div",{className:"kicker kicker--red",children:"Practice Track"}),s.jsx("div",{className:"mode-card__title",children:g.title}),s.jsx("div",{className:"mode-card__copy",children:g.description})]},g.mode)),s.jsxs(Gs,{to:"/voice",className:"mode-card mode-card--voice",children:[s.jsx("div",{className:"kicker kicker--blue",children:"Voice Track"}),s.jsx("div",{className:"mode-card__title",children:"Voice Match"}),s.jsx("div",{className:"mode-card__copy",children:"Mic calibration, tuning feedback, and sing-back response drills."})]})]}),c&&s.jsx("div",{className:"mode-overlay",onClick:h,role:"presentation",children:s.jsxs("div",{ref:f,className:"mode-overlay__panel",onClick:g=>g.stopPropagation(),role:"dialog","aria-modal":"true","aria-labelledby":"mode-overlay-title",children:[s.jsx("div",{id:"mode-overlay-title",className:"panel-title",children:m}),s.jsxs("div",{className:"subtle",children:["Choose how you want to work on ",c.title.toLowerCase()," right now."]}),s.jsxs("div",{className:"mode-overlay__actions",children:[s.jsxs("button",{ref:u,type:"button",className:"mode-overlay__option",onClick:b,children:[s.jsx("span",{className:"mode-overlay__option-title",children:"Quickplay"}),s.jsx("span",{className:"mode-overlay__option-copy",children:"Jump straight into the quickplay preset with this topic preselected."})]}),s.jsxs("button",{type:"button",className:"mode-overlay__option",onClick:()=>y("/practice"),children:[s.jsx("span",{className:"mode-overlay__option-title",children:"Open Practice"}),s.jsx("span",{className:"mode-overlay__option-copy",children:"Custom drill mode with adjustable settings and a freer session flow."})]})]}),s.jsx("button",{type:"button",className:"mode-overlay__dismiss",onClick:h,children:"Cancel"})]})})]})}function $0(){const l=Xs(),[c,o]=p.useState(!1),[u,f]=p.useState(!1),[m,h]=p.useState(id($l().filter(T=>T==="scale_degree"||T==="functional_interval"))),[y,b]=p.useState(1),[g,S]=p.useState("C"),[x,L]=p.useState("C"),[H,D]=p.useState(1),[U,k]=p.useState(1),$=m.includes("functional_interval"),F=m.includes("scale_degree"),ee=y===3,de=y===2?"Fixed pool":"Fixed tonic";function be(T){h(he=>{if(he.includes(T)){const P=he.filter(le=>le!==T);return P.length>0?P:he}return[...he,T]})}function re(T){l(T),o(!1),f(!1)}function ce(){o(!1),f(!0)}function Ae(){const T=new URLSearchParams({quickplay:"default",quickplayTopics:id(m).join(","),quickplayTonicLevel:String(y),quickplayFixedTonic:g,quickplayFixedPool:x,quickplayIntervalLevel:String(H),quickplayDegreeLevel:String(U)});l(`/practice?${T.toString()}`),f(!1)}return s.jsxs("div",{className:"page",children:[s.jsxs("section",{className:"page-header page-header--hero",children:[s.jsxs("div",{className:"page-header__copy",children:[s.jsx("div",{className:"eyebrow",children:"New Ultraviolet Systems Basic"}),s.jsx("h1",{className:"page-title home-page__title",children:"VI-V-i Trainer"}),s.jsx("div",{className:"page-lede",children:"Tonic-centered ear training for scale degrees, intervals, guided review, and voice work, built around repeatable drills and local-first progress."})]}),s.jsx("aside",{className:"page-header__aside",children:s.jsx("div",{className:"hero-note hero-note--poster",children:s.jsxs("div",{className:"hero-cta",children:[s.jsx("div",{className:"hero-cta__label",children:"Click here to choose how to begin"}),s.jsx("button",{type:"button",className:"hero-cta__button",onClick:()=>o(!0),children:"Start here"}),s.jsx("div",{className:"hero-cta__label",children:"Click Here to enter keyboard mode"}),s.jsx("button",{type:"button",className:"hero-cta__button",onClick:()=>l("/keyboard"),children:"Keyboard mode"})]})})})]}),s.jsx("section",{className:"panel panel--blue",children:s.jsxs("div",{className:"panel-header",children:[s.jsxs("div",{children:[s.jsx("div",{className:"section-label kicker kicker--blue",children:"Start Here"}),s.jsx("h2",{className:"panel-title",children:"Choose a practice mode"})]}),s.jsx("div",{className:"panel-copy",children:"Short paths, focused sessions, and voice work all share the same tonic-centered engine."})]})}),s.jsx(Q0,{}),c&&s.jsx("div",{className:"mode-overlay",onClick:()=>o(!1),role:"presentation",children:s.jsxs("div",{className:"mode-overlay__panel",onClick:T=>T.stopPropagation(),role:"dialog","aria-modal":"true","aria-labelledby":"path-overlay-title",children:[s.jsx("div",{id:"path-overlay-title",className:"panel-title",children:"Choose How to Begin"}),s.jsx("div",{className:"subtle",children:"Pick the starting route that matches how guided or customizable you want this session to be."}),s.jsxs("div",{className:"mode-overlay__actions",children:[s.jsxs("button",{type:"button",className:"mode-overlay__option",onClick:()=>re("/beginner"),children:[s.jsx("span",{className:"mode-overlay__option-title",children:"Start from Basics"}),s.jsx("span",{className:"mode-overlay__option-copy",children:"A guided beginner on-ramp with tonic-first drills, singing prompts, and required review."})]}),s.jsxs("button",{type:"button",className:"mode-overlay__option",onClick:ce,children:[s.jsx("span",{className:"mode-overlay__option-title",children:"Quickplay"}),s.jsx("span",{className:"mode-overlay__option-copy",children:"Pick a few core session options, then jump straight into a preset-backed run."})]}),s.jsxs("button",{type:"button",className:"mode-overlay__option",onClick:()=>re("/practice"),children:[s.jsx("span",{className:"mode-overlay__option-title",children:"Open Practice"}),s.jsx("span",{className:"mode-overlay__option-copy",children:"Go straight to the full practice builder with manual control over the session."})]}),s.jsxs("button",{type:"button",className:"mode-overlay__option",onClick:()=>re("/custom-path"),children:[s.jsx("span",{className:"mode-overlay__option-title",children:"Custom path"}),s.jsx("span",{className:"mode-overlay__option-copy",children:"Take a short drill assessment, see what needs work, then save your own reusable preset."})]})]}),s.jsx("button",{type:"button",className:"mode-overlay__dismiss",onClick:()=>o(!1),children:"Cancel"})]})}),u&&s.jsx("div",{className:"mode-overlay",onClick:()=>f(!1),role:"presentation",children:s.jsxs("div",{className:"mode-overlay__panel mode-overlay__panel--wide mode-overlay__panel--compact",onClick:T=>T.stopPropagation(),role:"dialog","aria-modal":"true","aria-labelledby":"quickplay-overlay-title",children:[s.jsx("div",{id:"quickplay-overlay-title",className:"panel-title",children:"Quickplay"}),s.jsx("div",{className:"subtle",children:"Set the few options that should override the quickplay preset, then start immediately."}),s.jsxs("div",{className:"control-grid quickplay-control-grid",children:[s.jsxs("label",{className:"control-label",children:["Tonic source",s.jsxs("select",{value:y,onChange:T=>b(Number(T.target.value)),children:[s.jsx("option",{value:1,children:"Level 1: Fixed tonic"}),s.jsx("option",{value:2,children:"Level 2: Fixed pool"}),s.jsx("option",{value:3,children:"Level 3: Fully randomized"})]})]}),s.jsxs("label",{className:ee?"control-label control-label--disabled":"control-label",children:[de,s.jsx("select",{value:y===2?x:g,disabled:ee,onChange:T=>{const he=T.target.value;if(y===2){L(he);return}S(he)},children:y===2?V0().map(T=>s.jsx("option",{value:T.value,children:T.label},T.value)):Zt.map(T=>s.jsx("option",{value:T,children:T},T))})]}),s.jsxs("label",{className:$?"control-label":"control-label control-label--disabled",children:["Interval level",s.jsxs("select",{value:H,disabled:!$,onChange:T=>D(Number(T.target.value)),children:[s.jsx("option",{value:1,children:or[1]}),s.jsx("option",{value:2,children:or[2]}),s.jsx("option",{value:3,children:or[3]}),s.jsx("option",{value:4,children:or[4]})]})]}),s.jsxs("label",{className:F?"control-label":"control-label control-label--disabled",children:["Degree level",s.jsxs("select",{value:U,disabled:!F,onChange:T=>k(Number(T.target.value)),children:[s.jsx("option",{value:1,children:"1-5"}),s.jsx("option",{value:2,children:"+6/7"}),s.jsx("option",{value:3,children:"+b3/#4/b7"})]})]}),s.jsx("div",{className:"subtle quickplay-control-grid__description",children:G0[y]})]}),s.jsxs("div",{className:"control-group",children:[s.jsx("div",{className:"subtle",children:"Topics"}),s.jsx("div",{className:"chip-row",children:U0.filter(T=>$l().includes(T.mode)).map(T=>s.jsx("button",{type:"button",className:m.includes(T.mode)?"toggle-chip toggle-chip--active":"toggle-chip","aria-pressed":m.includes(T.mode),onClick:()=>be(T.mode),children:T.title},T.mode))})]}),s.jsxs("div",{className:"button-row",children:[s.jsx("button",{type:"button",onClick:Ae,children:"Start quickplay"}),s.jsx("button",{type:"button",onClick:()=>f(!1),children:"Cancel"})]})]})})]})}function Ap(l,c){return 60/c*l}class X0{ctx=null;master=null;state="idle";preparedPlanCache=new Map;activeNodes=[];droneOsc=null;droneGain=null;getState(){return this.state}async init(){if(this.ctx)return;const c=window.AudioContext||window.webkitAudioContext;if(!c)throw new Error("Web Audio API is not available in this browser.");this.ctx=new c,this.master=this.ctx.createGain(),this.master.gain.value=.2,this.master.connect(this.ctx.destination),this.state="ready"}async ensureRunning(){await this.init(),this.ctx&&this.ctx.state!=="running"&&await this.ctx.resume()}async warm(){await this.init()}setMasterGain(c){this.master&&(this.master.gain.value=c)}stopAll(){for(const c of this.activeNodes){if(c instanceof OscillatorNode)try{c.stop()}catch{}try{c.disconnect()}catch{}}this.activeNodes=[],this.state=this.ctx?"ready":"idle"}makeVoice(c,o,u,f,m){if(!this.ctx||!this.master)return;const h=this.ctx.createOscillator();h.type=o,h.frequency.value=c;const y=this.ctx.createGain(),b=.008,g=.03;y.gain.setValueAtTime(0,u),y.gain.linearRampToValueAtTime(m,u+b),y.gain.setValueAtTime(m,Math.max(u+b,f-g)),y.gain.linearRampToValueAtTime(0,f),h.connect(y),y.connect(this.master),h.start(u),h.stop(f+.02),this.activeNodes.push(h,y)}async play(c,o){if(await this.ensureRunning(),!this.ctx)return;this.stopAll(),this.setMasterGain(o.masterGain),this.state="playing";const u=this.ctx.currentTime,f=o.tempoBpm,m=(y,b,g,S=.9)=>{const x=u+Ap(b,f),L=x+Ap(g,f);this.makeVoice(y,o.timbre,x,L,S)},h=(y,b,g,S=.75)=>{for(const x of y)m(x,b,g,S/Math.max(1,y.length*.75))};if(c.kind==="note"){m(Me(c.midi),c.atBeats??0,c.durationBeats,c.gain??.9);return}if(c.kind==="chord"){h(c.midis.map(Me),c.atBeats??0,c.durationBeats,c.gain??.75);return}if(c.kind==="sequence"){const y=this.prepareSequence(c);for(const b of y){const g=b.gain??.85;b.freqHz!=null?m(b.freqHz,b.atBeats,b.durationBeats,g):b.freqsHz&&h(b.freqsHz,b.atBeats,b.durationBeats,g)}return}if(c.kind==="drone"){this.setDrone(c.midi,o,c.gain??.18);return}}async setDrone(c,o,u=.18){if(await this.ensureRunning(),!this.ctx||!this.master)return;if(this.droneOsc&&this.droneGain){this.droneOsc.frequency.setValueAtTime(Me(c),this.ctx.currentTime),this.droneGain.gain.setValueAtTime(u,this.ctx.currentTime);return}const f=this.ctx.createOscillator();f.type=o.timbre,f.frequency.value=Me(c);const m=this.ctx.createGain();m.gain.value=0,m.gain.linearRampToValueAtTime(u,this.ctx.currentTime+.03),f.connect(m),m.connect(this.master),f.start(),this.droneOsc=f,this.droneGain=m}clearDrone(){if(this.ctx){if(this.droneGain){const c=this.ctx.currentTime;this.droneGain.gain.cancelScheduledValues(c),this.droneGain.gain.setValueAtTime(this.droneGain.gain.value,c),this.droneGain.gain.linearRampToValueAtTime(0,c+.05)}if(this.droneOsc){try{this.droneOsc.stop(this.ctx.currentTime+.06)}catch{}try{this.droneOsc.disconnect()}catch{}}if(this.droneGain)try{this.droneGain.disconnect()}catch{}this.droneOsc=null,this.droneGain=null}}prepareSequence(c){const o=JSON.stringify(c.events),u=this.preparedPlanCache.get(o);if(u)return u;const f=c.events.map(m=>({...m}));if(this.preparedPlanCache.set(o,f),this.preparedPlanCache.size>40){const m=this.preparedPlanCache.keys().next().value;m&&this.preparedPlanCache.delete(m)}return f}}const Xe=new X0;function P0(l){let c=0;for(let o=0;o<l.length;o++)c+=l[o]*l[o];return Math.sqrt(c/l.length)}function Z0(l,c,o=80,u=1200){const f=Math.floor(c/u),m=Math.floor(c/o);let h=-1,y=0;for(let b=f;b<=m;b++){let g=0,S=0,x=0;const L=l.length-b;for(let U=0;U<L;U++){const k=l[U],$=l[U+b];g+=k*$,S+=k*k,x+=$*$}const H=Math.sqrt(S*x);if(H<=0)continue;const D=g/H;D>y&&(y=D,h=b)}return h<0||y<.82?null:{freqHz:c/h,clarity:y}}function _d(l,c,o){const u=P0(l);if(!(u>=o))return{freqHz:null,midi:null,cents:null,clarity:0,rms:u,isSignal:!1,noteLabel:null};const m=Z0(l,c);if(!m)return{freqHz:null,midi:null,cents:null,clarity:0,rms:u,isSignal:!0,noteLabel:null};const h=D0(m.freqHz),y=Math.round(h),b=(h-y)*100;return{freqHz:m.freqHz,midi:h,cents:b,clarity:m.clarity,rms:u,isSignal:!0,noteLabel:Ba(y)}}const jd="et_progress_v1",xv=1e3*60*60*24,Uu=[1,3,7,14,30],Sr={attempts:[],items:{},adaptive:{},totals:{attempts:0,correct:0,streak:0,bestStreak:0}};function Pl(){const l=Xl(jd,Sr);return{attempts:l.attempts??[],items:I0(l.items??{}),adaptive:F0(l.adaptive??{}),totals:l.totals??Sr.totals}}function J0(l){const c=l.attempts>0?l.correct/l.attempts:0,o=Math.min(1,Math.log10(1+l.attempts)),u=l.rollingAccuracy*.6+c*.4;return Md(u*o)}function Sv(l){return l.startsWith("meter:")||l.startsWith("subdivision:")||l.startsWith("syncopation:")||l.startsWith("tap:")?"timing_grid":l.startsWith("phrase:")?"phrase_recall":l.startsWith("movement:")?"functional_interval":l.startsWith("quality:")||l.startsWith("function:")||l.startsWith("progression:")||l.startsWith("cadence:")||l.startsWith("changed_position:")?"functional_harmony":"scale_degree"}function Md(l){return Math.max(0,Math.min(1,l))}function _v(l,c){return`${l}::${c}`}function F0(l){const c={};for(const[o,u]of Object.entries(l)){if(!u)continue;const f="key"in u&&typeof u.key=="string"?u.key:o,m="context"in u&&typeof u.context=="string"?u.context:"global",h=u.attempts??0,y="wrong"in u&&typeof u.wrong=="number"?u.wrong:Math.max(0,h-(u.correct??0)),b="correct"in u&&typeof u.correct=="number"?u.correct:Math.max(0,h-y),g="rollingAccuracy"in u&&typeof u.rollingAccuracy=="number"?u.rollingAccuracy:h>0?b/h:0,S="mode"in u&&(u.mode==="scale_degree"||u.mode==="functional_interval"||u.mode==="functional_harmony"||u.mode==="timing_grid"||u.mode==="phrase_recall")?u.mode:Sv(f),x={id:o,key:f,context:m,mode:S,attempts:h,correct:b,wrong:y,lastSeen:u.lastSeen??0,rollingAccuracy:g,avgResponseMs:"avgResponseMs"in u&&typeof u.avgResponseMs=="number"?u.avgResponseMs:0,mastery:"mastery"in u&&typeof u.mastery=="number"?u.mastery:Md(g),intervalDays:"intervalDays"in u&&typeof u.intervalDays=="number"?u.intervalDays:0,dueAt:"dueAt"in u&&typeof u.dueAt=="number"?u.dueAt:0,lastOutcomeCorrect:"lastOutcomeCorrect"in u?!!u.lastOutcomeCorrect:!0};c[o]=x}return c}function I0(l){const c={};for(const[o,u]of Object.entries(l)){if(!u)continue;const f=u.attempts??0,m=u.correct??0;c[o]={attempts:f,correct:m,streak:u.streak??0,lastSeen:u.lastSeen??0,mastery:u.mastery??0,rollingAccuracy:u.rollingAccuracy??(f>0?m/f:0),avgResponseMs:u.avgResponseMs??0}}return c}function W0(l){for(const c of Uu)if(c>l)return c;return Uu[Uu.length-1]}function ex(l){return l.includes(":major")?"major":l.includes(":minor")?"minor":"mixed"}function tx(l){return l==="functional_interval"?"intervals":l==="functional_harmony"?"chords":l==="timing_grid"?"timing":l==="phrase_recall"?"phrases":"degrees"}function Bi(l,c){const o=l.dueAt>0&&l.dueAt<=c?1.8:0,u=(1-l.mastery)*2.6,f=l.lastOutcomeCorrect?0:1.1,m=Math.max(0,(c-l.lastSeen)/xv),h=Math.min(.9,m*.08);return 1+o+u+f+h}function nx(l){return l.startsWith("degree:")?`Degree ${l.slice(7)}`:l.startsWith("movement:")?`Movement ${l.slice(9).replace("->"," -> ")}`:l.startsWith("phrase:voice_")?`Motif ${l.slice(13).replaceAll("-"," - ")}`:l}function Nd(l){const c=Pl(),o=Date.now(),u={ts:o,itemId:l.itemId,mode:l.mode,correct:l.correct,responseMs:l.responseMs,contextKey:l.contextKey};c.attempts.push(u),c.totals.attempts+=1,l.correct?(c.totals.correct+=1,c.totals.streak+=1,c.totals.bestStreak=Math.max(c.totals.bestStreak,c.totals.streak)):c.totals.streak=0;const f=c.items[l.itemId]??{attempts:0,correct:0,streak:0,lastSeen:0,mastery:0,rollingAccuracy:0,avgResponseMs:0};f.attempts+=1,l.correct?(f.correct+=1,f.streak+=1):f.streak=0,f.lastSeen=o;const m=.35;f.rollingAccuracy=f.attempts===1?l.correct?1:0:m*(l.correct?1:0)+(1-m)*f.rollingAccuracy,f.avgResponseMs=f.attempts===1?l.responseMs:m*l.responseMs+(1-m)*f.avgResponseMs,f.mastery=J0(f),c.items[l.itemId]=f;for(const h of l.adaptiveKeys??[]){const y=l.contextKey??"global",b=_v(y,h),g=c.adaptive[b]??{id:b,key:h,context:y,mode:Sv(h),attempts:0,correct:0,wrong:0,lastSeen:0,rollingAccuracy:0,avgResponseMs:0,mastery:0,intervalDays:0,dueAt:0,lastOutcomeCorrect:!0};g.attempts+=1,l.correct?g.correct+=1:g.wrong+=1,g.lastSeen=o,g.lastOutcomeCorrect=l.correct;const S=.35;g.rollingAccuracy=g.attempts===1?l.correct?1:0:S*(l.correct?1:0)+(1-S)*g.rollingAccuracy,g.avgResponseMs=g.attempts===1?l.responseMs:S*l.responseMs+(1-S)*g.avgResponseMs;const x=g.attempts>0?g.correct/g.attempts:0,L=Math.min(1,g.attempts/10);g.mastery=Md((g.rollingAccuracy*.7+x*.3)*L),l.correct&&g.mastery>=.82?(g.intervalDays=W0(g.intervalDays),g.dueAt=o+g.intervalDays*xv):(g.intervalDays=0,g.dueAt=o),c.adaptive[b]=g}c.attempts.length>2e3&&(c.attempts=c.attempts.slice(-2e3)),fn(jd,c)}function hr(l,c){const o=Pl(),u=Date.now(),f=c?.contextKey;if(f){const h=o.adaptive[_v(f,l)];if(h)return Bi(h,u)}const m=Object.values(o.adaptive).filter(h=>h.key===l);return m.length===0?1:m.reduce((h,y)=>h+Bi(y,u),0)/m.length}function ax(l){const c=Pl(),o=Date.now(),u=new Set(l.modePool??["scale_degree","functional_interval","functional_harmony","timing_grid","phrase_recall"]);return Object.values(c.adaptive).filter(h=>{if(!(h.key.startsWith("degree:")||h.key.startsWith("movement:")||h.key.startsWith("quality:")||h.key.startsWith("progression:")||h.key.startsWith("cadence:")||h.key.startsWith("changed_position:")||h.key.startsWith("meter:")||h.key.startsWith("subdivision:")||h.key.startsWith("syncopation:")||h.key.startsWith("tap:")||h.key.startsWith("phrase:"))||!u.has(h.mode))return!1;if(l.tonalGroup!=="mixed"){const b=ex(h.context);if(b!=="mixed"&&b!==l.tonalGroup)return!1}return l.strategy==="due"?h.dueAt>0&&h.dueAt<=o:h.attempts>=2&&h.mastery<.72}).sort((h,y)=>l.strategy==="due"?h.dueAt-y.dueAt:Bi(y,o)-Bi(h,o)).slice(0,l.limit).map(h=>({key:h.key,context:h.context,mode:h.mode}))}function lx(){const l=Pl(),c=Date.now(),o=Object.values(l.adaptive),u=l.totals.attempts>0?l.totals.correct/l.totals.attempts:0,f=["degrees","intervals","chords","timing","phrases"].map(m=>{const h=o.filter(x=>tx(x.mode)===m),y=h.reduce((x,L)=>x+L.attempts,0),b=h.length>0?h.reduce((x,L)=>x+L.mastery,0)/h.length:0,g=h.filter(x=>x.dueAt>0&&x.dueAt<=c).length,S=h.filter(x=>x.attempts>=2&&x.mastery<.72).length;return{skill:m,mastery:b,attempts:y,dueCount:g,weakCount:S}});return{totals:{...l.totals,accuracy:u},skills:f,reviewCounts:{due:o.filter(m=>m.dueAt>0&&m.dueAt<=c).length,weak:o.filter(m=>m.attempts>=2&&m.mastery<.72).length}}}function jv(l){const c=Pl(),o=Date.now(),u=l?.modePool?new Set(l.modePool):null;return Object.values(c.adaptive).filter(m=>l?.contextPrefix&&!m.context.startsWith(l.contextPrefix)||u&&!u.has(m.mode)?!1:m.attempts>0).sort((m,h)=>{const y=m.mastery-h.mastery;return Math.abs(y)>.001?y:Bi(h,o)-Bi(m,o)}).slice(0,l?.limit??3).map(m=>({key:m.key,label:nx(m.key),mode:m.mode,mastery:m.mastery,attempts:m.attempts,dueNow:m.dueAt>0&&m.dueAt<=o,context:m.context}))}function Mv(){fn(jd,Sr)}const wr="et_authored_drills_v1",sd="et_authored_drills_changed",Ed=[{id:"seed_movement_7_1",name:"Leading tone release",mode:"functional_interval",adaptiveKey:"movement:7->1",difficulty:2,tags:["cadence","resolution"],promptOverride:"Name the pull you hear after tonic is established.",explanationTitle:"Leading tone release",explanationBody:"This motion feels urgent because the upper note sits right next to tonic and resolves by shortest distance.",coachingNotes:["Hear the first note as unstable before you try to label the span.","If the landing feels complete, you are probably hearing the return to tonic."],moreBody:"This kind of motion is worth over-practicing because it appears across melodies, bass motion, and cadence hearing.",enabled:!0,updatedAt:Date.now()}];function Nv(){typeof window<"u"&&window.dispatchEvent(new Event(sd))}function ix(){return`drill_${Math.random().toString(36).slice(2,10)}`}function Ev(l,c){return{id:l.id||`drill_${c}`,name:l.name||`Drill ${c+1}`,mode:l.mode,adaptiveKey:l.adaptiveKey,difficulty:l.difficulty??1,tags:l.tags??[],promptOverride:l.promptOverride??"",explanationTitle:l.explanationTitle??l.name,explanationBody:l.explanationBody??"",coachingNotes:l.coachingNotes??[],moreBody:l.moreBody??"",enabled:l.enabled??!0,updatedAt:l.updatedAt??Date.now()}}function Ha(){return Xl(wr,Ed).map(Ev).sort((c,o)=>o.updatedAt-c.updatedAt)}function cd(){return Ha().filter(l=>l.enabled)}function sx(l){const c=Ha(),o=Ev({...l,id:l.id??ix(),updatedAt:Date.now()},c.length),u=c.findIndex(f=>f.id===o.id);return u>=0?c[u]=o:c.unshift(o),fn(wr,c),Nv(),o}function cx(l){fn(wr,Ha().filter(c=>c.id!==l)),Nv()}function Td(l){if(typeof window>"u")return()=>{};const c=u=>{u.key===wr&&l()},o=()=>l();return window.addEventListener("storage",c),window.addEventListener(sd,o),()=>{window.removeEventListener("storage",c),window.removeEventListener(sd,o)}}function rx(l,c){return cd().find(o=>o.mode===l&&o.adaptiveKey===c)??null}function wp(l){return l==="scale_degree"?["degree:3","degree:7"]:l==="functional_interval"?["movement:2->3","movement:7->1"]:l==="functional_harmony"?["progression:ii-V-I","cadence:authentic","changed_position:2"]:l==="timing_grid"?["meter:4/4","subdivision:triplet","tap:4/4:eighth:2"]:["phrase:stepwise","phrase:triadic"]}const ox=["Do","Re","Mi","Fa","So","La","Ti"],_r=["1","2","3","4","5","6","7"],ux={major:[0,2,4,5,7,9,11],natural_minor:[0,2,3,5,7,8,10],harmonic_minor:[0,2,3,5,7,8,11],melodic_minor:[0,2,3,5,7,9,11],modal:[0,2,4,5,7,9,10]},dx={1:"stable",2:"moderately_unstable",3:"stable",4:"strong_tendency",5:"stable",6:"moderately_unstable",7:"strong_tendency",b3:"moderately_unstable","#4":"strong_tendency",b7:"moderately_unstable"},fx={1:"1 is stable because it is the tonal center.",2:"2 is unstable because it leans toward 1 or 3.",3:"3 is stable because it supports tonic color.",4:"4 is unstable because it forms tension against tonic.",5:"5 is stable because it reinforces tonic support.",6:"6 is moderately unstable because it tends to move to 5 or 7.",7:"7 is unstable because it resolves to 1.",b3:"b3 is unstable in major context because it colors toward minor.","#4":"#4 is unstable because it intensifies pull to 5.",b7:"b7 is moderately unstable because it tends toward 6 or 1."},mx={1:"m2",2:"M2",3:"m3",4:"M3",5:"P4",7:"P5",12:"P8"},hx={"7->1":"Leading tone resolves to tonic.","4->3":"Subdominant tension resolves downward.","2->1":"Supertonic relaxes to tonic."},px={major:"tonic",minor:"predominant",diminished:"dominant",augmented:"dominant",dominant7:"dominant",major7:"tonic",minor7:"predominant",half_diminished7:"dominant"};function Kl(l,c=Zt){const o=l?c.filter(u=>u!==l):[...c];return o[Math.floor(Math.random()*o.length)]}function yl(l,c){if(l==="b3")return 3;if(l==="#4")return 6;if(l==="b7")return 10;const o=_r.indexOf(l);return o<0?0:ux[c][o]}function Kt(l,c,o,u){return Zs(l,c)+yl(o,u)}function Gu(l){const c=_r.indexOf(l);return c>=0?ox[c]:l}function vx(l){return dx[l]??"moderately_unstable"}function kp(l){return fx[l]??`${l} carries tension relative to tonic.`}function Rp(l){return mx[l]??`${l} semitones`}function Tv(l,c){return`${l}->${c}`}function gx(l,c){return hx[Tv(l,c)]??"Hear this as motion relative to tonic."}function yx(l){return px[l]}function Vl(l){switch(l){case"major":return"Major";case"minor":return"Minor";case"diminished":return"Diminished";case"augmented":return"Augmented";case"dominant7":return"Dominant 7";case"major7":return"Major 7";case"minor7":return"Minor 7";case"half_diminished7":return"Half-diminished 7";default:return l}}function bx(l){return l===1?["major","minor","diminished","augmented"]:["major","minor","diminished","augmented","dominant7","major7","minor7","half_diminished7"]}const Bs=["1","2","3","4","5","6","7"],xx=["1","3","5","6"],Cv=["1","2","b3","3","4","#4","5","6","b7","7"];function Ys(l){return l[Math.floor(Math.random()*l.length)]}function Sx(l){const c=[...l];for(let o=c.length-1;o>0;o--){const u=Math.floor(Math.random()*(o+1));[c[o],c[u]]=[c[u],c[o]]}return c}function Dp(l){return l.map(c=>c.join(" ")).join(" | ")}function _x(l,c){const o=[...l],u=Math.floor(Math.random()*o.length),f=c==="major"?Bs:Cv;let m=Ys(f);for(;m===o[u];)m=Ys(f);return o[u]=m,o}function Vu(l){return{kind:"sequence",events:l.degrees.map((o,u)=>({atBeats:l.startBeat+u,durationBeats:.8,freqHz:Me(Kt(l.tonic,l.octave,o,l.tonalMode)),gain:.88}))}}function jx(l){return Array.from({length:l},(c,o)=>({atBeats:o,durationBeats:.18,freqHz:Me(o%4===0?102:96),gain:o%4===0?.62:.48}))}function Mx(l,c){return l===1?"multiple_choice":c==="multiple_choice"?Math.random()<.5?"multiple_choice":"piano_grid":c}function Nx(l,c,o){const f=o*4;if(c==="stepwise"){const y=["1"];for(;y.length<f;){const b=y[y.length-1],g=Bs.indexOf(b),S=Math.random()<.5?-1:1,x=Math.max(0,Math.min(Bs.length-1,g+S));y.push(Bs[x])}return y}if(c==="triadic"){const y=[];for(;y.length<f;)y.push(Ys(xx));return y}const m=[],h=l>=3?Cv:Bs;for(;m.length<f;)m.push(Ys(h));return m}function Ex(l){const c=l.level===1?2:Math.min(4,2+l.level-1),o=Ys(l.level===1?["stepwise"]:l.level===2?["stepwise","triadic"]:["stepwise","triadic","chromatic"]),u=Nx(l.level,o,c),f=4,m=Array.from({length:c},(H,D)=>u.slice(D*f,D*f+f)),h=Dp(m),y=Array.from({length:3},()=>_x(u,l.tonalMode)),b=Sx([h,...y.map(H=>Dp(Array.from({length:c},(D,U)=>H.slice(U*f,U*f+f))))]).slice(0,4),g=Vu({degrees:u,tonic:l.tonic,octave:l.octave,tonalMode:l.tonalMode,startBeat:0}),S=Vu({degrees:u,tonic:l.tonic,octave:l.octave,tonalMode:l.tonalMode,startBeat:4}),x={kind:"sequence",events:[...jx(4),...S.kind==="sequence"?S.events:[]]},L=m.map(H=>Vu({degrees:H,tonic:l.tonic,octave:l.octave,tonalMode:l.tonalMode,startBeat:0}));return{bars:c,tag:o,degrees:u,measureGroups:m,answerChoices:b,correctAnswer:h,playbackPlan:g,replayWithCountIn:x,measurePlaybackPlans:L,inputMode:Mx(l.level,l.preferredInputMode)}}const Tx=[{romanPath:["I","V"],cadenceType:"half",stage:1,tonalFamily:"major"},{romanPath:["I","IV"],cadenceType:"half",stage:1,tonalFamily:"major"},{romanPath:["I","IV","V"],cadenceType:"half",stage:2,tonalFamily:"major"},{romanPath:["ii","V","I"],cadenceType:"authentic",stage:2,tonalFamily:"major"},{romanPath:["I","IV","I"],cadenceType:"plagal",stage:2,tonalFamily:"major"},{romanPath:["I","ii","V","I"],cadenceType:"authentic",stage:3,tonalFamily:"major"},{romanPath:["I","IV","V","I"],cadenceType:"authentic",stage:3,tonalFamily:"major"},{romanPath:["i","iv","V"],cadenceType:"half",stage:2,tonalFamily:"minor"},{romanPath:["i","iv","i"],cadenceType:"plagal",stage:2,tonalFamily:"minor"},{romanPath:["i","iv","V","i"],cadenceType:"authentic",stage:3,tonalFamily:"minor"}];function Cx(l){return l.includes("minor")?"minor":"major"}function Ax(l){return l===1?1:3}function wx(l,c){return c==="major"?[l,l+4,l+7]:c==="minor"?[l,l+3,l+7]:[l,l+3,l+6]}function Av(l){return l.replace(/[0-9]/g,"")}function kx(l,c){const o=Av(l);if(c==="major"){const f={I:{rootOffset:0,quality:"major"},ii:{rootOffset:2,quality:"minor"},iii:{rootOffset:4,quality:"minor"},IV:{rootOffset:5,quality:"major"},V:{rootOffset:7,quality:"major"},vi:{rootOffset:9,quality:"minor"},vii:{rootOffset:11,quality:"diminished"}};return f[o]??f.I}const u={i:{rootOffset:0,quality:"minor"},ii:{rootOffset:2,quality:"diminished"},III:{rootOffset:3,quality:"major"},iv:{rootOffset:5,quality:"minor"},V:{rootOffset:7,quality:"major"},VI:{rootOffset:8,quality:"major"},VII:{rootOffset:10,quality:"major"}};return u[o]??u.i}function rd(l,c){const o=Cx(l),u=Ax(c);return Tx.filter(f=>f.tonalFamily===o&&f.stage<=u)}function Oi(l){return l.join(" - ")}function pr(l){return l==="authentic"?"Authentic":l==="plagal"?"Plagal":"Half"}function qs(l){const c=Av(l);return c==="I"||c==="i"||c==="vi"||c==="VI"||c==="iii"||c==="III"?"tonic":c==="ii"||c==="IV"||c==="iv"?"predominant":c==="V"||c==="vii"||c==="VII"?"dominant":"other"}function od(l){return l==="tonic"?"rests and confirms the key center.":l==="predominant"?"moves away from rest and points toward dominant tension.":l==="dominant"?"creates strong pull back toward tonic.":"adds color without a strong directional pull."}function Yu(l){return l.map(c=>{const o=qs(c);return`${c}: ${o} (${od(o)})`}).join(" ")}function Ku(l,c,o){return o.map(u=>{const f=kx(u,c);return wx(l+f.rootOffset,f.quality)})}function Ri(l,c,o){const u=[],f=[c,c+4,c+7];return u.push({atBeats:0,durationBeats:.8,freqsHz:f.map(Me),gain:.62}),o.forEach((m,h)=>{const y=.95+h*.95;if(u.push({atBeats:y,durationBeats:.35,freqHz:Me(c-12),gain:.4}),l==="block"){u.push({atBeats:y,durationBeats:.8,freqsHz:m.map(Me),gain:.8});return}if(l==="arpeggiated"){u.push({atBeats:y,durationBeats:.24,freqHz:Me(m[0]),gain:.82}),u.push({atBeats:y+.24,durationBeats:.24,freqHz:Me(m[1]),gain:.82}),u.push({atBeats:y+.48,durationBeats:.24,freqHz:Me(m[2]),gain:.84});return}u.push({atBeats:y,durationBeats:.22,freqHz:Me(m[0]),gain:.82}),u.push({atBeats:y+.24,durationBeats:.52,freqsHz:m.map(Me),gain:.78})}),{kind:"sequence",events:u}}function Rx(l){return l==="major"?["I","ii","iii","IV","V","vi","vii"]:["i","ii","III","iv","V","VI","VII"]}function Dx(l){const{tonalMode:c,romanPath:o}=l;if(o.length<2)return null;const u=1+Math.floor(Math.random()*(o.length-1)),f=o[u],m=Rx(c).filter(b=>b!==f);if(m.length===0)return null;const h=m[Math.floor(Math.random()*m.length)],y=[...o];return y[u]=h,{changedPath:y,index:u,from:f,to:h}}function wv(l){return l===1?2:l===2?3:4}function Qu(l){return l[Math.floor(Math.random()*l.length)]}function kv(l){return l==="quarter"?1:l==="eighth"?.5:l==="triplet"?1/3:.25}function jr(l){return l==="2/4"?2:l==="3/4"?3:4}function Rv(l,c){return Math.round(l/c)*c}function Lp(l,c,o,u){return{atBeats:c,durationBeats:o,freqHz:Me(l),gain:u}}function Op(l,c,o){const u=jr(c),f=Array.from({length:o},(h,y)=>Lp(y%u===0?102:96,y,.18,y%u===0?.62:.5)),m=l.map(h=>Lp(84,o+h,.12,.9));return{kind:"sequence",events:[...f,...m]}}function Lx(l,c,o,u){const f=jr(l),m=kv(c),h=f*o,y=Math.max(1,Math.round(h/m)),b=Math.max(4,Math.round(y*.35)),g=Math.max(b+1,Math.round(y*.6)),S=Math.floor(Math.random()*(g-b+1))+b,x=new Set([0]);for(;x.size<S;){const H=Math.floor(Math.random()*y)*m,D=Math.abs(H%1)<1e-4;!u&&!D&&Math.random()<.7||x.add(Rv(H,m))}return[...x].sort((L,H)=>L-H)}function Ox(l){const c=l===1?["2/4","4/4"]:["2/4","3/4","4/4"],o=l===1?["quarter","eighth"]:l===2?["eighth","triplet"]:["eighth","triplet","sixteenth"],u=Qu(l===1?["echo_pattern","meter_pick"]:l===2?["echo_pattern","meter_pick","subdivision_pick"]:["echo_pattern","meter_pick","subdivision_pick","offbeat_pick"]),f=Qu(c),m=Qu(o),h=l>=2?2:1,y=jr(f)*h,b=Lx(f,m,h,l>=2),g=jr(f),S=Op(b,f,g),x=Op(b,f,0);return{meter:f,subdivision:m,bars:h,questionKind:u,targetBeats:b,patternLengthBeats:y,quantizeStepBeats:kv(m),promptPlan:x,replayWithCountIn:S}}function zx(l,c,o){const u=new Set;for(const f of l){const m=Rv(f,c);m<0||m>o+c||u.add(m)}return[...u].sort((f,m)=>f-m)}function Bx(l){const c=l.toleranceBeats??.22,o=[],u=new Set;let f=0;for(const h of l.target){let y=-1,b=Number.POSITIVE_INFINITY;for(let g=0;g<l.taps.length;g++){if(u.has(g))continue;const S=Math.abs(l.taps[g]-h);S<b&&(b=S,y=g)}y>=0&&b<=c?(u.add(y),f+=1,o.push({targetBeat:h,tappedBeat:l.taps[y],deltaMs:(l.taps[y]-h)*6e4/l.bpm})):o.push({targetBeat:h,tappedBeat:null,deltaMs:null})}const m=l.target.length;return{matched:f,expected:m,accuracy:m>0?f/m:0,errors:o}}function qx(){return Math.random().toString(36).slice(2,10)}function Cd(l,c){const o=l.map(m=>({item:m,weight:Math.max(.01,c(m))})),u=o.reduce((m,h)=>m+h.weight,0);let f=Math.random()*u;for(const m of o)if(f-=m.weight,f<=0)return m.item;return o[o.length-1].item}function vr(l,c,o){const u=l.find(c);return u||Cd(l,o)}function Oa(l,c,o){const u=l.filter(m=>m!==o),f=[];for(;u.length>0&&f.length<c;){const m=Math.floor(Math.random()*u.length);f.push(u.splice(m,1)[0])}return f}function Hx(l){const c=l.length>0?l:["scale_degree","functional_interval","functional_harmony"];return Cd(c,o=>o==="scale_degree"||o==="functional_interval"?4:o==="functional_harmony"?2:o==="timing_grid"?3:2.8)}function Ux(l){return l===1?["1","2","3","4","5"]:l===2?[..._r]:[..._r,"b3","#4","b7"]}function Hs(l){return l===1?[["1","2"],["2","1"],["2","3"],["3","2"],["3","4"],["4","3"],["4","5"],["5","4"]]:l===2?[...Hs(1),["1","3"],["3","1"],["2","4"],["4","2"],["3","5"],["5","3"]]:l===3?[...Hs(2),["1","4"],["4","1"],["1","5"],["5","1"],["2","5"],["5","2"]]:[...Hs(3),["1","1"]]}function $u(l,c){const[o,u]=l,f=yl(o,c);return yl(u,c)<f?"descending":"ascending"}function Gx(l,c,o){const u=`${l[0]}->${l[1]}`,f=$u(l,o),m=1,h=2,y=c.filter(S=>`${S[0]}->${S[1]}`!==u).filter(S=>$u(S,o)===f).map(([S,x])=>`${S}->${x}`),b=c.filter(S=>$u(S,o)!==f).map(([S,x])=>`${S}->${x}`);return[u,...Oa(y,m,u),...Oa(b,h,u)].sort(()=>Math.random()-.5)}function zp(l,c,o,u){return l==="harmonic_stack"?{kind:"chord",midis:[o,u],durationBeats:1.6,gain:.82}:l==="immediate_jump"?{kind:"sequence",events:[{atBeats:0,durationBeats:.5,freqHz:Me(o),gain:.88},{atBeats:.55,durationBeats:.75,freqHz:Me(u),gain:.9}]}:l==="sequential_pause"?{kind:"sequence",events:[{atBeats:0,durationBeats:.65,freqHz:Me(o),gain:.88},{atBeats:1.2,durationBeats:.75,freqHz:Me(u),gain:.9}]}:{kind:"sequence",events:[{atBeats:0,durationBeats:.7,freqHz:Me(c),gain:.75},{atBeats:.85,durationBeats:.5,freqHz:Me(o),gain:.86},{atBeats:1.45,durationBeats:.5,freqHz:Me(u),gain:.9}]}}function Bp(l,c){return c==="major"?[l,l+4,l+7]:c==="minor"?[l,l+3,l+7]:c==="diminished"?[l,l+3,l+6]:c==="augmented"?[l,l+4,l+8]:c==="dominant7"?[l,l+4,l+7,l+10]:c==="major7"?[l,l+4,l+7,l+11]:c==="minor7"?[l,l+3,l+7,l+10]:[l,l+3,l+6,l+10]}function qp(l,c,o){const u=[c,c+4,c+7];if(l==="block")return{kind:"sequence",events:[{atBeats:0,durationBeats:1,freqsHz:u.map(Me),gain:.68},{atBeats:1.2,durationBeats:1.2,freqsHz:o.map(Me),gain:.78}]};if(l==="arpeggiated"){const f=o.map((m,h)=>({atBeats:1.05+h*.45,durationBeats:.35,freqHz:Me(m),gain:.82}));return{kind:"sequence",events:[{atBeats:0,durationBeats:.8,freqsHz:u.map(Me),gain:.66},...f]}}return{kind:"sequence",events:[{atBeats:0,durationBeats:.8,freqsHz:u.map(Me),gain:.66},{atBeats:1,durationBeats:.35,freqHz:Me(o[0]),gain:.8},{atBeats:1.45,durationBeats:.35,freqHz:Me(o[1]),gain:.8},{atBeats:1.9,durationBeats:.35,freqHz:Me(o[2]),gain:.8},{atBeats:2.4,durationBeats:.95,freqsHz:o.map(Me),gain:.78}]}}function Vx(l,c,o){const u=c.filter(m=>m!==l);if(u.length===0)return null;const f=yl(l,o);return u.map(m=>({degree:m,distance:Math.abs(f-yl(m,o))})).sort((m,h)=>m.distance-h.distance)[0]?.degree??null}function Yx(l){return{major:"minor",minor:"major",diminished:"minor",augmented:"major",dominant7:"major7",major7:"dominant7",minor7:"dominant7",half_diminished7:"diminished"}[l]}function Hp(l){return Oi(l)}function Kx(l){const c=rd(l.config.tonalMode,l.config.harmonyLevel),o=l.forcedAdaptiveKey?.startsWith("progression:")?l.forcedAdaptiveKey.slice(12):null;return vr(c,u=>Hp(u.romanPath)===o,u=>hr(`progression:${Hp(u.romanPath)}`,{contextKey:l.adaptiveContextKey}))}function Qx(l){return l===1?Math.random()<.75?"roman_path":"cadence_type":l===2?Math.random()<.55?"roman_path":"cadence_type":Cd(["roman_path","cadence_type","changed_chord"],c=>c==="changed_chord"?1.4:1)}function $x(l,c){const o=["Authentic","Plagal","Half"],u=pr(l);return[u,...Oa(o,(c===1?2:3)-1,u)].sort(()=>Math.random()-.5)}function Xx(l,c,o){const u=Array.from({length:l},(h,y)=>`Chord ${y+1}`),f=u[c],m=Math.min(wv(o),u.length);return[f,...Oa(u,m-1,f)].sort(()=>Math.random()-.5)}function Mn(l){return{id:`q_${qx()}`,...l}}function Nn(l){const c=rx(l.mode,l.adaptiveFocusKey);return c?{...l,prompt:c.promptOverride.trim()||l.prompt,feedback:{...l.feedback,title:c.explanationTitle.trim()||l.feedback.title,explanation:c.explanationBody.trim()||l.feedback.explanation},teaching:{...l.teaching,lines:c.coachingNotes.length>0?[c.coachingNotes[0],...c.coachingNotes.slice(1)]:l.teaching.lines,more:c.moreBody.trim()||l.teaching.more}}:l}function Ad(l){const{config:c,questionIndex:o,previousTonic:u,tonicOctave:f,shouldForceSinging:m,forcedMode:h,forcedAdaptiveKey:y,adaptiveContextKey:b}=l,S=c.randomTonicEvery>0&&o>0&&o%c.randomTonicEvery===0?Kl(u,c.tonicPool):u,x=Zs(S,f),L=h??Hx(c.modePool);if(L==="scale_degree"){const T=Ux(c.degreeLevel),he=y?.startsWith("degree:")?y.slice(7):null,P=vr(T,W=>W===he,W=>hr(`degree:${W}`,{contextKey:b})),le=[P,...Oa(T,3,P)];if(Math.random()<c.predictiveResolutionChance&&T.includes("7")){const W=Kt(S,f,"7",c.tonalMode);return Nn({...Mn({mode:"scale_degree",tonic:S,tonicMidi:x,prompt:"Where does this unstable degree want to resolve?",playbackPlan:{kind:"sequence",events:[{atBeats:0,durationBeats:.7,freqHz:Me(x),gain:.75},{atBeats:.9,durationBeats:.85,freqHz:Me(W),gain:.86}]},answerChoices:["1","6","5","2"],correctAnswer:"1",enforceSinging:m,revealAfterSinging:m,adaptiveFocusKey:"resolution:7->1",feedback:{title:"7 -> 1",subtitle:"Leading tone resolves to tonic.",explanation:"7 is unstable because it resolves to 1."},teaching:{lines:["This pitch sits one semitone below tonic, so your ear expects closure.","When it rises to 1, tension drops immediately."],more:"In tonal melodies, this pull helps define the key center and makes cadences feel complete.",tendencyHint:"Leading tone tendency: 7 usually resolves up to 1."},compareAudio:{label:"Play nearby pull",description:"Compare 7 against 6 before hearing the tonic.",playbackPlan:{kind:"sequence",events:[{atBeats:0,durationBeats:.55,freqHz:Me(x),gain:.72},{atBeats:.65,durationBeats:.55,freqHz:Me(Kt(S,f,"6",c.tonalMode)),gain:.84},{atBeats:1.35,durationBeats:.55,freqHz:Me(W),gain:.88},{atBeats:2.05,durationBeats:.75,freqHz:Me(x),gain:.9}]}},metadata:{stability:"strong_tendency",solfege:"Ti -> Do",tonalMode:c.tonalMode,visualCue:{activeDegree:"7",movement:{from:"7",to:"1"},timelineMidis:[x,W]}}}),predictiveResolution:{isPredictiveResolution:!0,unstableDegree:"7",expectedResolution:"1"}})}const ge=vx(P),pe=Kt(S,f,P,c.tonalMode),E=Vx(P,T,c.tonalMode),X=E?Kt(S,f,E,c.tonalMode):null;return Nn(Mn({mode:"scale_degree",tonic:S,tonicMidi:x,prompt:"Identify the scale degree against tonic.",playbackPlan:{kind:"sequence",events:[{atBeats:0,durationBeats:.72,freqHz:Me(x),gain:.76},{atBeats:.95,durationBeats:.95,freqHz:Me(pe),gain:.88}]},answerChoices:le.sort(()=>Math.random()-.5),correctAnswer:P,enforceSinging:m,revealAfterSinging:m,adaptiveFocusKey:`degree:${P}`,feedback:{title:`Degree ${P}`,subtitle:ge.replace("_"," "),explanation:kp(P)},teaching:{lines:[`Hear degree ${P} as a color measured from tonic.`,kp(P)],more:`In ${c.tonalMode.replace("_"," ")}, this degree gets its identity from distance to 1 and nearby tendency tones.`,tendencyHint:P==="7"?"Leading tone tendency: 7 leans up to 1.":P==="4"||P==="#4"?"Upper tendency: this color often settles toward 3 or 5.":void 0},compareAudio:E&&X!=null?{label:`Play neighbor (${E})`,description:`Contrast degree ${P} with the nearest nearby degree.`,playbackPlan:{kind:"sequence",events:[{atBeats:0,durationBeats:.6,freqHz:Me(x),gain:.72},{atBeats:.75,durationBeats:.65,freqHz:Me(pe),gain:.9},{atBeats:1.6,durationBeats:.65,freqHz:Me(X),gain:.86}]}}:void 0,metadata:{stability:ge,solfege:Gu(P),tonalMode:c.tonalMode,visualCue:{activeDegree:P,timelineMidis:[x,pe]}}}))}if(L==="functional_interval"){const T=y?.startsWith("movement:")?y.slice(9):null,he=vr(Hs(c.intervalLevel),([te,fe])=>`${te}->${fe}`===T,([te,fe])=>hr(`movement:${Tv(te,fe)}`,{contextKey:b})),[P,le]=he,ve=Kt(S,f,P,c.tonalMode);let ge=Kt(S,f,le,c.tonalMode);c.intervalLevel===4&&P==="1"&&le==="1"&&(ge+=12);const pe=Math.abs(ge-ve),E=Rp(pe),X=`${P}->${le}`,W=Gx(he,Hs(c.intervalLevel),c.tonalMode),xe=gx(P,le),je=pe>=11?pe-1:pe+1,M=ve+(ge>=ve?je:-je),G=Rp(Math.abs(M-ve)),J=pe===6?"Tritone tendency: hear the two notes wanting to resolve inward or outward.":P==="7"&&le==="1"?"Leading tone tendency: 7 usually rises to 1.":void 0;return Nn(Mn({mode:"functional_interval",tonic:S,tonicMidi:x,prompt:"Identify the scale-degree movement.",playbackPlan:zp(c.intervalPlaybackVariant,x,ve,ge),answerChoices:W,correctAnswer:X,enforceSinging:m,revealAfterSinging:m,adaptiveFocusKey:`movement:${X}`,feedback:{title:`${P} -> ${le}`,subtitle:E,note:xe,explanation:xe},teaching:{lines:["Intervals are heard as direction and distance from the start tone.",`This one is ${E}, so keep that span in memory before naming the motion.`],more:"If two options feel close, focus on how strongly the second pitch pushes toward rest or away from it.",tendencyHint:J},compareAudio:{label:`Play neighbor (${G})`,description:`Compare ${E} against a one-semitone neighbor.`,playbackPlan:zp(c.intervalPlaybackVariant,x,ve,M)},metadata:{intervalName:E,semitones:pe,solfege:`${Gu(P)} -> ${Gu(le)}`,tonalMode:c.tonalMode,visualCue:{movement:{from:P,to:le},timelineMidis:[ve,ge]}}}))}if(L==="timing_grid"){const T=Ox(c.timingLevel),he=y?.startsWith("syncopation:")?y.slice(12):null,P=T.targetBeats.some(ve=>Math.abs(ve%1)>1e-4);if(T.questionKind==="meter_pick"){const ve=["2/4","3/4","4/4"],ge=[T.meter,...Oa(ve,3,T.meter)].sort(()=>Math.random()-.5);return Nn(Mn({mode:"timing_grid",tonic:S,tonicMidi:x,prompt:"Identify the meter from the pulse pattern.",playbackPlan:T.promptPlan,answerChoices:ge,correctAnswer:T.meter,enforceSinging:!1,revealAfterSinging:!1,adaptiveFocusKey:`meter:${T.meter}`,feedback:{title:T.meter,subtitle:T.subdivision,explanation:`The accents cycle every ${T.meter}.`},teaching:{lines:["Hear where the stronger beat returns, then count the distance between accents.",`Subdivision is ${T.subdivision}, but meter comes from recurring beat groups.`],more:"If two choices feel close, track the downbeat reset over at least two bars."},compareAudio:{label:"Replay with count-in",description:"Adds a lead-in click so the pulse settles first.",playbackPlan:T.replayWithCountIn},metadata:{tonalMode:c.tonalMode,countInBeats:T.meter==="2/4"?2:T.meter==="3/4"?3:4,timing:{questionKind:T.questionKind,meter:T.meter,subdivision:T.subdivision,quantizeStepBeats:T.quantizeStepBeats,bars:T.bars,targetBeats:T.targetBeats,patternLengthBeats:T.patternLengthBeats,supportsTapPad:!1,showErrorOverlay:!1}}}))}if(T.questionKind==="subdivision_pick"){const ve=["quarter","eighth","triplet","sixteenth"],ge=[T.subdivision,...Oa(ve,3,T.subdivision)].sort(()=>Math.random()-.5);return Nn(Mn({mode:"timing_grid",tonic:S,tonicMidi:x,prompt:"Identify the subdivision.",playbackPlan:T.promptPlan,answerChoices:ge,correctAnswer:T.subdivision,enforceSinging:!1,revealAfterSinging:!1,adaptiveFocusKey:`subdivision:${T.subdivision}`,feedback:{title:T.subdivision,subtitle:T.meter,explanation:`Smallest regular grid is ${T.subdivision}.`},teaching:{lines:["Subdivision is the smallest repeating slice between beats.","Count one beat and listen for equally spaced internal pulses."],tendencyHint:"Triplet hearing often feels rounder than straight eighths."},compareAudio:{label:"Replay with count-in",description:"Adds count-in clicks before the target pattern.",playbackPlan:T.replayWithCountIn},metadata:{tonalMode:c.tonalMode,countInBeats:T.meter==="2/4"?2:T.meter==="3/4"?3:4,timing:{questionKind:T.questionKind,meter:T.meter,subdivision:T.subdivision,quantizeStepBeats:T.quantizeStepBeats,bars:T.bars,targetBeats:T.targetBeats,patternLengthBeats:T.patternLengthBeats,supportsTapPad:!1,showErrorOverlay:!1}}}))}if(T.questionKind==="offbeat_pick"){const ve=["syncopated","on beat only"];return Nn(Mn({mode:"timing_grid",tonic:S,tonicMidi:x,prompt:"Does the pattern use syncopation?",playbackPlan:T.promptPlan,answerChoices:ve,correctAnswer:he==="yes"?"syncopated":he==="no"?"on beat only":P?"syncopated":"on beat only",enforceSinging:!1,revealAfterSinging:!1,adaptiveFocusKey:`syncopation:${P?"yes":"no"}`,feedback:{title:P?"syncopated":"on beat only",subtitle:T.meter,explanation:P?"Several hits land between main beats.":"Hits align to beat anchors only."},teaching:{lines:["Syncopation means stress on weak parts of the beat.","If taps feel pulled forward between beats, the line is syncopated."]},compareAudio:{label:"Replay with count-in",description:"Listen again with a stronger beat frame first.",playbackPlan:T.replayWithCountIn},metadata:{tonalMode:c.tonalMode,countInBeats:T.meter==="2/4"?2:T.meter==="3/4"?3:4,timing:{questionKind:T.questionKind,meter:T.meter,subdivision:T.subdivision,quantizeStepBeats:T.quantizeStepBeats,bars:T.bars,targetBeats:T.targetBeats,patternLengthBeats:T.patternLengthBeats,supportsTapPad:!1,showErrorOverlay:!1}}}))}const le=`${T.meter}:${T.subdivision}:${T.bars}`;return Nn(Mn({mode:"timing_grid",tonic:S,tonicMidi:x,prompt:"Tap the pattern back on the pad, then submit your timing.",playbackPlan:T.promptPlan,answerChoices:["tap_capture"],correctAnswer:"tap_capture",enforceSinging:!1,revealAfterSinging:!1,adaptiveFocusKey:`tap:${le}`,feedback:{title:"Timing capture",subtitle:`${T.meter} / ${T.subdivision}`,explanation:"Quantized tap timing is compared against the source rhythm."},teaching:{lines:["Lock to the internal pulse before tapping.","Stay on the same grid size you heard in the prompt."]},compareAudio:{label:"Replay with count-in",description:"Count-in plus pattern for another attempt.",playbackPlan:T.replayWithCountIn},metadata:{tonalMode:c.tonalMode,countInBeats:T.meter==="2/4"?2:T.meter==="3/4"?3:4,timing:{questionKind:T.questionKind,meter:T.meter,subdivision:T.subdivision,quantizeStepBeats:T.quantizeStepBeats,bars:T.bars,targetBeats:T.targetBeats,patternLengthBeats:T.patternLengthBeats,supportsTapPad:!0,showErrorOverlay:!0}}}))}if(L==="phrase_recall"){const T=Ex({level:c.phraseLevel,preferredInputMode:c.dictationInputMode,tonic:S,octave:f,tonalMode:c.tonalMode}),he=T.measureGroups.map(P=>P.join(" ")).join(" | ");return Nn(Mn({mode:"phrase_recall",tonic:S,tonicMidi:x,prompt:"Recreate the melodic line.",playbackPlan:T.playbackPlan,answerChoices:T.answerChoices,correctAnswer:T.correctAnswer,enforceSinging:!1,revealAfterSinging:!1,adaptiveFocusKey:`phrase:${T.tag}`,feedback:{title:`${T.tag} line`,subtitle:`${T.bars} bars`,explanation:`Correct line: ${he}`},teaching:{lines:["Hold contour first, then fill exact degrees.","Split the phrase into bars before naming details."],tendencyHint:T.tag==="stepwise"?"Stepwise lines usually move by adjacent scale steps.":T.tag==="triadic"?"Triadic lines outline chord tones (1-3-5 family).":"Chromatic lines include altered scale colors."},compareAudio:{label:"Replay with count-in",description:"Count-in first, then the full line.",playbackPlan:T.replayWithCountIn},metadata:{tonalMode:c.tonalMode,countInBeats:4,phrase:{bars:T.bars,tag:T.tag,inputMode:T.inputMode,expectedDegrees:T.degrees,measureGroups:T.measureGroups,measurePlaybackPlans:T.measurePlaybackPlans,replayWithCountIn:T.replayWithCountIn}}}))}if(y?.startsWith("quality:")){const T=bx(c.harmonyLevel),he=y?.slice(8)??null,P=vr(T,W=>W===he,W=>hr(`quality:${W}`,{contextKey:b})),le=yx(P),ve=Bp(x,P),ge=Yx(P),pe=Bp(x,ge),E=[Vl(P),...Oa(T.map(Vl),3,Vl(P))].sort(()=>Math.random()-.5),X=P==="dominant7"?"Dominant tendency: this quality strongly wants to resolve to tonic harmony.":P==="half_diminished7"||P==="diminished"?"Diminished color usually sounds unstable and points toward resolution.":void 0;return Nn(Mn({mode:"functional_harmony",tonic:S,tonicMidi:x,prompt:"Identify the chord quality in context (I -> ?).",playbackPlan:qp(c.harmonyPlaybackVariant,x,ve),answerChoices:E,correctAnswer:Vl(P),enforceSinging:m,revealAfterSinging:m,adaptiveFocusKey:`quality:${P}`,feedback:{title:Vl(P),subtitle:le,explanation:`Heard as ${le} function relative to tonic.`},teaching:{lines:[`${Vl(P)} is a chord-color, not just a shape.`,`${le[0].toUpperCase()}${le.slice(1)} function tells you how strongly it feels at rest versus in motion.`],more:"As you replay, compare third and seventh placement because they usually define quality and pull.",tendencyHint:X},compareAudio:{label:`Play neighbor (${Vl(ge)})`,description:"Hear a closely related quality in the same tonic context.",playbackPlan:qp(c.harmonyPlaybackVariant,x,pe)},metadata:{chordQuality:P,functionLabel:le,chordTones:ve.map(W=>`${W}`),harmonyQuestionKind:"quality",tonalMode:c.tonalMode,visualCue:{timelineMidis:ve}}}))}const D=Kx({config:c,forcedAdaptiveKey:y,adaptiveContextKey:b}),U=Oi(D.romanPath),k=Ku(x,c.tonalMode,D.romanPath),$=D.romanPath.map(qs),F=Yu(D.romanPath),de=(y?.startsWith("cadence:")?"cadence_type":y?.startsWith("changed_position:")?"changed_chord":y?.startsWith("progression:")?"roman_path":null)??Qx(D.stage),be=wv(D.stage);if(de==="roman_path"){const T=rd(c.tonalMode,c.harmonyLevel).filter(le=>le.stage<=D.stage).map(le=>Oi(le.romanPath)),he=[U,...Oa(T,be-1,U)].sort(()=>Math.random()-.5),P=rd(c.tonalMode,c.harmonyLevel).find(le=>le.romanPath.length===D.romanPath.length&&Oi(le.romanPath)!==U);return Nn(Mn({mode:"functional_harmony",tonic:S,tonicMidi:x,prompt:"Identify the Roman-numeral path.",playbackPlan:Ri(c.harmonyPlaybackVariant,x,k),answerChoices:he,correctAnswer:U,enforceSinging:m,revealAfterSinging:m,adaptiveFocusKey:`progression:${U}`,feedback:{title:U,subtitle:`${pr(D.cadenceType)} cadence`,explanation:F},teaching:{lines:["Hear each chord as function, not as an isolated sonority.",F],more:"Track the dominant arrival and whether it resolves or suspends, then map that direction onto the full path.",tendencyHint:`Cadence cue: ${pr(D.cadenceType)} endings are shaped by the last chord's function.`},compareAudio:P?{label:`Play contrast (${Oi(P.romanPath)})`,description:"Compare against another path with the same number of chords.",playbackPlan:Ri(c.harmonyPlaybackVariant,x,Ku(x,c.tonalMode,P.romanPath))}:void 0,metadata:{harmonyQuestionKind:"roman_path",romanPath:D.romanPath,cadenceType:D.cadenceType,functionLabels:$,functionLabel:$[$.length-1],pullSummary:F,chordTones:k.flat().map(le=>`${le}`),tonalMode:c.tonalMode,visualCue:{timelineMidis:k.flat()}}}))}if(de==="cadence_type"){const T=pr(D.cadenceType),he=D.romanPath[D.romanPath.length-1],P=qs(he);return Nn(Mn({mode:"functional_harmony",tonic:S,tonicMidi:x,prompt:"Identify the cadence type.",playbackPlan:Ri(c.harmonyPlaybackVariant,x,k),answerChoices:$x(D.cadenceType,D.stage),correctAnswer:T,enforceSinging:m,revealAfterSinging:m,adaptiveFocusKey:`cadence:${D.cadenceType}`,feedback:{title:T,subtitle:U,explanation:`Final ${he} sounds ${P} and ${od(P)}`},teaching:{lines:[`Cadence hearing starts at the end: this path lands on ${he}.`,`That ending functions as ${P}, so notice how complete or suspended it feels.`],more:"Authentic closes on tonic after dominant pull, plagal returns from IV/iv to tonic, and half cadences pause on dominant.",tendencyHint:`Function path: ${F}`},metadata:{harmonyQuestionKind:"cadence_type",romanPath:D.romanPath,cadenceType:D.cadenceType,functionLabels:$,functionLabel:P,pullSummary:F,chordTones:k.flat().map(le=>`${le}`),tonalMode:c.tonalMode,visualCue:{timelineMidis:k.flat()}}}))}const re=Dx({tonalMode:c.tonalMode,romanPath:D.romanPath});if(!re)return Nn(Mn({mode:"functional_harmony",tonic:S,tonicMidi:x,prompt:"Identify the Roman-numeral path.",playbackPlan:Ri(c.harmonyPlaybackVariant,x,k),answerChoices:[U],correctAnswer:U,enforceSinging:m,revealAfterSinging:m,adaptiveFocusKey:`progression:${U}`,feedback:{title:U,explanation:F},teaching:{lines:["Hear function and direction as a sequence."]},metadata:{harmonyQuestionKind:"roman_path",romanPath:D.romanPath,functionLabels:$,functionLabel:$[$.length-1],pullSummary:F,tonalMode:c.tonalMode}}));const ce=Ku(x,c.tonalMode,re.changedPath),Ae=qs(re.to);return Nn(Mn({mode:"functional_harmony",tonic:S,tonicMidi:x,prompt:"Compare with the reference and identify which chord position changed.",playbackPlan:Ri(c.harmonyPlaybackVariant,x,ce),answerChoices:Xx(re.changedPath.length,re.index,D.stage),correctAnswer:`Chord ${re.index+1}`,enforceSinging:m,revealAfterSinging:m,adaptiveFocusKey:`changed_position:${re.index+1}`,feedback:{title:`Chord ${re.index+1}`,subtitle:`${re.from} -> ${re.to}`,explanation:`${re.to} is ${Ae} and ${od(Ae)}`},teaching:{lines:["Listen for where the function track shifts, not just where a single pitch differs.",`${re.from} changed to ${re.to}, changing the directional pull at that moment.`],more:`Reference path: ${U}. Changed path: ${Oi(re.changedPath)}.`,tendencyHint:`Function path now: ${Yu(re.changedPath)}`},compareAudio:{label:"Play reference path",description:`Reference: ${U}`,playbackPlan:Ri(c.harmonyPlaybackVariant,x,k)},metadata:{harmonyQuestionKind:"changed_chord",romanPath:re.changedPath,cadenceType:D.cadenceType,changedChordIndex:re.index,changedFromRoman:re.from,changedToRoman:re.to,functionLabels:re.changedPath.map(qs),functionLabel:Ae,pullSummary:Yu(re.changedPath),chordTones:ce.flat().map(T=>`${T}`),tonalMode:c.tonalMode,visualCue:{timelineMidis:ce.flat()}}}))}function Px(l){const c=[...l];for(let o=c.length-1;o>0;o--){const u=Math.floor(Math.random()*(o+1));[c[o],c[u]]=[c[u],c[o]]}return c}function Zx(l){return l==="scale_degree"||l==="functional_interval"?4:l==="functional_harmony"?2:l==="timing_grid"?3:2.8}function Jx(l,c){const u=(c.length>0?c:["scale_degree","functional_interval","functional_harmony"]).flatMap(m=>Array.from({length:Math.max(1,Math.round(Zx(m)))},()=>m)),f=Array.from({length:l},()=>u[Math.floor(Math.random()*u.length)]);return Px(f)}function Mr(l){const{config:c,questionCount:o,startTonic:u,tonicOctave:f,reviewStrategy:m}=l,h=c.sessionType==="guided"?Jx(o,c.modePool):[],y=Math.ceil(o*c.singingQuota),b=m==null?[]:ax({strategy:m,limit:o,modePool:c.modePool,tonalGroup:c.tonalMode==="major"?"major":c.tonalMode.includes("minor")?"minor":"mixed"});let g=u;const S=[];for(let x=0;x<o;x++){const L=x<y?!0:c.sessionType==="free"&&c.singingQuota>0,H=b[x],D=Ad({config:c,questionIndex:x,previousTonic:g,tonicOctave:f,shouldForceSinging:L,forcedMode:H?.mode??h[x],forcedAdaptiveKey:H?.key,adaptiveContextKey:H?.context});g=D.tonic,S.push(D)}return S}function Fx(l){return l==="major"?"major":l!=null&&l.includes("minor")?"minor":"mixed"}function Ix(l){return l.mode==="functional_harmony"?"harmonic":l.mode==="timing_grid"?"melodic":l.mode==="functional_interval"&&l.playbackPlan.kind==="chord"?"harmonic":"melodic"}function wd(l){const c=l.question,o=[c.adaptiveFocusKey];c.mode==="functional_harmony"&&c.metadata.functionLabel&&o.push(`function:${c.metadata.functionLabel}`);const u=`${c.mode}:${Ix(c)}:${Fx(c.metadata.tonalMode)}`;Nd({itemId:c.id,mode:c.mode,correct:l.correct,responseMs:l.responseMs,contextKey:u,adaptiveKeys:o})}function Wx(l){const c=Math.max(1,l.questionCount),o=[];let u=l.startTonic;for(let f=0;f<c;f++){const m=Ad({config:l.config,questionIndex:f,previousTonic:u,tonicOctave:l.tonicOctave,shouldForceSinging:!1,forcedMode:l.sourceQuestion.mode,forcedAdaptiveKey:l.sourceQuestion.adaptiveFocusKey});u=m.tonic,o.push(m)}return o}function e1(l){let c=l.startTonic;return l.drills.map((o,u)=>{const f=Ad({config:l.config,questionIndex:u,previousTonic:c,tonicOctave:l.tonicOctave,shouldForceSinging:!1,forcedMode:o.mode,forcedAdaptiveKey:o.adaptiveKey});return c=f.tonic,f})}const t1=[["1","2","3"],["3","2","1"],["1","3","2","1"],["5","6","5","3"],["1","2","4","3"]],n1=["2","3","4","5","6","7"],a1=["2","3","4","5","6","7"];function Xu(){return Math.random().toString(36).slice(2,10)}function Pu(l){return l[Math.floor(Math.random()*l.length)]}function ud(l,c,o,u=.84){return{atBeats:c,durationBeats:o,freqHz:Me(l),gain:u}}function Up(l,c=!0){const o=[];let u=0;c&&l.length>0&&(o.push(ud(l[0],u,.7,.74)),u+=.9);const f=c?1:0;for(let m=f;m<l.length;m++)o.push(ud(l[m],u,.62,.88)),u+=.75;return{kind:"sequence",events:o}}function Zu(l){return l==="major"?"major":l.includes("minor")?"minor":"mixed"}function l1(l,c){let o=c,u=Math.abs(l-c);for(const f of[-24,-12,12,24]){const m=c+f,h=Math.abs(l-m);h<u&&(o=m,u=h)}return o}function za(l,c){return(l-l1(l,c))*100}function i1(l){const{kind:c,tonicMidi:o,tonalMode:u}=l;if(c==="interval_echo"){const h=Pu(n1),y=o+yl(h,u);return{id:`voice_${Xu()}`,kind:c,label:`Echo ${h}`,instructions:`Hear tonic to ${h}, then sing the target note back.`,targetMidis:[y],targetLabels:[h],promptPlan:Up([o,y]),tonicMidi:o,progressMode:"functional_interval",progressItemId:`voice:functional_interval:1->${h}`,adaptiveKeys:[`movement:1->${h}`],contextKey:`voice:functional_interval:${Zu(u)}`}}if(c==="degree_match"){const h=Pu(a1),y=o+yl(h,u);return{id:`voice_${Xu()}`,kind:c,label:`Hold ${h} over the drone`,instructions:`Keep the tonic drone in your ear and hold degree ${h} until the tuner settles.`,targetMidis:[y],targetLabels:[h],promptPlan:{kind:"sequence",events:[ud(o,0,.8,.72)]},droneMidi:o,tonicMidi:o,progressMode:"scale_degree",progressItemId:`voice:scale_degree:${h}`,adaptiveKeys:[`degree:${h}`],contextKey:`voice:scale_degree:${Zu(u)}`}}const f=Pu(t1),m=f.map(h=>o+yl(h,u));return{id:`voice_${Xu()}`,kind:c,label:`Echo motif ${f.join("-")}`,instructions:"Listen once, then sing the full response in the same order.",targetMidis:m,targetLabels:[...f],promptPlan:Up([o,...m]),tonicMidi:o,progressMode:"phrase_recall",progressItemId:`voice:phrase_recall:${f.join("-")}`,adaptiveKeys:[`phrase:voice_${f.join("-")}`],contextKey:`voice:phrase_recall:${Zu(u)}`}}function kr(l){if(l.length===0)return[];const c=[];let o=0;for(let u=1;u<=l.length;u++){const f=l[u],m=l[u-1];if(!(u===l.length||f.atMs-m.atMs>220||Math.abs(f.midi-m.midi)>1.35))continue;const y=l.slice(o,u),b=y[0].atMs,g=y[y.length-1].atMs,S=g-b;if(S>=180){const x=y.reduce((L,H)=>L+H.midi,0)/y.length;c.push({startMs:b,endMs:g,durationMs:S,avgMidi:x})}o=u}return c}function s1(l){const c=kr(l);if(c.length===0)return null;const o=[...c].sort((u,f)=>f.durationMs-u.durationMs)[0];return Math.round(o.avgMidi)}function c1(l,c,o){if(c.length===0)return{correct:!1,summary:`No stable pitch detected near ${Ba(l)}.`,matched:0,expected:1,centsOff:[],scoredMidis:[]};const u=[...c].sort((y,b)=>b.durationMs-y.durationMs)[0],f=za(u.avgMidi,l),m=Math.abs(f)<=o,h=f>0?"sharp":"flat";return{correct:m,summary:m?`Stable and centered on ${Ba(l)}.`:`${Ba(l)} was ${Math.round(Math.abs(f))} cents ${h}.`,matched:m?1:0,expected:1,centsOff:[f],scoredMidis:[u.avgMidi]}}function r1(l,c){let o=0;for(let u=0;u<l.length;u++)o+=Math.abs(za(c[u].avgMidi,l[u]));return o}function o1(l){const{exercise:c,samples:o,toleranceCents:u}=l,f=kr(o);if(c.targetMidis.length===1)return c1(c.targetMidis[0],f,u);if(f.length<c.targetMidis.length)return{correct:!1,summary:`Captured ${f.length} stable notes out of ${c.targetMidis.length}.`,matched:0,expected:c.targetMidis.length,centsOff:[],scoredMidis:f.map(x=>x.avgMidi)};let m=0,h=Number.POSITIVE_INFINITY;for(let x=0;x<=f.length-c.targetMidis.length;x++){const L=f.slice(x,x+c.targetMidis.length),H=r1(c.targetMidis,L);H<h&&(h=H,m=x)}const y=f.slice(m,m+c.targetMidis.length),b=y.map((x,L)=>za(x.avgMidi,c.targetMidis[L])),g=b.filter(x=>Math.abs(x)<=u).length,S=g===c.targetMidis.length;return{correct:S,summary:S?"Contour and pitch centers matched the response.":`Matched ${g}/${c.targetMidis.length} notes inside tolerance.`,matched:g,expected:c.targetMidis.length,centsOff:b,scoredMidis:y.map(x=>x.avgMidi)}}const kd="et_settings_v1",dd="et_settings_changed",Ql={keyRoot:"C",octave:3,tempoBpm:90,masterGain:.25,timbre:"triangle",keyboardMiddleCMapping:"B",keyboardAccidentalStyle:"flat",droneEnabled:!1,visualsEnabled:!0,range:{lowMidi:48,highMidi:72}};function St(){const l=Xl(kd,Ql);return{...Ql,...l,range:{...Ql.range,...l.range??{}}}}function Ks(l){fn(kd,l),typeof window<"u"&&window.dispatchEvent(new Event(dd))}function bl(l){if(typeof window>"u")return()=>{};const c=u=>{u.key===kd&&l()},o=()=>l();return window.addEventListener("storage",c),window.addEventListener(dd,o),()=>{window.removeEventListener("storage",c),window.removeEventListener(dd,o)}}const Dv="et_voice_settings_v1",u1={toleranceCents:25,noiseGate:.018,holdDurationMs:900,exerciseKind:"interval_echo"};function Rd(){const l=Xl(Dv,u1);return{...l,exerciseKind:k0(l.exerciseKind)}}function d1(l){fn(Dv,l)}const Dd="et_analytics_v1",f1="et_analytics_changed";function m1(){return`evt_${Math.random().toString(36).slice(2,10)}`}function Lv(){typeof window<"u"&&window.dispatchEvent(new Event(f1))}function Ld(){return Xl(Dd,[])}function En(l,c,o){const u=Ld();u.push({id:m1(),name:l,route:c,data:o,ts:Date.now()}),fn(Dd,u.slice(-600)),Lv()}function Od(){fn(Dd,[]),Lv()}function h1(){const l=Ld(),c=l.filter(g=>g.name==="page_view").length,o=l.filter(g=>g.name==="session_complete").length,u=l.filter(g=>g.name==="session_abandon").length,f=l.filter(g=>g.name==="question_answered").length,m=new Map,h=new Map;for(const g of l)m.set(g.route,(m.get(g.route)??0)+1),g.name==="session_abandon"&&h.set(g.route,(h.get(g.route)??0)+1);const y=g=>[...g.entries()].map(([S,x])=>({route:S,count:x})).sort((S,x)=>x.count-S.count).slice(0,5),b=o+u;return{totalEvents:l.length,pageViews:c,completedSessions:o,abandonedSessions:u,answerCount:f,completionRate:b>0?o/b:0,topRoutes:y(m),dropOffRoutes:y(h)}}const p1=new Set([1,3,6,8,10]);function Gp(l){return p1.has((l%12+12)%12)}function v1(l){const c=(l%12+12)%12;return l-c}function g1(l){const c=(l%12+12)%12;return l+(11-c)}function Ov({midis:l,tonicMidi:c,width:o=320,height:u=120}){if(l.length===0)return null;const f=Math.min(...l,c??127),m=Math.max(...l,c??0),h=Math.max(24,v1(f-1)),y=Math.min(96,g1(m+1)),b=Array.from({length:y-h+1},(k,$)=>h+$),g=b.filter(k=>!Gp(k)),S=o/Math.max(1,g.length),x=S*.62,L=u*.62,H=new Set(l),D=[];let U=0;for(const k of b){if(!Gp(k)){D.push({midi:k,x:U*S,width:S,isBlack:!1}),U+=1;continue}D.push({midi:k,x:Math.max(0,U*S-x*.5),width:x,isBlack:!0})}return s.jsxs("svg",{width:o,height:u,viewBox:`0 0 ${o} ${u}`,role:"img","aria-label":"Keyboard view",children:[s.jsx("rect",{x:0,y:0,width:o,height:u,rx:10,fill:"rgba(0,0,0,0.03)"}),D.filter(k=>!k.isBlack).map(k=>{const $=H.has(k.midi),F=c===k.midi;return s.jsx("rect",{x:k.x,y:0,width:k.width,height:u,fill:$?"rgba(199,91,18,0.22)":"rgba(255,255,255,0.96)",stroke:F?"rgba(24,95,220,0.75)":"rgba(0,0,0,0.18)",strokeWidth:F?2:1},`white_${k.midi}`)}),D.filter(k=>k.isBlack).map(k=>{const $=H.has(k.midi),F=c===k.midi;return s.jsx("rect",{x:k.x,y:0,width:k.width,height:L,rx:4,fill:$?"rgba(199,91,18,0.78)":"rgba(20,33,61,0.9)",stroke:F?"rgba(24,95,220,0.9)":"rgba(0,0,0,0.45)",strokeWidth:F?2:1},`black_${k.midi}`)})]})}const y1=["1","2","3","4","5","6","7"],b1={freqHz:null,midi:null,cents:null,clarity:0,rms:0,isSignal:!1,noteLabel:null};function x1(l,c){const o=u=>6e4/c*u;if(l.kind==="note"||l.kind==="chord")return o((l.atBeats??0)+l.durationBeats);if(l.kind==="sequence"){const u=l.events.reduce((f,m)=>Math.max(f,m.atBeats+m.durationBeats),0);return o(u)}return 0}const Vp=[{key:"showAnswerNoteNames",title:"Note name answers",description:"Adds note names like 2 (F) or 3->2 (G-F) to answer buttons."},{key:"allowPromptReplay",title:"Replay prompt",description:"Shows a replay button so the current prompt can be heard more than once."},{key:"droneEnabled",title:"Drone",description:"Plays a steady, sustained tonic underneath each prompt."},{key:"enforceSinging",title:"Sing before reveal",description:"Holds back the final pitch on sing-back prompts until you reveal it manually."},{key:"requireMicForSinging",title:"Mic answer input",description:"Registers your sung note or sung interval as the answer on supported pitch prompts."},{key:"allowKeyboardInput",title:"Keyboard input",description:"Adds a text box so you can type the exact answer label."}],Yp=[{key:"showExplainWhy",title:"Show 'Explain Why' Button",description:"Lets the user open the post-answer explanation panel."},{key:"showIntervalNames",title:"Interval names",description:"Shows labels like m3, P5, or M6 in the explanation panel."},{key:"showSemitoneCount",title:"Semitone count",description:"Shows the raw semitone distance in the explanation panel."},{key:"showSolfege",title:"Solfege",description:"Shows movable-do syllables when that prompt includes them."},{key:"showScaleMap",title:"Degree map",description:"Shows a 1-7 degree strip with the active movement highlighted."},{key:"showPianoStrip",title:"Keyboard Excerpt",description:"Shows a small keyboard view of the notes involved."}];function Ju(l){return{sessionType:"free",modePool:l.modePool.length>0?l.modePool:["scale_degree"],tonicPool:l.tonicPool,intervalLevel:l.intervalLevel,degreeLevel:l.degreeLevel,harmonyLevel:l.harmonyLevel,timingLevel:l.timingLevel,phraseLevel:l.phraseLevel,dictationInputMode:l.dictationInputMode,tonalMode:l.tonalMode,intervalPlaybackVariant:l.intervalVariant,harmonyPlaybackVariant:l.harmonyVariant,randomTonicEvery:l.tonicMode==="random"?3:-1,singingQuota:l.enforceSinging?1:0,predictiveResolutionChance:.2}}function S1(){const[l,c]=pv(),[o,u]=p.useState(St()),[f,m]=p.useState(xr()),[h]=p.useState(Rd()),[y,b]=p.useState($l()),[g,S]=p.useState("random"),[x,L]=p.useState(St().keyRoot),[H,D]=p.useState(void 0),[U,k]=p.useState(1),[$,F]=p.useState(1),[ee,de]=p.useState(1),[be,re]=p.useState(1),[ce,Ae]=p.useState(1),[T,he]=p.useState("multiple_choice"),[P,le]=p.useState("scale_context"),[ve,ge]=p.useState("block"),[pe,E]=p.useState("major"),[X,W]=p.useState([]),[xe,je]=p.useState(0),[M,G]=p.useState(null),[J,te]=p.useState(!1),[fe,I]=p.useState(""),[Se,qe]=p.useState(!1),[Le,ft]=p.useState(null),[ze,rt]=p.useState(b1),[mt,K]=p.useState(null),[ae,ie]=p.useState(0),[Ne,we]=p.useState(!1),[Pe,ke]=p.useState(0),[Ee,Ct]=p.useState({attempts:0,correct:0}),[Qt,lt]=p.useState(null),[tn,Tn]=p.useState(0),[nn,O]=p.useState(null),[Z,Te]=p.useState(null),[Lt,it]=p.useState(null),[Jt,Ie]=p.useState(0),[zt,gt]=p.useState(0),[Ga,Hn]=p.useState(0),[oa,se]=p.useState(!1),[We,_t]=p.useState(!1),[yt,ht]=p.useState(null),[an,Va]=p.useState(!1),[ua,Un]=p.useState(null),[$t,ln]=p.useState([]),[Gn,da]=p.useState([]),[fa,Ya]=p.useState([]),[xl,Zl]=p.useState(""),[Jl,Wn]=p.useState(cd()),[At,Bt]=p.useState("free"),mn=p.useRef(!1),Ka=p.useRef(null),Hi=p.useRef(null),Fs=p.useRef(null),Ui=p.useRef(null),ea=p.useRef(null),Fl=p.useRef(null),ma=p.useRef(0),Ft=p.useRef(null),hn=p.useRef(null),ta=p.useRef(!1),ot=p.useRef([]),Il=p.useRef(!1),ha=p.useRef(null);p.useEffect(()=>bl(()=>u(St())),[]),p.useEffect(()=>Td(()=>Wn(cd())),[]),p.useEffect(()=>()=>{mn.current&&Ee.attempts>0&&En("session_abandon","/practice",{attempts:Ee.attempts,modeCount:y.length})},[y.length,Ee.attempts]);const qt=Z!=null,B=qt?Z[Jt]:X[xe],ut=f.freePracticeToggles,pa=X.length>0||qt||nn!=null,Qa=y.includes("scale_degree"),pn=y.includes("functional_interval"),va=g==="random",Cn=p.useMemo(()=>{if(!B||B.metadata.phrase||B.metadata.timing?.supportsTapPad)return[];const _=B.metadata.tonalMode??pe,q=Rt(B.tonicMidi).octave;return B.mode==="scale_degree"?B.answerChoices.map(ne=>({answer:ne,targetMidis:[Kt(B.tonic,q,ne,_)],label:Ba(Kt(B.tonic,q,ne,_))})):B.mode==="functional_interval"?B.answerChoices.map(ne=>{const[oe,Re]=ne.split("->");if(!oe||!Re)return null;const Ce=Kt(B.tonic,q,oe,_);let Ye=Kt(B.tonic,q,Re,_);return ne===B.correctAnswer&&B.metadata.semitones===12&&oe==="1"&&Re==="1"&&(Ye+=12),{answer:ne,targetMidis:[Ce,Ye],label:`${Ba(Ce)} -> ${Ba(Ye)}`}}).filter(ne=>ne!=null):[]},[B,pe]),Xt=ut.requireMicForSinging&&!J&&!Ne&&M===null&&Cn.length>0,sn=ut.requireMicForSinging&&!J&&!Ne&&M===null&&B!=null&&!B.metadata.phrase&&!B.metadata.timing?.supportsTapPad&&Cn.length===0,ga=mt==null?null:Cn.find(_=>_.answer===mt)??null,Is=ga!=null&&ze.midi!=null?za(ze.midi,ga.targetMidis[ga.targetMidis.length-1]):null,Gi=B!=null&&M!==null&&(B.mode==="scale_degree"&&Qa||B.mode==="functional_interval"&&pn),Ws=p.useMemo(()=>Ee.attempts<10?!1:Ee.correct/Ee.attempts>=.8,[Ee.attempts,Ee.correct]),Wl=qt?Math.max(0,60-Math.floor((Ga-zt)/1e3)):0;p.useEffect(()=>{Il.current=Xt},[Xt]),p.useEffect(()=>{if(!qt)return;Hn(Date.now());const _=window.setInterval(()=>Hn(Date.now()),250);return()=>window.clearInterval(_)},[qt]),p.useEffect(()=>{if(se(!1),Un(null),ln([]),da([]),Ya([]),Zl(""),K(null),ie(0),ot.current=[],Ft.current=null,hn.current=null,ta.current=!1,!!B){if(G(null),ht(null),I(""),ke(Date.now()),ut.droneEnabled&&!ut.requireMicForSinging?Xe.setDrone(B.tonicMidi,{tempoBpm:o.tempoBpm,masterGain:o.masterGain,timbre:o.timbre},.16):Xe.clearDrone(),B.enforceSinging&&B.playbackPlan.kind==="sequence"&&B.playbackPlan.events.length>1){const _=B.playbackPlan.events.slice(0,B.playbackPlan.events.length-1);te(!0),It({kind:"sequence",events:_});return}te(!1),It(B.playbackPlan)}},[B,o.masterGain,o.tempoBpm,o.timbre,ut.droneEnabled,ut.requireMicForSinging]),p.useEffect(()=>()=>{Xe.clearDrone(),Xe.stopAll(),ha.current!=null&&window.clearTimeout(ha.current),ea.current!=null&&window.cancelAnimationFrame(ea.current),Ui.current?.getTracks().forEach(_=>_.stop()),Fs.current?.disconnect(),Hi.current?.disconnect(),Ka.current!=null&&Ka.current.close()},[]),p.useEffect(()=>{if(!Xt||ta.current){Ft.current=null,hn.current=null,K(null),ie(0);return}const _=kr(ot.current);let q;if(B?.mode==="scale_degree"){if(ze.midi==null||!ze.isSignal){Ft.current=null,hn.current=null,K(null),ie(0);return}const Re=ze.midi;q=Cn.map(Ce=>({...Ce,cents:za(Re,Ce.targetMidis[0])})).filter(Ce=>Math.abs(Ce.cents)<=h.toleranceCents).sort((Ce,Ye)=>Math.abs(Ce.cents)-Math.abs(Ye.cents))[0]}else if(B?.mode==="functional_interval"&&_.length>=2){const Re=_.slice(-2);q=Cn.filter(Ce=>Ce.targetMidis.length===2).map(Ce=>{const Ye=za(Re[0].avgMidi,Ce.targetMidis[0]),Wt=za(Re[1].avgMidi,Ce.targetMidis[1]);return{...Ce,cents:(Math.abs(Ye)+Math.abs(Wt))/2,firstCents:Ye,secondCents:Wt}}).filter(Ce=>Math.abs(Ce.firstCents)<=h.toleranceCents&&Math.abs(Ce.secondCents)<=h.toleranceCents).sort((Ce,Ye)=>Ce.cents-Ye.cents)[0]}if(!q){Ft.current=null,hn.current=null,K(null),ie(0);return}const ne=performance.now();if(hn.current!==q.answer){hn.current=q.answer,Ft.current=ne,K(q.answer),ie(0);return}Ft.current??=ne,K(q.answer);const oe=Math.max(0,Math.round(ne-Ft.current));ie(oe),oe>=h.holdDurationMs&&(ta.current=!0,na(q.answer))},[B?.mode,Xt,Cn,ze,h.holdDurationMs,h.toleranceCents]),p.useEffect(()=>{!an||!pa||(Va(!1),$a())},[an,pa,y,g,x,H,U,$,pe,P]);function ei(_){const q={...f,freePracticeToggles:_};m(q),Vs(q)}function Ht(_,q,ne,oe=!1,Re,Ce=!1){const Ye=ut[_];return s.jsx("button",{type:"button","aria-pressed":Ye,className:Ye?`checkbox-chip checkbox-chip--stacked checkbox-chip--selected${Ce?" checkbox-chip--compact":""}`:`checkbox-chip checkbox-chip--stacked${Ce?" checkbox-chip--compact":""}`,disabled:oe,onClick:()=>{const Wt=!Ye;if(Re){Re(Wt);return}ei({...ut,[_]:Wt})},children:s.jsxs("span",{className:"checkbox-chip__body",children:[s.jsx("span",{className:"checkbox-chip__title",children:q}),!Ce&&s.jsx("span",{className:"checkbox-chip__copy",children:ne})]})},_)}function Vi(_){const q=_.metadata.tonalMode??pe,ne=Rt(_.tonicMidi).octave;if(_.mode==="scale_degree"){const oe=Kt(_.tonic,ne,_.correctAnswer,q);return`${_.correctAnswer} (${Rt(oe).name})`}if(_.mode==="functional_interval"){const[oe,Re]=_.correctAnswer.split("->");if(oe&&Re){const Ce=Kt(_.tonic,ne,oe,q),Ye=Kt(_.tonic,ne,Re,q);return`${oe}-${Re} (${Rt(Ce).name}-${Rt(Ye).name})`}}return _.correctAnswer}function ec(_,q){const ne=_.metadata.tonalMode??pe,oe=Rt(_.tonicMidi).octave;if(_.mode==="scale_degree"){const Re=Kt(_.tonic,oe,q,ne);return{label:q,noteText:`(${Rt(Re).name})`}}if(_.mode==="functional_interval"){const[Re,Ce]=q.split("->");if(Re&&Ce){const Ye=Kt(_.tonic,oe,Re,ne),Wt=Kt(_.tonic,oe,Ce,ne);return{label:q,noteText:`(${Rt(Ye).name}-${Rt(Wt).name})`}}}return{label:q,noteText:null}}function Sl(_=At){if(_==="authored"){jl();return}if(_==="due"||_==="weak"){ya(_);return}ya()}function $a(){_t(!1),se(!1),G(null),ht(null),O(null),Te(null),it(null),Ie(0),Un(null),ln([]),da([]),Ya([]),Zl(""),Xe.clearDrone(),Xe.stopAll(),Sl()}function Vn(_){_(),pa&&Va(!0)}function Yi(_,q,ne){let oe={...ut,[_]:q};_==="requireMicForSinging"&&q&&(oe={...oe,enforceSinging:!0}),_==="enforceSinging"&&!q&&(oe={...oe,requireMicForSinging:!1}),ei(oe),ne&&pa&&Va(!0)}function It(_){ha.current!=null&&window.clearTimeout(ha.current);const q=x1(_,o.tempoBpm);we(q>0),Xe.play(_,{tempoBpm:o.tempoBpm,masterGain:o.masterGain,timbre:o.timbre}),!(q<=0)&&(ha.current=window.setTimeout(()=>{we(!1),ha.current=null},q+120))}function Dr(){if(B){if(J&&B.playbackPlan.kind==="sequence"&&B.playbackPlan.events.length>1){It({kind:"sequence",events:B.playbackPlan.events.slice(0,B.playbackPlan.events.length-1)});return}It(B.playbackPlan)}}async function tc(){if(!Se){if(!navigator.mediaDevices?.getUserMedia){ft("This browser does not expose microphone input.");return}try{const _=await navigator.mediaDevices.getUserMedia({audio:{echoCancellation:!1,noiseSuppression:!1,autoGainControl:!1}}),q=new AudioContext;await q.resume();const ne=q.createAnalyser();ne.fftSize=2048,ne.smoothingTimeConstant=.12;const oe=q.createMediaStreamSource(_);oe.connect(ne);const Re=new Float32Array(new ArrayBuffer(ne.fftSize*Float32Array.BYTES_PER_ELEMENT));Ka.current=q,Hi.current=ne,Fs.current=oe,Ui.current=_,Fl.current=Re,qe(!0),ft(null);const Ce=()=>{const Ye=Hi.current,Wt=Ka.current,Qn=Fl.current;if(!Ye||!Wt||!Qn)return;Ye.getFloatTimeDomainData(Qn);const $n=_d(Qn,Wt.sampleRate,h.noiseGate);if(Il.current&&$n.midi!=null){const An=[...ot.current,{atMs:performance.now(),midi:$n.midi,rms:$n.rms}];ot.current=An.slice(-160)}else Il.current||(ot.current=[]);const jt=performance.now();jt-ma.current>70&&(ma.current=jt,rt($n)),ea.current=window.requestAnimationFrame(Ce)};ea.current=window.requestAnimationFrame(Ce)}catch(_){const q=_ instanceof Error?_.message:"Microphone permission failed.";ft(q),qe(!1)}}}function nc(){if(!B||!J||B.playbackPlan.kind!=="sequence")return;const _=B.playbackPlan.events[B.playbackPlan.events.length-1];te(!1),ie(0),Ft.current=null,It({kind:"sequence",events:[{..._,atBeats:0}]})}function _l(){return{modePool:Jn(y),tonicMode:g,fixedTonic:x,tonicPool:H,intervalLevel:U,degreeLevel:$,harmonyLevel:ee,timingLevel:be,phraseLevel:ce,dictationInputMode:T,tonalMode:pe,intervalPlaybackVariant:P,harmonyPlaybackVariant:ve,toggles:ut}}function Ki(_){b(Jn(_.modePool)),S(_.tonicMode),L(_.fixedTonic),D(_.tonicPool),k(_.intervalLevel),F(_.degreeLevel),de(_.harmonyLevel),re(_.timingLevel),Ae(_.phraseLevel),he(_.dictationInputMode),E(_.tonalMode),le(_.intervalPlaybackVariant),ge(_.harmonyPlaybackVariant),ei(_.toggles)}function ya(_,q=_l()){const ne=Ju({modePool:q.modePool,tonicMode:q.tonicMode,tonicPool:q.tonicPool,intervalLevel:q.intervalLevel,degreeLevel:q.degreeLevel,harmonyLevel:q.harmonyLevel,timingLevel:q.timingLevel,phraseLevel:q.phraseLevel,dictationInputMode:q.dictationInputMode,tonalMode:q.tonalMode,intervalVariant:q.intervalPlaybackVariant,harmonyVariant:q.harmonyPlaybackVariant,enforceSinging:q.toggles.enforceSinging}),oe=Mr({config:ne,questionCount:15,startTonic:q.tonicMode==="random"?Kl(void 0,q.tonicPool??Zt):q.fixedTonic,tonicOctave:o.octave,reviewStrategy:_});W(oe),je(0),Ct({attempts:0,correct:0}),lt(_??null),Tn(0),O(null),Te(null),it(null),Ie(0),ht(null),Bt(_??"free"),mn.current=!0,En("session_start","/practice",{review:_??"none",questionCount:oe.length,modeCount:q.modePool.length})}function jl(_=_l()){const q=Ju({modePool:_.modePool,tonicMode:_.tonicMode,tonicPool:_.tonicPool,intervalLevel:_.intervalLevel,degreeLevel:_.degreeLevel,harmonyLevel:_.harmonyLevel,timingLevel:_.timingLevel,phraseLevel:_.phraseLevel,dictationInputMode:_.dictationInputMode,tonalMode:_.tonalMode,intervalVariant:_.intervalPlaybackVariant,harmonyVariant:_.harmonyPlaybackVariant,enforceSinging:!1}),ne=Jl.filter(Re=>_.modePool.includes(Re.mode));if(ne.length===0)return;const oe=e1({config:q,drills:ne.slice(0,12),startTonic:_.tonicMode==="random"?Kl(void 0,_.tonicPool??Zt):_.fixedTonic,tonicOctave:o.octave});W(oe),je(0),Ct({attempts:0,correct:0}),lt(null),Tn(0),O(null),Te(null),it(null),Ie(0),ht(null),Bt("authored"),mn.current=!0,En("session_start","/practice",{review:"authored",questionCount:oe.length})}function Yn(_,q=_l()){ya(void 0,q)}p.useEffect(()=>{const _=l.get("review"),q=l.get("mode"),ne=l.get("preset"),oe=l.get("quickplay"),Re=l.get("quickplayTopics"),Ce=l.get("quickplayTonicLevel"),Ye=l.get("quickplayFixedTonic"),Wt=l.get("quickplayFixedPool"),Qn=l.get("quickplayIntervalLevel"),$n=l.get("quickplayDegreeLevel"),jt=new URLSearchParams(l);let An=!1;if(oe){const Zi=Y0(oe,{modePool:Jn((Re??"").split(",").filter(El=>El==="scale_degree"||El==="functional_interval"||El==="functional_harmony"||El==="timing_grid"||El==="phrase_recall")),tonicSourceLevel:Ce==="3"?3:Ce==="2"?2:1,fixedTonic:Zt.includes(Ye??o.keyRoot)?Ye:o.keyRoot,fixedPoolRoot:Zt.includes(Wt??"C")?Wt:"C",intervalLevel:Qn==="4"?4:Qn==="3"?3:Qn==="2"?2:1,degreeLevel:$n==="3"?3:$n==="2"?2:1});Ki(Zi.settings),Yn("free",Zi.settings),jt.delete("quickplay"),jt.delete("quickplayTopics"),jt.delete("quickplayTonicLevel"),jt.delete("quickplayFixedTonic"),jt.delete("quickplayFixedPool"),jt.delete("quickplayIntervalLevel"),jt.delete("quickplayDegreeLevel"),An=!0}(q==="scale_degree"||q==="functional_interval")&&br(q)&&(b([q]),jt.delete("mode"),An=!0),(_==="due"||_==="weak")&&(ya(_),jt.delete("review"),An=!0),ne&&(Pi(ne),jt.delete("preset"),An=!0),An&&c(jt,{replace:!0})},[l,c]);function ti(_,q){if(!B)return;const ne=Math.max(1,Date.now()-Pe);if(K(null),ie(0),hn.current=null,G(_),wd({question:B,correct:q,responseMs:ne}),En("question_answered","/practice",{mode:B.mode,correct:q,responseMs:ne}),qt){if(!Z||Jt+1>=Z.length){ht({kind:"finish_focus_set"});return}ht({kind:"next_focus_question"});return}const oe=q?0:tn+1,Re=oe>=3;if(Ct(Ce=>({attempts:Ce.attempts+1,correct:Ce.correct+(q?1:0)})),Tn(Re?0:oe),Re){O(B),it(xe+1),ht({kind:"pause_for_focus_offer"});return}if(xe+1>=X.length){ht({kind:"restart_session"});return}ht({kind:"next_question"})}function na(_){B&&ti(_,_===B.correctAnswer)}function Xa(){if(yt){if(ht(null),G(null),yt.kind==="next_focus_question"){Ie(_=>_+1);return}if(yt.kind==="finish_focus_set"){Te(null),Ie(0),Lt!=null&&(Lt>=X.length?(mn.current=!1,En("session_complete","/practice",{attempts:Ee.attempts,accuracy:Ee.correct/Math.max(1,Ee.attempts)}),Sl()):je(Lt)),it(null);return}if(yt.kind!=="pause_for_focus_offer"){if(yt.kind==="restart_session"){mn.current=!1,En("session_complete","/practice",{attempts:Ee.attempts,accuracy:Ee.correct/Math.max(1,Ee.attempts)}),Sl();return}je(_=>_+1)}}}function Pa(){if(!B?.metadata.timing?.supportsTapPad)return;Un(Date.now()),ln([]),da([]);const _=B.compareAudio?.playbackPlan??B.playbackPlan;It(_)}function ac(){if(!B?.metadata.timing?.supportsTapPad||ua==null)return;const _=6e4/o.tempoBpm,q=B.metadata.countInBeats??0,ne=(Date.now()-ua)/_-q;ne<-.4||ln(oe=>[...oe,ne])}function Qi(){if(!B?.metadata.timing?.supportsTapPad)return;const _=B.metadata.timing,q=zx($t,_.quantizeStepBeats,_.patternLengthBeats),ne=Bx({taps:q,target:_.targetBeats,bpm:o.tempoBpm}),oe=ne.errors.map((Re,Ce)=>{if(Re.deltaMs==null||Re.tappedBeat==null)return`Hit ${Ce+1}: missed`;const Ye=Re.deltaMs>0?"+":"";return`Hit ${Ce+1}: ${Ye}${Math.round(Re.deltaMs)}ms`});da(oe),ti(`tap:${ne.matched}/${ne.expected}`,ne.accuracy>=.72)}function lc(_){if(!B?.metadata.phrase)return;const q=B.metadata.phrase.expectedDegrees.length;Ya(ne=>ne.length>=q?ne:[...ne,_])}function Ml(){Ya([])}function Kn(){if(!B?.metadata.phrase)return;const _=B.metadata.phrase.measureGroups,q=_[0]?.length??4,ne=_.length,oe=fa.slice(0,q*ne),Re=Array.from({length:ne},(Ce,Ye)=>oe.slice(Ye*q,Ye*q+q).join(" ")).join(" | ");na(Re)}function $i(){if(!B?.metadata.phrase)return;const _=xl.trim().replace(/\s*\|\s*/g," | ").replace(/\s+/g," ");na(_)}function Nl(){if(!nn)return;const _=Ju({modePool:y,tonicMode:g,tonicPool:H,intervalLevel:U,degreeLevel:$,harmonyLevel:ee,timingLevel:be,phraseLevel:ce,dictationInputMode:T,tonalMode:pe,intervalVariant:P,harmonyVariant:ve,enforceSinging:!1});Te(Wx({config:_,sourceQuestion:nn,startTonic:g==="random"?Kl(nn.tonic,H??Zt):x,tonicOctave:o.octave,questionCount:5})),Ie(0),gt(Date.now()),Hn(Date.now()),O(null)}function vn(_){br(_)&&b(q=>{if(q.includes(_)){const ne=q.filter(oe=>oe!==_);return ne.length>0?ne:q}return[...q,_]})}function Xi(){const q={id:`preset_${Math.random().toString(36).slice(2,9)}`,name:`Preset ${f.freePracticePresets.length+1}`,modePool:Jn(y),tonicMode:g,fixedTonic:x,intervalLevel:U,degreeLevel:$,harmonyLevel:ee,timingLevel:be,phraseLevel:ce,dictationInputMode:T,tonalMode:pe,intervalPlaybackVariant:P,harmonyPlaybackVariant:ve,toggles:ut},ne={...f,freePracticePresets:[...f.freePracticePresets,q]};m(ne),Vs(ne),En("authoring_saved","/practice",{surface:"preset",modeCount:q.modePool.length})}function ni(){S("random"),L(o.keyRoot),D(void 0),k(1),F(1),de(1),re(1),Ae(1),he("multiple_choice"),E("major"),le("scale_context"),ge("block"),ei(zi)}function Pi(_){if(_===ld){const ne=yv();Ki(ne.settings);return}const q=f.freePracticePresets.find(ne=>ne.id===_);q&&Ki({modePool:q.modePool,tonicMode:q.tonicMode,fixedTonic:q.fixedTonic,tonicPool:void 0,intervalLevel:q.intervalLevel,degreeLevel:q.degreeLevel,harmonyLevel:q.harmonyLevel,timingLevel:q.timingLevel,phraseLevel:q.phraseLevel,dictationInputMode:q.dictationInputMode,tonalMode:q.tonalMode,intervalPlaybackVariant:q.intervalPlaybackVariant,harmonyPlaybackVariant:q.harmonyPlaybackVariant,toggles:q.toggles})}return s.jsxs("div",{className:"page",children:[pa?s.jsxs("div",{style:{display:"flex",justifyContent:"space-between",gap:"1rem",alignItems:"center",flexWrap:"wrap"},children:[s.jsxs("div",{style:{display:"grid",gap:"0.35rem"},children:[s.jsx("h2",{style:{margin:0},children:"Free Practice"}),s.jsx("div",{className:"subtle",children:"Question view only. Use the setup screen again if you want to change the session configuration."})]}),s.jsxs("div",{className:"button-row",children:[s.jsx("button",{type:"button",onClick:()=>_t(!0),children:"Session settings"}),s.jsx("button",{type:"button",onClick:()=>{W([]),je(0),G(null),ht(null),O(null),Te(null),it(null),Ie(0),Ct({attempts:0,correct:0}),Tn(0),lt(null),_t(!1),D(void 0),mn.current=!1,Xe.clearDrone(),Xe.stopAll()},children:"Back to setup"})]})]}):s.jsxs(s.Fragment,{children:[s.jsxs("div",{style:{display:"grid",gap:"0.45rem"},children:[s.jsx("h2",{style:{margin:0},children:"Practice"}),s.jsx("div",{className:"subtle",children:"Choose any mode subset, save presets, and toggle the training aids you want in play."})]}),s.jsxs("section",{className:"panel panel--accent",children:[s.jsxs("div",{className:"panel-header",children:[s.jsxs("div",{children:[s.jsx("div",{className:"kicker kicker--red",children:"Session Builder"}),s.jsx("h2",{className:"panel-title",children:"Mode subset"})]}),s.jsx("div",{className:"panel-copy",children:"Set up the run here, then the session opens on its own screen."})]}),s.jsxs("div",{className:"chip-row",children:[s.jsx("button",{type:"button",className:y.includes("scale_degree")?"toggle-chip toggle-chip--active":"toggle-chip","aria-pressed":y.includes("scale_degree"),onClick:()=>vn("scale_degree"),children:"Scale Degree"}),s.jsx("button",{type:"button",className:y.includes("functional_interval")?"toggle-chip toggle-chip--active":"toggle-chip","aria-pressed":y.includes("functional_interval"),onClick:()=>vn("functional_interval"),children:"Functional Interval"})]}),s.jsxs("div",{className:"control-grid",children:[s.jsxs("label",{className:"control-label",children:["Tonic source",s.jsxs("select",{value:g,onChange:_=>S(_.target.value),children:[s.jsx("option",{value:"random",children:"Randomize tonic"}),s.jsx("option",{value:"fixed",children:"Fixed tonic"})]})]}),s.jsxs("label",{className:va?"control-label control-label--disabled":"control-label",children:["Fixed tonic",s.jsx("select",{value:x,disabled:va,onChange:_=>L(_.target.value),children:Zt.map(_=>s.jsx("option",{value:_,children:_},_))})]}),s.jsxs("label",{className:pn?"control-label":"control-label control-label--disabled",children:["Interval level",s.jsxs("select",{value:U,disabled:!pn,onChange:_=>k(Number(_.target.value)),children:[s.jsx("option",{value:1,children:"Level 1 (2nds, 1-5)"}),s.jsx("option",{value:2,children:"Level 2 (+3rds)"}),s.jsx("option",{value:3,children:"Level 3 (+P4/P5)"}),s.jsx("option",{value:4,children:"Level 4 (+Octave)"})]})]}),s.jsxs("label",{className:Qa?"control-label":"control-label control-label--disabled",children:["Degree level",s.jsxs("select",{value:$,disabled:!Qa,onChange:_=>F(Number(_.target.value)),children:[s.jsx("option",{value:1,children:"1-5"}),s.jsx("option",{value:2,children:"+6/7"}),s.jsx("option",{value:3,children:"+b3/#4/b7"})]})]}),s.jsxs("label",{className:"control-label",children:["Tonal mode",s.jsxs("select",{value:pe,onChange:_=>E(_.target.value),children:[s.jsx("option",{value:"major",children:"Major"}),s.jsx("option",{value:"natural_minor",children:"Natural Minor"}),s.jsx("option",{value:"harmonic_minor",children:"Harmonic Minor"}),s.jsx("option",{value:"melodic_minor",children:"Melodic Minor"}),s.jsx("option",{value:"modal",children:"Modal"})]})]})]}),s.jsx("div",{className:"control-grid",children:s.jsxs("label",{className:pn?"control-label":"control-label control-label--disabled",children:["Interval playback",s.jsxs("select",{value:P,disabled:!pn,onChange:_=>le(_.target.value),children:[s.jsx("option",{value:"scale_context",children:"Scale-context"}),s.jsx("option",{value:"sequential_pause",children:"Sequential pause"}),s.jsx("option",{value:"immediate_jump",children:"Immediate jump"}),s.jsx("option",{value:"harmonic_stack",children:"Harmonic stack"})]})]})}),s.jsxs("div",{className:"control-group",children:[s.jsx("div",{className:"subtle",children:"Session controls"}),s.jsx("div",{className:"checkbox-grid",children:Vp.map(_=>Ht(_.key,_.title,_.description))})]}),s.jsxs("div",{className:"control-group",children:[s.jsx("div",{className:"subtle",children:'"Explain Why" Features'}),s.jsx("div",{className:"panel-copy",children:"These options only affect the post-answer explanation view."}),s.jsx("div",{className:"checkbox-grid",children:Yp.map(_=>Ht(_.key,_.title,_.description,(_.key==="showIntervalNames"||_.key==="showSemitoneCount")&&!pn))})]}),s.jsxs("div",{className:"button-row",children:[s.jsx("button",{onClick:()=>ya(),children:"Start free practice"}),s.jsx("button",{onClick:()=>ya("due"),children:"Start due set"}),s.jsx("button",{onClick:()=>ya("weak"),children:"Start focus set"}),s.jsx("button",{onClick:()=>jl(),disabled:Jl.length===0,children:"Start authored run"}),s.jsx("button",{onClick:Xi,children:"Save preset"}),s.jsxs("select",{defaultValue:"",onChange:_=>Pi(_.target.value),children:[s.jsx("option",{value:"",disabled:!0,children:"Load preset"}),s.jsx("option",{value:ld,children:"Quickplay"}),f.freePracticePresets.map(_=>s.jsx("option",{value:_.id,children:_.name},_.id))]}),s.jsx("button",{onClick:ni,children:"Reset settings"})]}),s.jsxs("div",{className:"subtle",children:["Live authored drills available: ",Jl.length]})]})]}),nn&&!qt&&s.jsxs("div",{className:"notice notice--alert",children:[s.jsx("div",{className:"kicker kicker--red",children:"Recovery Triggered"}),s.jsx("div",{className:"panel-title",children:"Focused recovery required"}),s.jsx("div",{className:"panel-copy",children:"Three misses in a row detected. Complete the targeted set (5 questions) to continue this session."}),s.jsx("div",{className:"button-row",children:s.jsx("button",{onClick:Nl,children:"Start focused set"})})]}),B&&s.jsxs("section",{className:"panel panel--blue question-card",children:[s.jsx("div",{className:"kicker kicker--blue",children:"Current Prompt"}),s.jsx("div",{className:"prompt-title",children:B.prompt}),ut.allowPromptReplay&&s.jsx("div",{className:"button-row",children:s.jsx("button",{type:"button",onClick:Dr,disabled:M!==null||Ne,children:Ne?"Playing...":"Replay prompt"})}),s.jsxs("div",{className:"meta-strip",children:[s.jsxs("div",{className:"meta-pill",children:["Tonic ",s.jsx("strong",{children:B.tonic})]}),s.jsxs("div",{className:"meta-pill",children:["Session score ",s.jsxs("strong",{children:[(Ee.correct/Math.max(1,Ee.attempts)*100).toFixed(0),"%"]})]}),Qt&&s.jsx("div",{className:"meta-pill",children:Qt==="due"?"Due-focus run":"Weak-focus run"}),!qt&&s.jsxs("div",{className:"meta-pill",children:["Miss streak ",s.jsxs("strong",{children:[tn,"/3"]})]}),qt&&s.jsxs("div",{className:"meta-pill",children:["Focus set ",s.jsxs("strong",{children:[Jt+1,"/",Z?.length??0]})," ",Wl,"s"]})]}),Gi&&s.jsxs("div",{className:M===B.correctAnswer?"answer-line answer-line--correct":"answer-line answer-line--wrong",children:["Answer: ",Vi(B)]}),J?s.jsxs("div",{className:"notice",children:[s.jsx("div",{className:"panel-copy",children:"Sing the next pitch first."}),s.jsx("button",{onClick:nc,style:{width:200},children:"I sang it, reveal"})]}):B.metadata.timing?.supportsTapPad?s.jsxs("div",{className:"panel",children:[s.jsxs("div",{className:"button-row",children:[s.jsx("button",{onClick:Pa,disabled:M!==null,children:"Start tap capture"}),s.jsx("button",{onClick:ac,disabled:ua==null||M!==null,children:"Tap pad"}),s.jsx("button",{onClick:Qi,disabled:$t.length===0||M!==null,children:"Score taps"})]}),s.jsxs("div",{className:"subtle",children:["Recorded taps: ",$t.length," | Grid: ",B.metadata.timing.subdivision," (",B.metadata.timing.meter,")"]}),B.metadata.timing.showErrorOverlay&&Gn.length>0&&s.jsx("div",{className:"chip-row",children:Gn.map((_,q)=>s.jsx("div",{className:"chip",children:_},`${B.id}_tap_${q}`))})]}):B.metadata.phrase?.inputMode==="piano_grid"?s.jsxs("div",{className:"panel",children:[s.jsx("div",{className:"button-row",children:["1","2","3","4","5","6","7","b3","#4","b7"].map(_=>s.jsx("button",{onClick:()=>lc(_),disabled:M!==null,children:_},_))}),s.jsxs("div",{className:"subtle",children:["Draft: ",fa.join(" ")||"none"]}),s.jsxs("div",{className:"button-row",children:[s.jsx("button",{onClick:Ml,disabled:M!==null,children:"Clear"}),s.jsx("button",{onClick:Kn,disabled:fa.length===0||M!==null,children:"Submit phrase"})]})]}):B.metadata.phrase?.inputMode==="staff_entry"?s.jsxs("div",{className:"panel",children:[s.jsx("input",{value:xl,onChange:_=>Zl(_.target.value),placeholder:"Example: 1 2 3 4 | 5 4 3 2"}),s.jsx("button",{onClick:$i,disabled:xl.trim().length===0||M!==null,style:{width:160},children:"Submit phrase"})]}):s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"answer-grid",children:B.answerChoices.map(_=>s.jsx("button",{onClick:()=>na(_),disabled:M!==null,children:ut.showAnswerNoteNames&&(B.mode==="scale_degree"||B.mode==="functional_interval")?(()=>{const q=ec(B,_);return s.jsxs("span",{className:"answer-choice-label",children:[s.jsx("span",{children:q.label}),q.noteText&&s.jsxs("span",{className:"answer-choice-note",children:[" ",q.noteText]})]})})():_},_))}),(Xt||sn)&&s.jsx("div",{className:"panel",style:{marginTop:16},children:Xt?s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"panel-copy",children:B.mode==="functional_interval"?"After revealing the prompt, sing both notes of the interval in order. The mic can submit the matching movement automatically.":"After revealing the prompt, sing the answer note and hold it steady. The mic can submit the matching degree automatically."}),s.jsx("div",{className:"subtle",children:"Drone playback is paused while mic answer input is on, and mic listening pauses whenever the app is playing audio."}),s.jsxs("div",{className:"subtle",children:["Choices ",Cn.map(_=>`${_.answer} (${_.label})`).join(" | ")]}),s.jsxs("div",{className:"subtle",children:["Detected ",ze.noteLabel??"none",ga?` | Matching ${ga.answer} (${ga.label})`:"",Is!=null?` | ${Math.round(Is)} cents`:"",Se?` | Hold ${Math.min(ae,h.holdDurationMs)}/${h.holdDurationMs} ms`:"",Le?` | ${Le}`:""]}),s.jsxs("div",{className:"button-row",children:[s.jsx("button",{onClick:tc,disabled:Se,style:{width:180},children:"Enable mic"}),s.jsx("button",{onClick:()=>{mt&&na(mt)},disabled:!mt,style:{width:180},children:"Submit detected note"})]})]}):s.jsx("div",{className:"subtle",children:"Mic answer input is not available for this prompt, so standard answer controls stay active."})})]}),ut.allowKeyboardInput&&!B.metadata.phrase&&!B.metadata.timing?.supportsTapPad&&s.jsxs("div",{className:"compact-row",children:[s.jsx("input",{value:fe,onChange:_=>I(_.target.value),placeholder:"Type exact answer label"}),s.jsx("button",{onClick:()=>na(fe),disabled:fe.length===0||M!==null,children:"Submit typed"})]}),M&&yt&&s.jsxs("div",{className:"button-row",children:[s.jsx("button",{style:{width:190},onClick:Xa,children:"Continue"}),ut.showExplainWhy&&s.jsx("button",{type:"button",style:{width:210},onClick:()=>se(!0),children:"Explain why"})]})]}),M&&B&&oa&&ut.showExplainWhy&&s.jsx("div",{className:"mode-overlay",onClick:()=>se(!1),role:"presentation",children:s.jsxs("div",{className:"mode-overlay__panel",onClick:_=>_.stopPropagation(),role:"dialog","aria-modal":"true","aria-labelledby":"practice-feedback-title",children:[s.jsx("div",{id:"practice-feedback-title",className:"panel-title",children:B.feedback.title}),B.feedback.subtitle&&s.jsx("div",{className:"panel-copy",children:B.feedback.subtitle}),B.mode==="functional_interval"&&ut.showIntervalNames&&B.metadata.intervalName&&s.jsxs("div",{className:"teaching-line",children:["Interval: ",B.metadata.intervalName]}),B.mode==="functional_interval"&&ut.showSemitoneCount&&B.metadata.semitones!=null&&s.jsxs("div",{className:"teaching-line",children:["Semitones: ",B.metadata.semitones]}),ut.showSolfege&&B.metadata.solfege&&s.jsxs("div",{className:"teaching-line",children:["Solfege: ",B.metadata.solfege]}),B.mode==="functional_harmony"&&ut.showChordTones&&B.metadata.chordTones&&s.jsxs("div",{className:"teaching-line",children:["Chord tones (MIDI): ",B.metadata.chordTones.join(", ")]}),B.mode==="functional_harmony"&&Ws&&B.metadata.functionLabel&&s.jsxs("div",{className:"teaching-line",children:["Function: ",B.metadata.functionLabel]}),B.mode==="timing_grid"&&B.metadata.timing&&s.jsxs("div",{className:"teaching-line",children:["Meter ",B.metadata.timing.meter," | Subdivision ",B.metadata.timing.subdivision]}),B.mode==="phrase_recall"&&B.metadata.phrase&&s.jsxs("div",{className:"teaching-line",children:["Tag ",B.metadata.phrase.tag," | Bars ",B.metadata.phrase.bars," | Correct ",B.correctAnswer]}),s.jsx("div",{className:"panel-copy",children:B.feedback.explanation}),B.teaching.lines.map((_,q)=>s.jsx("div",{className:"teaching-line",children:_},`${B.id}_line_${q}`)),B.teaching.tendencyHint&&s.jsxs("div",{className:"teaching-line",children:["Hint: ",B.teaching.tendencyHint]}),B.teaching.more&&s.jsx("div",{className:"teaching-line",children:B.teaching.more}),B.compareAudio&&s.jsxs(s.Fragment,{children:[s.jsx("button",{style:{width:230},onClick:()=>{It(B.compareAudio.playbackPlan)},children:B.compareAudio.label}),s.jsx("div",{style:{opacity:.74,fontSize:12},children:B.compareAudio.description})]}),B.metadata.phrase?.measurePlaybackPlans&&B.metadata.phrase.measurePlaybackPlans.length>0&&s.jsx("div",{className:"button-row",children:B.metadata.phrase.measurePlaybackPlans.map((_,q)=>s.jsxs("button",{onClick:()=>{It(_)},children:["Play bar ",q+1]},`${B.id}_measure_${q}`))}),o.visualsEnabled&&ut.showScaleMap&&s.jsxs("div",{className:"control-group",children:[s.jsx("div",{className:"subtle",children:"Degree map"}),s.jsx("div",{className:"chip-row",children:y1.map(_=>{const q=B.metadata.visualCue?.activeDegree===_,ne=B.metadata.visualCue?.movement?.from===_,oe=B.metadata.visualCue?.movement?.to===_;return s.jsx("div",{style:{minWidth:36,textAlign:"center",padding:"6px 8px",borderRadius:999,border:"2px solid var(--ink)",background:q||ne||oe?"var(--accent-yellow)":"rgba(255,252,247,0.92)",fontWeight:q||ne||oe?700:500},children:_},`${B.id}_d_${_}`)})})]}),o.visualsEnabled&&ut.showPianoStrip&&B.metadata.visualCue?.timelineMidis&&s.jsxs("div",{className:"control-group",children:[s.jsx("div",{className:"subtle",children:"Keyboard"}),s.jsx(Ov,{midis:B.metadata.visualCue.timelineMidis,tonicMidi:B.tonicMidi})]}),s.jsx("button",{type:"button",className:"mode-overlay__dismiss",onClick:()=>se(!1),children:"Close explanation"})]})}),pa&&We&&s.jsx("div",{className:"mode-overlay",onClick:()=>_t(!1),role:"presentation",children:s.jsxs("div",{className:"mode-overlay__panel mode-overlay__panel--wide mode-overlay__panel--compact",onClick:_=>_.stopPropagation(),role:"dialog","aria-modal":"true","aria-labelledby":"practice-session-settings-title",children:[s.jsx("div",{id:"practice-session-settings-title",className:"panel-title",children:"Session settings"}),s.jsxs("div",{className:"chip-row",children:[s.jsx("button",{type:"button",className:y.includes("scale_degree")?"toggle-chip toggle-chip--active":"toggle-chip","aria-pressed":y.includes("scale_degree"),onClick:()=>Vn(()=>vn("scale_degree")),children:"Scale Degree"}),s.jsx("button",{type:"button",className:y.includes("functional_interval")?"toggle-chip toggle-chip--active":"toggle-chip","aria-pressed":y.includes("functional_interval"),onClick:()=>Vn(()=>vn("functional_interval")),children:"Functional Interval"})]}),s.jsxs("div",{className:"control-grid",children:[s.jsxs("label",{className:"control-label",children:["Tonic source",s.jsxs("select",{value:g,onChange:_=>Vn(()=>S(_.target.value)),children:[s.jsx("option",{value:"random",children:"Randomize tonic"}),s.jsx("option",{value:"fixed",children:"Fixed tonic"})]})]}),s.jsxs("label",{className:va?"control-label control-label--disabled":"control-label",children:["Fixed tonic",s.jsx("select",{value:x,disabled:va,onChange:_=>Vn(()=>L(_.target.value)),children:Zt.map(_=>s.jsx("option",{value:_,children:_},_))})]}),s.jsxs("label",{className:pn?"control-label":"control-label control-label--disabled",children:["Interval level",s.jsxs("select",{value:U,disabled:!pn,onChange:_=>Vn(()=>k(Number(_.target.value))),children:[s.jsx("option",{value:1,children:"Level 1"}),s.jsx("option",{value:2,children:"Level 2"}),s.jsx("option",{value:3,children:"Level 3"}),s.jsx("option",{value:4,children:"Level 4"})]})]}),s.jsxs("label",{className:Qa?"control-label":"control-label control-label--disabled",children:["Degree level",s.jsxs("select",{value:$,disabled:!Qa,onChange:_=>Vn(()=>F(Number(_.target.value))),children:[s.jsx("option",{value:1,children:"1-5"}),s.jsx("option",{value:2,children:"+6/7"}),s.jsx("option",{value:3,children:"+b3/#4/b7"})]})]}),s.jsxs("label",{className:"control-label",children:["Tonal mode",s.jsxs("select",{value:pe,onChange:_=>Vn(()=>E(_.target.value)),children:[s.jsx("option",{value:"major",children:"Major"}),s.jsx("option",{value:"natural_minor",children:"Natural minor"}),s.jsx("option",{value:"harmonic_minor",children:"Harmonic minor"}),s.jsx("option",{value:"melodic_minor",children:"Melodic minor"}),s.jsx("option",{value:"modal",children:"Modal"})]})]}),s.jsxs("label",{className:pn?"control-label":"control-label control-label--disabled",children:["Interval playback",s.jsxs("select",{value:P,disabled:!pn,onChange:_=>Vn(()=>le(_.target.value)),children:[s.jsx("option",{value:"scale_context",children:"Scale-context"}),s.jsx("option",{value:"sequential_pause",children:"Sequential pause"}),s.jsx("option",{value:"immediate_jump",children:"Immediate jump"}),s.jsx("option",{value:"harmonic_stack",children:"Harmonic stack"})]})]})]}),s.jsxs("div",{className:"control-group",children:[s.jsx("div",{className:"subtle",children:"Session controls"}),s.jsx("div",{className:"checkbox-grid checkbox-grid--compact",children:Vp.map(_=>Ht(_.key,_.title,_.description,!1,q=>Yi(_.key,q,!1),!0))})]}),s.jsxs("div",{className:"control-group",children:[s.jsx("div",{className:"subtle",children:'"Explain Why" Features'}),s.jsx("div",{className:"checkbox-grid checkbox-grid--compact",children:Yp.map(_=>Ht(_.key,_.title,_.description,(_.key==="showIntervalNames"||_.key==="showSemitoneCount")&&!pn,q=>Yi(_.key,q,!0),!0))})]}),s.jsx("button",{type:"button",className:"mode-overlay__dismiss",onClick:()=>_t(!1),children:"Close settings"})]})})]})}function _1(){return 10+Math.floor(Math.random()*6)}function j1(){const[l]=pv(),[c,o]=p.useState(St()),[u,f]=p.useState("random"),[m,h]=p.useState(St().keyRoot),[y,b]=p.useState([]),[g,S]=p.useState(0),[x,L]=p.useState(null),[H,D]=p.useState([]),U=p.useRef(0),[k,$]=p.useState(null),[F,ee]=p.useState([]),[de,be]=p.useState(0),[re,ce]=p.useState(!1),[Ae,T]=p.useState(!1),[he,P]=p.useState(!1),[le,ve]=p.useState(null),[ge,pe]=p.useState("idle");p.useEffect(()=>bl(()=>o(St())),[]);const E=ge==="review"?F[de]?.question:y[g],X=!!(E&&E.enforceSinging&&E.playbackPlan.kind==="sequence"&&E.playbackPlan.events.length>1&&k!==E.id),W=p.useMemo(()=>ge==="review"?`Review ${de+1}/${F.length}`:ge!=="running"?"Not started":`Question ${g+1}/${y.length}`,[g,de,F.length,y.length,ge]),xe=p.useMemo(()=>{const I=l.get("mode");if(I!=null&&(I==="scale_degree"||I==="functional_interval")&&br(I))return I},[l]);p.useEffect(()=>{E&&Xe.setDrone(E.tonicMidi,{tempoBpm:c.tempoBpm,masterGain:c.masterGain,timbre:c.timbre},.16)},[E,c.masterGain,c.tempoBpm,c.timbre]),p.useEffect(()=>()=>{Xe.clearDrone(),Xe.stopAll()},[]),p.useEffect(()=>{if(!(!E||ge!=="running"&&ge!=="review")){if(U.current=performance.now(),X&&E.playbackPlan.kind==="sequence"){const I=E.playbackPlan.events.slice(0,E.playbackPlan.events.length-1);Xe.play({kind:"sequence",events:I},{tempoBpm:c.tempoBpm,masterGain:c.masterGain,timbre:c.timbre});return}Xe.play(E.playbackPlan,{tempoBpm:c.tempoBpm,masterGain:c.masterGain,timbre:c.timbre})}},[X,E,c.masterGain,c.tempoBpm,c.timbre,ge]);function je(){const I={...H0(xe==null?void 0:[xe]),randomTonicEvery:u==="random"?3:-1},Se=Mr({config:I,questionCount:_1(),startTonic:u==="random"?Kl():m,tonicOctave:c.octave});b(Se),S(0),D([]),L(null),$(null),ee([]),be(0),P(!1),ve(null),pe("running")}function M(){if(!E||E.playbackPlan.kind!=="sequence")return;const I=E.playbackPlan.events[E.playbackPlan.events.length-1];$(E.id),Xe.play({kind:"sequence",events:[{...I,atBeats:0}]},{tempoBpm:c.tempoBpm,masterGain:c.masterGain,timbre:c.timbre})}function G(I,Se){if(!E)return;const qe=I===E.correctAnswer,Le=Math.max(1,Se-U.current);if(L(I),ge==="running"){const ft={question:E,selected:I,correct:qe,responseMs:Le};wd({question:E,correct:qe,responseMs:Le});const ze=[...H,ft];if(D(ze),g+1<y.length){ve({kind:"next_question"});return}const rt=ze.filter(mt=>!mt.correct);if(rt.length>0){ve({kind:"start_review",mistakes:rt});return}ve({kind:"complete_session"});return}if(ge==="review"){if(!qe||!re||!Ae)return;if(de+1<F.length){ve({kind:"next_review"});return}ve({kind:"complete_review"})}}function J(){if(le){if(L(null),ve(null),P(!1),le.kind==="next_question"){S(I=>I+1);return}if(le.kind==="start_review"){ee(le.mistakes),be(0),ce(!1),T(!1),pe("review");return}if(le.kind==="complete_session"||le.kind==="complete_review"){pe("done");return}be(I=>I+1),ce(!1),T(!1)}}function te(){E&&Xe.play(E.playbackPlan,{tempoBpm:c.tempoBpm,masterGain:c.masterGain,timbre:c.timbre})}const fe=H.length>0?H.filter(I=>I.correct).length/H.length*100:0;return s.jsxs("div",{className:"page",children:[s.jsxs("div",{style:{display:"grid",gap:"0.45rem"},children:[s.jsx("h2",{style:{margin:0},children:"Start from Basics"}),s.jsx("div",{className:"subtle",children:"Guided beginner on-ramp with tonic-anchored mixed drills, mandatory singing prediction, and required mistake review."})]}),s.jsxs("section",{className:"panel",children:[s.jsxs("div",{className:"control-grid",children:[s.jsxs("label",{className:"control-label",children:["Tonic source",s.jsxs("select",{value:u,onChange:I=>f(I.target.value),children:[s.jsx("option",{value:"random",children:"Randomize tonic"}),s.jsx("option",{value:"fixed",children:"Fixed tonic"})]})]}),u==="fixed"&&s.jsxs("label",{className:"control-label",children:["Fixed tonic",s.jsx("select",{value:m,onChange:I=>h(I.target.value),children:Zt.map(I=>s.jsx("option",{value:I,children:I},I))})]})]}),s.jsxs("div",{className:"button-row",children:[s.jsx("button",{onClick:je,children:ge==="idle"?"Start basics session":"Restart basics session"}),s.jsx("button",{onClick:te,disabled:!E,children:"Replay"}),s.jsx("div",{className:"meta-pill",children:W})]})]}),E&&(ge==="running"||ge==="review")&&s.jsxs("section",{className:"panel panel--blue question-card",children:[s.jsx("div",{className:"kicker kicker--blue",children:"Guided Prompt"}),s.jsx("div",{className:"prompt-title",children:E.prompt}),s.jsxs("div",{className:"meta-strip",children:[s.jsxs("div",{className:"meta-pill",children:["Tonic ",s.jsx("strong",{children:E.tonic})]}),s.jsxs("div",{className:"meta-pill",children:["Mode ",s.jsx("strong",{children:E.mode.replace("_"," ")})]})]}),X&&s.jsxs("div",{className:"notice notice--blue",children:[s.jsx("div",{className:"panel-copy",children:"Sing the next pitch, then reveal it."}),s.jsx("button",{onClick:M,style:{width:220},children:"I sang it, reveal pitch"})]}),!X&&s.jsx("div",{className:"answer-grid",children:E.answerChoices.map(I=>{const Se=x===I;return s.jsx("button",{onClick:qe=>G(I,qe.timeStamp),disabled:x!==null&&ge==="running",style:{padding:"8px 10px",borderRadius:10,border:"1px solid rgba(0,0,0,0.2)",background:Se?"rgba(0,0,0,0.1)":"white"},children:I},I)})}),x&&s.jsxs("div",{className:"button-row",children:[le&&s.jsx("button",{style:{width:220},onClick:J,children:"Continue"}),le&&s.jsx("button",{type:"button",style:{width:220},onClick:()=>P(!0),children:"Explain why"})]}),ge==="review"&&s.jsxs("div",{className:"notice",children:[s.jsx("div",{className:"kicker kicker--red",children:"Review requirements"}),s.jsxs("div",{className:"button-row",children:[s.jsx("button",{onClick:()=>{Xe.play(E.playbackPlan,{tempoBpm:c.tempoBpm,masterGain:c.masterGain,timbre:c.timbre}),ce(!0)},children:"Play correct answer"}),s.jsx("button",{onClick:()=>T(!0),children:"I sang correct answer"})]}),s.jsx("div",{className:"subtle",children:"Required: play + sing + answer correctly to continue."})]})]}),ge==="done"&&s.jsxs("section",{className:"panel panel--accent",children:[s.jsx("div",{className:"panel-title",children:"Session complete"}),s.jsxs("div",{className:"metric-grid",children:[s.jsxs("div",{className:"metric-card",children:[s.jsx("div",{className:"metric-card__label",children:"Questions"}),s.jsx("div",{className:"metric-card__value",children:y.length})]}),s.jsxs("div",{className:"metric-card",children:[s.jsx("div",{className:"metric-card__label",children:"Accuracy"}),s.jsxs("div",{className:"metric-card__value",children:[fe.toFixed(1),"%"]})]})]}),s.jsx("div",{className:"subtle",children:"Adaptive reinforcement has updated weak scale degrees, movements, and chord/function areas."})]}),x&&E&&he&&s.jsx("div",{className:"mode-overlay",onClick:()=>P(!1),role:"presentation",children:s.jsxs("div",{className:"mode-overlay__panel",onClick:I=>I.stopPropagation(),role:"dialog","aria-modal":"true","aria-labelledby":"beginner-feedback-title",children:[s.jsx("div",{id:"beginner-feedback-title",className:"panel-title",children:E.feedback.title}),E.feedback.subtitle&&s.jsx("div",{className:"teaching-line",children:E.feedback.subtitle}),E.feedback.note&&s.jsx("div",{className:"teaching-line",children:E.feedback.note}),s.jsx("div",{className:"panel-copy",children:E.feedback.explanation}),E.teaching.lines.map((I,Se)=>s.jsx("div",{className:"teaching-line",children:I},`${E.id}_teach_${Se}`)),E.teaching.tendencyHint&&s.jsxs("div",{className:"teaching-line",children:["Hint: ",E.teaching.tendencyHint]}),E.compareAudio&&s.jsx("button",{style:{width:220},onClick:()=>{Xe.play(E.compareAudio.playbackPlan,{tempoBpm:c.tempoBpm,masterGain:c.masterGain,timbre:c.timbre})},children:E.compareAudio.label}),c.visualsEnabled&&E.metadata.visualCue?.timelineMidis&&s.jsx(Ov,{midis:E.metadata.visualCue.timelineMidis,tonicMidi:E.tonicMidi}),s.jsx("button",{type:"button",className:"mode-overlay__dismiss",onClick:()=>P(!1),children:"Close explanation"})]})})]})}const M1=.8,Di={scale_degree:{title:"Scale Degree",description:"Hear pitches against the tonic and name the exact degree."},functional_interval:{title:"Functional Interval",description:"Track movement between degrees and hear where lines want to resolve."},functional_harmony:{title:"Functional Harmony",description:"Identify chord quality and harmonic pull inside the key."},timing_grid:{title:"Timing Grid",description:"Recognize meter, subdivision, and rhythmic placement."},phrase_recall:{title:"Phrase Recall",description:"Retain and identify short tonal patterns over multiple beats."}},N1=[{key:"showAnswerNoteNames",title:"Answer note names",description:"Show note names next to scale-degree and interval answers."},{key:"allowPromptReplay",title:"Replay prompt",description:"Show a replay button so the current prompt can be heard more than once."},{key:"droneEnabled",title:"Drone",description:"Keep a tonic drone under each prompt."},{key:"enforceSinging",title:"Sing before reveal",description:"Hold back the last pitch until you sing it and reveal it manually."},{key:"requireMicForSinging",title:"Mic answer input",description:"Use the microphone to register sung pitches as answers on supported prompts."},{key:"allowKeyboardInput",title:"Keyboard input",description:"Allow typed answers when a topic supports it."},{key:"showExplainWhy",title:"Explain why",description:"Keep the post-answer explanation panel available."},{key:"showScaleMap",title:"Degree map",description:"Show the highlighted scale-degree strip in explanations."},{key:"showPianoStrip",title:"Keyboard excerpt",description:"Show the keyboard strip in explanations when available."}];function kt(l){return l==="scale_degree"?[{mode:l,level:1,shortLabel:"L1",title:"Core tonic map",description:"Stable 1-5 scale-degree hearing around tonic.",overrides:{degreeLevel:1,tonalMode:"major"}},{mode:l,level:2,shortLabel:"L2",title:"Upper extensions",description:"Adds 6 and 7 so the user has to hear true scale pull.",overrides:{degreeLevel:2,tonalMode:"major"}},{mode:l,level:3,shortLabel:"L3",title:"Chromatic colors",description:"Tests altered colors and less stable scale-degree identities.",overrides:{degreeLevel:3,tonalMode:"major"}}]:l==="functional_interval"?[{mode:l,level:1,shortLabel:"L1",title:"Step motion",description:"Adjacent scale-degree movement in context.",overrides:{intervalLevel:1,intervalPlaybackVariant:"scale_context",tonalMode:"major"}},{mode:l,level:2,shortLabel:"L2",title:"Skips",description:"Adds 3rds and wider movement with a pause to compare endpoints.",overrides:{intervalLevel:2,intervalPlaybackVariant:"sequential_pause",tonalMode:"major"}},{mode:l,level:3,shortLabel:"L3",title:"Wide functional leaps",description:"Adds 4ths and 5ths with less stepwise support.",overrides:{intervalLevel:3,intervalPlaybackVariant:"immediate_jump",tonalMode:"major"}},{mode:l,level:4,shortLabel:"L4",title:"Compressed pressure",description:"Adds the hardest movement set with harmonic-stack playback.",overrides:{intervalLevel:4,intervalPlaybackVariant:"harmonic_stack",tonalMode:"major"}}]:l==="functional_harmony"?[{mode:l,level:1,shortLabel:"L1",title:"Quality anchors",description:"Quality and cadence hearing with simpler harmonic motion.",overrides:{harmonyLevel:1,harmonyPlaybackVariant:"block",tonalMode:"major"}},{mode:l,level:2,shortLabel:"L2",title:"Function paths",description:"Roman paths, cadence type, and changed-chord recognition.",overrides:{harmonyLevel:2,harmonyPlaybackVariant:"mixed",tonalMode:"major"}}]:l==="timing_grid"?[{mode:l,level:1,shortLabel:"L1",title:"Pulse lock",description:"Meter and basic pulse recognition.",overrides:{timingLevel:1}},{mode:l,level:2,shortLabel:"L2",title:"Subdivision control",description:"Separates straight subdivisions and basic syncopation.",overrides:{timingLevel:2}},{mode:l,level:3,shortLabel:"L3",title:"Rhythmic detail",description:"More complex rhythmic detail and syncopation pressure.",overrides:{timingLevel:3}}]:[{mode:l,level:1,shortLabel:"L1",title:"Short contour",description:"Small phrase shapes and short memory spans.",overrides:{phraseLevel:1,dictationInputMode:"multiple_choice"}},{mode:l,level:2,shortLabel:"L2",title:"Phrase memory",description:"Longer recall with clearer internal grouping.",overrides:{phraseLevel:2,dictationInputMode:"multiple_choice"}},{mode:l,level:3,shortLabel:"L3",title:"Dense recall",description:"Harder phrase retention and recognition.",overrides:{phraseLevel:3,dictationInputMode:"multiple_choice"}}]}function Kp(l,c={}){return{sessionType:"free",modePool:l,intervalLevel:c.intervalLevel??1,degreeLevel:c.degreeLevel??1,harmonyLevel:c.harmonyLevel??1,timingLevel:c.timingLevel??1,phraseLevel:c.phraseLevel??1,dictationInputMode:c.dictationInputMode??"multiple_choice",tonalMode:c.tonalMode??"major",intervalPlaybackVariant:c.intervalPlaybackVariant??"scale_context",harmonyPlaybackVariant:c.harmonyPlaybackVariant??"block",randomTonicEvery:2,singingQuota:0,predictiveResolutionChance:.2}}function zv(l){return`${(l*100).toFixed(0)}%`}function Qp(l,c){return c===0?"Not tested":`${l}/${c} (${zv(l/c)})`}function E1(l){const c=Pl(),o=Object.values(c.adaptive).filter(m=>m.mode===l),u=o.reduce((m,h)=>m+h.attempts,0),f=u>0?o.reduce((m,h)=>m+h.mastery*h.attempts,0)/u:0;return{attempts:u,weightedMastery:f}}function T1(l){const c=kt(l),{attempts:o,weightedMastery:u}=E1(l);if(o<6)return 0;const f=o>=24?c.length-1:o>=14?Math.min(c.length-1,2):Math.min(c.length-1,1),m=Math.round(u*f);return Math.max(0,Math.min(f,m))}function Fu(l){return Object.fromEntries(l.map(c=>{const o=T1(c);return[c,{mode:c,startStageIndex:o,currentStageIndex:o,recommendedStageIndex:Math.max(0,o-1),complete:!1,totalAttempts:0,totalCorrect:0,stageStats:kt(c).map(()=>({attempts:0,correct:0}))}]}))}function C1(l){return l.metadata.timing?.supportsTapPad||l.metadata.phrase&&l.metadata.phrase.inputMode!=="multiple_choice"?!1:l.answerChoices.length>0&&!l.answerChoices.includes("tap_capture")}function A1(l,c,o){for(let u=0;u<8;u+=1){const f=Mr({config:Kp([l],c.overrides),questionCount:1,startTonic:Kl(),tonicOctave:o})[0];if(f&&C1(f))return f}return Mr({config:Kp([l],{...c.overrides,dictationInputMode:"multiple_choice",timingLevel:1,phraseLevel:1}),questionCount:1,startTonic:Kl(),tonicOctave:o})[0]}function Iu(l,c,o,u){return{question:A1(l,kt(l)[c],o),mode:l,stageIndex:c,ordinal:u}}function w1(l){return Object.values(l).reduce((c,o)=>{if(o.complete)return c;const u=o.stageStats[o.currentStageIndex],f=u.attempts<2?2-u.attempts:u.correct===1&&u.attempts===2?1:0;return c+f+Math.max(0,kt(o.mode).length-o.currentStageIndex-1)*2},0)}function k1(l,c,o,u){if(u&&!l[o].complete)return o;const f=c.indexOf(o);for(let m=1;m<=c.length;m+=1){const h=c[(f+m)%c.length];if(!l[h].complete)return h}return null}function R1(l,c){return l.map(o=>{const u=c[o],f=kt(o);return{mode:o,attempts:u.totalAttempts,correct:u.totalCorrect,accuracy:u.totalAttempts>0?u.totalCorrect/u.totalAttempts:0,recommendedStage:f[u.recommendedStageIndex],stageBreakdown:f.map((m,h)=>{const y=u.stageStats[h];return{stage:m,attempts:y.attempts,correct:y.correct,accuracy:y.attempts>0?y.correct/y.attempts:null}}),startedHigher:u.startStageIndex>0}})}function D1(){const l=Xs(),c=p.useMemo(()=>Jn($l()),[]),[o,u]=p.useState(St()),[f,m]=p.useState("assessment"),[h,y]=p.useState(()=>Fu(c)),[b,g]=p.useState(null),[S,x]=p.useState(null),[L,H]=p.useState([]),[D,U]=p.useState(!1),[k,$]=p.useState([]),[F,ee]=p.useState(`Custom Path ${xr().freePracticePresets.length+1}`),[de,be]=p.useState("random"),[re,ce]=p.useState(St().keyRoot),[Ae,T]=p.useState(1),[he,P]=p.useState(1),[le,ve]=p.useState(1),[ge,pe]=p.useState(1),[E,X]=p.useState(1),[W,xe]=p.useState("multiple_choice"),[je,M]=p.useState("major"),[G,J]=p.useState("scale_context"),[te,fe]=p.useState("block"),[I,Se]=p.useState({...zi,showExplainWhy:!0}),[qe,Le]=p.useState(null),ft=p.useRef(0);p.useEffect(()=>bl(()=>u(St())),[]);const ze=b?.question??null,rt=b?kt(b.mode)[b.stageIndex]:null,mt=p.useMemo(()=>Object.values(h).filter(O=>O.complete).length,[h]),K=p.useMemo(()=>w1(h),[h]),ae=p.useMemo(()=>R1(c,h),[c,h]),ie=p.useMemo(()=>jv({limit:8,modePool:c}),[L.length,c]),Ne=p.useMemo(()=>{const O=new Set;for(const Z of ae){const Te=ie.some(it=>it.mode===Z.mode),Lt=Z.recommendedStage.level<kt(Z.mode).at(-1).level;(Z.accuracy<M1||Te||Lt)&&O.add(Z.mode)}if(O.size===0&&ae.length>0){const Z=[...ae].sort((Te,Lt)=>Te.accuracy-Lt.accuracy)[0];Z&&O.add(Z.mode)}return c.filter(Z=>O.has(Z))},[c,ae,ie]),we=p.useMemo(()=>new Set(Ne),[Ne]),Pe=p.useMemo(()=>{const O=new Map;for(const Z of ie){const Te=O.get(Z.mode)??[];Te.push(`${Z.label} (${zv(Z.mastery)})`),O.set(Z.mode,Te)}return O},[ie]);p.useEffect(()=>{!D||!ze||(ft.current=performance.now(),Xe.play(ze.playbackPlan,{tempoBpm:o.tempoBpm,masterGain:o.masterGain,timbre:o.timbre}))},[D,ze,o.masterGain,o.tempoBpm,o.timbre]),p.useEffect(()=>{if(f!=="assessment"||D||b!=null)return;const O=Fu(c),Z=c[0];Z&&(y(O),x(null),H([]),Le(null),U(!0),g(Iu(Z,O[Z].currentStageIndex,o.octave,1)))},[D,c,b,o.octave,f]),p.useEffect(()=>{f==="topics"&&$(O=>O.length>0?O:Ne.length>0?Ne:[c[0]])},[c,Ne,f]),p.useEffect(()=>()=>{Xe.clearDrone(),Xe.stopAll()},[]);function ke(O){if(O.scale_degree){const Z=kt("scale_degree")[O.scale_degree.recommendedStageIndex];T(Z.overrides.degreeLevel??1)}if(O.functional_interval){const Z=kt("functional_interval")[O.functional_interval.recommendedStageIndex];P(Z.overrides.intervalLevel??1),J(Z.overrides.intervalPlaybackVariant??"scale_context")}if(O.functional_harmony){const Z=kt("functional_harmony")[O.functional_harmony.recommendedStageIndex];ve(Z.overrides.harmonyLevel??1),fe(Z.overrides.harmonyPlaybackVariant??"block")}if(O.timing_grid){const Z=kt("timing_grid")[O.timing_grid.recommendedStageIndex];pe(Z.overrides.timingLevel??1)}if(O.phrase_recall){const Z=kt("phrase_recall")[O.phrase_recall.recommendedStageIndex];X(Z.overrides.phraseLevel??1),xe(Z.overrides.dictationInputMode??"multiple_choice")}}function Ee(){ze&&Xe.play(ze.playbackPlan,{tempoBpm:o.tempoBpm,masterGain:o.masterGain,timbre:o.timbre})}function Ct(O){if(!b||!ze||S!==null)return;const Z=Math.max(1,performance.now()-ft.current),Te=O===ze.correctAnswer,Lt=kt(b.mode)[b.stageIndex];x(O),wd({question:ze,correct:Te,responseMs:Z}),H(it=>[...it,{question:ze,mode:b.mode,stageIndex:b.stageIndex,stageLabel:Lt.shortLabel,selected:O,correct:Te,responseMs:Z}])}function Qt(){if(!b||!ze||S==null)return;const O=S===ze.correctAnswer,Z={...h},Te=Z[b.mode],Lt=[...Te.stageStats],it={...Lt[b.stageIndex]};it.attempts+=1,it.correct+=O?1:0,Lt[b.stageIndex]=it;let Jt=Te.complete,Ie=Te.recommendedStageIndex,zt=Te.currentStageIndex,gt=!1;const Ga=kt(b.mode);if(it.attempts>=2){const oa=it.correct>=2,se=it.correct===0||it.attempts===3&&it.correct<2;oa?(Ie=Math.max(Ie,b.stageIndex),b.stageIndex+1<Ga.length?zt=b.stageIndex+1:(Jt=!0,zt=b.stageIndex)):se?(Ie=Math.max(0,b.stageIndex-1),zt=b.stageIndex,Jt=!0):gt=!0}else gt=!0;if(Z[b.mode]={...Te,currentStageIndex:zt,recommendedStageIndex:Ie,complete:Jt,totalAttempts:Te.totalAttempts+1,totalCorrect:Te.totalCorrect+(O?1:0),stageStats:Lt},y(Z),x(null),c.every(oa=>Z[oa].complete)){U(!1),g(null),ke(Z),m("results");return}const Hn=k1(Z,c,b.mode,gt);if(!Hn){U(!1),g(null),ke(Z),m("results");return}g(Iu(Hn,Z[Hn].currentStageIndex,o.octave,L.length+2))}function lt(O){$(Z=>Z.includes(O)?Z.length===1?Z:Z.filter(Te=>Te!==O):[...Z,O])}function tn(O,Z){Se(Te=>O==="requireMicForSinging"?{...Te,requireMicForSinging:Z,enforceSinging:Z?!0:Te.enforceSinging}:O==="enforceSinging"&&!Z?{...Te,enforceSinging:!1,requireMicForSinging:!1}:{...Te,[O]:Z})}function Tn(){const O=xr(),Z=`preset_${Math.random().toString(36).slice(2,9)}`,Te={id:Z,name:F.trim()||`Custom Path ${O.freePracticePresets.length+1}`,modePool:Jn(k),tonicMode:de,fixedTonic:re,intervalLevel:he,degreeLevel:Ae,harmonyLevel:le,timingLevel:ge,phraseLevel:E,dictationInputMode:W,tonalMode:je,intervalPlaybackVariant:G,harmonyPlaybackVariant:te,toggles:I};Vs({...O,freePracticePresets:[...O.freePracticePresets,Te]}),Le(Z),m("saved")}function nn(){const O=Fu(c),Z=c[0];m("assessment"),y(O),g(Z?Iu(Z,O[Z].currentStageIndex,o.octave,1):null),x(null),H([]),U(Z!=null),$([]),Le(null)}return s.jsxs("div",{className:"page",children:[s.jsxs("div",{style:{display:"flex",justifyContent:"space-between",gap:"1rem",alignItems:"center",flexWrap:"wrap"},children:[s.jsxs("div",{style:{display:"grid",gap:"0.35rem"},children:[s.jsx("h2",{style:{margin:0},children:"Custom Path"}),s.jsxs("div",{className:"subtle",children:["Step ",f==="assessment"?"1":f==="results"?"2":f==="topics"?"3":"4"," of 4"]}),s.jsxs("div",{className:"chip-row",children:[s.jsxs("div",{className:"chip",children:["Placed ",mt,"/",c.length]}),s.jsxs("div",{className:"chip",children:["Answered ",L.length]}),f==="assessment"&&s.jsxs("div",{className:"chip",children:["At least ",K," left"]})]})]}),s.jsx("div",{className:"button-row",children:s.jsx("button",{type:"button",onClick:()=>l("/"),children:"Back home"})})]}),f==="assessment"&&ze&&rt&&s.jsxs("section",{className:"panel question-card",children:[s.jsx("div",{className:"kicker kicker--red",children:"Adaptive assessment"}),s.jsx("div",{className:"prompt-title",children:ze.prompt}),s.jsxs("div",{className:"meta-strip",children:[s.jsxs("div",{className:"meta-pill",children:["Topic ",s.jsx("strong",{children:Di[b.mode].title})]}),s.jsxs("div",{className:"meta-pill",children:["Placement ",s.jsx("strong",{children:rt.shortLabel})]}),s.jsxs("div",{className:"meta-pill",children:["Stage ",s.jsx("strong",{children:rt.title})]}),s.jsxs("div",{className:"meta-pill",children:["Prompt ",s.jsx("strong",{children:b.ordinal})]})]}),s.jsx("div",{className:"panel-copy",children:rt.description}),s.jsx("div",{className:"answer-grid",children:ze.answerChoices.map(O=>s.jsx("button",{type:"button",onClick:()=>Ct(O),disabled:S!==null,children:O},O))}),s.jsxs("div",{className:"button-row",children:[s.jsx("button",{type:"button",onClick:Ee,children:"Replay prompt"}),S&&s.jsx("button",{type:"button",onClick:Qt,children:"Continue"})]}),S&&s.jsx("div",{className:S===ze.correctAnswer?"answer-line answer-line--correct":"answer-line answer-line--wrong",children:S===ze.correctAnswer?"Correct":`Correct answer: ${ze.correctAnswer}`})]}),f==="results"&&s.jsxs(s.Fragment,{children:[s.jsxs("section",{className:"panel panel--accent",children:[s.jsxs("div",{className:"panel-header",children:[s.jsxs("div",{children:[s.jsx("div",{className:"kicker kicker--red",children:"Results screen"}),s.jsx("div",{className:"panel-title",children:"Placement and weak areas"})]}),s.jsx("div",{className:"panel-copy",children:"Each topic now has a placement level. The app used that plus your stored weak areas to decide what should be emphasized."})]}),s.jsx("div",{className:"custom-grid",children:ae.map(O=>s.jsxs("article",{className:we.has(O.mode)?"topic-card topic-card--recommended":"topic-card",children:[s.jsxs("div",{className:"topic-card__header",children:[s.jsxs("div",{children:[s.jsx("div",{className:"topic-card__title",children:Di[O.mode].title}),s.jsx("div",{className:"topic-card__copy",children:Di[O.mode].description})]}),s.jsx("div",{className:"topic-card__metric",children:O.recommendedStage.shortLabel})]}),s.jsxs("div",{className:"chip-row",children:[s.jsxs("div",{className:"chip",children:["Placement ",O.recommendedStage.title]}),s.jsx("div",{className:"chip",children:Qp(O.correct,O.attempts)}),s.jsx("div",{className:"chip chip--quiet",children:we.has(O.mode)?"Needs work":"Stable for now"})]}),O.startedHigher&&s.jsx("div",{className:"mini-stat",children:"Started above level 1 from prior progress, then verified with this assessment."}),s.jsx("div",{className:"list-stack",children:O.stageBreakdown.filter(Z=>Z.attempts>0).map(Z=>s.jsxs("div",{className:"mini-stat",children:[Z.stage.shortLabel," ",Z.stage.title,": ",Qp(Z.correct,Z.attempts)]},`${O.mode}_${Z.stage.shortLabel}`))}),(Pe.get(O.mode)??[]).length>0&&s.jsx("div",{className:"list-stack",children:(Pe.get(O.mode)??[]).slice(0,3).map(Z=>s.jsx("div",{className:"mini-stat",children:Z},`${O.mode}_${Z}`))})]},O.mode))})]}),s.jsxs("div",{className:"button-row",children:[s.jsx("button",{type:"button",onClick:nn,children:"Re-run assessment"}),s.jsx("button",{type:"button",onClick:()=>m("topics"),children:"Continue to topic selection"})]})]}),f==="topics"&&s.jsxs(s.Fragment,{children:[s.jsx("section",{className:"panel panel--blue",children:s.jsxs("div",{className:"panel-header",children:[s.jsxs("div",{children:[s.jsx("div",{className:"kicker kicker--blue",children:"Topic selection"}),s.jsx("div",{className:"panel-title",children:"Pick what you actually want to focus on"})]}),s.jsx("div",{className:"panel-copy",children:"Needs-work topics stay on top, but the rest of the available topics are still selectable underneath."})]})}),s.jsxs("section",{className:"panel",children:[s.jsx("div",{className:"subtle",children:"Needs work"}),s.jsx("div",{className:"custom-grid",children:Ne.map(O=>{const Z=ae.find(Te=>Te.mode===O);return s.jsxs("button",{type:"button",className:k.includes(O)?"topic-card topic-card--selected topic-card--recommended":"topic-card topic-card--recommended",onClick:()=>lt(O),children:[s.jsxs("div",{className:"topic-card__header",children:[s.jsxs("div",{children:[s.jsx("div",{className:"topic-card__title",children:Di[O].title}),s.jsx("div",{className:"topic-card__copy",children:Z?.recommendedStage.title})]}),s.jsx("div",{className:"topic-card__metric",children:Z?.recommendedStage.shortLabel})]}),s.jsx("div",{className:"chip-row",children:s.jsx("div",{className:"chip",children:k.includes(O)?"Included":"Tap to include"})})]},O)})})]}),s.jsxs("section",{className:"panel",children:[s.jsx("div",{className:"subtle",children:"Other topics available"}),s.jsx("div",{className:"custom-grid",children:c.filter(O=>!we.has(O)).map(O=>{const Z=ae.find(Te=>Te.mode===O);return s.jsxs("button",{type:"button",className:k.includes(O)?"topic-card topic-card--selected":"topic-card",onClick:()=>lt(O),children:[s.jsxs("div",{className:"topic-card__header",children:[s.jsxs("div",{children:[s.jsx("div",{className:"topic-card__title",children:Di[O].title}),s.jsx("div",{className:"topic-card__copy",children:Z?.recommendedStage.title})]}),s.jsx("div",{className:"topic-card__metric",children:Z?.recommendedStage.shortLabel})]}),s.jsx("div",{className:"chip-row",children:s.jsx("div",{className:"chip",children:k.includes(O)?"Included":"Tap to include"})})]},O)})})]}),s.jsxs("div",{className:"button-row",children:[s.jsx("button",{type:"button",onClick:()=>m("results"),children:"Back to results"}),s.jsx("button",{type:"button",onClick:()=>m("settings"),disabled:k.length===0,children:"Continue to settings"})]})]}),f==="settings"&&s.jsxs(s.Fragment,{children:[s.jsx("section",{className:"panel panel--accent",children:s.jsxs("div",{className:"panel-header",children:[s.jsxs("div",{children:[s.jsx("div",{className:"kicker kicker--red",children:"Settings screen"}),s.jsx("div",{className:"panel-title",children:"Save your custom preset"})]}),s.jsx("div",{className:"panel-copy",children:"The recommended levels found in the assessment are already loaded here. Change anything you want before saving."})]})}),s.jsx("section",{className:"panel",children:s.jsxs("div",{className:"control-grid",children:[s.jsxs("label",{className:"control-label",children:["Preset name",s.jsx("input",{value:F,onChange:O=>ee(O.target.value),placeholder:"My custom path"})]}),s.jsxs("label",{className:"control-label",children:["Tonic source",s.jsxs("select",{value:de,onChange:O=>be(O.target.value),children:[s.jsx("option",{value:"random",children:"Randomize tonic"}),s.jsx("option",{value:"fixed",children:"Fixed tonic"})]})]}),de==="fixed"&&s.jsxs("label",{className:"control-label",children:["Fixed tonic",s.jsx("select",{value:re,onChange:O=>ce(O.target.value),children:Zt.map(O=>s.jsx("option",{value:O,children:O},O))})]}),s.jsxs("label",{className:"control-label",children:["Tonal mode",s.jsxs("select",{value:je,onChange:O=>M(O.target.value),children:[s.jsx("option",{value:"major",children:"Major"}),s.jsx("option",{value:"natural_minor",children:"Natural minor"}),s.jsx("option",{value:"harmonic_minor",children:"Harmonic minor"}),s.jsx("option",{value:"melodic_minor",children:"Melodic minor"}),s.jsx("option",{value:"modal",children:"Modal"})]})]})]})}),s.jsxs("section",{className:"panel",children:[s.jsx("div",{className:"subtle",children:"Chosen topics"}),s.jsxs("div",{className:"custom-grid",children:[k.includes("scale_degree")&&s.jsxs("div",{className:"topic-card topic-card--static",children:[s.jsx("div",{className:"topic-card__title",children:"Scale Degree settings"}),s.jsxs("div",{className:"topic-card__copy",children:["Recommended from placement: ",kt("scale_degree")[h.scale_degree.recommendedStageIndex].title]}),s.jsxs("label",{className:"control-label",children:["Degree level",s.jsxs("select",{value:Ae,onChange:O=>T(Number(O.target.value)),children:[s.jsx("option",{value:1,children:"1-5"}),s.jsx("option",{value:2,children:"+6/7"}),s.jsx("option",{value:3,children:"+b3/#4/b7"})]})]})]}),k.includes("functional_interval")&&s.jsxs("div",{className:"topic-card topic-card--static",children:[s.jsx("div",{className:"topic-card__title",children:"Functional Interval settings"}),s.jsxs("div",{className:"topic-card__copy",children:["Recommended from placement: ",kt("functional_interval")[h.functional_interval.recommendedStageIndex].title]}),s.jsxs("label",{className:"control-label",children:["Interval level",s.jsxs("select",{value:he,onChange:O=>P(Number(O.target.value)),children:[s.jsx("option",{value:1,children:"Level 1"}),s.jsx("option",{value:2,children:"Level 2"}),s.jsx("option",{value:3,children:"Level 3"}),s.jsx("option",{value:4,children:"Level 4"})]})]}),s.jsxs("label",{className:"control-label",children:["Interval playback",s.jsxs("select",{value:G,onChange:O=>J(O.target.value),children:[s.jsx("option",{value:"scale_context",children:"Scale-context"}),s.jsx("option",{value:"sequential_pause",children:"Sequential pause"}),s.jsx("option",{value:"immediate_jump",children:"Immediate jump"}),s.jsx("option",{value:"harmonic_stack",children:"Harmonic stack"})]})]})]}),k.includes("functional_harmony")&&s.jsxs("div",{className:"topic-card topic-card--static",children:[s.jsx("div",{className:"topic-card__title",children:"Functional Harmony settings"}),s.jsxs("div",{className:"topic-card__copy",children:["Recommended from placement: ",kt("functional_harmony")[h.functional_harmony.recommendedStageIndex].title]}),s.jsxs("label",{className:"control-label",children:["Harmony level",s.jsxs("select",{value:le,onChange:O=>ve(Number(O.target.value)),children:[s.jsx("option",{value:1,children:"Level 1"}),s.jsx("option",{value:2,children:"Level 2"})]})]}),s.jsxs("label",{className:"control-label",children:["Harmony playback",s.jsxs("select",{value:te,onChange:O=>fe(O.target.value),children:[s.jsx("option",{value:"block",children:"Block"}),s.jsx("option",{value:"arpeggiated",children:"Arpeggiated"}),s.jsx("option",{value:"mixed",children:"Mixed"})]})]})]}),k.includes("timing_grid")&&s.jsxs("div",{className:"topic-card topic-card--static",children:[s.jsx("div",{className:"topic-card__title",children:"Timing Grid settings"}),s.jsxs("div",{className:"topic-card__copy",children:["Recommended from placement: ",kt("timing_grid")[h.timing_grid.recommendedStageIndex].title]}),s.jsxs("label",{className:"control-label",children:["Timing level",s.jsxs("select",{value:ge,onChange:O=>pe(Number(O.target.value)),children:[s.jsx("option",{value:1,children:"Level 1"}),s.jsx("option",{value:2,children:"Level 2"}),s.jsx("option",{value:3,children:"Level 3"})]})]})]}),k.includes("phrase_recall")&&s.jsxs("div",{className:"topic-card topic-card--static",children:[s.jsx("div",{className:"topic-card__title",children:"Phrase Recall settings"}),s.jsxs("div",{className:"topic-card__copy",children:["Recommended from placement: ",kt("phrase_recall")[h.phrase_recall.recommendedStageIndex].title]}),s.jsxs("label",{className:"control-label",children:["Phrase level",s.jsxs("select",{value:E,onChange:O=>X(Number(O.target.value)),children:[s.jsx("option",{value:1,children:"Level 1"}),s.jsx("option",{value:2,children:"Level 2"}),s.jsx("option",{value:3,children:"Level 3"})]})]}),s.jsxs("label",{className:"control-label",children:["Input mode",s.jsxs("select",{value:W,onChange:O=>xe(O.target.value),children:[s.jsx("option",{value:"multiple_choice",children:"Multiple choice"}),s.jsx("option",{value:"piano_grid",children:"Piano grid"}),s.jsx("option",{value:"staff_entry",children:"Staff entry"})]})]})]})]})]}),s.jsxs("section",{className:"panel",children:[s.jsx("div",{className:"subtle",children:"Session aids"}),s.jsx("div",{className:"checkbox-grid",children:N1.map(O=>s.jsx("button",{type:"button",className:I[O.key]?"checkbox-chip checkbox-chip--stacked checkbox-chip--selected":"checkbox-chip checkbox-chip--stacked",onClick:()=>tn(O.key,!I[O.key]),children:s.jsxs("span",{className:"checkbox-chip__body",children:[s.jsx("span",{className:"checkbox-chip__title",children:O.title}),s.jsx("span",{className:"checkbox-chip__copy",children:O.description})]})},O.key))})]}),s.jsxs("div",{className:"button-row",children:[s.jsx("button",{type:"button",onClick:()=>m("topics"),children:"Back to topics"}),s.jsx("button",{type:"button",onClick:Tn,disabled:k.length===0,children:"Save preset"})]})]}),f==="saved"&&s.jsxs("section",{className:"panel panel--blue",children:[s.jsx("div",{className:"kicker kicker--blue",children:"Preset ready"}),s.jsx("div",{className:"panel-title",children:F.trim()||"Custom Path"}),s.jsx("div",{className:"panel-copy",children:"Your custom preset has been saved with the assessed levels you selected. You can use it for any future session."}),s.jsx("div",{className:"chip-row",children:k.map(O=>{const Z=ae.find(Te=>Te.mode===O);return s.jsxs("div",{className:"chip",children:[Di[O].title," ",Z?.recommendedStage.shortLabel]},O)})}),s.jsxs("div",{className:"button-row",children:[s.jsx("button",{type:"button",onClick:()=>l(qe?`/practice?preset=${qe}`:"/practice"),children:"Open in practice"}),s.jsx("button",{type:"button",onClick:nn,children:"Build another custom path"})]})]})]})}const Rr="et_profile_v1",fd="et_profile_changed",zd="et_cloud_snapshot_v1:",Nr={userId:null,displayName:"",deviceLabel:typeof navigator>"u"?"This device":navigator.userAgent.includes("Mobile")?"Mobile device":"Desktop device",syncEnabled:!1,lastSyncedAt:null,syncState:"signed_out",syncError:null};function Bv(){typeof window<"u"&&window.dispatchEvent(new Event(fd))}function L1(l){return`${l.trim().toLowerCase().replace(/[^a-z0-9]+/g,"-").replace(/^-+|-+$/g,"")||"learner"}_${Math.random().toString(36).slice(2,8)}`}function Fn(){const l=Xl(Rr,Nr);return{...Nr,...l}}function Js(l){fn(Rr,l),Bv()}function md(l){Js({...Fn(),...l})}function O1(l){const c=l.trim(),o=Fn(),u={...o,userId:o.userId??L1(c),displayName:c,syncEnabled:!0,syncState:"ready",syncError:null};return Js(u),u}function z1(){B0(Rr),Bv()}function gr(l,c=null){const o=Fn();Js({...o,syncState:l,syncError:c})}function B1(l,c){localStorage.setItem(`${zd}${l}`,c),md({lastSyncedAt:Date.now(),syncState:"ready",syncError:null})}function q1(l){return localStorage.getItem(`${zd}${l}`)}function qv(l){if(typeof window>"u")return()=>{};const c=u=>{(u.key===Rr||u.key?.startsWith(zd))&&l()},o=()=>l();return window.addEventListener("storage",c),window.addEventListener(fd,o),()=>{window.removeEventListener("storage",c),window.removeEventListener(fd,o)}}const H1="et_progress_v1",Hv="et_authored_drills_v1";function Uv(){return{version:1,exportedAt:Date.now(),profile:Fn(),settings:St(),training:xr(),progress:Pl(),analytics:Ld(),authoredDrills:Ha()}}function U1(l){return typeof l!="object"||l==null?!1:"version"in l&&"settings"in l&&"training"in l&&"progress"in l}function G1(){const l=Uv();q0(`ear-trainer-backup-${l.exportedAt}.json`,JSON.stringify(l,null,2)),En("export_snapshot","/settings",{authoredCount:l.authoredDrills.length})}function Gv(l){const c=JSON.parse(l);if(!U1(c))throw new Error("Backup file is missing required fields.");const o=c;Js({...Nr,...o.profile}),Ks({...Ql,...o.settings}),Vs({...Sd,...o.training}),fn(H1,{...Sr,...o.progress}),Od(),fn(Hv,[...Ed,...o.authoredDrills??[]]),fn("et_analytics_v1",o.analytics??[]),En("import_snapshot","/settings",{exportedAt:o.exportedAt})}function V1(){Js(Nr),Ks(Ql),Vs(Sd),Mv(),Od(),fn(Hv,Ed)}async function Y1(){const l=Fn();if(!l.userId||!l.syncEnabled)throw new Error("Sign in before syncing.");gr("syncing");const c=JSON.stringify(Uv());B1(l.userId,c),En("sync_push","/settings",{authoredCount:Ha().length})}async function K1(){const l=Fn();if(!l.userId||!l.syncEnabled)throw new Error("Sign in before syncing.");gr("syncing");const c=q1(l.userId);if(!c)throw gr("error","No synced data found for this profile."),new Error("No synced data found for this profile.");Gv(c),gr("ready"),En("sync_pull","/settings",{source:"local-cloud"})}function Q1(){const[l,c]=p.useState(Fn()),[o,u]=p.useState(St()),[f,m]=p.useState(Fn().displayName),[h,y]=p.useState(Ha().length),[b,g]=p.useState(null),S=p.useRef(null);p.useEffect(()=>qv(()=>c(Fn())),[]),p.useEffect(()=>bl(()=>u(St())),[]),p.useEffect(()=>Td(()=>y(Ha().length)),[]);async function x(H){try{g(H==="push"?"Syncing local snapshot...":"Restoring latest synced snapshot..."),H==="push"?await Y1():await K1(),g(H==="push"?"Snapshot saved to synced storage.":"Synced snapshot restored.")}catch(D){g(D instanceof Error?D.message:"Sync failed.")}}async function L(H){try{const D=await H.text();Gv(D),g("Backup imported.")}catch(D){g(D instanceof Error?D.message:"Import failed.")}}return s.jsxs("div",{style:{display:"grid",gap:16},children:[s.jsxs("div",{style:{display:"grid",gap:6},children:[s.jsx("h2",{children:"Settings"}),s.jsx("p",{className:"subtle",children:"Manage your local profile, backup snapshots, and the data layers that power practice, authored content, and telemetry."})]}),s.jsxs("section",{className:"card",style:{display:"grid",gap:12},children:[s.jsx("h3",{children:"Profile"}),s.jsxs("label",{children:["Display name",s.jsx("input",{value:f,onChange:H=>m(H.target.value),"aria-label":"Display name"})]}),s.jsxs("label",{children:["Device label",s.jsx("input",{value:l.deviceLabel,onChange:H=>md({deviceLabel:H.target.value}),"aria-label":"Device label"})]}),s.jsx("div",{className:"subtle",children:l.userId?`Signed in as ${l.displayName||"Learner"} (${l.userId})`:"Running in local-only mode."}),s.jsxs("div",{style:{display:"flex",gap:10,flexWrap:"wrap"},children:[s.jsx("button",{onClick:()=>O1(f||"Learner"),children:l.userId?"Refresh profile":"Create profile"}),s.jsx("button",{onClick:()=>z1(),children:"Sign out"}),s.jsxs("label",{style:{display:"flex",alignItems:"center",gap:10},children:[s.jsx("input",{type:"checkbox",checked:l.syncEnabled,onChange:H=>md({syncEnabled:H.target.checked}),style:{width:18,minHeight:18},"aria-label":"Enable sync"}),"Keep a synced backup"]})]})]}),s.jsxs("section",{className:"card",style:{display:"grid",gap:12},children:[s.jsx("h3",{children:"Data flow"}),s.jsxs("div",{className:"subtle",children:["Last sync: ",l.lastSyncedAt?new Date(l.lastSyncedAt).toLocaleString():"Never"," | State: ",l.syncState]}),s.jsxs("div",{style:{display:"flex",gap:10,flexWrap:"wrap"},children:[s.jsx("button",{onClick:()=>x("push"),disabled:!l.userId||!l.syncEnabled,children:"Save synced copy"}),s.jsx("button",{onClick:()=>x("pull"),disabled:!l.userId||!l.syncEnabled,children:"Restore synced copy"}),s.jsx("button",{onClick:()=>G1(),children:"Download backup"}),s.jsx("button",{onClick:()=>S.current?.click(),children:"Import backup"})]}),s.jsx("input",{ref:S,type:"file",accept:"application/json",onChange:H=>{const D=H.target.files?.[0];D&&L(D),H.currentTarget.value=""},className:"sr-only","aria-label":"Import backup file"}),s.jsxs("div",{style:{display:"grid",gap:4},className:"subtle",children:[s.jsxs("div",{children:["Saved drills: ",h]}),s.jsxs("div",{children:["Tempo: ",o.tempoBpm," BPM"]}),s.jsxs("div",{children:["Visual aids: ",o.visualsEnabled?"On":"Off"]})]}),b&&s.jsx("div",{style:{padding:12,borderRadius:14,background:"var(--surface-muted)"},children:b})]}),s.jsxs("section",{className:"card",style:{display:"grid",gap:12},children:[s.jsx("h3",{children:"Reset"}),s.jsx("p",{className:"subtle",children:"This clears local progress, authored drills, settings, telemetry, and the current profile. It does not erase any synced copy saved under the same profile id."}),s.jsx("button",{onClick:()=>{V1(),g("Local data cleared.")},children:"Clear local data"})]})]})}function $1(l){return s.jsx("div",{style:{height:10,borderRadius:999,background:"rgba(0,0,0,0.08)",overflow:"hidden"},children:s.jsx("div",{style:{height:"100%",width:`${Math.round(l*100)}%`,background:"linear-gradient(90deg,#0b8f5a,#2ab37a)"}})})}function X1(){const l=lx(),c=h1(),o={intervals:"Intervals",degrees:"Degrees",chords:"Chords",timing:"Timing",phrases:"Phrases"};return s.jsxs("div",{style:{display:"grid",gap:12},children:[s.jsx("h2",{style:{margin:0},children:"Progress"}),s.jsxs("div",{style:{display:"grid",gap:6},children:[s.jsxs("div",{children:["Total attempts: ",s.jsx("b",{children:l.totals.attempts})]}),s.jsxs("div",{children:["Accuracy: ",s.jsxs("b",{children:[(l.totals.accuracy*100).toFixed(1),"%"]})]}),s.jsxs("div",{children:["Current streak: ",s.jsx("b",{children:l.totals.streak})," (best ",l.totals.bestStreak,")"]})]}),s.jsx("div",{style:{display:"grid",gap:10,padding:12,borderRadius:12,background:"white",border:"1px solid rgba(0,0,0,0.12)"},children:l.skills.map(u=>s.jsxs("div",{style:{display:"grid",gap:4},children:[s.jsxs("div",{style:{display:"flex",justifyContent:"space-between",fontSize:13},children:[s.jsx("div",{style:{fontWeight:700},children:o[u.skill]}),s.jsxs("div",{children:[Math.round(u.mastery*100),"%"]})]}),$1(u.mastery),s.jsxs("div",{style:{opacity:.7,fontSize:12},children:["Attempts ",u.attempts," | Due ",u.dueCount," | Weak ",u.weakCount]})]},u.skill))}),s.jsxs("div",{className:"card",style:{display:"grid",gap:10},children:[s.jsx("div",{style:{fontWeight:700},children:"Flow diagnostics"}),s.jsxs("div",{children:["Total events: ",s.jsx("b",{children:c.totalEvents})]}),s.jsxs("div",{children:["Page views: ",s.jsx("b",{children:c.pageViews})]}),s.jsxs("div",{children:["Finished runs: ",s.jsx("b",{children:c.completedSessions})]}),s.jsxs("div",{children:["Abandoned runs: ",s.jsx("b",{children:c.abandonedSessions})]}),s.jsxs("div",{children:["Completion rate: ",s.jsxs("b",{children:[(c.completionRate*100).toFixed(1),"%"]})]}),s.jsxs("div",{className:"subtle",style:{fontSize:13},children:["Top drop-off routes: ",c.dropOffRoutes.length>0?c.dropOffRoutes.map(u=>`${u.route} (${u.count})`).join(", "):"none yet"]})]}),s.jsxs("div",{style:{display:"flex",gap:8,flexWrap:"wrap"},children:[s.jsxs(Gs,{to:"/practice?review=due",style:{padding:"8px 12px",borderRadius:10,border:"1px solid rgba(0,0,0,0.2)",color:"inherit",textDecoration:"none",background:"white"},children:["Start due session (",l.reviewCounts.due,")"]}),s.jsxs(Gs,{to:"/practice?review=weak",style:{padding:"8px 12px",borderRadius:10,border:"1px solid rgba(0,0,0,0.2)",color:"inherit",textDecoration:"none",background:"white"},children:["Start focus session (",l.reviewCounts.weak,")"]}),s.jsx("div",{style:{opacity:.7,fontSize:12,alignSelf:"center"},children:"Launches a targeted run using your recent performance and scheduling data."})]}),s.jsx("button",{onClick:()=>{Mv(),location.reload()},style:{width:180},children:"Reset progress"}),s.jsx("button",{onClick:()=>{Od(),location.reload()},style:{width:180},children:"Reset diagnostics"})]})}const Wu=[{kind:"interval",id:"int_m2",label:"m2",semitones:1,difficulty:2,tags:["interval"]},{kind:"interval",id:"int_M2",label:"M2",semitones:2,difficulty:1,tags:["interval"]},{kind:"interval",id:"int_m3",label:"m3",semitones:3,difficulty:2,tags:["interval"]},{kind:"interval",id:"int_M3",label:"M3",semitones:4,difficulty:1,tags:["interval"]},{kind:"interval",id:"int_P4",label:"P4",semitones:5,difficulty:2,tags:["interval"]},{kind:"interval",id:"int_TT",label:"Tritone",semitones:6,difficulty:4,tags:["interval"]},{kind:"interval",id:"int_P5",label:"P5",semitones:7,difficulty:2,tags:["interval"]},{kind:"interval",id:"int_m6",label:"m6",semitones:8,difficulty:3,tags:["interval"]},{kind:"interval",id:"int_M6",label:"M6",semitones:9,difficulty:3,tags:["interval"]},{kind:"interval",id:"int_m7",label:"m7",semitones:10,difficulty:4,tags:["interval"]},{kind:"interval",id:"int_M7",label:"M7",semitones:11,difficulty:4,tags:["interval"]},{kind:"interval",id:"int_P8",label:"Octave",semitones:12,difficulty:2,tags:["interval"]},{kind:"degree",id:"deg_1",label:"1 (Do)",degree:1,difficulty:1,tags:["degree"]},{kind:"degree",id:"deg_3",label:"3 (Mi)",degree:3,difficulty:2,tags:["degree"]},{kind:"degree",id:"deg_5",label:"5 (So)",degree:5,difficulty:1,tags:["degree"]},{kind:"degree",id:"deg_7",label:"7 (Ti)",degree:7,difficulty:4,tags:["degree"]},{kind:"chord",id:"triad_maj",label:"Major triad",quality:"maj",difficulty:1,tags:["chord"]},{kind:"chord",id:"triad_min",label:"Minor triad",quality:"min",difficulty:2,tags:["chord"]},{kind:"chord",id:"triad_dim",label:"Diminished triad",quality:"dim",difficulty:4,tags:["chord"]},{kind:"chord",id:"triad_aug",label:"Augmented triad",quality:"aug",difficulty:4,tags:["chord"]}];function ed(){return Math.random().toString(36).slice(2,10)}function Li(l){const c=[...l];for(let o=c.length-1;o>0;o--){const u=Math.floor(Math.random()*(o+1));[c[o],c[u]]=[c[u],c[o]]}return c}function P1(l,c){const o=Zs(c.keyRoot,c.octave);if(l.kind==="interval"){const b=o,g=L0(b,l.semitones),S={kind:"sequence",events:[{atBeats:0,durationBeats:1,freqHz:Me(b),gain:.9},{atBeats:1,durationBeats:1,freqHz:Me(g),gain:.9}]},x=Li(["m2","M2","m3","M3","P4","Tritone","P5","m6","M6","m7","M7","Octave"]).slice(0,3),L=l.label==="Octave"?"Octave":l.label,H=Li(Array.from(new Set([L,...x]))).slice(0,4);return{id:`q_${ed()}`,prompt:"Identify the interval (melodic, ascending).",correctAnswer:L,answerChoices:H,playbackPlan:S,metadata:{itemId:l.id,itemKind:l.kind,difficulty:l.difficulty,tags:l.tags}}}if(l.kind==="degree"){const g=[0,2,4,5,7,9,11][l.degree-1],S=o+g,x={kind:"sequence",events:[{atBeats:0,durationBeats:1,freqHz:Me(o),gain:.9},{atBeats:1,durationBeats:1,freqHz:Me(S),gain:.9}]},L=["1 (Do)","2 (Re)","3 (Mi)","4 (Fa)","5 (So)","6 (La)","7 (Ti)"],H=l.label,D=Li(L.filter(k=>k!==H)).slice(0,3),U=Li([H,...D]);return{id:`q_${ed()}`,prompt:`Which scale degree is this (in ${c.keyRoot} major)?`,correctAnswer:H,answerChoices:U,playbackPlan:x,metadata:{itemId:l.id,itemKind:l.kind,difficulty:l.difficulty,tags:l.tags}}}const f={kind:"chord",midis:O0(o,l.quality),durationBeats:2},m=["Major triad","Minor triad","Diminished triad","Augmented triad"],h=l.label,y=Li(m.filter(b=>b!==h)).slice(0,3);return{id:`q_${ed()}`,prompt:"Identify the chord quality.",correctAnswer:h,answerChoices:Li([h,...y]),playbackPlan:f,metadata:{itemId:l.id,itemKind:l.kind,difficulty:l.difficulty,tags:l.tags}}}function Z1(){const[l,c]=p.useState(Wu[0]?.id??""),[o,u]=p.useState(St());p.useEffect(()=>bl(()=>u(St())),[]);const f=p.useMemo(()=>Wu.find(b=>b.id===l),[l]),m=p.useMemo(()=>f?P1(f,o):null,[f,o]);async function h(){m&&await Xe.play(m.playbackPlan,{tempoBpm:o.tempoBpm,masterGain:o.masterGain,timbre:o.timbre})}function y(b){m&&(Nd({itemId:m.metadata.itemId,mode:m.metadata.itemKind,correct:b,responseMs:0}),alert(b?"Logged: correct":"Logged: incorrect"))}return s.jsxs("div",{style:{display:"grid",gap:12},children:[s.jsx("h2",{style:{margin:0},children:"Debug Mode"}),s.jsx("div",{style:{opacity:.75},children:"Pick any item, generate the standardized Question JSON, and play it through the shared PlaybackEngine."}),s.jsxs("div",{style:{display:"flex",gap:10,alignItems:"end",flexWrap:"wrap"},children:[s.jsxs("label",{style:{display:"grid",gap:4},children:[s.jsx("div",{children:"Item"}),s.jsx("select",{value:l,onChange:b=>c(b.target.value),style:{minWidth:280},children:Wu.map(b=>s.jsxs("option",{value:b.id,children:["[",b.kind,"] ",b.label," (d",b.difficulty,")"]},b.id))})]}),s.jsx("button",{onClick:h,style:{padding:"10px 12px",borderRadius:10},children:"Play"}),s.jsx("button",{onClick:()=>Xe.stopAll(),style:{padding:"10px 12px",borderRadius:10},children:"Stop"}),s.jsx("button",{onClick:()=>y(!0),style:{padding:"10px 12px",borderRadius:10},children:"Log Correct"}),s.jsx("button",{onClick:()=>y(!1),style:{padding:"10px 12px",borderRadius:10},children:"Log Incorrect"})]}),s.jsxs("div",{style:{display:"grid",gap:10,gridTemplateColumns:"1fr 1fr"},children:[s.jsxs("div",{style:{padding:12,borderRadius:12,background:"white",border:"1px solid rgba(0,0,0,0.12)"},children:[s.jsx("div",{style:{fontWeight:700,marginBottom:8},children:"Selected Item"}),s.jsx("pre",{style:{margin:0,fontSize:12,overflow:"auto"},children:JSON.stringify(f,null,2)})]}),s.jsxs("div",{style:{padding:12,borderRadius:12,background:"white",border:"1px solid rgba(0,0,0,0.12)"},children:[s.jsx("div",{style:{fontWeight:700,marginBottom:8},children:"Generated Question JSON"}),s.jsx("pre",{style:{margin:0,fontSize:12,overflow:"auto"},children:JSON.stringify(m,null,2)})]})]})]})}function J1({samples:l,targetMidis:c,scoredMidis:o=[],height:u=180}){if(l.length===0&&c.length===0)return s.jsx("div",{style:{height:u,borderRadius:10,background:"rgba(0,0,0,0.04)",display:"grid",placeItems:"center",fontSize:13,opacity:.72},children:"No pitch trace yet"});const m=[...l.map($=>$.midi),...c,...o],h=Math.floor(Math.min(...m))-1,y=Math.ceil(Math.max(...m))+1,b=Math.max(1,y-h),g=560,S=l[0]?.atMs??0,x=l.at(-1)?.atMs??S+Math.max(1,c.length-1)*550,L=Math.max(1,x-S),H=$=>($-S)/L*g,D=$=>u-($-h)/b*u,U=l.map(($,F)=>`${F===0?"M":"L"} ${H($.atMs).toFixed(1)} ${D($.midi).toFixed(1)}`).join(" "),k=L/Math.max(1,c.length);return s.jsxs("div",{style:{display:"grid",gap:6},children:[s.jsxs("svg",{viewBox:`0 0 ${g} ${u}`,style:{width:"100%",height:u,borderRadius:10,background:"rgba(0,0,0,0.04)"},children:[Array.from({length:b+1},($,F)=>{const ee=h+F,de=D(ee);return s.jsx("line",{x1:0,y1:de,x2:g,y2:de,stroke:"rgba(0,0,0,0.08)",strokeWidth:ee%12===0?1.2:.6},`grid_${ee}`)}),c.map(($,F)=>{const ee=F*k,de=Math.min(g,ee+k*.9),be=D($);return s.jsx("line",{x1:ee,y1:be,x2:de,y2:be,stroke:"rgba(37, 99, 235, 0.75)",strokeWidth:3,strokeLinecap:"round"},`target_${F}`)}),U.length>0&&s.jsx("path",{d:U,fill:"none",stroke:"rgba(24, 120, 63, 0.95)",strokeWidth:2.4,strokeLinecap:"round",strokeLinejoin:"round"}),o.map(($,F)=>{const ee=Math.min(g-10,F*k+k*.45),de=D($);return s.jsx("circle",{cx:ee,cy:de,r:4.5,fill:"rgba(180, 110, 18, 0.95)"},`scored_${F}`)})]}),s.jsxs("div",{style:{display:"flex",gap:10,flexWrap:"wrap",fontSize:12,opacity:.72},children:[s.jsx("div",{children:"Blue: target"}),s.jsx("div",{children:"Green: sung pitch"}),s.jsx("div",{children:"Amber: scored centers"})]})]})}const F1=[{value:"interval_echo",label:"Interval echo"},{value:"degree_match",label:"Degree over drone"}],I1=F1.filter(l=>vv().includes(l.value)),W1=["major","natural_minor","harmonic_minor","melodic_minor","modal"],$p={freqHz:null,midi:null,cents:null,clarity:0,rms:0,isSignal:!1,noteLabel:null};function eS(l,c,o){if(c==null||l.midi==null)return{label:l.isSignal?"Searching for pitch":"Below gate",cents:null,tone:"neutral"};const u=za(l.midi,c);return Math.abs(u)<=o?{label:"In tune",cents:u,tone:"good"}:{label:u>0?"Sharp":"Flat",cents:u,tone:"warn"}}function tS(l){return l.kind==="interval_echo"?"Hear the two-note move, then sing the same motion back in order.":"Lock into the drone, then sing the target degree and hold it steady."}function nS(l){return l.targetLabels.length>1?`Targets ${l.targetLabels.join(" -> ")}`:`Target ${l.targetLabels[0]}`}function aS(l){const c=Math.round(l.mastery*100);return l.mode==="functional_interval"?`${l.label} is still unstable. You are averaging ${c}% mastery across ${l.attempts} scored interval attempts.`:l.mode==="scale_degree"?`${l.label} is lagging behind. You are averaging ${c}% mastery across ${l.attempts} scored degree matches.`:`${l.label} is one of the weakest recent voice buckets at ${c}% mastery over ${l.attempts} attempts.`}function lS(l){return l.mode==="functional_interval"?"Replay the prompt once, sing the first note clearly, then exaggerate the motion into the destination note before tightening the pitch.":l.mode==="scale_degree"?"Stay on the drone longer before responding and aim for a stable center pitch before trying to finish the hold timer.":"Slow the response down, use the prompt as a reference, and prioritize pitch stability before speed."}function iS(){const[l,c]=p.useState(St()),[o,u]=p.useState(Rd()),[f,m]=p.useState("major"),[h,y]=p.useState(null),[b,g]=p.useState(null),[S,x]=p.useState(!1),[L,H]=p.useState(null),[D,U]=p.useState($p),[k,$]=p.useState(!1),[F,ee]=p.useState("Not set"),[de,be]=p.useState(!1),[re,ce]=p.useState(0),[Ae,T]=p.useState(0),[he,P]=p.useState(null),[le,ve]=p.useState([]),[ge,pe]=p.useState([]),[E,X]=p.useState(null),[W,xe]=p.useState({attempts:0,correct:0}),[je,M]=p.useState([]),[G,J]=p.useState(!1),[te,fe]=p.useState(!1),[I,Se]=p.useState(!1),qe=p.useRef(null),Le=p.useRef(null),ft=p.useRef(null),ze=p.useRef(null),rt=p.useRef(null),mt=p.useRef(null),K=p.useRef(0),ae=p.useRef([]),ie=p.useRef([]),Ne=p.useRef(null),we=p.useRef(o),Pe=p.useRef(k),ke=p.useRef(de),Ee=p.useRef(b),Ct=p.useRef(null),Qt=p.useRef(!1),lt=p.useRef(0);p.useEffect(()=>bl(()=>c(St())),[]),p.useEffect(()=>{we.current=o},[o]),p.useEffect(()=>{Pe.current=k},[k]),p.useEffect(()=>{ke.current=de},[de]),p.useEffect(()=>{Ee.current=b},[b]);const tn=h??Zs(l.keyRoot,l.octave),Tn=b==null||b.targetMidis.length<=1?0:Math.min(re,b.targetMidis.length-1),nn=b?.targetMidis[Tn]??null,O=p.useMemo(()=>eS(D,nn,o.toleranceCents),[nn,D,o.toleranceCents]),Z=W.attempts===0?null:Math.round(W.correct/W.attempts*100);function Te(se){u(se),d1(se)}function Lt(){M(jv({contextPrefix:"voice:",limit:3,modePool:["scale_degree","functional_interval"]}))}function it(se=o.exerciseKind,We=tn,_t=f){be(!1),ke.current=!1,Ct.current=null,Qt.current=!1,ie.current=[],ce(0),T(0),P(null),ve([]),pe([]),X(null),g(i1({kind:se,tonicMidi:We,tonalMode:_t}))}p.useEffect(()=>{it(o.exerciseKind,tn,f)},[tn,f,o.exerciseKind]),p.useEffect(()=>{Lt()},[]),p.useEffect(()=>{if(!b?.droneMidi){Xe.clearDrone();return}Xe.setDrone(b.droneMidi,{tempoBpm:l.tempoBpm,masterGain:l.masterGain,timbre:l.timbre},.14)},[b,l.masterGain,l.tempoBpm,l.timbre]),p.useEffect(()=>()=>{rt.current!=null&&window.cancelAnimationFrame(rt.current),Ne.current!=null&&window.clearTimeout(Ne.current),Xe.clearDrone(),Xe.stopAll(),ze.current?.getTracks().forEach(se=>se.stop()),ft.current?.disconnect(),Le.current?.disconnect(),qe.current!=null&&qe.current.close()},[]);async function Jt(){if(!S){if(!navigator.mediaDevices?.getUserMedia){H("This browser does not expose microphone input.");return}try{const se=await navigator.mediaDevices.getUserMedia({audio:{echoCancellation:!1,noiseSuppression:!1,autoGainControl:!1}}),We=new AudioContext;await We.resume();const _t=We.createAnalyser();_t.fftSize=2048,_t.smoothingTimeConstant=.12;const yt=We.createMediaStreamSource(se);yt.connect(_t);const ht=new Float32Array(new ArrayBuffer(_t.fftSize*Float32Array.BYTES_PER_ELEMENT));qe.current=We,Le.current=_t,ft.current=yt,ze.current=se,mt.current=ht,x(!0),H(null);const an=()=>{const Va=Le.current,ua=qe.current,Un=mt.current;if(!Va||!ua||!Un)return;Va.getFloatTimeDomainData(Un);const $t=_d(Un,ua.sampleRate,we.current.noiseGate),ln=performance.now();if($t.midi!=null){const Gn={atMs:ln,midi:$t.midi,rms:$t.rms};Pe.current&&ae.current.push(Gn),ke.current&&ie.current.push(Gn)}if(ke.current){const Gn=kr(ie.current);if(ce(Gn.length),Ee.current?.targetMidis.length===1&&$t.midi!=null){const da=za($t.midi,Ee.current.targetMidis[0]),fa=Math.abs(da)<=we.current.toleranceCents?(ie.current.at(-1)?.atMs??ln)-(Gn.at(-1)?.startMs??ln):0;T(Math.max(0,Math.round(fa))),fa>=we.current.holdDurationMs&&!Qt.current&&window.setTimeout(()=>Ga("auto"),0)}else T(0);ln-lt.current>110&&(lt.current=ln,ve([...ie.current]))}else ce(0),T(0);ln-K.current>70&&(K.current=ln,U($t)),rt.current=window.requestAnimationFrame(an)};rt.current=window.requestAnimationFrame(an)}catch(se){const We=se instanceof Error?se.message:"Microphone permission failed.";H(We),x(!1)}}}async function Ie(){rt.current!=null&&(window.cancelAnimationFrame(rt.current),rt.current=null),ze.current?.getTracks().forEach(se=>se.stop()),ze.current=null,ft.current?.disconnect(),ft.current=null,Le.current?.disconnect(),Le.current=null,mt.current=null,qe.current!=null&&(await qe.current.close(),qe.current=null),x(!1),H(null),$(!1),U($p),be(!1),ke.current=!1}function zt(){b&&Xe.play(b.promptPlan,{tempoBpm:l.tempoBpm,masterGain:l.masterGain,timbre:l.timbre})}function gt(){!S||!b||(ie.current=[],Ct.current=performance.now(),Qt.current=!1,lt.current=0,be(!0),ke.current=!0,ce(0),T(0),P(null),ve([]),pe([]),X(null))}function Ga(se="manual"){const We=Ee.current;if(!We||Qt.current)return;Qt.current=!0,be(!1),ke.current=!1;const _t=Math.max(1,Math.round(performance.now()-(Ct.current??performance.now()))),yt=[...ie.current],ht=o1({exercise:We,samples:yt,toleranceCents:we.current.toleranceCents});P(ht),ve(yt),pe(yt),X(se==="auto"?"Hold target reached. Attempt scored automatically.":null),Nd({itemId:We.progressItemId,mode:We.progressMode,correct:ht.correct,responseMs:_t,contextKey:We.contextKey,adaptiveKeys:We.adaptiveKeys}),xe(an=>({attempts:an.attempts+1,correct:an.correct+(ht.correct?1:0)})),Lt()}function Hn(){S&&(ae.current=[],$(!0),ee("Listening for a steady tonic..."),Ne.current!=null&&window.clearTimeout(Ne.current),Ne.current=window.setTimeout(()=>{const se=s1(ae.current);if($(!1),se==null){ee("No stable tonic captured");return}y(se),ee(Ba(se)),it(we.current.exerciseKind,se,f)},2200))}const oa=O.tone==="good"?"rgba(24, 120, 63, 0.12)":O.tone==="warn"?"rgba(180, 110, 18, 0.14)":"rgba(0,0,0,0.05)";return s.jsxs("div",{className:"page",children:[s.jsxs("div",{style:{display:"grid",gap:"0.45rem"},children:[s.jsx("h2",{style:{margin:0},children:"Voice Practice"}),s.jsx("div",{className:"subtle",children:"Focus on the sung prompt, then use the live feedback panel to correct the response in real time."})]}),s.jsxs("div",{className:"voice-layout",children:[s.jsx("div",{className:"voice-prompt-shell",children:s.jsxs("div",{className:"voice-prompt-shell__tools",children:[s.jsx("button",{type:"button",onClick:()=>{S?Ie():Jt()},children:S?"Disable mic":"Enable mic"}),s.jsx("button",{type:"button",onClick:()=>J(!0),children:"Settings"}),s.jsx("button",{type:"button",onClick:()=>fe(!0),children:"Topic mode"}),s.jsx("button",{type:"button",onClick:()=>Se(!0),children:"Reinforcement"})]})}),s.jsxs("section",{className:"panel panel--accent voice-feedback-panel",children:[s.jsxs("div",{className:"voice-feedback-panel__header",children:[s.jsxs("div",{className:"voice-feedback-panel__copy",children:[s.jsx("div",{className:"panel-title",children:b?.label??"Voice Practice"}),s.jsx("div",{className:"subtle",children:b?tS(b):"Load a voice prompt to begin."})]}),s.jsxs("div",{className:"voice-feedback-panel__stats",children:[s.jsxs("div",{className:"metric-card",children:[s.jsx("div",{className:"metric-card__label",children:"Target"}),s.jsx("div",{className:"metric-card__value",children:b?nS(b).replace("Targets ","").replace("Target ",""):"--"})]}),s.jsxs("div",{className:"metric-card",children:[s.jsx("div",{className:"metric-card__label",children:"Tonic"}),s.jsx("div",{className:"metric-card__value",children:b?Ba(b.tonicMidi):"--"})]}),s.jsxs("div",{className:"metric-card",children:[s.jsx("div",{className:"metric-card__label",children:"Mode"}),s.jsx("div",{className:"metric-card__value",children:f.replace("_"," ")})]}),s.jsxs("div",{className:"metric-card",children:[s.jsx("div",{className:"metric-card__label",children:"Accuracy"}),s.jsxs("div",{className:"metric-card__value",children:[W.correct,"/",W.attempts,Z!=null?` (${Z}%)`:""]})]})]})]}),s.jsx(J1,{samples:le,targetMidis:b?.targetMidis??[],scoredMidis:he?.scoredMidis}),s.jsxs("div",{className:"notice voice-feedback-panel__notice voice-feedback-panel__notice--compact",style:{background:oa},children:[s.jsxs("div",{className:"voice-feedback-panel__notice-row",children:[s.jsx("div",{className:"voice-feedback-panel__headline voice-feedback-panel__headline--small",children:O.cents!=null?`${Math.round(O.cents)} cents`:O.label}),de&&b?.targetMidis.length===1&&s.jsxs("div",{className:"chip",children:["Hold ",Math.min(Ae,o.holdDurationMs)," / ",o.holdDurationMs," ms"]}),E&&s.jsx("div",{className:"chip",children:E})]}),s.jsx("div",{className:"subtle",children:O.cents==null?"No stable pitch is being tracked yet.":`Tracking ${b?.targetLabels[Tn]??"target"} at ${o.toleranceCents}-cent tolerance.`})]}),s.jsxs("div",{className:"button-row",children:[s.jsx("button",{onClick:zt,children:"Play prompt"}),s.jsx("button",{onClick:()=>it(),children:"New prompt"}),s.jsx("button",{onClick:gt,disabled:!S||de,children:"Start attempt"}),s.jsx("button",{onClick:()=>Ga("manual"),disabled:!de,children:"Finish attempt"})]}),he?s.jsxs("div",{className:"feedback-block voice-result-card",children:[s.jsxs("div",{className:"voice-result-card__header",children:[s.jsx("div",{className:"panel-title",children:he.correct?"Matched":"Try again"}),s.jsx("div",{className:"subtle",children:he.summary})]}),s.jsxs("div",{className:"metric-grid",children:[s.jsxs("div",{className:"metric-card",children:[s.jsx("div",{className:"metric-card__label",children:"Hits in tolerance"}),s.jsxs("div",{className:"metric-card__value",children:[he.matched,"/",he.expected]})]}),s.jsxs("div",{className:"metric-card",children:[s.jsx("div",{className:"metric-card__label",children:"Captured samples"}),s.jsx("div",{className:"metric-card__value",children:ge.length})]}),s.jsxs("div",{className:"metric-card",children:[s.jsx("div",{className:"metric-card__label",children:"Reinforcement queue"}),s.jsx("div",{className:"metric-card__value",children:je.length})]})]}),he.centsOff.length>0&&s.jsx("div",{className:"chip-row",children:he.centsOff.map((se,We)=>s.jsxs("div",{className:"chip",children:[b?.targetLabels[We]??We+1,": ",Math.round(se)," cents"]},`${b?.id??"voice"}_${We}`))})]}):s.jsxs("div",{className:"feedback-block voice-result-card",children:[s.jsx("div",{className:"panel-title",children:"Awaiting scored attempt"}),s.jsx("div",{className:"subtle",children:"The scored summary appears here after you finish an attempt. Use the prompt card to replay or generate a new cue if needed."})]})]})]}),G&&s.jsx("div",{className:"mode-overlay",onClick:()=>J(!1),role:"presentation",children:s.jsxs("div",{className:"mode-overlay__panel mode-overlay__panel--wide mode-overlay__panel--compact",onClick:se=>se.stopPropagation(),role:"dialog","aria-modal":"true","aria-labelledby":"voice-input-settings-title",children:[s.jsx("div",{id:"voice-input-settings-title",className:"panel-title",children:"Input settings"}),s.jsx("div",{className:"subtle",children:"Configure the microphone and tracking thresholds here so the main screen can stay focused on the prompt and response."}),s.jsxs("div",{className:"button-row",children:[s.jsx("button",{onClick:Hn,disabled:!S||k,children:"Calibrate tonic"}),s.jsxs("div",{className:"meta-pill",children:[S?"Microphone ready":"Microphone required",L?` | ${L}`:"",k?" | capturing...":""]})]}),s.jsxs("div",{className:"metric-grid",children:[s.jsxs("div",{className:"metric-card",children:[s.jsx("div",{className:"metric-card__label",children:"Tonic"}),s.jsx("div",{className:"metric-card__value",children:h==null?`${l.keyRoot}${l.octave}`:F})]}),s.jsxs("div",{className:"metric-card",children:[s.jsx("div",{className:"metric-card__label",children:"Detected"}),s.jsx("div",{className:"metric-card__value",children:D.noteLabel??"none"})]}),s.jsxs("div",{className:"metric-card",children:[s.jsx("div",{className:"metric-card__label",children:"Clarity"}),s.jsxs("div",{className:"metric-card__value",children:[Math.round(D.clarity*100),"%"]})]}),s.jsxs("div",{className:"metric-card",children:[s.jsx("div",{className:"metric-card__label",children:"Level"}),s.jsx("div",{className:"metric-card__value",children:D.rms.toFixed(3)})]})]}),s.jsxs("div",{className:"control-grid",children:[s.jsxs("label",{className:"control-label",children:["Noise gate",s.jsx("input",{type:"range",min:.005,max:.05,step:.001,value:o.noiseGate,onChange:se=>Te({...o,noiseGate:Number(se.target.value)})}),s.jsx("span",{children:o.noiseGate.toFixed(3)})]}),s.jsxs("label",{className:"control-label",children:["Tolerance",s.jsx("input",{type:"range",min:10,max:50,step:1,value:o.toleranceCents,onChange:se=>Te({...o,toleranceCents:Number(se.target.value)})}),s.jsxs("span",{children:[o.toleranceCents," cents"]})]}),s.jsxs("label",{className:"control-label",children:["Steady hold",s.jsx("input",{type:"range",min:400,max:1600,step:100,value:o.holdDurationMs,onChange:se=>Te({...o,holdDurationMs:Number(se.target.value)})}),s.jsxs("span",{children:[o.holdDurationMs," ms"]})]})]}),s.jsx("button",{type:"button",className:"mode-overlay__dismiss",onClick:()=>J(!1),children:"Close input settings"})]})}),te&&s.jsx("div",{className:"mode-overlay",onClick:()=>fe(!1),role:"presentation",children:s.jsxs("div",{className:"mode-overlay__panel mode-overlay__panel--wide mode-overlay__panel--compact",onClick:se=>se.stopPropagation(),role:"dialog","aria-modal":"true","aria-labelledby":"voice-topic-settings-title",children:[s.jsx("div",{id:"voice-topic-settings-title",className:"panel-title",children:"Topic mode"}),s.jsx("div",{className:"subtle",children:"Choose the voice exercise and tonal context here without crowding the main response screen."}),s.jsx("div",{className:"chip-row",children:I1.map(se=>s.jsx("button",{type:"button",className:o.exerciseKind===se.value?"toggle-chip toggle-chip--active":"toggle-chip","aria-pressed":o.exerciseKind===se.value,onClick:()=>{const We={...o,exerciseKind:se.value};Te(We),it(se.value,tn,f)},children:se.label},se.value))}),s.jsx("div",{className:"control-grid",children:s.jsxs("label",{className:"control-label",children:["Tonal mode",s.jsx("select",{value:f,onChange:se=>m(se.target.value),children:W1.map(se=>s.jsx("option",{value:se,children:se.replace("_"," ")},se))})]})}),s.jsx("button",{type:"button",className:"mode-overlay__dismiss",onClick:()=>fe(!1),children:"Close topic mode"})]})}),I&&s.jsx("div",{className:"mode-overlay",onClick:()=>Se(!1),role:"presentation",children:s.jsxs("div",{className:"mode-overlay__panel mode-overlay__panel--wide mode-overlay__panel--compact",onClick:se=>se.stopPropagation(),role:"dialog","aria-modal":"true","aria-labelledby":"voice-reinforcement-title",children:[s.jsx("div",{id:"voice-reinforcement-title",className:"panel-title",children:"Reinforcement"}),s.jsx("div",{className:"subtle",children:"These are the voice areas the tracker currently considers least stable. Use them to decide what to repeat before chasing more speed."}),je.length===0?s.jsx("div",{className:"panel-copy",children:"No weak voice buckets yet. Complete a few scored attempts and this overlay will start prioritizing what needs extra reps."}):s.jsx("div",{className:"list-stack",children:je.map(se=>s.jsxs("div",{className:"list-row voice-reinforcement-row",children:[s.jsxs("div",{className:"voice-reinforcement-row__header",children:[s.jsx("div",{style:{fontWeight:700},children:se.label}),s.jsxs("div",{className:"chip-row",children:[s.jsxs("div",{className:"chip",children:["Mastery ",Math.round(se.mastery*100),"%"]}),s.jsxs("div",{className:"chip",children:["Attempts ",se.attempts]}),s.jsxs("div",{className:"chip",children:["Mode ",se.mode.replace("_"," ")]}),se.dueNow&&s.jsx("div",{className:"chip",children:"Due now"})]})]}),s.jsx("div",{className:"subtle",children:aS(se)}),s.jsx("div",{className:"panel-copy",children:lS(se)})]},se.context+se.key))}),s.jsx("button",{type:"button",className:"mode-overlay__dismiss",onClick:()=>Se(!1),children:"Close reinforcement"})]})})]})}const ur={name:"",mode:"scale_degree",adaptiveKey:"degree:3",difficulty:2,tags:"warmup",promptOverride:"",explanationTitle:"",explanationBody:"",coachingNotes:"",moreBody:"",enabled:!0};function sS(l){return{id:l.id,name:l.name,mode:l.mode,adaptiveKey:l.adaptiveKey,difficulty:l.difficulty,tags:l.tags.join(", "),promptOverride:l.promptOverride,explanationTitle:l.explanationTitle,explanationBody:l.explanationBody,coachingNotes:l.coachingNotes.join(`
`),moreBody:l.moreBody,enabled:l.enabled}}function cS(){const[l,c]=p.useState(Ha()),[o,u]=p.useState(ur);p.useEffect(()=>Td(()=>c(Ha())),[]);const f=p.useMemo(()=>wp(o.mode),[o.mode]);function m(y,b){u(g=>({...g,[y]:b}))}function h(){!o.name.trim()||!o.adaptiveKey.trim()||(sx({id:o.id,name:o.name.trim(),mode:o.mode,adaptiveKey:o.adaptiveKey.trim(),difficulty:o.difficulty,tags:o.tags.split(",").map(y=>y.trim()).filter(Boolean),promptOverride:o.promptOverride.trim(),explanationTitle:o.explanationTitle.trim()||o.name.trim(),explanationBody:o.explanationBody.trim(),coachingNotes:o.coachingNotes.split(`
`).map(y=>y.trim()).filter(Boolean),moreBody:o.moreBody.trim(),enabled:o.enabled}),En("authoring_saved","/studio",{mode:o.mode,difficulty:o.difficulty}),u({...ur,mode:o.mode,adaptiveKey:f[0]??o.adaptiveKey}))}return s.jsxs("div",{style:{display:"grid",gap:16},children:[s.jsxs("div",{style:{display:"grid",gap:6},children:[s.jsx("h2",{children:"Studio"}),s.jsx("p",{className:"subtle",children:"Build reusable drill overlays, tag them for sequencing, and tune the explanatory copy that appears after each answer."})]}),s.jsxs("section",{className:"card",style:{display:"grid",gap:12},children:[s.jsxs("div",{style:{display:"grid",gap:4},children:[s.jsx("h3",{children:o.id?"Edit drill":"Create drill"}),s.jsx("p",{className:"subtle",children:"The adaptive key should match a supported concept so practice sessions can generate it on demand."})]}),s.jsxs("div",{style:{display:"grid",gap:12,gridTemplateColumns:"repeat(auto-fit, minmax(220px, 1fr))"},children:[s.jsxs("label",{children:["Name",s.jsx("input",{value:o.name,onChange:y=>m("name",y.target.value),"aria-label":"Drill name"})]}),s.jsxs("label",{children:["Mode",s.jsxs("select",{value:o.mode,onChange:y=>{const b=y.target.value;u(g=>({...g,mode:b,adaptiveKey:wp(b)[0]??g.adaptiveKey}))},"aria-label":"Drill mode",children:[s.jsx("option",{value:"scale_degree",children:"Scale degree"}),s.jsx("option",{value:"functional_interval",children:"Functional interval"}),s.jsx("option",{value:"functional_harmony",children:"Functional harmony"}),s.jsx("option",{value:"timing_grid",children:"Timing grid"}),s.jsx("option",{value:"phrase_recall",children:"Phrase recall"})]})]}),s.jsxs("label",{children:["Difficulty",s.jsx("select",{value:o.difficulty,onChange:y=>m("difficulty",Number(y.target.value)),"aria-label":"Drill difficulty",children:[1,2,3,4,5].map(y=>s.jsxs("option",{value:y,children:["Level ",y]},y))})]})]}),s.jsxs("label",{children:["Adaptive key",s.jsx("input",{value:o.adaptiveKey,onChange:y=>m("adaptiveKey",y.target.value),"aria-label":"Adaptive key"})]}),s.jsxs("div",{className:"subtle",style:{fontSize:13},children:["Examples: ",f.join(", ")]}),s.jsxs("label",{children:["Prompt override",s.jsx("input",{value:o.promptOverride,onChange:y=>m("promptOverride",y.target.value),"aria-label":"Prompt override"})]}),s.jsxs("label",{children:["Explanation heading",s.jsx("input",{value:o.explanationTitle,onChange:y=>m("explanationTitle",y.target.value),"aria-label":"Explanation heading"})]}),s.jsxs("label",{children:["Explanation",s.jsx("textarea",{value:o.explanationBody,onChange:y=>m("explanationBody",y.target.value),"aria-label":"Explanation body"})]}),s.jsxs("label",{children:["Coaching notes",s.jsx("textarea",{value:o.coachingNotes,onChange:y=>m("coachingNotes",y.target.value),"aria-label":"Coaching notes"})]}),s.jsxs("label",{children:["Extended notes",s.jsx("textarea",{value:o.moreBody,onChange:y=>m("moreBody",y.target.value),"aria-label":"Extended notes"})]}),s.jsxs("label",{children:["Tags",s.jsx("input",{value:o.tags,onChange:y=>m("tags",y.target.value),"aria-label":"Tags"})]}),s.jsxs("label",{style:{display:"flex",alignItems:"center",gap:10},children:[s.jsx("input",{type:"checkbox",checked:o.enabled,onChange:y=>m("enabled",y.target.checked),style:{width:18,minHeight:18},"aria-label":"Enabled"}),"Include in live sessions"]}),s.jsxs("div",{style:{display:"flex",gap:10,flexWrap:"wrap"},children:[s.jsx("button",{onClick:h,children:o.id?"Update drill":"Save drill"}),s.jsx("button",{onClick:()=>u({...ur,mode:o.mode,adaptiveKey:f[0]??ur.adaptiveKey}),children:"Reset form"})]})]}),s.jsxs("section",{className:"card",style:{display:"grid",gap:12},children:[s.jsxs("div",{style:{display:"flex",justifyContent:"space-between",gap:12,alignItems:"center",flexWrap:"wrap"},children:[s.jsx("h3",{children:"Saved drills"}),s.jsxs("div",{className:"subtle",children:[l.length," total"]})]}),s.jsx("div",{style:{display:"grid",gap:10},children:l.map(y=>s.jsxs("article",{style:{padding:14,borderRadius:16,border:"1px solid var(--border)",background:"var(--surface-strong)",display:"grid",gap:8},children:[s.jsxs("div",{style:{display:"flex",justifyContent:"space-between",gap:12,flexWrap:"wrap"},children:[s.jsxs("div",{children:[s.jsx("div",{style:{fontWeight:700},children:y.name}),s.jsxs("div",{className:"subtle",style:{fontSize:13},children:[y.mode.replace("_"," ")," | ",y.adaptiveKey," | level ",y.difficulty]})]}),s.jsx("div",{className:"subtle",style:{fontSize:13},children:y.enabled?"Live":"Disabled"})]}),s.jsx("div",{children:y.explanationBody||"No explanation body yet."}),s.jsx("div",{className:"subtle",style:{fontSize:13},children:y.tags.join(", ")||"No tags"}),s.jsxs("div",{style:{display:"flex",gap:10,flexWrap:"wrap"},children:[s.jsx("button",{onClick:()=>u(sS(y)),children:"Edit"}),s.jsx("button",{onClick:()=>cx(y.id),children:"Delete"})]})]},y.id))})]})]})}const td=60,rS=4,dr={freqHz:null,midi:null,cents:null,clarity:0,rms:0,isSignal:!1,noteLabel:null},Xp=[{shortcut:"z",midi:53},{shortcut:"s",midi:54},{shortcut:"x",midi:55},{shortcut:"d",midi:56},{shortcut:"c",midi:57},{shortcut:"f",midi:58},{shortcut:"v",midi:59},{shortcut:"b",midi:60},{shortcut:"h",midi:61},{shortcut:"n",midi:62},{shortcut:"j",midi:63},{shortcut:"m",midi:64},{shortcut:",",midi:65},{shortcut:"l",midi:66},{shortcut:".",midi:67},{shortcut:";",midi:68},{shortcut:"/",midi:69},{shortcut:"'",midi:70},{shortcut:"q",midi:71},{shortcut:"w",midi:72},{shortcut:"3",midi:73},{shortcut:"e",midi:74},{shortcut:"4",midi:75},{shortcut:"r",midi:76},{shortcut:"t",midi:77},{shortcut:"6",midi:78},{shortcut:"y",midi:79},{shortcut:"7",midi:80},{shortcut:"u",midi:81},{shortcut:"8",midi:82},{shortcut:"i",midi:83},{shortcut:"o",midi:84},{shortcut:"0",midi:85},{shortcut:"p",midi:86},{shortcut:"-",midi:87},{shortcut:"[",midi:88},{shortcut:"]",midi:89}],oS={B:Xp,W:Xp.map(l=>({shortcut:l.shortcut,midi:l.midi-12}))},uS=[{intervals:[0,3],quality:"minor dyad"},{intervals:[0,4],quality:"major dyad"},{intervals:[0,7],quality:"fifth dyad"},{intervals:[0,3,6],quality:"diminished triad"},{intervals:[0,3,7],quality:"minor triad"},{intervals:[0,4,7],quality:"major triad"},{intervals:[0,4,8],quality:"augmented triad"},{intervals:[0,2,7],quality:"sus2"},{intervals:[0,5,7],quality:"sus4"},{intervals:[0,4,7,10],quality:"dominant 7"},{intervals:[0,4,7,11],quality:"major 7"},{intervals:[0,3,7,10],quality:"minor 7"},{intervals:[0,3,7,11],quality:"minor-major 7"},{intervals:[0,3,6,9],quality:"diminished 7"},{intervals:[0,3,6,10],quality:"half-diminished 7"}],dS={0:"P1",1:"m2",2:"M2",3:"m3",4:"M3",5:"P4",6:"TT",7:"P5",8:"m6",9:"M6",10:"m7",11:"M7",12:"P8",13:"m9",14:"M9",15:"m10",16:"M10",17:"P11",18:"TT+8",19:"P12",20:"m13",21:"M13",22:"m14",23:"M14",24:"P15"},zs=["#df4638","#245db7","#efc133","#3d8a5f"],fS={C:"C",Db:"C#",D:"D",Eb:"D#",E:"E",F:"F",Gb:"F#",G:"G",Ab:"G#",A:"A",Bb:"A#",B:"B"};function mS(l,c){let o=0;const u=[];for(let f=l;f<=c;f+=1){const m=Rt(f),h=m.name.includes("b");u.push({midi:f,name:m.name,octave:m.octave,isBlack:h,whiteIndex:o}),h||(o+=1)}return u}function hS(l,c){return l.length===c.length&&l.every((o,u)=>o===c[u])}function Pp(l){return l.toUpperCase()}function Zp(l){return Zt[(l%12+12)%12]}function gl(l,c){return c==="sharp"?fS[l]:l}function pS(l,c){const o=Rt(l);return`${gl(o.name,c)}${o.octave}`}function Vv(l){return dS[l]??`${l} st`}function vS(l,c){if(l.length===0)return"No notes pressed";if(l.length===1)return"Single note";const o=Array.from(new Set(l.map(b=>(b%12+12)%12))).sort((b,g)=>b-g),u=(l[0]%12+12)%12,f=o.flatMap(b=>{const g=o.map(S=>(S-b+12)%12).sort((S,x)=>S-x);return uS.filter(S=>hS(S.intervals,g)).map(S=>({rootPitchClass:b,quality:S.quality}))}),m=f.find(b=>b.rootPitchClass===u)??f[0];if(!m)return l.length===2?`${Vv(l[1]-l[0])} interval`:"Unrecognized chord shape";const h=gl(Zp(m.rootPitchClass),c),y=gl(Zp(u),c);return y===h?`${h} ${m.quality}`:`${h} ${m.quality} / ${y}`}function gS(l){return l.length<2?[]:l.slice(1).map((c,o)=>({fromMidi:l[o],toMidi:c,intervalLabel:Vv(c-l[o])}))}function yS(){const[l,c]=p.useState(St()),[o,u]=p.useState([]),[f,m]=p.useState(null),[h,y]=p.useState(!1),[b,g]=p.useState(null),[S,x]=p.useState(dr),L=p.useRef(null),H=p.useRef(null),D=p.useRef(new Map),U=p.useRef(new Map),k=p.useRef(null),$=p.useRef(null),F=p.useRef(null),ee=p.useRef(null),de=p.useRef(null),be=p.useRef(null),re=p.useRef(null),ce=p.useRef(0),Ae=p.useMemo(()=>[...o].sort((K,ae)=>K-ae),[o]),T=p.useMemo(()=>oS[l.keyboardMiddleCMapping],[l.keyboardMiddleCMapping]),he=T[0]?.midi??td,P=T[T.length-1]?.midi??td,le=p.useMemo(()=>mS(he,P),[P,he]),ve=p.useMemo(()=>le.filter(K=>!K.isBlack),[le]),ge=p.useMemo(()=>T.reduce((K,ae)=>{const ie=K.get(ae.midi)??[];return ie.push(ae.shortcut),K.set(ae.midi,ie),K},new Map),[T]),pe=p.useMemo(()=>new Map(T.map(K=>[K.shortcut,K.midi])),[T]),E=p.useMemo(()=>new Map(Ae.map((K,ae)=>[K,zs[ae]??zs[0]])),[Ae]),X=vS(Ae,l.keyboardAccidentalStyle),W=p.useMemo(()=>gS(Ae),[Ae]),xe=S.midi==null?null:Math.round(S.midi),je=xe!=null&&xe>=he&&xe<=P?xe:null,M=xe==null?"Waiting for stable pitch":pS(xe,l.keyboardAccidentalStyle),G=h?xe==null?S.isSignal?"Searching for pitch":"Below gate":S.cents==null?"Tracking pitch":`${S.cents>=0?"+":""}${Math.round(S.cents)} cents`:"Microphone off",J=xe==null?"Sing a steady pitch and the nearest note in the excerpt will highlight.":`Clarity ${Math.round(S.clarity*100)}% | Level ${S.rms.toFixed(3)}`;p.useEffect(()=>bl(()=>c(St())),[]),p.useEffect(()=>{H.current&&(H.current.gain.value=l.masterGain),D.current.forEach(({oscillator:K})=>{K.type=l.timbre})},[l.masterGain,l.timbre]),p.useEffect(()=>{const K=()=>{ft()},ae=()=>{mt()},ie=we=>{if(we.repeat||we.altKey||we.ctrlKey||we.metaKey)return;const Pe=we.key.toLowerCase(),ke=pe.get(Pe);ke!=null&&(we.preventDefault(),qe(ke,`kbd:${Pe}`))},Ne=we=>{const Pe=we.key.toLowerCase(),ke=pe.get(Pe);ke!=null&&(we.preventDefault(),Le(ke,`kbd:${Pe}`))};return window.addEventListener("blur",K),window.addEventListener("pointerup",ae),window.addEventListener("pointercancel",ae),window.addEventListener("keydown",ie),window.addEventListener("keyup",Ne),()=>{window.removeEventListener("blur",K),window.removeEventListener("pointerup",ae),window.removeEventListener("pointercancel",ae),window.removeEventListener("keydown",ie),window.removeEventListener("keyup",Ne),ft()}},[pe,l.masterGain,l.timbre]),p.useEffect(()=>()=>{re.current!=null&&window.cancelAnimationFrame(re.current),de.current?.getTracks().forEach(K=>K.stop()),ee.current?.disconnect(),F.current?.disconnect(),$.current!=null&&$.current.close()},[]);async function te(){if(L.current&&H.current)return L.current.state!=="running"&&await L.current.resume(),{context:L.current,master:H.current};const K=window.AudioContext||window.webkitAudioContext;if(!K){const Ne="This browser does not support Web Audio.";throw m(Ne),new Error(Ne)}const ae=new K,ie=ae.createGain();return ie.gain.value=l.masterGain,ie.connect(ae.destination),L.current=ae,H.current=ie,ae.state!=="running"&&await ae.resume(),m(null),{context:ae,master:ie}}async function fe(){if(!h){if(!navigator.mediaDevices?.getUserMedia){g("This browser does not expose microphone input.");return}try{const K=await navigator.mediaDevices.getUserMedia({audio:{echoCancellation:!1,noiseSuppression:!1,autoGainControl:!1}}),ae=new AudioContext;await ae.resume();const ie=ae.createAnalyser();ie.fftSize=2048,ie.smoothingTimeConstant=.12;const Ne=ae.createMediaStreamSource(K);Ne.connect(ie);const we=new Float32Array(new ArrayBuffer(ie.fftSize*Float32Array.BYTES_PER_ELEMENT)),Pe=Rd();$.current=ae,F.current=ie,ee.current=Ne,de.current=K,be.current=we,y(!0),g(null),x(dr);const ke=()=>{const Ee=F.current,Ct=$.current,Qt=be.current;if(!Ee||!Ct||!Qt)return;Ee.getFloatTimeDomainData(Qt);const lt=_d(Qt,Ct.sampleRate,Pe.noiseGate),tn=performance.now();tn-ce.current>70&&(ce.current=tn,x(lt)),re.current=window.requestAnimationFrame(ke)};re.current=window.requestAnimationFrame(ke)}catch(K){g(K instanceof Error?K.message:"Microphone permission failed."),y(!1),x(dr)}}}async function I(){re.current!=null&&(window.cancelAnimationFrame(re.current),re.current=null),de.current?.getTracks().forEach(K=>K.stop()),de.current=null,ee.current?.disconnect(),ee.current=null,F.current?.disconnect(),F.current=null,be.current=null,$.current!=null&&(await $.current.close(),$.current=null),y(!1),g(null),x(dr)}function Se(){u(Array.from(U.current.keys()).sort((K,ae)=>K-ae))}async function qe(K,ae){const ie=U.current.get(K);if(ie?.has(ae)||!ie&&U.current.size>=rS)return;const Ne=ie??new Set;if(Ne.add(ae),U.current.set(K,Ne),Se(),!D.current.has(K))try{const{context:we,master:Pe}=await te(),ke=we.createOscillator();ke.type=l.timbre,ke.frequency.value=Me(K);const Ee=we.createGain(),Ct=we.currentTime;Ee.gain.setValueAtTime(0,Ct),Ee.gain.linearRampToValueAtTime(.36,Ct+.01),ke.connect(Ee),Ee.connect(Pe),ke.start(Ct),D.current.set(K,{oscillator:ke,gain:Ee})}catch(we){U.current.delete(K),Se(),m(we instanceof Error?we.message:"Unable to start audio.")}}function Le(K,ae){const ie=U.current.get(K);if(!ie||(ie.delete(ae),ie.size>0))return;U.current.delete(K),Se();const Ne=D.current.get(K),we=L.current;if(!Ne||!we){D.current.delete(K);return}const Pe=we.currentTime;Ne.gain.gain.cancelScheduledValues(Pe),Ne.gain.gain.setValueAtTime(Ne.gain.gain.value,Pe),Ne.gain.gain.linearRampToValueAtTime(0,Pe+.06);try{Ne.oscillator.stop(Pe+.08)}catch{}Ne.oscillator.onended=()=>{Ne.gain.disconnect(),Ne.oscillator.disconnect()},D.current.delete(K)}function ft(){Array.from(U.current.entries()).forEach(([K,ae])=>{Array.from(ae).forEach(ie=>Le(K,ie))}),k.current=null}function ze(K,ae){const ie=`ptr:${K}`;k.current={pointerId:K,sourceId:ie,midi:ae},qe(ae,ie)}function rt(K,ae){const ie=k.current;!ie||ie.pointerId!==K||ie.midi===ae||(Le(ie.midi,ie.sourceId),k.current={...ie,midi:ae},qe(ae,ie.sourceId))}function mt(K){const ae=k.current;ae&&(K!=null&&ae.pointerId!==K||(Le(ae.midi,ae.sourceId),k.current=null))}return s.jsxs("div",{className:"page keyboard-mode-page",children:[s.jsxs("section",{className:"panel panel--blue keyboard-analysis-panel",children:[s.jsxs("div",{className:"keyboard-analysis-header",children:[s.jsxs("div",{className:"keyboard-analysis-line",children:[s.jsx("span",{className:"section-label kicker kicker--red",children:"Pressed Notes"}),s.jsx("div",{className:"keyboard-analysis-notes",children:Ae.length>0?Ae.map(K=>{const ae=Rt(K),ie=E.get(K)??zs[0];return s.jsx("span",{className:"keyboard-note-pill",style:{"--keyboard-note-color":ie},children:s.jsx("span",{className:"keyboard-note-pill__text",children:gl(ae.name,l.keyboardAccidentalStyle)})},K)}):s.jsx("div",{className:"keyboard-analysis-value",children:"Press notes"})})]}),s.jsx("button",{type:"button",className:"keyboard-analysis__mic-button",onClick:()=>{h?I():fe()},children:h?"Disable mic":"Enable mic"})]}),s.jsxs("div",{className:"keyboard-analysis-grid",children:[s.jsxs("div",{className:"mini-stat keyboard-analysis-card",children:[s.jsx("div",{className:"metric-card__label",children:"Chord Type"}),s.jsx("div",{className:"keyboard-analysis-card__value",children:X})]}),s.jsxs("div",{className:"mini-stat keyboard-analysis-card",children:[s.jsx("div",{className:"metric-card__label",children:"Adjacent Intervals"}),s.jsx("div",{className:"keyboard-analysis-card__value",children:W.length>0?s.jsx("div",{className:"keyboard-interval-list",children:W.map(K=>{const ae=gl(Rt(K.fromMidi).name,l.keyboardAccidentalStyle),ie=gl(Rt(K.toMidi).name,l.keyboardAccidentalStyle),Ne=E.get(K.fromMidi)??zs[0],we=E.get(K.toMidi)??zs[0];return s.jsxs("span",{className:"keyboard-interval-item",children:[s.jsx("span",{className:"keyboard-interval-note",style:{"--keyboard-note-color":Ne},children:ae}),s.jsx("span",{className:"keyboard-interval-separator",children:"-"}),s.jsx("span",{className:"keyboard-interval-note",style:{"--keyboard-note-color":we},children:ie}),s.jsx("span",{className:"keyboard-interval-separator",children:":"}),s.jsx("span",{children:K.intervalLabel})]},`${K.fromMidi}-${K.toMidi}`)})}):"Add another note to see intervals"})]})]}),h&&s.jsxs("div",{className:"mini-stat keyboard-analysis-card keyboard-analysis-card--mic",children:[s.jsx("div",{className:"metric-card__label",children:"Sung Note"}),s.jsx("div",{className:"keyboard-analysis-card__value keyboard-analysis-card__value--large",children:M}),s.jsx("div",{className:"subtle",children:G}),s.jsx("div",{className:"subtle",children:J})]}),f&&s.jsx("div",{className:"notice notice--alert",children:f}),b&&s.jsx("div",{className:"notice notice--alert",children:b})]}),s.jsxs("section",{className:"panel keyboard-surface",children:[s.jsxs("div",{className:"panel-header",children:[s.jsxs("div",{children:[s.jsxs("div",{className:"section-label kicker kicker--blue keyboard-surface__kicker",children:[Rt(he).name,Rt(he).octave," ","to"," ",Rt(P).name,Rt(P).octave," excerpt"]}),s.jsx("h2",{className:"panel-title keyboard-surface__title",children:"Keyboard"})]}),s.jsxs("div",{className:"keyboard-surface__controls",children:[s.jsxs("label",{className:"control-label keyboard-surface__mapping",children:[s.jsx("span",{children:"Middle C mapping"}),s.jsxs("select",{value:l.keyboardMiddleCMapping,onChange:K=>Ks({...l,keyboardMiddleCMapping:K.target.value}),children:[s.jsx("option",{value:"B",children:"Middle C = B"}),s.jsx("option",{value:"W",children:"Middle C = W"})]})]}),s.jsxs("label",{className:"control-label keyboard-surface__mapping",children:[s.jsx("span",{children:"Black keys"}),s.jsxs("select",{value:l.keyboardAccidentalStyle,onChange:K=>Ks({...l,keyboardAccidentalStyle:K.target.value}),children:[s.jsx("option",{value:"flat",children:"Flats (b)"}),s.jsx("option",{value:"sharp",children:"Sharps (#)"})]})]})]})]}),s.jsx("div",{className:"keyboard-shell",children:s.jsxs("div",{className:"keyboard-stage","aria-label":"Three-octave keyboard",children:[s.jsx("div",{className:"keyboard-whites",style:{gridTemplateColumns:`repeat(${ve.length}, minmax(0, 1fr))`},children:ve.map(K=>{const ae=ge.get(K.midi)??[],ie=o.includes(K.midi),Ne=je===K.midi,we=K.midi===td,Pe=E.get(K.midi),ke=["keyboard-key","keyboard-key--white",ie?"keyboard-key--active":"",Ne?"keyboard-key--mic-active":"",we?"keyboard-key--middle-c":""].filter(Boolean).join(" ");return s.jsxs("button",{type:"button",className:ke,style:Pe?{"--keyboard-note-color":Pe}:void 0,onPointerDown:Ee=>ze(Ee.pointerId,K.midi),onPointerEnter:Ee=>{Ee.buttons>0&&rt(Ee.pointerId,K.midi)},onPointerUp:Ee=>mt(Ee.pointerId),onPointerCancel:Ee=>mt(Ee.pointerId),children:[s.jsxs("span",{className:"keyboard-key__note",children:[gl(K.name,l.keyboardAccidentalStyle),K.octave]}),s.jsx("span",{className:"keyboard-key__shortcut",children:ae.map(Ee=>Pp(Ee)).join(" / ")})]},K.midi)})}),s.jsx("div",{className:"keyboard-blacks",children:le.filter(K=>K.isBlack).map(K=>{const ae=ge.get(K.midi)??[],ie=o.includes(K.midi),Ne=je===K.midi,we=E.get(K.midi),Pe=["keyboard-key","keyboard-key--black",ie?"keyboard-key--active":"",Ne?"keyboard-key--mic-active":""].filter(Boolean).join(" ");return s.jsxs("button",{type:"button",className:Pe,style:{left:`calc(${K.whiteIndex/ve.length*100}% - 1.9rem)`,...we?{"--keyboard-note-color":we}:{}},onPointerDown:ke=>ze(ke.pointerId,K.midi),onPointerEnter:ke=>{ke.buttons>0&&rt(ke.pointerId,K.midi)},onPointerUp:ke=>mt(ke.pointerId),onPointerCancel:ke=>mt(ke.pointerId),children:[s.jsx("span",{className:"keyboard-key__note",children:gl(K.name,l.keyboardAccidentalStyle)}),s.jsx("span",{className:"keyboard-key__shortcut",children:ae.map(ke=>Pp(ke)).join(" / ")})]},K.midi)})})]})})]})]})}const bS=[{path:"/",element:s.jsx($0,{})},{path:"/practice",element:s.jsx(S1,{})},{path:"/beginner",element:s.jsx(j1,{})},{path:"/custom-path",element:s.jsx(D1,{})},{path:"/settings",element:s.jsx(Q1,{})},{path:"/progress",element:s.jsx(X1,{})},{path:"/studio",element:s.jsx(cS,{})},{path:"/voice",element:s.jsx(iS,{})},{path:"/keyboard",element:s.jsx(yS,{})},{path:"/debug",element:s.jsx(Z1,{})}];function xS({onOpenSettings:l}){const[c,o]=p.useState(Fn());return p.useEffect(()=>qv(()=>o(Fn())),[]),s.jsxs("nav",{"aria-label":"Primary",className:"topnav",children:[s.jsxs("div",{className:"topnav__brand",children:[s.jsx("div",{className:"topnav__eyebrow",children:"New Ultraviolet Systems Basic"}),s.jsx("div",{className:"topnav__title",children:"VI-V-i Trainer"}),s.jsx("div",{className:"topnav__status",children:c.userId?`${c.displayName||"Learner"} | ${c.syncState}`:"Local mode"})]}),s.jsxs("div",{className:"topnav__nav",children:[s.jsx(La,{to:"/",className:({isActive:u})=>u?"topnav__link topnav__link--active":"topnav__link",children:"Home"}),s.jsx(La,{to:"/practice",className:({isActive:u})=>u?"topnav__link topnav__link--active":"topnav__link",children:"Practice"}),s.jsx(La,{to:"/keyboard",className:({isActive:u})=>u?"topnav__link topnav__link--active":"topnav__link",children:"Keyboard"}),s.jsx(La,{to:"/voice",className:({isActive:u})=>u?"topnav__link topnav__link--active":"topnav__link",children:"Voice"}),s.jsx(La,{to:"/beginner",className:({isActive:u})=>u?"topnav__link topnav__link--active":"topnav__link",children:"Basics"}),s.jsx(La,{to:"/progress",className:({isActive:u})=>u?"topnav__link topnav__link--active":"topnav__link",children:"Progress"}),s.jsx(La,{to:"/studio",className:({isActive:u})=>u?"topnav__link topnav__link--active":"topnav__link",children:"Studio"}),s.jsx(La,{to:"/debug",className:({isActive:u})=>u?"topnav__link topnav__link--active":"topnav__link",children:"Debug"})]}),s.jsx("div",{className:"topnav__actions",children:s.jsx("button",{onClick:l,"aria-label":"Open quick settings",children:"Quick settings"})})]})}function SS({open:l,onClose:c}){const[o,u]=p.useState(Ql);p.useEffect(()=>{if(!l)return;const h=window.setTimeout(()=>u(St()),0);return()=>window.clearTimeout(h)},[l]);const f=p.useMemo(()=>l?"settings-drawer settings-drawer--open":"settings-drawer",[l]);function m(h){u(h),Ks(h)}return s.jsxs(s.Fragment,{children:[l&&s.jsx("div",{onClick:c,"aria-hidden":"true",className:"settings-scrim"}),s.jsxs("div",{className:f,role:"dialog","aria-modal":"true","aria-label":"Quick settings",children:[s.jsxs("div",{className:"settings-drawer__header",children:[s.jsxs("div",{children:[s.jsx("div",{className:"kicker kicker--red",children:"Quick Controls"}),s.jsx("div",{className:"panel-title",children:"Settings"})]}),s.jsx("div",{style:{flex:1}}),s.jsx("button",{onClick:c,children:"Close"})]}),s.jsxs("div",{className:"settings-drawer__body",children:[s.jsxs("label",{className:"control-label",children:[s.jsx("div",{children:"Key"}),s.jsx("select",{value:o.keyRoot,onChange:h=>m({...o,keyRoot:h.target.value}),children:Zt.map(h=>s.jsx("option",{value:h,children:h},h))})]}),s.jsxs("label",{className:"control-label",children:[s.jsx("div",{children:"Tonic octave"}),s.jsx("input",{type:"number",min:1,max:6,value:o.octave,onChange:h=>m({...o,octave:Number(h.target.value)})})]}),s.jsxs("label",{className:"control-label",children:[s.jsx("div",{children:"Tempo (BPM)"}),s.jsx("input",{type:"number",min:40,max:220,value:o.tempoBpm,onChange:h=>m({...o,tempoBpm:Number(h.target.value)})})]}),s.jsxs("label",{className:"control-label",children:[s.jsx("div",{children:"Master volume"}),s.jsx("input",{type:"range",min:0,max:1,step:.01,value:o.masterGain,onChange:h=>m({...o,masterGain:Number(h.target.value)})}),s.jsx("div",{className:"subtle",children:o.masterGain.toFixed(2)})]}),s.jsxs("label",{className:"control-label",children:[s.jsx("div",{children:"Timbre"}),s.jsxs("select",{value:o.timbre,onChange:h=>m({...o,timbre:h.target.value}),children:[s.jsx("option",{value:"sine",children:"sine"}),s.jsx("option",{value:"triangle",children:"triangle"}),s.jsx("option",{value:"square",children:"square"}),s.jsx("option",{value:"sawtooth",children:"sawtooth"})]})]}),s.jsxs("label",{className:"checkbox-chip",children:[s.jsx("input",{type:"checkbox",checked:o.droneEnabled,onChange:h=>m({...o,droneEnabled:h.target.checked})}),s.jsx("div",{children:"Tonic drone enabled"})]}),s.jsxs("label",{className:"checkbox-chip",children:[s.jsx("input",{type:"checkbox",checked:o.visualsEnabled,onChange:h=>m({...o,visualsEnabled:h.target.checked})}),s.jsx("div",{children:"Visual aids enabled"})]}),s.jsx("div",{className:"settings-drawer__footer",children:s.jsx("button",{onClick:()=>m(Ql),style:{width:"100%"},children:"Reset settings"})})]})]})]})}function _S({children:l}){const c=ra(),[o,u]=p.useState(!1),[f,m]=p.useState(St());return p.useEffect(()=>bl(()=>m(St())),[]),p.useEffect(()=>{En("page_view",c.pathname)},[c.pathname]),p.useEffect(()=>{const h=()=>{Xe.warm(),window.removeEventListener("pointerdown",h),window.removeEventListener("keydown",h)};return window.addEventListener("pointerdown",h),window.addEventListener("keydown",h),()=>{window.removeEventListener("pointerdown",h),window.removeEventListener("keydown",h)}},[]),p.useEffect(()=>{if(f.droneEnabled){Xe.setDrone(Zs(f.keyRoot,f.octave),{tempoBpm:f.tempoBpm,masterGain:f.masterGain,timbre:f.timbre},.16);return}Xe.clearDrone()},[f]),s.jsxs("div",{className:"app-shell",children:[s.jsx("a",{href:"#main-content",className:"sr-only",children:"Skip to content"}),s.jsx(xS,{onOpenSettings:()=>u(!0)}),s.jsx("main",{id:"main-content",className:"shell-main",children:l}),s.jsx(SS,{open:o,onClose:()=>u(!1)})]})}function jS(){const l=Bb(bS);return s.jsx(_S,{children:l})}"serviceWorker"in navigator&&window.addEventListener("load",()=>{const l=new URL("/ear-trainer/",window.location.origin).href,c="/ear-trainer/sw.js";navigator.serviceWorker.getRegistrations().then(o=>Promise.all(o.map(u=>u.scope===l?Promise.resolve(!1):u.unregister()))),navigator.serviceWorker.register(c)});eb.createRoot(document.getElementById("root")).render(s.jsx($y.StrictMode,{children:s.jsx(S0,{basename:"/ear-trainer/",children:s.jsx(jS,{})})}));

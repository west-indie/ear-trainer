(function(){const c=document.createElement("link").relList;if(c&&c.supports&&c.supports("modulepreload"))return;for(const d of document.querySelectorAll('link[rel="modulepreload"]'))u(d);new MutationObserver(d=>{for(const m of d)if(m.type==="childList")for(const h of m.addedNodes)h.tagName==="LINK"&&h.rel==="modulepreload"&&u(h)}).observe(document,{childList:!0,subtree:!0});function o(d){const m={};return d.integrity&&(m.integrity=d.integrity),d.referrerPolicy&&(m.referrerPolicy=d.referrerPolicy),d.crossOrigin==="use-credentials"?m.credentials="include":d.crossOrigin==="anonymous"?m.credentials="omit":m.credentials="same-origin",m}function u(d){if(d.ep)return;d.ep=!0;const m=o(d);fetch(d.href,m)}})();function Zp(l){return l&&l.__esModule&&Object.prototype.hasOwnProperty.call(l,"default")?l.default:l}var wu={exports:{}},Rs={};var up;function Yy(){if(up)return Rs;up=1;var l=Symbol.for("react.transitional.element"),c=Symbol.for("react.fragment");function o(u,d,m){var h=null;if(m!==void 0&&(h=""+m),d.key!==void 0&&(h=""+d.key),"key"in d){m={};for(var v in d)v!=="key"&&(m[v]=d[v])}else m=d;return d=m.ref,{$$typeof:l,type:u,key:h,ref:d!==void 0?d:null,props:m}}return Rs.Fragment=c,Rs.jsx=o,Rs.jsxs=o,Rs}var dp;function Ky(){return dp||(dp=1,wu.exports=Yy()),wu.exports}var s=Ky(),ku={exports:{}},ke={};var fp;function Qy(){if(fp)return ke;fp=1;var l=Symbol.for("react.transitional.element"),c=Symbol.for("react.portal"),o=Symbol.for("react.fragment"),u=Symbol.for("react.strict_mode"),d=Symbol.for("react.profiler"),m=Symbol.for("react.consumer"),h=Symbol.for("react.context"),v=Symbol.for("react.forward_ref"),b=Symbol.for("react.suspense"),y=Symbol.for("react.memo"),S=Symbol.for("react.lazy"),x=Symbol.for("react.activity"),O=Symbol.iterator;function G(M){return M===null||typeof M!="object"?null:(M=O&&M[O]||M["@@iterator"],typeof M=="function"?M:null)}var L={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Y=Object.assign,R={};function $(M,B,J){this.props=M,this.context=B,this.refs=R,this.updater=J||L}$.prototype.isReactComponent={},$.prototype.setState=function(M,B){if(typeof M!="object"&&typeof M!="function"&&M!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,M,B,"setState")},$.prototype.forceUpdate=function(M){this.updater.enqueueForceUpdate(this,M,"forceUpdate")};function F(){}F.prototype=$.prototype;function ee(M,B,J){this.props=M,this.context=B,this.refs=R,this.updater=J||L}var oe=ee.prototype=new F;oe.constructor=ee,Y(oe,$.prototype),oe.isPureReactComponent=!0;var xe=Array.isArray;function ue(){}var ie={H:null,A:null,T:null,S:null},Ae=Object.prototype.hasOwnProperty;function T(M,B,J){var te=J.ref;return{$$typeof:l,type:M,key:B,ref:te!==void 0?te:null,props:J}}function ye(M,B){return T(M.type,B,M.props)}function X(M){return typeof M=="object"&&M!==null&&M.$$typeof===l}function ne(M){var B={"=":"=0",":":"=2"};return"$"+M.replace(/[=:]/g,function(J){return B[J]})}var pe=/\/+/g;function he(M,B){return typeof M=="object"&&M!==null&&M.key!=null?ne(""+M.key):B.toString(36)}function me(M){switch(M.status){case"fulfilled":return M.value;case"rejected":throw M.reason;default:switch(typeof M.status=="string"?M.then(ue,ue):(M.status="pending",M.then(function(B){M.status==="pending"&&(M.status="fulfilled",M.value=B)},function(B){M.status==="pending"&&(M.status="rejected",M.reason=B)})),M.status){case"fulfilled":return M.value;case"rejected":throw M.reason}}throw M}function E(M,B,J,te,de){var I=typeof M;(I==="undefined"||I==="boolean")&&(M=null);var _e=!1;if(M===null)_e=!0;else switch(I){case"bigint":case"string":case"number":_e=!0;break;case"object":switch(M.$$typeof){case l:case c:_e=!0;break;case S:return _e=M._init,E(_e(M._payload),B,J,te,de)}}if(_e)return de=de(M),_e=te===""?"."+he(M,0):te,xe(de)?(J="",_e!=null&&(J=_e.replace(pe,"$&/")+"/"),E(de,B,J,"",function(yt){return yt})):de!=null&&(X(de)&&(de=ye(de,J+(de.key==null||M&&M.key===de.key?"":(""+de.key).replace(pe,"$&/")+"/")+_e)),B.push(de)),1;_e=0;var Be=te===""?".":te+":";if(xe(M))for(var ze=0;ze<M.length;ze++)te=M[ze],I=Be+he(te,ze),_e+=E(te,B,J,I,de);else if(ze=G(M),typeof ze=="function")for(M=ze.call(M),ze=0;!(te=M.next()).done;)te=te.value,I=Be+he(te,ze++),_e+=E(te,B,J,I,de);else if(I==="object"){if(typeof M.then=="function")return E(me(M),B,J,te,de);throw B=String(M),Error("Objects are not valid as a React child (found: "+(B==="[object Object]"?"object with keys {"+Object.keys(M).join(", ")+"}":B)+"). If you meant to render a collection of children, use an array instead.")}return _e}function P(M,B,J){if(M==null)return M;var te=[],de=0;return E(M,te,"","",function(I){return B.call(J,I,de++)}),te}function W(M){if(M._status===-1){var B=M._result;B=B(),B.then(function(J){(M._status===0||M._status===-1)&&(M._status=1,M._result=J)},function(J){(M._status===0||M._status===-1)&&(M._status=2,M._result=J)}),M._status===-1&&(M._status=0,M._result=B)}if(M._status===1)return M._result.default;throw M._result}var je=typeof reportError=="function"?reportError:function(M){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var B=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof M=="object"&&M!==null&&typeof M.message=="string"?String(M.message):String(M),error:M});if(!window.dispatchEvent(B))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",M);return}console.error(M)},Ee={map:P,forEach:function(M,B,J){P(M,function(){B.apply(this,arguments)},J)},count:function(M){var B=0;return P(M,function(){B++}),B},toArray:function(M){return P(M,function(B){return B})||[]},only:function(M){if(!X(M))throw Error("React.Children.only expected to receive a single React element child.");return M}};return ke.Activity=x,ke.Children=Ee,ke.Component=$,ke.Fragment=o,ke.Profiler=d,ke.PureComponent=ee,ke.StrictMode=u,ke.Suspense=b,ke.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=ie,ke.__COMPILER_RUNTIME={__proto__:null,c:function(M){return ie.H.useMemoCache(M)}},ke.cache=function(M){return function(){return M.apply(null,arguments)}},ke.cacheSignal=function(){return null},ke.cloneElement=function(M,B,J){if(M==null)throw Error("The argument must be a React element, but you passed "+M+".");var te=Y({},M.props),de=M.key;if(B!=null)for(I in B.key!==void 0&&(de=""+B.key),B)!Ae.call(B,I)||I==="key"||I==="__self"||I==="__source"||I==="ref"&&B.ref===void 0||(te[I]=B[I]);var I=arguments.length-2;if(I===1)te.children=J;else if(1<I){for(var _e=Array(I),Be=0;Be<I;Be++)_e[Be]=arguments[Be+2];te.children=_e}return T(M.type,de,te)},ke.createContext=function(M){return M={$$typeof:h,_currentValue:M,_currentValue2:M,_threadCount:0,Provider:null,Consumer:null},M.Provider=M,M.Consumer={$$typeof:m,_context:M},M},ke.createElement=function(M,B,J){var te,de={},I=null;if(B!=null)for(te in B.key!==void 0&&(I=""+B.key),B)Ae.call(B,te)&&te!=="key"&&te!=="__self"&&te!=="__source"&&(de[te]=B[te]);var _e=arguments.length-2;if(_e===1)de.children=J;else if(1<_e){for(var Be=Array(_e),ze=0;ze<_e;ze++)Be[ze]=arguments[ze+2];de.children=Be}if(M&&M.defaultProps)for(te in _e=M.defaultProps,_e)de[te]===void 0&&(de[te]=_e[te]);return T(M,I,de)},ke.createRef=function(){return{current:null}},ke.forwardRef=function(M){return{$$typeof:v,render:M}},ke.isValidElement=X,ke.lazy=function(M){return{$$typeof:S,_payload:{_status:-1,_result:M},_init:W}},ke.memo=function(M,B){return{$$typeof:y,type:M,compare:B===void 0?null:B}},ke.startTransition=function(M){var B=ie.T,J={};ie.T=J;try{var te=M(),de=ie.S;de!==null&&de(J,te),typeof te=="object"&&te!==null&&typeof te.then=="function"&&te.then(ue,je)}catch(I){je(I)}finally{B!==null&&J.types!==null&&(B.types=J.types),ie.T=B}},ke.unstable_useCacheRefresh=function(){return ie.H.useCacheRefresh()},ke.use=function(M){return ie.H.use(M)},ke.useActionState=function(M,B,J){return ie.H.useActionState(M,B,J)},ke.useCallback=function(M,B){return ie.H.useCallback(M,B)},ke.useContext=function(M){return ie.H.useContext(M)},ke.useDebugValue=function(){},ke.useDeferredValue=function(M,B){return ie.H.useDeferredValue(M,B)},ke.useEffect=function(M,B){return ie.H.useEffect(M,B)},ke.useEffectEvent=function(M){return ie.H.useEffectEvent(M)},ke.useId=function(){return ie.H.useId()},ke.useImperativeHandle=function(M,B,J){return ie.H.useImperativeHandle(M,B,J)},ke.useInsertionEffect=function(M,B){return ie.H.useInsertionEffect(M,B)},ke.useLayoutEffect=function(M,B){return ie.H.useLayoutEffect(M,B)},ke.useMemo=function(M,B){return ie.H.useMemo(M,B)},ke.useOptimistic=function(M,B){return ie.H.useOptimistic(M,B)},ke.useReducer=function(M,B,J){return ie.H.useReducer(M,B,J)},ke.useRef=function(M){return ie.H.useRef(M)},ke.useState=function(M){return ie.H.useState(M)},ke.useSyncExternalStore=function(M,B,J){return ie.H.useSyncExternalStore(M,B,J)},ke.useTransition=function(){return ie.H.useTransition()},ke.version="19.2.4",ke}var mp;function md(){return mp||(mp=1,ku.exports=Qy()),ku.exports}var p=md();const $y=Zp(p);var Ru={exports:{}},Ds={},Du={exports:{}},Lu={};var hp;function Xy(){return hp||(hp=1,(function(l){function c(E,P){var W=E.length;E.push(P);e:for(;0<W;){var je=W-1>>>1,Ee=E[je];if(0<d(Ee,P))E[je]=P,E[W]=Ee,W=je;else break e}}function o(E){return E.length===0?null:E[0]}function u(E){if(E.length===0)return null;var P=E[0],W=E.pop();if(W!==P){E[0]=W;e:for(var je=0,Ee=E.length,M=Ee>>>1;je<M;){var B=2*(je+1)-1,J=E[B],te=B+1,de=E[te];if(0>d(J,W))te<Ee&&0>d(de,J)?(E[je]=de,E[te]=W,je=te):(E[je]=J,E[B]=W,je=B);else if(te<Ee&&0>d(de,W))E[je]=de,E[te]=W,je=te;else break e}}return P}function d(E,P){var W=E.sortIndex-P.sortIndex;return W!==0?W:E.id-P.id}if(l.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var m=performance;l.unstable_now=function(){return m.now()}}else{var h=Date,v=h.now();l.unstable_now=function(){return h.now()-v}}var b=[],y=[],S=1,x=null,O=3,G=!1,L=!1,Y=!1,R=!1,$=typeof setTimeout=="function"?setTimeout:null,F=typeof clearTimeout=="function"?clearTimeout:null,ee=typeof setImmediate<"u"?setImmediate:null;function oe(E){for(var P=o(y);P!==null;){if(P.callback===null)u(y);else if(P.startTime<=E)u(y),P.sortIndex=P.expirationTime,c(b,P);else break;P=o(y)}}function xe(E){if(Y=!1,oe(E),!L)if(o(b)!==null)L=!0,ue||(ue=!0,ne());else{var P=o(y);P!==null&&me(xe,P.startTime-E)}}var ue=!1,ie=-1,Ae=5,T=-1;function ye(){return R?!0:!(l.unstable_now()-T<Ae)}function X(){if(R=!1,ue){var E=l.unstable_now();T=E;var P=!0;try{e:{L=!1,Y&&(Y=!1,F(ie),ie=-1),G=!0;var W=O;try{t:{for(oe(E),x=o(b);x!==null&&!(x.expirationTime>E&&ye());){var je=x.callback;if(typeof je=="function"){x.callback=null,O=x.priorityLevel;var Ee=je(x.expirationTime<=E);if(E=l.unstable_now(),typeof Ee=="function"){x.callback=Ee,oe(E),P=!0;break t}x===o(b)&&u(b),oe(E)}else u(b);x=o(b)}if(x!==null)P=!0;else{var M=o(y);M!==null&&me(xe,M.startTime-E),P=!1}}break e}finally{x=null,O=W,G=!1}P=void 0}}finally{P?ne():ue=!1}}}var ne;if(typeof ee=="function")ne=function(){ee(X)};else if(typeof MessageChannel<"u"){var pe=new MessageChannel,he=pe.port2;pe.port1.onmessage=X,ne=function(){he.postMessage(null)}}else ne=function(){$(X,0)};function me(E,P){ie=$(function(){E(l.unstable_now())},P)}l.unstable_IdlePriority=5,l.unstable_ImmediatePriority=1,l.unstable_LowPriority=4,l.unstable_NormalPriority=3,l.unstable_Profiling=null,l.unstable_UserBlockingPriority=2,l.unstable_cancelCallback=function(E){E.callback=null},l.unstable_forceFrameRate=function(E){0>E||125<E?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):Ae=0<E?Math.floor(1e3/E):5},l.unstable_getCurrentPriorityLevel=function(){return O},l.unstable_next=function(E){switch(O){case 1:case 2:case 3:var P=3;break;default:P=O}var W=O;O=P;try{return E()}finally{O=W}},l.unstable_requestPaint=function(){R=!0},l.unstable_runWithPriority=function(E,P){switch(E){case 1:case 2:case 3:case 4:case 5:break;default:E=3}var W=O;O=E;try{return P()}finally{O=W}},l.unstable_scheduleCallback=function(E,P,W){var je=l.unstable_now();switch(typeof W=="object"&&W!==null?(W=W.delay,W=typeof W=="number"&&0<W?je+W:je):W=je,E){case 1:var Ee=-1;break;case 2:Ee=250;break;case 5:Ee=1073741823;break;case 4:Ee=1e4;break;default:Ee=5e3}return Ee=W+Ee,E={id:S++,callback:P,priorityLevel:E,startTime:W,expirationTime:Ee,sortIndex:-1},W>je?(E.sortIndex=W,c(y,E),o(b)===null&&E===o(y)&&(Y?(F(ie),ie=-1):Y=!0,me(xe,W-je))):(E.sortIndex=Ee,c(b,E),L||G||(L=!0,ue||(ue=!0,ne()))),E},l.unstable_shouldYield=ye,l.unstable_wrapCallback=function(E){var P=O;return function(){var W=O;O=P;try{return E.apply(this,arguments)}finally{O=W}}}})(Lu)),Lu}var pp;function Py(){return pp||(pp=1,Du.exports=Xy()),Du.exports}var Ou={exports:{}},Jt={};var vp;function Zy(){if(vp)return Jt;vp=1;var l=md();function c(b){var y="https://react.dev/errors/"+b;if(1<arguments.length){y+="?args[]="+encodeURIComponent(arguments[1]);for(var S=2;S<arguments.length;S++)y+="&args[]="+encodeURIComponent(arguments[S])}return"Minified React error #"+b+"; visit "+y+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function o(){}var u={d:{f:o,r:function(){throw Error(c(522))},D:o,C:o,L:o,m:o,X:o,S:o,M:o},p:0,findDOMNode:null},d=Symbol.for("react.portal");function m(b,y,S){var x=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:d,key:x==null?null:""+x,children:b,containerInfo:y,implementation:S}}var h=l.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function v(b,y){if(b==="font")return"";if(typeof y=="string")return y==="use-credentials"?y:""}return Jt.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=u,Jt.createPortal=function(b,y){var S=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!y||y.nodeType!==1&&y.nodeType!==9&&y.nodeType!==11)throw Error(c(299));return m(b,y,null,S)},Jt.flushSync=function(b){var y=h.T,S=u.p;try{if(h.T=null,u.p=2,b)return b()}finally{h.T=y,u.p=S,u.d.f()}},Jt.preconnect=function(b,y){typeof b=="string"&&(y?(y=y.crossOrigin,y=typeof y=="string"?y==="use-credentials"?y:"":void 0):y=null,u.d.C(b,y))},Jt.prefetchDNS=function(b){typeof b=="string"&&u.d.D(b)},Jt.preinit=function(b,y){if(typeof b=="string"&&y&&typeof y.as=="string"){var S=y.as,x=v(S,y.crossOrigin),O=typeof y.integrity=="string"?y.integrity:void 0,G=typeof y.fetchPriority=="string"?y.fetchPriority:void 0;S==="style"?u.d.S(b,typeof y.precedence=="string"?y.precedence:void 0,{crossOrigin:x,integrity:O,fetchPriority:G}):S==="script"&&u.d.X(b,{crossOrigin:x,integrity:O,fetchPriority:G,nonce:typeof y.nonce=="string"?y.nonce:void 0})}},Jt.preinitModule=function(b,y){if(typeof b=="string")if(typeof y=="object"&&y!==null){if(y.as==null||y.as==="script"){var S=v(y.as,y.crossOrigin);u.d.M(b,{crossOrigin:S,integrity:typeof y.integrity=="string"?y.integrity:void 0,nonce:typeof y.nonce=="string"?y.nonce:void 0})}}else y==null&&u.d.M(b)},Jt.preload=function(b,y){if(typeof b=="string"&&typeof y=="object"&&y!==null&&typeof y.as=="string"){var S=y.as,x=v(S,y.crossOrigin);u.d.L(b,S,{crossOrigin:x,integrity:typeof y.integrity=="string"?y.integrity:void 0,nonce:typeof y.nonce=="string"?y.nonce:void 0,type:typeof y.type=="string"?y.type:void 0,fetchPriority:typeof y.fetchPriority=="string"?y.fetchPriority:void 0,referrerPolicy:typeof y.referrerPolicy=="string"?y.referrerPolicy:void 0,imageSrcSet:typeof y.imageSrcSet=="string"?y.imageSrcSet:void 0,imageSizes:typeof y.imageSizes=="string"?y.imageSizes:void 0,media:typeof y.media=="string"?y.media:void 0})}},Jt.preloadModule=function(b,y){if(typeof b=="string")if(y){var S=v(y.as,y.crossOrigin);u.d.m(b,{as:typeof y.as=="string"&&y.as!=="script"?y.as:void 0,crossOrigin:S,integrity:typeof y.integrity=="string"?y.integrity:void 0})}else u.d.m(b)},Jt.requestFormReset=function(b){u.d.r(b)},Jt.unstable_batchedUpdates=function(b,y){return b(y)},Jt.useFormState=function(b,y,S){return h.H.useFormState(b,y,S)},Jt.useFormStatus=function(){return h.H.useHostTransitionStatus()},Jt.version="19.2.4",Jt}var gp;function Jy(){if(gp)return Ou.exports;gp=1;function l(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(l)}catch(c){console.error(c)}}return l(),Ou.exports=Zy(),Ou.exports}var yp;function Fy(){if(yp)return Ds;yp=1;var l=Py(),c=md(),o=Jy();function u(e){var t="https://react.dev/errors/"+e;if(1<arguments.length){t+="?args[]="+encodeURIComponent(arguments[1]);for(var n=2;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n])}return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function d(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function m(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,(t.flags&4098)!==0&&(n=t.return),e=t.return;while(e)}return t.tag===3?n:null}function h(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function v(e){if(e.tag===31){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function b(e){if(m(e)!==e)throw Error(u(188))}function y(e){var t=e.alternate;if(!t){if(t=m(e),t===null)throw Error(u(188));return t!==e?null:e}for(var n=e,a=t;;){var i=n.return;if(i===null)break;var r=i.alternate;if(r===null){if(a=i.return,a!==null){n=a;continue}break}if(i.child===r.child){for(r=i.child;r;){if(r===n)return b(i),e;if(r===a)return b(i),t;r=r.sibling}throw Error(u(188))}if(n.return!==a.return)n=i,a=r;else{for(var f=!1,g=i.child;g;){if(g===n){f=!0,n=i,a=r;break}if(g===a){f=!0,a=i,n=r;break}g=g.sibling}if(!f){for(g=r.child;g;){if(g===n){f=!0,n=r,a=i;break}if(g===a){f=!0,a=r,n=i;break}g=g.sibling}if(!f)throw Error(u(189))}}if(n.alternate!==a)throw Error(u(190))}if(n.tag!==3)throw Error(u(188));return n.stateNode.current===n?e:t}function S(e){var t=e.tag;if(t===5||t===26||t===27||t===6)return e;for(e=e.child;e!==null;){if(t=S(e),t!==null)return t;e=e.sibling}return null}var x=Object.assign,O=Symbol.for("react.element"),G=Symbol.for("react.transitional.element"),L=Symbol.for("react.portal"),Y=Symbol.for("react.fragment"),R=Symbol.for("react.strict_mode"),$=Symbol.for("react.profiler"),F=Symbol.for("react.consumer"),ee=Symbol.for("react.context"),oe=Symbol.for("react.forward_ref"),xe=Symbol.for("react.suspense"),ue=Symbol.for("react.suspense_list"),ie=Symbol.for("react.memo"),Ae=Symbol.for("react.lazy"),T=Symbol.for("react.activity"),ye=Symbol.for("react.memo_cache_sentinel"),X=Symbol.iterator;function ne(e){return e===null||typeof e!="object"?null:(e=X&&e[X]||e["@@iterator"],typeof e=="function"?e:null)}var pe=Symbol.for("react.client.reference");function he(e){if(e==null)return null;if(typeof e=="function")return e.$$typeof===pe?null:e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case Y:return"Fragment";case $:return"Profiler";case R:return"StrictMode";case xe:return"Suspense";case ue:return"SuspenseList";case T:return"Activity"}if(typeof e=="object")switch(e.$$typeof){case L:return"Portal";case ee:return e.displayName||"Context";case F:return(e._context.displayName||"Context")+".Consumer";case oe:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case ie:return t=e.displayName||null,t!==null?t:he(e.type)||"Memo";case Ae:t=e._payload,e=e._init;try{return he(e(t))}catch{}}return null}var me=Array.isArray,E=c.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,P=o.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,W={pending:!1,data:null,method:null,action:null},je=[],Ee=-1;function M(e){return{current:e}}function B(e){0>Ee||(e.current=je[Ee],je[Ee]=null,Ee--)}function J(e,t){Ee++,je[Ee]=e.current,e.current=t}var te=M(null),de=M(null),I=M(null),_e=M(null);function Be(e,t){switch(J(I,t),J(de,e),J(te,null),t.nodeType){case 9:case 11:e=(e=t.documentElement)&&(e=e.namespaceURI)?Dh(e):0;break;default:if(e=t.tagName,t=t.namespaceURI)t=Dh(t),e=Lh(t,e);else switch(e){case"svg":e=1;break;case"math":e=2;break;default:e=0}}B(te),J(te,e)}function ze(){B(te),B(de),B(I)}function yt(e){e.memoizedState!==null&&J(_e,e);var t=te.current,n=Lh(t,e.type);t!==n&&(J(de,e),J(te,n))}function Oe(e){de.current===e&&(B(te),B(de)),_e.current===e&&(B(_e),Cs._currentValue=W)}var ct,Rt;function rt(e){if(ct===void 0)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);ct=t&&t[1]||"",Rt=-1<n.stack.indexOf(`
    at`)?" (<anonymous>)":-1<n.stack.indexOf("@")?"@unknown:0:0":""}return`
`+ct+e+Rt}var mt=!1;function Pe(e,t){if(!e||mt)return"";mt=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var a={DetermineComponentFrameRoot:function(){try{if(t){var Q=function(){throw Error()};if(Object.defineProperty(Q.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(Q,[])}catch(z){var D=z}Reflect.construct(e,[],Q)}else{try{Q.call()}catch(z){D=z}e.call(Q.prototype)}}else{try{throw Error()}catch(z){D=z}(Q=e())&&typeof Q.catch=="function"&&Q.catch(function(){})}}catch(z){if(z&&D&&typeof z.stack=="string")return[z.stack,D.stack]}return[null,null]}};a.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var i=Object.getOwnPropertyDescriptor(a.DetermineComponentFrameRoot,"name");i&&i.configurable&&Object.defineProperty(a.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var r=a.DetermineComponentFrameRoot(),f=r[0],g=r[1];if(f&&g){var j=f.split(`
`),k=g.split(`
`);for(i=a=0;a<j.length&&!j[a].includes("DetermineComponentFrameRoot");)a++;for(;i<k.length&&!k[i].includes("DetermineComponentFrameRoot");)i++;if(a===j.length||i===k.length)for(a=j.length-1,i=k.length-1;1<=a&&0<=i&&j[a]!==k[i];)i--;for(;1<=a&&0<=i;a--,i--)if(j[a]!==k[i]){if(a!==1||i!==1)do if(a--,i--,0>i||j[a]!==k[i]){var V=`
`+j[a].replace(" at new "," at ");return e.displayName&&V.includes("<anonymous>")&&(V=V.replace("<anonymous>",e.displayName)),V}while(1<=a&&0<=i);break}}}finally{mt=!1,Error.prepareStackTrace=n}return(n=e?e.displayName||e.name:"")?rt(n):""}function ht(e,t){switch(e.tag){case 26:case 27:case 5:return rt(e.type);case 16:return rt("Lazy");case 13:return e.child!==t&&t!==null?rt("Suspense Fallback"):rt("Suspense");case 19:return rt("SuspenseList");case 0:case 15:return Pe(e.type,!1);case 11:return Pe(e.type.render,!1);case 1:return Pe(e.type,!0);case 31:return rt("Activity");default:return""}}function Dt(e){try{var t="",n=null;do t+=ht(e,n),n=e,e=e.return;while(e);return t}catch(a){return`
Error generating stack: `+a.message+`
`+a.stack}}var an=Object.prototype.hasOwnProperty,ot=l.unstable_scheduleCallback,U=l.unstable_cancelCallback,se=l.unstable_shouldYield,ve=l.unstable_requestPaint,ge=l.unstable_now,Re=l.unstable_getCurrentPriorityLevel,Ke=l.unstable_ImmediatePriority,Ce=l.unstable_UserBlockingPriority,A=l.unstable_NormalPriority,Z=l.unstable_LowPriority,Me=l.unstable_IdlePriority,bt=l.log,lt=l.unstable_setDisableYieldValue,It=null,Ie=null;function Ht(e){if(typeof bt=="function"&&lt(e),Ie&&typeof Ie.setStrictMode=="function")try{Ie.setStrictMode(It,e)}catch{}}var xt=Math.clz32?Math.clz32:ua,Ga=Math.log,Hn=Math.LN2;function ua(e){return e>>>=0,e===0?32:31-(Ga(e)/Hn|0)|0}var le=256,We=262144,Et=4194304;function St(e){var t=e&42;if(t!==0)return t;switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return e&261888;case 262144:case 524288:case 1048576:case 2097152:return e&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return e&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return e}}function pt(e,t,n){var a=e.pendingLanes;if(a===0)return 0;var i=0,r=e.suspendedLanes,f=e.pingedLanes;e=e.warmLanes;var g=a&134217727;return g!==0?(a=g&~r,a!==0?i=St(a):(f&=g,f!==0?i=St(f):n||(n=g&~e,n!==0&&(i=St(n))))):(g=a&~r,g!==0?i=St(g):f!==0?i=St(f):n||(n=a&~e,n!==0&&(i=St(n)))),i===0?0:t!==0&&t!==i&&(t&r)===0&&(r=i&-i,n=t&-t,r>=n||r===32&&(n&4194048)!==0)?t:i}function ln(e,t){return(e.pendingLanes&~(e.suspendedLanes&~e.pingedLanes)&t)===0}function Va(e,t){switch(e){case 1:case 2:case 4:case 8:case 64:return t+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function da(){var e=Et;return Et<<=1,(Et&62914560)===0&&(Et=4194304),e}function Un(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function Pt(e,t){e.pendingLanes|=t,t!==268435456&&(e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0)}function sn(e,t,n,a,i,r){var f=e.pendingLanes;e.pendingLanes=n,e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0,e.expiredLanes&=n,e.entangledLanes&=n,e.errorRecoveryDisabledLanes&=n,e.shellSuspendCounter=0;var g=e.entanglements,j=e.expirationTimes,k=e.hiddenUpdates;for(n=f&~n;0<n;){var V=31-xt(n),Q=1<<V;g[V]=0,j[V]=-1;var D=k[V];if(D!==null)for(k[V]=null,V=0;V<D.length;V++){var z=D[V];z!==null&&(z.lane&=-536870913)}n&=~Q}a!==0&&Gn(e,a,0),r!==0&&i===0&&e.tag!==0&&(e.suspendedLanes|=r&~(f&~t))}function Gn(e,t,n){e.pendingLanes|=t,e.suspendedLanes&=~t;var a=31-xt(t);e.entangledLanes|=t,e.entanglements[a]=e.entanglements[a]|1073741824|n&261930}function fa(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var a=31-xt(n),i=1<<a;i&t|e[a]&t&&(e[a]|=t),n&=~i}}function ma(e,t){var n=t&-t;return n=(n&42)!==0?1:Ya(n),(n&(e.suspendedLanes|t))!==0?0:n}function Ya(e){switch(e){case 2:e=1;break;case 8:e=4;break;case 32:e=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:e=128;break;case 268435456:e=134217728;break;default:e=0}return e}function bl(e){return e&=-e,2<e?8<e?(e&134217727)!==0?32:268435456:8:2}function Pl(){var e=P.p;return e!==0?e:(e=window.event,e===void 0?32:ap(e.type))}function Zl(e,t){var n=P.p;try{return P.p=e,t()}finally{P.p=n}}var ea=Math.random().toString(36).slice(2),Lt="__reactFiber$"+ea,Ut="__reactProps$"+ea,hn="__reactContainer$"+ea,Ka="__reactEvents$"+ea,qi="__reactListeners$"+ea,Js="__reactHandles$"+ea,Hi="__reactResources$"+ea,ta="__reactMarker$"+ea;function Jl(e){delete e[Lt],delete e[Ut],delete e[Ka],delete e[qi],delete e[Js]}function ha(e){var t=e[Lt];if(t)return t;for(var n=e.parentNode;n;){if(t=n[hn]||n[Lt]){if(n=t.alternate,t.child!==null||n!==null&&n.child!==null)for(e=Gh(e);e!==null;){if(n=e[Lt])return n;e=Gh(e)}return t}e=n,n=e.parentNode}return null}function Wt(e){if(e=e[Lt]||e[hn]){var t=e.tag;if(t===5||t===6||t===13||t===31||t===26||t===27||t===3)return e}return null}function pn(e){var t=e.tag;if(t===5||t===26||t===27||t===6)return e.stateNode;throw Error(u(33))}function na(e){var t=e[Hi];return t||(t=e[Hi]={hoistableStyles:new Map,hoistableScripts:new Map}),t}function ut(e){e[ta]=!0}var Fl=new Set,pa={};function Gt(e,t){q(e,t),q(e+"Capture",t)}function q(e,t){for(pa[e]=t,e=0;e<t.length;e++)Fl.add(t[e])}var dt=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),va={},Qa={};function vn(e){return an.call(Qa,e)?!0:an.call(va,e)?!1:dt.test(e)?Qa[e]=!0:(va[e]=!0,!1)}function ga(e,t,n){if(vn(t))if(n===null)e.removeAttribute(t);else{switch(typeof n){case"undefined":case"function":case"symbol":e.removeAttribute(t);return;case"boolean":var a=t.toLowerCase().slice(0,5);if(a!=="data-"&&a!=="aria-"){e.removeAttribute(t);return}}e.setAttribute(t,""+n)}}function Cn(e,t,n){if(n===null)e.removeAttribute(t);else{switch(typeof n){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(t);return}e.setAttribute(t,""+n)}}function Zt(e,t,n,a){if(a===null)e.removeAttribute(n);else{switch(typeof a){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(n);return}e.setAttributeNS(t,n,""+a)}}function cn(e){switch(typeof e){case"bigint":case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function ya(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function Fs(e,t,n){var a=Object.getOwnPropertyDescriptor(e.constructor.prototype,t);if(!e.hasOwnProperty(t)&&typeof a<"u"&&typeof a.get=="function"&&typeof a.set=="function"){var i=a.get,r=a.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return i.call(this)},set:function(f){n=""+f,r.call(this,f)}}),Object.defineProperty(e,t,{enumerable:a.enumerable}),{getValue:function(){return n},setValue:function(f){n=""+f},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function Ui(e){if(!e._valueTracker){var t=ya(e)?"checked":"value";e._valueTracker=Fs(e,t,""+e[t])}}function Is(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),a="";return e&&(a=ya(e)?e.checked?"true":"false":e.value),e=a,e!==n?(t.setValue(e),!0):!1}function Il(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}var Wl=/[\n"\\]/g;function Vt(e){return e.replace(Wl,function(t){return"\\"+t.charCodeAt(0).toString(16)+" "})}function Gi(e,t,n,a,i,r,f,g){e.name="",f!=null&&typeof f!="function"&&typeof f!="symbol"&&typeof f!="boolean"?e.type=f:e.removeAttribute("type"),t!=null?f==="number"?(t===0&&e.value===""||e.value!=t)&&(e.value=""+cn(t)):e.value!==""+cn(t)&&(e.value=""+cn(t)):f!=="submit"&&f!=="reset"||e.removeAttribute("value"),t!=null?xl(e,f,cn(t)):n!=null?xl(e,f,cn(n)):a!=null&&e.removeAttribute("value"),i==null&&r!=null&&(e.defaultChecked=!!r),i!=null&&(e.checked=i&&typeof i!="function"&&typeof i!="symbol"),g!=null&&typeof g!="function"&&typeof g!="symbol"&&typeof g!="boolean"?e.name=""+cn(g):e.removeAttribute("name")}function Ws(e,t,n,a,i,r,f,g){if(r!=null&&typeof r!="function"&&typeof r!="symbol"&&typeof r!="boolean"&&(e.type=r),t!=null||n!=null){if(!(r!=="submit"&&r!=="reset"||t!=null)){Ui(e);return}n=n!=null?""+cn(n):"",t=t!=null?""+cn(t):n,g||t===e.value||(e.value=t),e.defaultValue=t}a=a??i,a=typeof a!="function"&&typeof a!="symbol"&&!!a,e.checked=g?e.checked:!!a,e.defaultChecked=!!a,f!=null&&typeof f!="function"&&typeof f!="symbol"&&typeof f!="boolean"&&(e.name=f),Ui(e)}function xl(e,t,n){t==="number"&&Il(e.ownerDocument)===e||e.defaultValue===""+n||(e.defaultValue=""+n)}function $a(e,t,n,a){if(e=e.options,t){t={};for(var i=0;i<n.length;i++)t["$"+n[i]]=!0;for(n=0;n<e.length;n++)i=t.hasOwnProperty("$"+e[n].value),e[n].selected!==i&&(e[n].selected=i),i&&a&&(e[n].defaultSelected=!0)}else{for(n=""+cn(n),t=null,i=0;i<e.length;i++){if(e[i].value===n){e[i].selected=!0,a&&(e[i].defaultSelected=!0);return}t!==null||e[i].disabled||(t=e[i])}t!==null&&(t.selected=!0)}}function Vn(e,t,n){if(t!=null&&(t=""+cn(t),t!==e.value&&(e.value=t),n==null)){e.defaultValue!==t&&(e.defaultValue=t);return}e.defaultValue=n!=null?""+cn(n):""}function Vi(e,t,n,a){if(t==null){if(a!=null){if(n!=null)throw Error(u(92));if(me(a)){if(1<a.length)throw Error(u(93));a=a[0]}n=a}n==null&&(n=""),t=n}n=cn(t),e.defaultValue=n,a=e.textContent,a===n&&a!==""&&a!==null&&(e.value=a),Ui(e)}function en(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&n.nodeType===3){n.nodeValue=t;return}}e.textContent=t}var Rr=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function ec(e,t,n){var a=t.indexOf("--")===0;n==null||typeof n=="boolean"||n===""?a?e.setProperty(t,""):t==="float"?e.cssFloat="":e[t]="":a?e.setProperty(t,n):typeof n!="number"||n===0||Rr.has(t)?t==="float"?e.cssFloat=n:e[t]=(""+n).trim():e[t]=n+"px"}function tc(e,t,n){if(t!=null&&typeof t!="object")throw Error(u(62));if(e=e.style,n!=null){for(var a in n)!n.hasOwnProperty(a)||t!=null&&t.hasOwnProperty(a)||(a.indexOf("--")===0?e.setProperty(a,""):a==="float"?e.cssFloat="":e[a]="");for(var i in t)a=t[i],t.hasOwnProperty(i)&&n[i]!==a&&ec(e,i,a)}else for(var r in t)t.hasOwnProperty(r)&&ec(e,r,t[r])}function Sl(e){if(e.indexOf("-")===-1)return!1;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Yi=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),ba=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function _l(e){return ba.test(""+e)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":e}function Yn(){}var ei=null;function aa(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var Xa=null,Pa=null;function nc(e){var t=Wt(e);if(t&&(e=t.stateNode)){var n=e[Ut]||null;e:switch(e=t.stateNode,t.type){case"input":if(Gi(e,n.value,n.defaultValue,n.defaultValue,n.checked,n.defaultChecked,n.type,n.name),t=n.name,n.type==="radio"&&t!=null){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll('input[name="'+Vt(""+t)+'"][type="radio"]'),t=0;t<n.length;t++){var a=n[t];if(a!==e&&a.form===e.form){var i=a[Ut]||null;if(!i)throw Error(u(90));Gi(a,i.value,i.defaultValue,i.defaultValue,i.checked,i.defaultChecked,i.type,i.name)}}for(t=0;t<n.length;t++)a=n[t],a.form===e.form&&Is(a)}break e;case"textarea":Vn(e,n.value,n.defaultValue);break e;case"select":t=n.value,t!=null&&$a(e,!!n.multiple,t,!1)}}}var Ki=!1;function ac(e,t,n){if(Ki)return e(t,n);Ki=!0;try{var a=e(t);return a}finally{if(Ki=!1,(Xa!==null||Pa!==null)&&(Hc(),Xa&&(t=Xa,e=Pa,Pa=Xa=null,nc(t),e)))for(t=0;t<e.length;t++)nc(e[t])}}function jl(e,t){var n=e.stateNode;if(n===null)return null;var a=n[Ut]||null;if(a===null)return null;n=a[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(a=!a.disabled)||(e=e.type,a=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!a;break e;default:e=!1}if(e)return null;if(n&&typeof n!="function")throw Error(u(231,t,typeof n));return n}var Kn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Qi=!1;if(Kn)try{var Ml={};Object.defineProperty(Ml,"passive",{get:function(){Qi=!0}}),window.addEventListener("test",Ml,Ml),window.removeEventListener("test",Ml,Ml)}catch{Qi=!1}var gn=null,$i=null,ti=null;function Xi(){if(ti)return ti;var e,t=$i,n=t.length,a,i="value"in gn?gn.value:gn.textContent,r=i.length;for(e=0;e<n&&t[e]===i[e];e++);var f=n-e;for(a=1;a<=f&&t[n-a]===i[r-a];a++);return ti=i.slice(e,1<a?1-a:void 0)}function _(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function H(){return!0}function ae(){return!1}function ce(e){function t(n,a,i,r,f){this._reactName=n,this._targetInst=i,this.type=a,this.nativeEvent=r,this.target=f,this.currentTarget=null;for(var g in e)e.hasOwnProperty(g)&&(n=e[g],this[g]=n?n(r):r[g]);return this.isDefaultPrevented=(r.defaultPrevented!=null?r.defaultPrevented:r.returnValue===!1)?H:ae,this.isPropagationStopped=ae,this}return x(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=H)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=H)},persist:function(){},isPersistent:H}),t}var we={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Te=ce(we),Ve=x({},we,{view:0,detail:0}),tn=ce(Ve),Qn,$n,Tt,An=x({},Ve,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Lr,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==Tt&&(Tt&&e.type==="mousemove"?(Qn=e.screenX-Tt.screenX,$n=e.screenY-Tt.screenY):$n=Qn=0,Tt=e),Qn)},movementY:function(e){return"movementY"in e?e.movementY:$n}}),Pi=ce(An),Nl=x({},An,{dataTransfer:0}),Yv=ce(Nl),Kv=x({},Ve,{relatedTarget:0}),Dr=ce(Kv),Qv=x({},we,{animationName:0,elapsedTime:0,pseudoElement:0}),$v=ce(Qv),Xv=x({},we,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),Pv=ce(Xv),Zv=x({},we,{data:0}),zd=ce(Zv),Jv={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Fv={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Iv={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Wv(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=Iv[e])?!!t[e]:!1}function Lr(){return Wv}var eg=x({},Ve,{key:function(e){if(e.key){var t=Jv[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=_(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?Fv[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Lr,charCode:function(e){return e.type==="keypress"?_(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?_(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),tg=ce(eg),ng=x({},An,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Bd=ce(ng),ag=x({},Ve,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Lr}),lg=ce(ag),ig=x({},we,{propertyName:0,elapsedTime:0,pseudoElement:0}),sg=ce(ig),cg=x({},An,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),rg=ce(cg),og=x({},we,{newState:0,oldState:0}),ug=ce(og),dg=[9,13,27,32],Or=Kn&&"CompositionEvent"in window,Zi=null;Kn&&"documentMode"in document&&(Zi=document.documentMode);var fg=Kn&&"TextEvent"in window&&!Zi,qd=Kn&&(!Or||Zi&&8<Zi&&11>=Zi),Hd=" ",Ud=!1;function Gd(e,t){switch(e){case"keyup":return dg.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Vd(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var ni=!1;function mg(e,t){switch(e){case"compositionend":return Vd(t);case"keypress":return t.which!==32?null:(Ud=!0,Hd);case"textInput":return e=t.data,e===Hd&&Ud?null:e;default:return null}}function hg(e,t){if(ni)return e==="compositionend"||!Or&&Gd(e,t)?(e=Xi(),ti=$i=gn=null,ni=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return qd&&t.locale!=="ko"?null:t.data;default:return null}}var pg={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Yd(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!pg[e.type]:t==="textarea"}function Kd(e,t,n,a){Xa?Pa?Pa.push(a):Pa=[a]:Xa=a,t=$c(t,"onChange"),0<t.length&&(n=new Te("onChange","change",null,n,a),e.push({event:n,listeners:t}))}var Ji=null,Fi=null;function vg(e){Th(e,0)}function lc(e){var t=pn(e);if(Is(t))return e}function Qd(e,t){if(e==="change")return t}var $d=!1;if(Kn){var zr;if(Kn){var Br="oninput"in document;if(!Br){var Xd=document.createElement("div");Xd.setAttribute("oninput","return;"),Br=typeof Xd.oninput=="function"}zr=Br}else zr=!1;$d=zr&&(!document.documentMode||9<document.documentMode)}function Pd(){Ji&&(Ji.detachEvent("onpropertychange",Zd),Fi=Ji=null)}function Zd(e){if(e.propertyName==="value"&&lc(Fi)){var t=[];Kd(t,Fi,e,aa(e)),ac(vg,t)}}function gg(e,t,n){e==="focusin"?(Pd(),Ji=t,Fi=n,Ji.attachEvent("onpropertychange",Zd)):e==="focusout"&&Pd()}function yg(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return lc(Fi)}function bg(e,t){if(e==="click")return lc(t)}function xg(e,t){if(e==="input"||e==="change")return lc(t)}function Sg(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var yn=typeof Object.is=="function"?Object.is:Sg;function Ii(e,t){if(yn(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var n=Object.keys(e),a=Object.keys(t);if(n.length!==a.length)return!1;for(a=0;a<n.length;a++){var i=n[a];if(!an.call(t,i)||!yn(e[i],t[i]))return!1}return!0}function Jd(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function Fd(e,t){var n=Jd(e);e=0;for(var a;n;){if(n.nodeType===3){if(a=e+n.textContent.length,e<=t&&a>=t)return{node:n,offset:t-e};e=a}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=Jd(n)}}function Id(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?Id(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function Wd(e){e=e!=null&&e.ownerDocument!=null&&e.ownerDocument.defaultView!=null?e.ownerDocument.defaultView:window;for(var t=Il(e.document);t instanceof e.HTMLIFrameElement;){try{var n=typeof t.contentWindow.location.href=="string"}catch{n=!1}if(n)e=t.contentWindow;else break;t=Il(e.document)}return t}function qr(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}var _g=Kn&&"documentMode"in document&&11>=document.documentMode,ai=null,Hr=null,Wi=null,Ur=!1;function ef(e,t,n){var a=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;Ur||ai==null||ai!==Il(a)||(a=ai,"selectionStart"in a&&qr(a)?a={start:a.selectionStart,end:a.selectionEnd}:(a=(a.ownerDocument&&a.ownerDocument.defaultView||window).getSelection(),a={anchorNode:a.anchorNode,anchorOffset:a.anchorOffset,focusNode:a.focusNode,focusOffset:a.focusOffset}),Wi&&Ii(Wi,a)||(Wi=a,a=$c(Hr,"onSelect"),0<a.length&&(t=new Te("onSelect","select",null,t,n),e.push({event:t,listeners:a}),t.target=ai)))}function El(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var li={animationend:El("Animation","AnimationEnd"),animationiteration:El("Animation","AnimationIteration"),animationstart:El("Animation","AnimationStart"),transitionrun:El("Transition","TransitionRun"),transitionstart:El("Transition","TransitionStart"),transitioncancel:El("Transition","TransitionCancel"),transitionend:El("Transition","TransitionEnd")},Gr={},tf={};Kn&&(tf=document.createElement("div").style,"AnimationEvent"in window||(delete li.animationend.animation,delete li.animationiteration.animation,delete li.animationstart.animation),"TransitionEvent"in window||delete li.transitionend.transition);function Tl(e){if(Gr[e])return Gr[e];if(!li[e])return e;var t=li[e],n;for(n in t)if(t.hasOwnProperty(n)&&n in tf)return Gr[e]=t[n];return e}var nf=Tl("animationend"),af=Tl("animationiteration"),lf=Tl("animationstart"),jg=Tl("transitionrun"),Mg=Tl("transitionstart"),Ng=Tl("transitioncancel"),sf=Tl("transitionend"),cf=new Map,Vr="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Vr.push("scrollEnd");function Xn(e,t){cf.set(e,t),Gt(t,[e])}var ic=typeof reportError=="function"?reportError:function(e){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var t=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof e=="object"&&e!==null&&typeof e.message=="string"?String(e.message):String(e),error:e});if(!window.dispatchEvent(t))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",e);return}console.error(e)},wn=[],ii=0,Yr=0;function sc(){for(var e=ii,t=Yr=ii=0;t<e;){var n=wn[t];wn[t++]=null;var a=wn[t];wn[t++]=null;var i=wn[t];wn[t++]=null;var r=wn[t];if(wn[t++]=null,a!==null&&i!==null){var f=a.pending;f===null?i.next=i:(i.next=f.next,f.next=i),a.pending=i}r!==0&&rf(n,i,r)}}function cc(e,t,n,a){wn[ii++]=e,wn[ii++]=t,wn[ii++]=n,wn[ii++]=a,Yr|=a,e.lanes|=a,e=e.alternate,e!==null&&(e.lanes|=a)}function Kr(e,t,n,a){return cc(e,t,n,a),rc(e)}function Cl(e,t){return cc(e,null,null,t),rc(e)}function rf(e,t,n){e.lanes|=n;var a=e.alternate;a!==null&&(a.lanes|=n);for(var i=!1,r=e.return;r!==null;)r.childLanes|=n,a=r.alternate,a!==null&&(a.childLanes|=n),r.tag===22&&(e=r.stateNode,e===null||e._visibility&1||(i=!0)),e=r,r=r.return;return e.tag===3?(r=e.stateNode,i&&t!==null&&(i=31-xt(n),e=r.hiddenUpdates,a=e[i],a===null?e[i]=[t]:a.push(t),t.lane=n|536870912),r):null}function rc(e){if(50<Ss)throw Ss=0,eu=null,Error(u(185));for(var t=e.return;t!==null;)e=t,t=e.return;return e.tag===3?e.stateNode:null}var si={};function Eg(e,t,n,a){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=a,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function bn(e,t,n,a){return new Eg(e,t,n,a)}function Qr(e){return e=e.prototype,!(!e||!e.isReactComponent)}function xa(e,t){var n=e.alternate;return n===null?(n=bn(e.tag,t,e.key,e.mode),n.elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=e.flags&65011712,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n.refCleanup=e.refCleanup,n}function of(e,t){e.flags&=65011714;var n=e.alternate;return n===null?(e.childLanes=0,e.lanes=t,e.child=null,e.subtreeFlags=0,e.memoizedProps=null,e.memoizedState=null,e.updateQueue=null,e.dependencies=null,e.stateNode=null):(e.childLanes=n.childLanes,e.lanes=n.lanes,e.child=n.child,e.subtreeFlags=0,e.deletions=null,e.memoizedProps=n.memoizedProps,e.memoizedState=n.memoizedState,e.updateQueue=n.updateQueue,e.type=n.type,t=n.dependencies,e.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),e}function oc(e,t,n,a,i,r){var f=0;if(a=e,typeof e=="function")Qr(e)&&(f=1);else if(typeof e=="string")f=ky(e,n,te.current)?26:e==="html"||e==="head"||e==="body"?27:5;else e:switch(e){case T:return e=bn(31,n,t,i),e.elementType=T,e.lanes=r,e;case Y:return Al(n.children,i,r,t);case R:f=8,i|=24;break;case $:return e=bn(12,n,t,i|2),e.elementType=$,e.lanes=r,e;case xe:return e=bn(13,n,t,i),e.elementType=xe,e.lanes=r,e;case ue:return e=bn(19,n,t,i),e.elementType=ue,e.lanes=r,e;default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case ee:f=10;break e;case F:f=9;break e;case oe:f=11;break e;case ie:f=14;break e;case Ae:f=16,a=null;break e}f=29,n=Error(u(130,e===null?"null":typeof e,"")),a=null}return t=bn(f,n,t,i),t.elementType=e,t.type=a,t.lanes=r,t}function Al(e,t,n,a){return e=bn(7,e,a,t),e.lanes=n,e}function $r(e,t,n){return e=bn(6,e,null,t),e.lanes=n,e}function uf(e){var t=bn(18,null,null,0);return t.stateNode=e,t}function Xr(e,t,n){return t=bn(4,e.children!==null?e.children:[],e.key,t),t.lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}var df=new WeakMap;function kn(e,t){if(typeof e=="object"&&e!==null){var n=df.get(e);return n!==void 0?n:(t={value:e,source:t,stack:Dt(t)},df.set(e,t),t)}return{value:e,source:t,stack:Dt(t)}}var ci=[],ri=0,uc=null,es=0,Rn=[],Dn=0,Za=null,la=1,ia="";function Sa(e,t){ci[ri++]=es,ci[ri++]=uc,uc=e,es=t}function ff(e,t,n){Rn[Dn++]=la,Rn[Dn++]=ia,Rn[Dn++]=Za,Za=e;var a=la;e=ia;var i=32-xt(a)-1;a&=~(1<<i),n+=1;var r=32-xt(t)+i;if(30<r){var f=i-i%5;r=(a&(1<<f)-1).toString(32),a>>=f,i-=f,la=1<<32-xt(t)+i|n<<i|a,ia=r+e}else la=1<<r|n<<i|a,ia=e}function Pr(e){e.return!==null&&(Sa(e,1),ff(e,1,0))}function Zr(e){for(;e===uc;)uc=ci[--ri],ci[ri]=null,es=ci[--ri],ci[ri]=null;for(;e===Za;)Za=Rn[--Dn],Rn[Dn]=null,ia=Rn[--Dn],Rn[Dn]=null,la=Rn[--Dn],Rn[Dn]=null}function mf(e,t){Rn[Dn++]=la,Rn[Dn++]=ia,Rn[Dn++]=Za,la=t.id,ia=t.overflow,Za=e}var Yt=null,it=null,Ye=!1,Ja=null,Ln=!1,Jr=Error(u(519));function Fa(e){var t=Error(u(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw ts(kn(t,e)),Jr}function hf(e){var t=e.stateNode,n=e.type,a=e.memoizedProps;switch(t[Lt]=e,t[Ut]=a,n){case"dialog":He("cancel",t),He("close",t);break;case"iframe":case"object":case"embed":He("load",t);break;case"video":case"audio":for(n=0;n<js.length;n++)He(js[n],t);break;case"source":He("error",t);break;case"img":case"image":case"link":He("error",t),He("load",t);break;case"details":He("toggle",t);break;case"input":He("invalid",t),Ws(t,a.value,a.defaultValue,a.checked,a.defaultChecked,a.type,a.name,!0);break;case"select":He("invalid",t);break;case"textarea":He("invalid",t),Vi(t,a.value,a.defaultValue,a.children)}n=a.children,typeof n!="string"&&typeof n!="number"&&typeof n!="bigint"||t.textContent===""+n||a.suppressHydrationWarning===!0||kh(t.textContent,n)?(a.popover!=null&&(He("beforetoggle",t),He("toggle",t)),a.onScroll!=null&&He("scroll",t),a.onScrollEnd!=null&&He("scrollend",t),a.onClick!=null&&(t.onclick=Yn),t=!0):t=!1,t||Fa(e,!0)}function pf(e){for(Yt=e.return;Yt;)switch(Yt.tag){case 5:case 31:case 13:Ln=!1;return;case 27:case 3:Ln=!0;return;default:Yt=Yt.return}}function oi(e){if(e!==Yt)return!1;if(!Ye)return pf(e),Ye=!0,!1;var t=e.tag,n;if((n=t!==3&&t!==27)&&((n=t===5)&&(n=e.type,n=!(n!=="form"&&n!=="button")||pu(e.type,e.memoizedProps)),n=!n),n&&it&&Fa(e),pf(e),t===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(u(317));it=Uh(e)}else if(t===31){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(u(317));it=Uh(e)}else t===27?(t=it,dl(e.type)?(e=xu,xu=null,it=e):it=t):it=Yt?zn(e.stateNode.nextSibling):null;return!0}function wl(){it=Yt=null,Ye=!1}function Fr(){var e=Ja;return e!==null&&(dn===null?dn=e:dn.push.apply(dn,e),Ja=null),e}function ts(e){Ja===null?Ja=[e]:Ja.push(e)}var Ir=M(null),kl=null,_a=null;function Ia(e,t,n){J(Ir,t._currentValue),t._currentValue=n}function ja(e){e._currentValue=Ir.current,B(Ir)}function Wr(e,t,n){for(;e!==null;){var a=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,a!==null&&(a.childLanes|=t)):a!==null&&(a.childLanes&t)!==t&&(a.childLanes|=t),e===n)break;e=e.return}}function eo(e,t,n,a){var i=e.child;for(i!==null&&(i.return=e);i!==null;){var r=i.dependencies;if(r!==null){var f=i.child;r=r.firstContext;e:for(;r!==null;){var g=r;r=i;for(var j=0;j<t.length;j++)if(g.context===t[j]){r.lanes|=n,g=r.alternate,g!==null&&(g.lanes|=n),Wr(r.return,n,e),a||(f=null);break e}r=g.next}}else if(i.tag===18){if(f=i.return,f===null)throw Error(u(341));f.lanes|=n,r=f.alternate,r!==null&&(r.lanes|=n),Wr(f,n,e),f=null}else f=i.child;if(f!==null)f.return=i;else for(f=i;f!==null;){if(f===e){f=null;break}if(i=f.sibling,i!==null){i.return=f.return,f=i;break}f=f.return}i=f}}function ui(e,t,n,a){e=null;for(var i=t,r=!1;i!==null;){if(!r){if((i.flags&524288)!==0)r=!0;else if((i.flags&262144)!==0)break}if(i.tag===10){var f=i.alternate;if(f===null)throw Error(u(387));if(f=f.memoizedProps,f!==null){var g=i.type;yn(i.pendingProps.value,f.value)||(e!==null?e.push(g):e=[g])}}else if(i===_e.current){if(f=i.alternate,f===null)throw Error(u(387));f.memoizedState.memoizedState!==i.memoizedState.memoizedState&&(e!==null?e.push(Cs):e=[Cs])}i=i.return}e!==null&&eo(t,e,n,a),t.flags|=262144}function dc(e){for(e=e.firstContext;e!==null;){if(!yn(e.context._currentValue,e.memoizedValue))return!0;e=e.next}return!1}function Rl(e){kl=e,_a=null,e=e.dependencies,e!==null&&(e.firstContext=null)}function Kt(e){return vf(kl,e)}function fc(e,t){return kl===null&&Rl(e),vf(e,t)}function vf(e,t){var n=t._currentValue;if(t={context:t,memoizedValue:n,next:null},_a===null){if(e===null)throw Error(u(308));_a=t,e.dependencies={lanes:0,firstContext:t},e.flags|=524288}else _a=_a.next=t;return n}var Tg=typeof AbortController<"u"?AbortController:function(){var e=[],t=this.signal={aborted:!1,addEventListener:function(n,a){e.push(a)}};this.abort=function(){t.aborted=!0,e.forEach(function(n){return n()})}},Cg=l.unstable_scheduleCallback,Ag=l.unstable_NormalPriority,Ct={$$typeof:ee,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function to(){return{controller:new Tg,data:new Map,refCount:0}}function ns(e){e.refCount--,e.refCount===0&&Cg(Ag,function(){e.controller.abort()})}var as=null,no=0,di=0,fi=null;function wg(e,t){if(as===null){var n=as=[];no=0,di=su(),fi={status:"pending",value:void 0,then:function(a){n.push(a)}}}return no++,t.then(gf,gf),t}function gf(){if(--no===0&&as!==null){fi!==null&&(fi.status="fulfilled");var e=as;as=null,di=0,fi=null;for(var t=0;t<e.length;t++)(0,e[t])()}}function kg(e,t){var n=[],a={status:"pending",value:null,reason:null,then:function(i){n.push(i)}};return e.then(function(){a.status="fulfilled",a.value=t;for(var i=0;i<n.length;i++)(0,n[i])(t)},function(i){for(a.status="rejected",a.reason=i,i=0;i<n.length;i++)(0,n[i])(void 0)}),a}var yf=E.S;E.S=function(e,t){th=ge(),typeof t=="object"&&t!==null&&typeof t.then=="function"&&wg(e,t),yf!==null&&yf(e,t)};var Dl=M(null);function ao(){var e=Dl.current;return e!==null?e:at.pooledCache}function mc(e,t){t===null?J(Dl,Dl.current):J(Dl,t.pool)}function bf(){var e=ao();return e===null?null:{parent:Ct._currentValue,pool:e}}var mi=Error(u(460)),lo=Error(u(474)),hc=Error(u(542)),pc={then:function(){}};function xf(e){return e=e.status,e==="fulfilled"||e==="rejected"}function Sf(e,t,n){switch(n=e[n],n===void 0?e.push(t):n!==t&&(t.then(Yn,Yn),t=n),t.status){case"fulfilled":return t.value;case"rejected":throw e=t.reason,jf(e),e;default:if(typeof t.status=="string")t.then(Yn,Yn);else{if(e=at,e!==null&&100<e.shellSuspendCounter)throw Error(u(482));e=t,e.status="pending",e.then(function(a){if(t.status==="pending"){var i=t;i.status="fulfilled",i.value=a}},function(a){if(t.status==="pending"){var i=t;i.status="rejected",i.reason=a}})}switch(t.status){case"fulfilled":return t.value;case"rejected":throw e=t.reason,jf(e),e}throw Ol=t,mi}}function Ll(e){try{var t=e._init;return t(e._payload)}catch(n){throw n!==null&&typeof n=="object"&&typeof n.then=="function"?(Ol=n,mi):n}}var Ol=null;function _f(){if(Ol===null)throw Error(u(459));var e=Ol;return Ol=null,e}function jf(e){if(e===mi||e===hc)throw Error(u(483))}var hi=null,ls=0;function vc(e){var t=ls;return ls+=1,hi===null&&(hi=[]),Sf(hi,e,t)}function is(e,t){t=t.props.ref,e.ref=t!==void 0?t:null}function gc(e,t){throw t.$$typeof===O?Error(u(525)):(e=Object.prototype.toString.call(t),Error(u(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)))}function Mf(e){function t(C,N){if(e){var w=C.deletions;w===null?(C.deletions=[N],C.flags|=16):w.push(N)}}function n(C,N){if(!e)return null;for(;N!==null;)t(C,N),N=N.sibling;return null}function a(C){for(var N=new Map;C!==null;)C.key!==null?N.set(C.key,C):N.set(C.index,C),C=C.sibling;return N}function i(C,N){return C=xa(C,N),C.index=0,C.sibling=null,C}function r(C,N,w){return C.index=w,e?(w=C.alternate,w!==null?(w=w.index,w<N?(C.flags|=67108866,N):w):(C.flags|=67108866,N)):(C.flags|=1048576,N)}function f(C){return e&&C.alternate===null&&(C.flags|=67108866),C}function g(C,N,w,K){return N===null||N.tag!==6?(N=$r(w,C.mode,K),N.return=C,N):(N=i(N,w),N.return=C,N)}function j(C,N,w,K){var be=w.type;return be===Y?V(C,N,w.props.children,K,w.key):N!==null&&(N.elementType===be||typeof be=="object"&&be!==null&&be.$$typeof===Ae&&Ll(be)===N.type)?(N=i(N,w.props),is(N,w),N.return=C,N):(N=oc(w.type,w.key,w.props,null,C.mode,K),is(N,w),N.return=C,N)}function k(C,N,w,K){return N===null||N.tag!==4||N.stateNode.containerInfo!==w.containerInfo||N.stateNode.implementation!==w.implementation?(N=Xr(w,C.mode,K),N.return=C,N):(N=i(N,w.children||[]),N.return=C,N)}function V(C,N,w,K,be){return N===null||N.tag!==7?(N=Al(w,C.mode,K,be),N.return=C,N):(N=i(N,w),N.return=C,N)}function Q(C,N,w){if(typeof N=="string"&&N!==""||typeof N=="number"||typeof N=="bigint")return N=$r(""+N,C.mode,w),N.return=C,N;if(typeof N=="object"&&N!==null){switch(N.$$typeof){case G:return w=oc(N.type,N.key,N.props,null,C.mode,w),is(w,N),w.return=C,w;case L:return N=Xr(N,C.mode,w),N.return=C,N;case Ae:return N=Ll(N),Q(C,N,w)}if(me(N)||ne(N))return N=Al(N,C.mode,w,null),N.return=C,N;if(typeof N.then=="function")return Q(C,vc(N),w);if(N.$$typeof===ee)return Q(C,fc(C,N),w);gc(C,N)}return null}function D(C,N,w,K){var be=N!==null?N.key:null;if(typeof w=="string"&&w!==""||typeof w=="number"||typeof w=="bigint")return be!==null?null:g(C,N,""+w,K);if(typeof w=="object"&&w!==null){switch(w.$$typeof){case G:return w.key===be?j(C,N,w,K):null;case L:return w.key===be?k(C,N,w,K):null;case Ae:return w=Ll(w),D(C,N,w,K)}if(me(w)||ne(w))return be!==null?null:V(C,N,w,K,null);if(typeof w.then=="function")return D(C,N,vc(w),K);if(w.$$typeof===ee)return D(C,N,fc(C,w),K);gc(C,w)}return null}function z(C,N,w,K,be){if(typeof K=="string"&&K!==""||typeof K=="number"||typeof K=="bigint")return C=C.get(w)||null,g(N,C,""+K,be);if(typeof K=="object"&&K!==null){switch(K.$$typeof){case G:return C=C.get(K.key===null?w:K.key)||null,j(N,C,K,be);case L:return C=C.get(K.key===null?w:K.key)||null,k(N,C,K,be);case Ae:return K=Ll(K),z(C,N,w,K,be)}if(me(K)||ne(K))return C=C.get(w)||null,V(N,C,K,be,null);if(typeof K.then=="function")return z(C,N,w,vc(K),be);if(K.$$typeof===ee)return z(C,N,w,fc(N,K),be);gc(N,K)}return null}function re(C,N,w,K){for(var be=null,Qe=null,fe=N,Le=N=0,Ge=null;fe!==null&&Le<w.length;Le++){fe.index>Le?(Ge=fe,fe=null):Ge=fe.sibling;var $e=D(C,fe,w[Le],K);if($e===null){fe===null&&(fe=Ge);break}e&&fe&&$e.alternate===null&&t(C,fe),N=r($e,N,Le),Qe===null?be=$e:Qe.sibling=$e,Qe=$e,fe=Ge}if(Le===w.length)return n(C,fe),Ye&&Sa(C,Le),be;if(fe===null){for(;Le<w.length;Le++)fe=Q(C,w[Le],K),fe!==null&&(N=r(fe,N,Le),Qe===null?be=fe:Qe.sibling=fe,Qe=fe);return Ye&&Sa(C,Le),be}for(fe=a(fe);Le<w.length;Le++)Ge=z(fe,C,Le,w[Le],K),Ge!==null&&(e&&Ge.alternate!==null&&fe.delete(Ge.key===null?Le:Ge.key),N=r(Ge,N,Le),Qe===null?be=Ge:Qe.sibling=Ge,Qe=Ge);return e&&fe.forEach(function(vl){return t(C,vl)}),Ye&&Sa(C,Le),be}function Se(C,N,w,K){if(w==null)throw Error(u(151));for(var be=null,Qe=null,fe=N,Le=N=0,Ge=null,$e=w.next();fe!==null&&!$e.done;Le++,$e=w.next()){fe.index>Le?(Ge=fe,fe=null):Ge=fe.sibling;var vl=D(C,fe,$e.value,K);if(vl===null){fe===null&&(fe=Ge);break}e&&fe&&vl.alternate===null&&t(C,fe),N=r(vl,N,Le),Qe===null?be=vl:Qe.sibling=vl,Qe=vl,fe=Ge}if($e.done)return n(C,fe),Ye&&Sa(C,Le),be;if(fe===null){for(;!$e.done;Le++,$e=w.next())$e=Q(C,$e.value,K),$e!==null&&(N=r($e,N,Le),Qe===null?be=$e:Qe.sibling=$e,Qe=$e);return Ye&&Sa(C,Le),be}for(fe=a(fe);!$e.done;Le++,$e=w.next())$e=z(fe,C,Le,$e.value,K),$e!==null&&(e&&$e.alternate!==null&&fe.delete($e.key===null?Le:$e.key),N=r($e,N,Le),Qe===null?be=$e:Qe.sibling=$e,Qe=$e);return e&&fe.forEach(function(Vy){return t(C,Vy)}),Ye&&Sa(C,Le),be}function nt(C,N,w,K){if(typeof w=="object"&&w!==null&&w.type===Y&&w.key===null&&(w=w.props.children),typeof w=="object"&&w!==null){switch(w.$$typeof){case G:e:{for(var be=w.key;N!==null;){if(N.key===be){if(be=w.type,be===Y){if(N.tag===7){n(C,N.sibling),K=i(N,w.props.children),K.return=C,C=K;break e}}else if(N.elementType===be||typeof be=="object"&&be!==null&&be.$$typeof===Ae&&Ll(be)===N.type){n(C,N.sibling),K=i(N,w.props),is(K,w),K.return=C,C=K;break e}n(C,N);break}else t(C,N);N=N.sibling}w.type===Y?(K=Al(w.props.children,C.mode,K,w.key),K.return=C,C=K):(K=oc(w.type,w.key,w.props,null,C.mode,K),is(K,w),K.return=C,C=K)}return f(C);case L:e:{for(be=w.key;N!==null;){if(N.key===be)if(N.tag===4&&N.stateNode.containerInfo===w.containerInfo&&N.stateNode.implementation===w.implementation){n(C,N.sibling),K=i(N,w.children||[]),K.return=C,C=K;break e}else{n(C,N);break}else t(C,N);N=N.sibling}K=Xr(w,C.mode,K),K.return=C,C=K}return f(C);case Ae:return w=Ll(w),nt(C,N,w,K)}if(me(w))return re(C,N,w,K);if(ne(w)){if(be=ne(w),typeof be!="function")throw Error(u(150));return w=be.call(w),Se(C,N,w,K)}if(typeof w.then=="function")return nt(C,N,vc(w),K);if(w.$$typeof===ee)return nt(C,N,fc(C,w),K);gc(C,w)}return typeof w=="string"&&w!==""||typeof w=="number"||typeof w=="bigint"?(w=""+w,N!==null&&N.tag===6?(n(C,N.sibling),K=i(N,w),K.return=C,C=K):(n(C,N),K=$r(w,C.mode,K),K.return=C,C=K),f(C)):n(C,N)}return function(C,N,w,K){try{ls=0;var be=nt(C,N,w,K);return hi=null,be}catch(fe){if(fe===mi||fe===hc)throw fe;var Qe=bn(29,fe,null,C.mode);return Qe.lanes=K,Qe.return=C,Qe}}}var zl=Mf(!0),Nf=Mf(!1),Wa=!1;function io(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function so(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,callbacks:null})}function el(e){return{lane:e,tag:0,payload:null,callback:null,next:null}}function tl(e,t,n){var a=e.updateQueue;if(a===null)return null;if(a=a.shared,(Ze&2)!==0){var i=a.pending;return i===null?t.next=t:(t.next=i.next,i.next=t),a.pending=t,t=rc(e),rf(e,null,n),t}return cc(e,a,t,n),rc(e)}function ss(e,t,n){if(t=t.updateQueue,t!==null&&(t=t.shared,(n&4194048)!==0)){var a=t.lanes;a&=e.pendingLanes,n|=a,t.lanes=n,fa(e,n)}}function co(e,t){var n=e.updateQueue,a=e.alternate;if(a!==null&&(a=a.updateQueue,n===a)){var i=null,r=null;if(n=n.firstBaseUpdate,n!==null){do{var f={lane:n.lane,tag:n.tag,payload:n.payload,callback:null,next:null};r===null?i=r=f:r=r.next=f,n=n.next}while(n!==null);r===null?i=r=t:r=r.next=t}else i=r=t;n={baseState:a.baseState,firstBaseUpdate:i,lastBaseUpdate:r,shared:a.shared,callbacks:a.callbacks},e.updateQueue=n;return}e=n.lastBaseUpdate,e===null?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}var ro=!1;function cs(){if(ro){var e=fi;if(e!==null)throw e}}function rs(e,t,n,a){ro=!1;var i=e.updateQueue;Wa=!1;var r=i.firstBaseUpdate,f=i.lastBaseUpdate,g=i.shared.pending;if(g!==null){i.shared.pending=null;var j=g,k=j.next;j.next=null,f===null?r=k:f.next=k,f=j;var V=e.alternate;V!==null&&(V=V.updateQueue,g=V.lastBaseUpdate,g!==f&&(g===null?V.firstBaseUpdate=k:g.next=k,V.lastBaseUpdate=j))}if(r!==null){var Q=i.baseState;f=0,V=k=j=null,g=r;do{var D=g.lane&-536870913,z=D!==g.lane;if(z?(Ue&D)===D:(a&D)===D){D!==0&&D===di&&(ro=!0),V!==null&&(V=V.next={lane:0,tag:g.tag,payload:g.payload,callback:null,next:null});e:{var re=e,Se=g;D=t;var nt=n;switch(Se.tag){case 1:if(re=Se.payload,typeof re=="function"){Q=re.call(nt,Q,D);break e}Q=re;break e;case 3:re.flags=re.flags&-65537|128;case 0:if(re=Se.payload,D=typeof re=="function"?re.call(nt,Q,D):re,D==null)break e;Q=x({},Q,D);break e;case 2:Wa=!0}}D=g.callback,D!==null&&(e.flags|=64,z&&(e.flags|=8192),z=i.callbacks,z===null?i.callbacks=[D]:z.push(D))}else z={lane:D,tag:g.tag,payload:g.payload,callback:g.callback,next:null},V===null?(k=V=z,j=Q):V=V.next=z,f|=D;if(g=g.next,g===null){if(g=i.shared.pending,g===null)break;z=g,g=z.next,z.next=null,i.lastBaseUpdate=z,i.shared.pending=null}}while(!0);V===null&&(j=Q),i.baseState=j,i.firstBaseUpdate=k,i.lastBaseUpdate=V,r===null&&(i.shared.lanes=0),sl|=f,e.lanes=f,e.memoizedState=Q}}function Ef(e,t){if(typeof e!="function")throw Error(u(191,e));e.call(t)}function Tf(e,t){var n=e.callbacks;if(n!==null)for(e.callbacks=null,e=0;e<n.length;e++)Ef(n[e],t)}var pi=M(null),yc=M(0);function Cf(e,t){e=Ra,J(yc,e),J(pi,t),Ra=e|t.baseLanes}function oo(){J(yc,Ra),J(pi,pi.current)}function uo(){Ra=yc.current,B(pi),B(yc)}var xn=M(null),On=null;function nl(e){var t=e.alternate;J(_t,_t.current&1),J(xn,e),On===null&&(t===null||pi.current!==null||t.memoizedState!==null)&&(On=e)}function fo(e){J(_t,_t.current),J(xn,e),On===null&&(On=e)}function Af(e){e.tag===22?(J(_t,_t.current),J(xn,e),On===null&&(On=e)):al()}function al(){J(_t,_t.current),J(xn,xn.current)}function Sn(e){B(xn),On===e&&(On=null),B(_t)}var _t=M(0);function bc(e){for(var t=e;t!==null;){if(t.tag===13){var n=t.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||yu(n)||bu(n)))return t}else if(t.tag===19&&(t.memoizedProps.revealOrder==="forwards"||t.memoizedProps.revealOrder==="backwards"||t.memoizedProps.revealOrder==="unstable_legacy-backwards"||t.memoizedProps.revealOrder==="together")){if((t.flags&128)!==0)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var Ma=0,De=null,et=null,At=null,xc=!1,vi=!1,Bl=!1,Sc=0,os=0,gi=null,Rg=0;function vt(){throw Error(u(321))}function mo(e,t){if(t===null)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!yn(e[n],t[n]))return!1;return!0}function ho(e,t,n,a,i,r){return Ma=r,De=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,E.H=e===null||e.memoizedState===null?fm:Ao,Bl=!1,r=n(a,i),Bl=!1,vi&&(r=kf(t,n,a,i)),wf(e),r}function wf(e){E.H=fs;var t=et!==null&&et.next!==null;if(Ma=0,At=et=De=null,xc=!1,os=0,gi=null,t)throw Error(u(300));e===null||wt||(e=e.dependencies,e!==null&&dc(e)&&(wt=!0))}function kf(e,t,n,a){De=e;var i=0;do{if(vi&&(gi=null),os=0,vi=!1,25<=i)throw Error(u(301));if(i+=1,At=et=null,e.updateQueue!=null){var r=e.updateQueue;r.lastEffect=null,r.events=null,r.stores=null,r.memoCache!=null&&(r.memoCache.index=0)}E.H=mm,r=t(n,a)}while(vi);return r}function Dg(){var e=E.H,t=e.useState()[0];return t=typeof t.then=="function"?us(t):t,e=e.useState()[0],(et!==null?et.memoizedState:null)!==e&&(De.flags|=1024),t}function po(){var e=Sc!==0;return Sc=0,e}function vo(e,t,n){t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~n}function go(e){if(xc){for(e=e.memoizedState;e!==null;){var t=e.queue;t!==null&&(t.pending=null),e=e.next}xc=!1}Ma=0,At=et=De=null,vi=!1,os=Sc=0,gi=null}function nn(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return At===null?De.memoizedState=At=e:At=At.next=e,At}function jt(){if(et===null){var e=De.alternate;e=e!==null?e.memoizedState:null}else e=et.next;var t=At===null?De.memoizedState:At.next;if(t!==null)At=t,et=e;else{if(e===null)throw De.alternate===null?Error(u(467)):Error(u(310));et=e,e={memoizedState:et.memoizedState,baseState:et.baseState,baseQueue:et.baseQueue,queue:et.queue,next:null},At===null?De.memoizedState=At=e:At=At.next=e}return At}function _c(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function us(e){var t=os;return os+=1,gi===null&&(gi=[]),e=Sf(gi,e,t),t=De,(At===null?t.memoizedState:At.next)===null&&(t=t.alternate,E.H=t===null||t.memoizedState===null?fm:Ao),e}function jc(e){if(e!==null&&typeof e=="object"){if(typeof e.then=="function")return us(e);if(e.$$typeof===ee)return Kt(e)}throw Error(u(438,String(e)))}function yo(e){var t=null,n=De.updateQueue;if(n!==null&&(t=n.memoCache),t==null){var a=De.alternate;a!==null&&(a=a.updateQueue,a!==null&&(a=a.memoCache,a!=null&&(t={data:a.data.map(function(i){return i.slice()}),index:0})))}if(t==null&&(t={data:[],index:0}),n===null&&(n=_c(),De.updateQueue=n),n.memoCache=t,n=t.data[t.index],n===void 0)for(n=t.data[t.index]=Array(e),a=0;a<e;a++)n[a]=ye;return t.index++,n}function Na(e,t){return typeof t=="function"?t(e):t}function Mc(e){var t=jt();return bo(t,et,e)}function bo(e,t,n){var a=e.queue;if(a===null)throw Error(u(311));a.lastRenderedReducer=n;var i=e.baseQueue,r=a.pending;if(r!==null){if(i!==null){var f=i.next;i.next=r.next,r.next=f}t.baseQueue=i=r,a.pending=null}if(r=e.baseState,i===null)e.memoizedState=r;else{t=i.next;var g=f=null,j=null,k=t,V=!1;do{var Q=k.lane&-536870913;if(Q!==k.lane?(Ue&Q)===Q:(Ma&Q)===Q){var D=k.revertLane;if(D===0)j!==null&&(j=j.next={lane:0,revertLane:0,gesture:null,action:k.action,hasEagerState:k.hasEagerState,eagerState:k.eagerState,next:null}),Q===di&&(V=!0);else if((Ma&D)===D){k=k.next,D===di&&(V=!0);continue}else Q={lane:0,revertLane:k.revertLane,gesture:null,action:k.action,hasEagerState:k.hasEagerState,eagerState:k.eagerState,next:null},j===null?(g=j=Q,f=r):j=j.next=Q,De.lanes|=D,sl|=D;Q=k.action,Bl&&n(r,Q),r=k.hasEagerState?k.eagerState:n(r,Q)}else D={lane:Q,revertLane:k.revertLane,gesture:k.gesture,action:k.action,hasEagerState:k.hasEagerState,eagerState:k.eagerState,next:null},j===null?(g=j=D,f=r):j=j.next=D,De.lanes|=Q,sl|=Q;k=k.next}while(k!==null&&k!==t);if(j===null?f=r:j.next=g,!yn(r,e.memoizedState)&&(wt=!0,V&&(n=fi,n!==null)))throw n;e.memoizedState=r,e.baseState=f,e.baseQueue=j,a.lastRenderedState=r}return i===null&&(a.lanes=0),[e.memoizedState,a.dispatch]}function xo(e){var t=jt(),n=t.queue;if(n===null)throw Error(u(311));n.lastRenderedReducer=e;var a=n.dispatch,i=n.pending,r=t.memoizedState;if(i!==null){n.pending=null;var f=i=i.next;do r=e(r,f.action),f=f.next;while(f!==i);yn(r,t.memoizedState)||(wt=!0),t.memoizedState=r,t.baseQueue===null&&(t.baseState=r),n.lastRenderedState=r}return[r,a]}function Rf(e,t,n){var a=De,i=jt(),r=Ye;if(r){if(n===void 0)throw Error(u(407));n=n()}else n=t();var f=!yn((et||i).memoizedState,n);if(f&&(i.memoizedState=n,wt=!0),i=i.queue,jo(Of.bind(null,a,i,e),[e]),i.getSnapshot!==t||f||At!==null&&At.memoizedState.tag&1){if(a.flags|=2048,yi(9,{destroy:void 0},Lf.bind(null,a,i,n,t),null),at===null)throw Error(u(349));r||(Ma&127)!==0||Df(a,t,n)}return n}function Df(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},t=De.updateQueue,t===null?(t=_c(),De.updateQueue=t,t.stores=[e]):(n=t.stores,n===null?t.stores=[e]:n.push(e))}function Lf(e,t,n,a){t.value=n,t.getSnapshot=a,zf(t)&&Bf(e)}function Of(e,t,n){return n(function(){zf(t)&&Bf(e)})}function zf(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!yn(e,n)}catch{return!0}}function Bf(e){var t=Cl(e,2);t!==null&&fn(t,e,2)}function So(e){var t=nn();if(typeof e=="function"){var n=e;if(e=n(),Bl){Ht(!0);try{n()}finally{Ht(!1)}}}return t.memoizedState=t.baseState=e,t.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Na,lastRenderedState:e},t}function qf(e,t,n,a){return e.baseState=n,bo(e,et,typeof a=="function"?a:Na)}function Lg(e,t,n,a,i){if(Tc(e))throw Error(u(485));if(e=t.action,e!==null){var r={payload:i,action:e,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(f){r.listeners.push(f)}};E.T!==null?n(!0):r.isTransition=!1,a(r),n=t.pending,n===null?(r.next=t.pending=r,Hf(t,r)):(r.next=n.next,t.pending=n.next=r)}}function Hf(e,t){var n=t.action,a=t.payload,i=e.state;if(t.isTransition){var r=E.T,f={};E.T=f;try{var g=n(i,a),j=E.S;j!==null&&j(f,g),Uf(e,t,g)}catch(k){_o(e,t,k)}finally{r!==null&&f.types!==null&&(r.types=f.types),E.T=r}}else try{r=n(i,a),Uf(e,t,r)}catch(k){_o(e,t,k)}}function Uf(e,t,n){n!==null&&typeof n=="object"&&typeof n.then=="function"?n.then(function(a){Gf(e,t,a)},function(a){return _o(e,t,a)}):Gf(e,t,n)}function Gf(e,t,n){t.status="fulfilled",t.value=n,Vf(t),e.state=n,t=e.pending,t!==null&&(n=t.next,n===t?e.pending=null:(n=n.next,t.next=n,Hf(e,n)))}function _o(e,t,n){var a=e.pending;if(e.pending=null,a!==null){a=a.next;do t.status="rejected",t.reason=n,Vf(t),t=t.next;while(t!==a)}e.action=null}function Vf(e){e=e.listeners;for(var t=0;t<e.length;t++)(0,e[t])()}function Yf(e,t){return t}function Kf(e,t){if(Ye){var n=at.formState;if(n!==null){e:{var a=De;if(Ye){if(it){t:{for(var i=it,r=Ln;i.nodeType!==8;){if(!r){i=null;break t}if(i=zn(i.nextSibling),i===null){i=null;break t}}r=i.data,i=r==="F!"||r==="F"?i:null}if(i){it=zn(i.nextSibling),a=i.data==="F!";break e}}Fa(a)}a=!1}a&&(t=n[0])}}return n=nn(),n.memoizedState=n.baseState=t,a={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Yf,lastRenderedState:t},n.queue=a,n=om.bind(null,De,a),a.dispatch=n,a=So(!1),r=Co.bind(null,De,!1,a.queue),a=nn(),i={state:t,dispatch:null,action:e,pending:null},a.queue=i,n=Lg.bind(null,De,i,r,n),i.dispatch=n,a.memoizedState=e,[t,n,!1]}function Qf(e){var t=jt();return $f(t,et,e)}function $f(e,t,n){if(t=bo(e,t,Yf)[0],e=Mc(Na)[0],typeof t=="object"&&t!==null&&typeof t.then=="function")try{var a=us(t)}catch(f){throw f===mi?hc:f}else a=t;t=jt();var i=t.queue,r=i.dispatch;return n!==t.memoizedState&&(De.flags|=2048,yi(9,{destroy:void 0},Og.bind(null,i,n),null)),[a,r,e]}function Og(e,t){e.action=t}function Xf(e){var t=jt(),n=et;if(n!==null)return $f(t,n,e);jt(),t=t.memoizedState,n=jt();var a=n.queue.dispatch;return n.memoizedState=e,[t,a,!1]}function yi(e,t,n,a){return e={tag:e,create:n,deps:a,inst:t,next:null},t=De.updateQueue,t===null&&(t=_c(),De.updateQueue=t),n=t.lastEffect,n===null?t.lastEffect=e.next=e:(a=n.next,n.next=e,e.next=a,t.lastEffect=e),e}function Pf(){return jt().memoizedState}function Nc(e,t,n,a){var i=nn();De.flags|=e,i.memoizedState=yi(1|t,{destroy:void 0},n,a===void 0?null:a)}function Ec(e,t,n,a){var i=jt();a=a===void 0?null:a;var r=i.memoizedState.inst;et!==null&&a!==null&&mo(a,et.memoizedState.deps)?i.memoizedState=yi(t,r,n,a):(De.flags|=e,i.memoizedState=yi(1|t,r,n,a))}function Zf(e,t){Nc(8390656,8,e,t)}function jo(e,t){Ec(2048,8,e,t)}function zg(e){De.flags|=4;var t=De.updateQueue;if(t===null)t=_c(),De.updateQueue=t,t.events=[e];else{var n=t.events;n===null?t.events=[e]:n.push(e)}}function Jf(e){var t=jt().memoizedState;return zg({ref:t,nextImpl:e}),function(){if((Ze&2)!==0)throw Error(u(440));return t.impl.apply(void 0,arguments)}}function Ff(e,t){return Ec(4,2,e,t)}function If(e,t){return Ec(4,4,e,t)}function Wf(e,t){if(typeof t=="function"){e=e();var n=t(e);return function(){typeof n=="function"?n():t(null)}}if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function em(e,t,n){n=n!=null?n.concat([e]):null,Ec(4,4,Wf.bind(null,t,e),n)}function Mo(){}function tm(e,t){var n=jt();t=t===void 0?null:t;var a=n.memoizedState;return t!==null&&mo(t,a[1])?a[0]:(n.memoizedState=[e,t],e)}function nm(e,t){var n=jt();t=t===void 0?null:t;var a=n.memoizedState;if(t!==null&&mo(t,a[1]))return a[0];if(a=e(),Bl){Ht(!0);try{e()}finally{Ht(!1)}}return n.memoizedState=[a,t],a}function No(e,t,n){return n===void 0||(Ma&1073741824)!==0&&(Ue&261930)===0?e.memoizedState=t:(e.memoizedState=n,e=ah(),De.lanes|=e,sl|=e,n)}function am(e,t,n,a){return yn(n,t)?n:pi.current!==null?(e=No(e,n,a),yn(e,t)||(wt=!0),e):(Ma&42)===0||(Ma&1073741824)!==0&&(Ue&261930)===0?(wt=!0,e.memoizedState=n):(e=ah(),De.lanes|=e,sl|=e,t)}function lm(e,t,n,a,i){var r=P.p;P.p=r!==0&&8>r?r:8;var f=E.T,g={};E.T=g,Co(e,!1,t,n);try{var j=i(),k=E.S;if(k!==null&&k(g,j),j!==null&&typeof j=="object"&&typeof j.then=="function"){var V=kg(j,a);ds(e,t,V,Mn(e))}else ds(e,t,a,Mn(e))}catch(Q){ds(e,t,{then:function(){},status:"rejected",reason:Q},Mn())}finally{P.p=r,f!==null&&g.types!==null&&(f.types=g.types),E.T=f}}function Bg(){}function Eo(e,t,n,a){if(e.tag!==5)throw Error(u(476));var i=im(e).queue;lm(e,i,t,W,n===null?Bg:function(){return sm(e),n(a)})}function im(e){var t=e.memoizedState;if(t!==null)return t;t={memoizedState:W,baseState:W,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Na,lastRenderedState:W},next:null};var n={};return t.next={memoizedState:n,baseState:n,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Na,lastRenderedState:n},next:null},e.memoizedState=t,e=e.alternate,e!==null&&(e.memoizedState=t),t}function sm(e){var t=im(e);t.next===null&&(t=e.alternate.memoizedState),ds(e,t.next.queue,{},Mn())}function To(){return Kt(Cs)}function cm(){return jt().memoizedState}function rm(){return jt().memoizedState}function qg(e){for(var t=e.return;t!==null;){switch(t.tag){case 24:case 3:var n=Mn();e=el(n);var a=tl(t,e,n);a!==null&&(fn(a,t,n),ss(a,t,n)),t={cache:to()},e.payload=t;return}t=t.return}}function Hg(e,t,n){var a=Mn();n={lane:a,revertLane:0,gesture:null,action:n,hasEagerState:!1,eagerState:null,next:null},Tc(e)?um(t,n):(n=Kr(e,t,n,a),n!==null&&(fn(n,e,a),dm(n,t,a)))}function om(e,t,n){var a=Mn();ds(e,t,n,a)}function ds(e,t,n,a){var i={lane:a,revertLane:0,gesture:null,action:n,hasEagerState:!1,eagerState:null,next:null};if(Tc(e))um(t,i);else{var r=e.alternate;if(e.lanes===0&&(r===null||r.lanes===0)&&(r=t.lastRenderedReducer,r!==null))try{var f=t.lastRenderedState,g=r(f,n);if(i.hasEagerState=!0,i.eagerState=g,yn(g,f))return cc(e,t,i,0),at===null&&sc(),!1}catch{}if(n=Kr(e,t,i,a),n!==null)return fn(n,e,a),dm(n,t,a),!0}return!1}function Co(e,t,n,a){if(a={lane:2,revertLane:su(),gesture:null,action:a,hasEagerState:!1,eagerState:null,next:null},Tc(e)){if(t)throw Error(u(479))}else t=Kr(e,n,a,2),t!==null&&fn(t,e,2)}function Tc(e){var t=e.alternate;return e===De||t!==null&&t===De}function um(e,t){vi=xc=!0;var n=e.pending;n===null?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function dm(e,t,n){if((n&4194048)!==0){var a=t.lanes;a&=e.pendingLanes,n|=a,t.lanes=n,fa(e,n)}}var fs={readContext:Kt,use:jc,useCallback:vt,useContext:vt,useEffect:vt,useImperativeHandle:vt,useLayoutEffect:vt,useInsertionEffect:vt,useMemo:vt,useReducer:vt,useRef:vt,useState:vt,useDebugValue:vt,useDeferredValue:vt,useTransition:vt,useSyncExternalStore:vt,useId:vt,useHostTransitionStatus:vt,useFormState:vt,useActionState:vt,useOptimistic:vt,useMemoCache:vt,useCacheRefresh:vt};fs.useEffectEvent=vt;var fm={readContext:Kt,use:jc,useCallback:function(e,t){return nn().memoizedState=[e,t===void 0?null:t],e},useContext:Kt,useEffect:Zf,useImperativeHandle:function(e,t,n){n=n!=null?n.concat([e]):null,Nc(4194308,4,Wf.bind(null,t,e),n)},useLayoutEffect:function(e,t){return Nc(4194308,4,e,t)},useInsertionEffect:function(e,t){Nc(4,2,e,t)},useMemo:function(e,t){var n=nn();t=t===void 0?null:t;var a=e();if(Bl){Ht(!0);try{e()}finally{Ht(!1)}}return n.memoizedState=[a,t],a},useReducer:function(e,t,n){var a=nn();if(n!==void 0){var i=n(t);if(Bl){Ht(!0);try{n(t)}finally{Ht(!1)}}}else i=t;return a.memoizedState=a.baseState=i,e={pending:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:i},a.queue=e,e=e.dispatch=Hg.bind(null,De,e),[a.memoizedState,e]},useRef:function(e){var t=nn();return e={current:e},t.memoizedState=e},useState:function(e){e=So(e);var t=e.queue,n=om.bind(null,De,t);return t.dispatch=n,[e.memoizedState,n]},useDebugValue:Mo,useDeferredValue:function(e,t){var n=nn();return No(n,e,t)},useTransition:function(){var e=So(!1);return e=lm.bind(null,De,e.queue,!0,!1),nn().memoizedState=e,[!1,e]},useSyncExternalStore:function(e,t,n){var a=De,i=nn();if(Ye){if(n===void 0)throw Error(u(407));n=n()}else{if(n=t(),at===null)throw Error(u(349));(Ue&127)!==0||Df(a,t,n)}i.memoizedState=n;var r={value:n,getSnapshot:t};return i.queue=r,Zf(Of.bind(null,a,r,e),[e]),a.flags|=2048,yi(9,{destroy:void 0},Lf.bind(null,a,r,n,t),null),n},useId:function(){var e=nn(),t=at.identifierPrefix;if(Ye){var n=ia,a=la;n=(a&~(1<<32-xt(a)-1)).toString(32)+n,t="_"+t+"R_"+n,n=Sc++,0<n&&(t+="H"+n.toString(32)),t+="_"}else n=Rg++,t="_"+t+"r_"+n.toString(32)+"_";return e.memoizedState=t},useHostTransitionStatus:To,useFormState:Kf,useActionState:Kf,useOptimistic:function(e){var t=nn();t.memoizedState=t.baseState=e;var n={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return t.queue=n,t=Co.bind(null,De,!0,n),n.dispatch=t,[e,t]},useMemoCache:yo,useCacheRefresh:function(){return nn().memoizedState=qg.bind(null,De)},useEffectEvent:function(e){var t=nn(),n={impl:e};return t.memoizedState=n,function(){if((Ze&2)!==0)throw Error(u(440));return n.impl.apply(void 0,arguments)}}},Ao={readContext:Kt,use:jc,useCallback:tm,useContext:Kt,useEffect:jo,useImperativeHandle:em,useInsertionEffect:Ff,useLayoutEffect:If,useMemo:nm,useReducer:Mc,useRef:Pf,useState:function(){return Mc(Na)},useDebugValue:Mo,useDeferredValue:function(e,t){var n=jt();return am(n,et.memoizedState,e,t)},useTransition:function(){var e=Mc(Na)[0],t=jt().memoizedState;return[typeof e=="boolean"?e:us(e),t]},useSyncExternalStore:Rf,useId:cm,useHostTransitionStatus:To,useFormState:Qf,useActionState:Qf,useOptimistic:function(e,t){var n=jt();return qf(n,et,e,t)},useMemoCache:yo,useCacheRefresh:rm};Ao.useEffectEvent=Jf;var mm={readContext:Kt,use:jc,useCallback:tm,useContext:Kt,useEffect:jo,useImperativeHandle:em,useInsertionEffect:Ff,useLayoutEffect:If,useMemo:nm,useReducer:xo,useRef:Pf,useState:function(){return xo(Na)},useDebugValue:Mo,useDeferredValue:function(e,t){var n=jt();return et===null?No(n,e,t):am(n,et.memoizedState,e,t)},useTransition:function(){var e=xo(Na)[0],t=jt().memoizedState;return[typeof e=="boolean"?e:us(e),t]},useSyncExternalStore:Rf,useId:cm,useHostTransitionStatus:To,useFormState:Xf,useActionState:Xf,useOptimistic:function(e,t){var n=jt();return et!==null?qf(n,et,e,t):(n.baseState=e,[e,n.queue.dispatch])},useMemoCache:yo,useCacheRefresh:rm};mm.useEffectEvent=Jf;function wo(e,t,n,a){t=e.memoizedState,n=n(a,t),n=n==null?t:x({},t,n),e.memoizedState=n,e.lanes===0&&(e.updateQueue.baseState=n)}var ko={enqueueSetState:function(e,t,n){e=e._reactInternals;var a=Mn(),i=el(a);i.payload=t,n!=null&&(i.callback=n),t=tl(e,i,a),t!==null&&(fn(t,e,a),ss(t,e,a))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var a=Mn(),i=el(a);i.tag=1,i.payload=t,n!=null&&(i.callback=n),t=tl(e,i,a),t!==null&&(fn(t,e,a),ss(t,e,a))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=Mn(),a=el(n);a.tag=2,t!=null&&(a.callback=t),t=tl(e,a,n),t!==null&&(fn(t,e,n),ss(t,e,n))}};function hm(e,t,n,a,i,r,f){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(a,r,f):t.prototype&&t.prototype.isPureReactComponent?!Ii(n,a)||!Ii(i,r):!0}function pm(e,t,n,a){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(n,a),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(n,a),t.state!==e&&ko.enqueueReplaceState(t,t.state,null)}function ql(e,t){var n=t;if("ref"in t){n={};for(var a in t)a!=="ref"&&(n[a]=t[a])}if(e=e.defaultProps){n===t&&(n=x({},n));for(var i in e)n[i]===void 0&&(n[i]=e[i])}return n}function vm(e){ic(e)}function gm(e){console.error(e)}function ym(e){ic(e)}function Cc(e,t){try{var n=e.onUncaughtError;n(t.value,{componentStack:t.stack})}catch(a){setTimeout(function(){throw a})}}function bm(e,t,n){try{var a=e.onCaughtError;a(n.value,{componentStack:n.stack,errorBoundary:t.tag===1?t.stateNode:null})}catch(i){setTimeout(function(){throw i})}}function Ro(e,t,n){return n=el(n),n.tag=3,n.payload={element:null},n.callback=function(){Cc(e,t)},n}function xm(e){return e=el(e),e.tag=3,e}function Sm(e,t,n,a){var i=n.type.getDerivedStateFromError;if(typeof i=="function"){var r=a.value;e.payload=function(){return i(r)},e.callback=function(){bm(t,n,a)}}var f=n.stateNode;f!==null&&typeof f.componentDidCatch=="function"&&(e.callback=function(){bm(t,n,a),typeof i!="function"&&(cl===null?cl=new Set([this]):cl.add(this));var g=a.stack;this.componentDidCatch(a.value,{componentStack:g!==null?g:""})})}function Ug(e,t,n,a,i){if(n.flags|=32768,a!==null&&typeof a=="object"&&typeof a.then=="function"){if(t=n.alternate,t!==null&&ui(t,n,i,!0),n=xn.current,n!==null){switch(n.tag){case 31:case 13:return On===null?Uc():n.alternate===null&&gt===0&&(gt=3),n.flags&=-257,n.flags|=65536,n.lanes=i,a===pc?n.flags|=16384:(t=n.updateQueue,t===null?n.updateQueue=new Set([a]):t.add(a),au(e,a,i)),!1;case 22:return n.flags|=65536,a===pc?n.flags|=16384:(t=n.updateQueue,t===null?(t={transitions:null,markerInstances:null,retryQueue:new Set([a])},n.updateQueue=t):(n=t.retryQueue,n===null?t.retryQueue=new Set([a]):n.add(a)),au(e,a,i)),!1}throw Error(u(435,n.tag))}return au(e,a,i),Uc(),!1}if(Ye)return t=xn.current,t!==null?((t.flags&65536)===0&&(t.flags|=256),t.flags|=65536,t.lanes=i,a!==Jr&&(e=Error(u(422),{cause:a}),ts(kn(e,n)))):(a!==Jr&&(t=Error(u(423),{cause:a}),ts(kn(t,n))),e=e.current.alternate,e.flags|=65536,i&=-i,e.lanes|=i,a=kn(a,n),i=Ro(e.stateNode,a,i),co(e,i),gt!==4&&(gt=2)),!1;var r=Error(u(520),{cause:a});if(r=kn(r,n),xs===null?xs=[r]:xs.push(r),gt!==4&&(gt=2),t===null)return!0;a=kn(a,n),n=t;do{switch(n.tag){case 3:return n.flags|=65536,e=i&-i,n.lanes|=e,e=Ro(n.stateNode,a,e),co(n,e),!1;case 1:if(t=n.type,r=n.stateNode,(n.flags&128)===0&&(typeof t.getDerivedStateFromError=="function"||r!==null&&typeof r.componentDidCatch=="function"&&(cl===null||!cl.has(r))))return n.flags|=65536,i&=-i,n.lanes|=i,i=xm(i),Sm(i,e,n,a),co(n,i),!1}n=n.return}while(n!==null);return!1}var Do=Error(u(461)),wt=!1;function Qt(e,t,n,a){t.child=e===null?Nf(t,null,n,a):zl(t,e.child,n,a)}function _m(e,t,n,a,i){n=n.render;var r=t.ref;if("ref"in a){var f={};for(var g in a)g!=="ref"&&(f[g]=a[g])}else f=a;return Rl(t),a=ho(e,t,n,f,r,i),g=po(),e!==null&&!wt?(vo(e,t,i),Ea(e,t,i)):(Ye&&g&&Pr(t),t.flags|=1,Qt(e,t,a,i),t.child)}function jm(e,t,n,a,i){if(e===null){var r=n.type;return typeof r=="function"&&!Qr(r)&&r.defaultProps===void 0&&n.compare===null?(t.tag=15,t.type=r,Mm(e,t,r,a,i)):(e=oc(n.type,null,a,t,t.mode,i),e.ref=t.ref,e.return=t,t.child=e)}if(r=e.child,!Go(e,i)){var f=r.memoizedProps;if(n=n.compare,n=n!==null?n:Ii,n(f,a)&&e.ref===t.ref)return Ea(e,t,i)}return t.flags|=1,e=xa(r,a),e.ref=t.ref,e.return=t,t.child=e}function Mm(e,t,n,a,i){if(e!==null){var r=e.memoizedProps;if(Ii(r,a)&&e.ref===t.ref)if(wt=!1,t.pendingProps=a=r,Go(e,i))(e.flags&131072)!==0&&(wt=!0);else return t.lanes=e.lanes,Ea(e,t,i)}return Lo(e,t,n,a,i)}function Nm(e,t,n,a){var i=a.children,r=e!==null?e.memoizedState:null;if(e===null&&t.stateNode===null&&(t.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),a.mode==="hidden"){if((t.flags&128)!==0){if(r=r!==null?r.baseLanes|n:n,e!==null){for(a=t.child=e.child,i=0;a!==null;)i=i|a.lanes|a.childLanes,a=a.sibling;a=i&~r}else a=0,t.child=null;return Em(e,t,r,n,a)}if((n&536870912)!==0)t.memoizedState={baseLanes:0,cachePool:null},e!==null&&mc(t,r!==null?r.cachePool:null),r!==null?Cf(t,r):oo(),Af(t);else return a=t.lanes=536870912,Em(e,t,r!==null?r.baseLanes|n:n,n,a)}else r!==null?(mc(t,r.cachePool),Cf(t,r),al(),t.memoizedState=null):(e!==null&&mc(t,null),oo(),al());return Qt(e,t,i,n),t.child}function ms(e,t){return e!==null&&e.tag===22||t.stateNode!==null||(t.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),t.sibling}function Em(e,t,n,a,i){var r=ao();return r=r===null?null:{parent:Ct._currentValue,pool:r},t.memoizedState={baseLanes:n,cachePool:r},e!==null&&mc(t,null),oo(),Af(t),e!==null&&ui(e,t,a,!0),t.childLanes=i,null}function Ac(e,t){return t=kc({mode:t.mode,children:t.children},e.mode),t.ref=e.ref,e.child=t,t.return=e,t}function Tm(e,t,n){return zl(t,e.child,null,n),e=Ac(t,t.pendingProps),e.flags|=2,Sn(t),t.memoizedState=null,e}function Gg(e,t,n){var a=t.pendingProps,i=(t.flags&128)!==0;if(t.flags&=-129,e===null){if(Ye){if(a.mode==="hidden")return e=Ac(t,a),t.lanes=536870912,ms(null,e);if(fo(t),(e=it)?(e=Hh(e,Ln),e=e!==null&&e.data==="&"?e:null,e!==null&&(t.memoizedState={dehydrated:e,treeContext:Za!==null?{id:la,overflow:ia}:null,retryLane:536870912,hydrationErrors:null},n=uf(e),n.return=t,t.child=n,Yt=t,it=null)):e=null,e===null)throw Fa(t);return t.lanes=536870912,null}return Ac(t,a)}var r=e.memoizedState;if(r!==null){var f=r.dehydrated;if(fo(t),i)if(t.flags&256)t.flags&=-257,t=Tm(e,t,n);else if(t.memoizedState!==null)t.child=e.child,t.flags|=128,t=null;else throw Error(u(558));else if(wt||ui(e,t,n,!1),i=(n&e.childLanes)!==0,wt||i){if(a=at,a!==null&&(f=ma(a,n),f!==0&&f!==r.retryLane))throw r.retryLane=f,Cl(e,f),fn(a,e,f),Do;Uc(),t=Tm(e,t,n)}else e=r.treeContext,it=zn(f.nextSibling),Yt=t,Ye=!0,Ja=null,Ln=!1,e!==null&&mf(t,e),t=Ac(t,a),t.flags|=4096;return t}return e=xa(e.child,{mode:a.mode,children:a.children}),e.ref=t.ref,t.child=e,e.return=t,e}function wc(e,t){var n=t.ref;if(n===null)e!==null&&e.ref!==null&&(t.flags|=4194816);else{if(typeof n!="function"&&typeof n!="object")throw Error(u(284));(e===null||e.ref!==n)&&(t.flags|=4194816)}}function Lo(e,t,n,a,i){return Rl(t),n=ho(e,t,n,a,void 0,i),a=po(),e!==null&&!wt?(vo(e,t,i),Ea(e,t,i)):(Ye&&a&&Pr(t),t.flags|=1,Qt(e,t,n,i),t.child)}function Cm(e,t,n,a,i,r){return Rl(t),t.updateQueue=null,n=kf(t,a,n,i),wf(e),a=po(),e!==null&&!wt?(vo(e,t,r),Ea(e,t,r)):(Ye&&a&&Pr(t),t.flags|=1,Qt(e,t,n,r),t.child)}function Am(e,t,n,a,i){if(Rl(t),t.stateNode===null){var r=si,f=n.contextType;typeof f=="object"&&f!==null&&(r=Kt(f)),r=new n(a,r),t.memoizedState=r.state!==null&&r.state!==void 0?r.state:null,r.updater=ko,t.stateNode=r,r._reactInternals=t,r=t.stateNode,r.props=a,r.state=t.memoizedState,r.refs={},io(t),f=n.contextType,r.context=typeof f=="object"&&f!==null?Kt(f):si,r.state=t.memoizedState,f=n.getDerivedStateFromProps,typeof f=="function"&&(wo(t,n,f,a),r.state=t.memoizedState),typeof n.getDerivedStateFromProps=="function"||typeof r.getSnapshotBeforeUpdate=="function"||typeof r.UNSAFE_componentWillMount!="function"&&typeof r.componentWillMount!="function"||(f=r.state,typeof r.componentWillMount=="function"&&r.componentWillMount(),typeof r.UNSAFE_componentWillMount=="function"&&r.UNSAFE_componentWillMount(),f!==r.state&&ko.enqueueReplaceState(r,r.state,null),rs(t,a,r,i),cs(),r.state=t.memoizedState),typeof r.componentDidMount=="function"&&(t.flags|=4194308),a=!0}else if(e===null){r=t.stateNode;var g=t.memoizedProps,j=ql(n,g);r.props=j;var k=r.context,V=n.contextType;f=si,typeof V=="object"&&V!==null&&(f=Kt(V));var Q=n.getDerivedStateFromProps;V=typeof Q=="function"||typeof r.getSnapshotBeforeUpdate=="function",g=t.pendingProps!==g,V||typeof r.UNSAFE_componentWillReceiveProps!="function"&&typeof r.componentWillReceiveProps!="function"||(g||k!==f)&&pm(t,r,a,f),Wa=!1;var D=t.memoizedState;r.state=D,rs(t,a,r,i),cs(),k=t.memoizedState,g||D!==k||Wa?(typeof Q=="function"&&(wo(t,n,Q,a),k=t.memoizedState),(j=Wa||hm(t,n,j,a,D,k,f))?(V||typeof r.UNSAFE_componentWillMount!="function"&&typeof r.componentWillMount!="function"||(typeof r.componentWillMount=="function"&&r.componentWillMount(),typeof r.UNSAFE_componentWillMount=="function"&&r.UNSAFE_componentWillMount()),typeof r.componentDidMount=="function"&&(t.flags|=4194308)):(typeof r.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=a,t.memoizedState=k),r.props=a,r.state=k,r.context=f,a=j):(typeof r.componentDidMount=="function"&&(t.flags|=4194308),a=!1)}else{r=t.stateNode,so(e,t),f=t.memoizedProps,V=ql(n,f),r.props=V,Q=t.pendingProps,D=r.context,k=n.contextType,j=si,typeof k=="object"&&k!==null&&(j=Kt(k)),g=n.getDerivedStateFromProps,(k=typeof g=="function"||typeof r.getSnapshotBeforeUpdate=="function")||typeof r.UNSAFE_componentWillReceiveProps!="function"&&typeof r.componentWillReceiveProps!="function"||(f!==Q||D!==j)&&pm(t,r,a,j),Wa=!1,D=t.memoizedState,r.state=D,rs(t,a,r,i),cs();var z=t.memoizedState;f!==Q||D!==z||Wa||e!==null&&e.dependencies!==null&&dc(e.dependencies)?(typeof g=="function"&&(wo(t,n,g,a),z=t.memoizedState),(V=Wa||hm(t,n,V,a,D,z,j)||e!==null&&e.dependencies!==null&&dc(e.dependencies))?(k||typeof r.UNSAFE_componentWillUpdate!="function"&&typeof r.componentWillUpdate!="function"||(typeof r.componentWillUpdate=="function"&&r.componentWillUpdate(a,z,j),typeof r.UNSAFE_componentWillUpdate=="function"&&r.UNSAFE_componentWillUpdate(a,z,j)),typeof r.componentDidUpdate=="function"&&(t.flags|=4),typeof r.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof r.componentDidUpdate!="function"||f===e.memoizedProps&&D===e.memoizedState||(t.flags|=4),typeof r.getSnapshotBeforeUpdate!="function"||f===e.memoizedProps&&D===e.memoizedState||(t.flags|=1024),t.memoizedProps=a,t.memoizedState=z),r.props=a,r.state=z,r.context=j,a=V):(typeof r.componentDidUpdate!="function"||f===e.memoizedProps&&D===e.memoizedState||(t.flags|=4),typeof r.getSnapshotBeforeUpdate!="function"||f===e.memoizedProps&&D===e.memoizedState||(t.flags|=1024),a=!1)}return r=a,wc(e,t),a=(t.flags&128)!==0,r||a?(r=t.stateNode,n=a&&typeof n.getDerivedStateFromError!="function"?null:r.render(),t.flags|=1,e!==null&&a?(t.child=zl(t,e.child,null,i),t.child=zl(t,null,n,i)):Qt(e,t,n,i),t.memoizedState=r.state,e=t.child):e=Ea(e,t,i),e}function wm(e,t,n,a){return wl(),t.flags|=256,Qt(e,t,n,a),t.child}var Oo={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function zo(e){return{baseLanes:e,cachePool:bf()}}function Bo(e,t,n){return e=e!==null?e.childLanes&~n:0,t&&(e|=jn),e}function km(e,t,n){var a=t.pendingProps,i=!1,r=(t.flags&128)!==0,f;if((f=r)||(f=e!==null&&e.memoizedState===null?!1:(_t.current&2)!==0),f&&(i=!0,t.flags&=-129),f=(t.flags&32)!==0,t.flags&=-33,e===null){if(Ye){if(i?nl(t):al(),(e=it)?(e=Hh(e,Ln),e=e!==null&&e.data!=="&"?e:null,e!==null&&(t.memoizedState={dehydrated:e,treeContext:Za!==null?{id:la,overflow:ia}:null,retryLane:536870912,hydrationErrors:null},n=uf(e),n.return=t,t.child=n,Yt=t,it=null)):e=null,e===null)throw Fa(t);return bu(e)?t.lanes=32:t.lanes=536870912,null}var g=a.children;return a=a.fallback,i?(al(),i=t.mode,g=kc({mode:"hidden",children:g},i),a=Al(a,i,n,null),g.return=t,a.return=t,g.sibling=a,t.child=g,a=t.child,a.memoizedState=zo(n),a.childLanes=Bo(e,f,n),t.memoizedState=Oo,ms(null,a)):(nl(t),qo(t,g))}var j=e.memoizedState;if(j!==null&&(g=j.dehydrated,g!==null)){if(r)t.flags&256?(nl(t),t.flags&=-257,t=Ho(e,t,n)):t.memoizedState!==null?(al(),t.child=e.child,t.flags|=128,t=null):(al(),g=a.fallback,i=t.mode,a=kc({mode:"visible",children:a.children},i),g=Al(g,i,n,null),g.flags|=2,a.return=t,g.return=t,a.sibling=g,t.child=a,zl(t,e.child,null,n),a=t.child,a.memoizedState=zo(n),a.childLanes=Bo(e,f,n),t.memoizedState=Oo,t=ms(null,a));else if(nl(t),bu(g)){if(f=g.nextSibling&&g.nextSibling.dataset,f)var k=f.dgst;f=k,a=Error(u(419)),a.stack="",a.digest=f,ts({value:a,source:null,stack:null}),t=Ho(e,t,n)}else if(wt||ui(e,t,n,!1),f=(n&e.childLanes)!==0,wt||f){if(f=at,f!==null&&(a=ma(f,n),a!==0&&a!==j.retryLane))throw j.retryLane=a,Cl(e,a),fn(f,e,a),Do;yu(g)||Uc(),t=Ho(e,t,n)}else yu(g)?(t.flags|=192,t.child=e.child,t=null):(e=j.treeContext,it=zn(g.nextSibling),Yt=t,Ye=!0,Ja=null,Ln=!1,e!==null&&mf(t,e),t=qo(t,a.children),t.flags|=4096);return t}return i?(al(),g=a.fallback,i=t.mode,j=e.child,k=j.sibling,a=xa(j,{mode:"hidden",children:a.children}),a.subtreeFlags=j.subtreeFlags&65011712,k!==null?g=xa(k,g):(g=Al(g,i,n,null),g.flags|=2),g.return=t,a.return=t,a.sibling=g,t.child=a,ms(null,a),a=t.child,g=e.child.memoizedState,g===null?g=zo(n):(i=g.cachePool,i!==null?(j=Ct._currentValue,i=i.parent!==j?{parent:j,pool:j}:i):i=bf(),g={baseLanes:g.baseLanes|n,cachePool:i}),a.memoizedState=g,a.childLanes=Bo(e,f,n),t.memoizedState=Oo,ms(e.child,a)):(nl(t),n=e.child,e=n.sibling,n=xa(n,{mode:"visible",children:a.children}),n.return=t,n.sibling=null,e!==null&&(f=t.deletions,f===null?(t.deletions=[e],t.flags|=16):f.push(e)),t.child=n,t.memoizedState=null,n)}function qo(e,t){return t=kc({mode:"visible",children:t},e.mode),t.return=e,e.child=t}function kc(e,t){return e=bn(22,e,null,t),e.lanes=0,e}function Ho(e,t,n){return zl(t,e.child,null,n),e=qo(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function Rm(e,t,n){e.lanes|=t;var a=e.alternate;a!==null&&(a.lanes|=t),Wr(e.return,t,n)}function Uo(e,t,n,a,i,r){var f=e.memoizedState;f===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:a,tail:n,tailMode:i,treeForkCount:r}:(f.isBackwards=t,f.rendering=null,f.renderingStartTime=0,f.last=a,f.tail=n,f.tailMode=i,f.treeForkCount=r)}function Dm(e,t,n){var a=t.pendingProps,i=a.revealOrder,r=a.tail;a=a.children;var f=_t.current,g=(f&2)!==0;if(g?(f=f&1|2,t.flags|=128):f&=1,J(_t,f),Qt(e,t,a,n),a=Ye?es:0,!g&&e!==null&&(e.flags&128)!==0)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&Rm(e,n,t);else if(e.tag===19)Rm(e,n,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}switch(i){case"forwards":for(n=t.child,i=null;n!==null;)e=n.alternate,e!==null&&bc(e)===null&&(i=n),n=n.sibling;n=i,n===null?(i=t.child,t.child=null):(i=n.sibling,n.sibling=null),Uo(t,!1,i,n,r,a);break;case"backwards":case"unstable_legacy-backwards":for(n=null,i=t.child,t.child=null;i!==null;){if(e=i.alternate,e!==null&&bc(e)===null){t.child=i;break}e=i.sibling,i.sibling=n,n=i,i=e}Uo(t,!0,n,null,r,a);break;case"together":Uo(t,!1,null,null,void 0,a);break;default:t.memoizedState=null}return t.child}function Ea(e,t,n){if(e!==null&&(t.dependencies=e.dependencies),sl|=t.lanes,(n&t.childLanes)===0)if(e!==null){if(ui(e,t,n,!1),(n&t.childLanes)===0)return null}else return null;if(e!==null&&t.child!==e.child)throw Error(u(153));if(t.child!==null){for(e=t.child,n=xa(e,e.pendingProps),t.child=n,n.return=t;e.sibling!==null;)e=e.sibling,n=n.sibling=xa(e,e.pendingProps),n.return=t;n.sibling=null}return t.child}function Go(e,t){return(e.lanes&t)!==0?!0:(e=e.dependencies,!!(e!==null&&dc(e)))}function Vg(e,t,n){switch(t.tag){case 3:Be(t,t.stateNode.containerInfo),Ia(t,Ct,e.memoizedState.cache),wl();break;case 27:case 5:yt(t);break;case 4:Be(t,t.stateNode.containerInfo);break;case 10:Ia(t,t.type,t.memoizedProps.value);break;case 31:if(t.memoizedState!==null)return t.flags|=128,fo(t),null;break;case 13:var a=t.memoizedState;if(a!==null)return a.dehydrated!==null?(nl(t),t.flags|=128,null):(n&t.child.childLanes)!==0?km(e,t,n):(nl(t),e=Ea(e,t,n),e!==null?e.sibling:null);nl(t);break;case 19:var i=(e.flags&128)!==0;if(a=(n&t.childLanes)!==0,a||(ui(e,t,n,!1),a=(n&t.childLanes)!==0),i){if(a)return Dm(e,t,n);t.flags|=128}if(i=t.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),J(_t,_t.current),a)break;return null;case 22:return t.lanes=0,Nm(e,t,n,t.pendingProps);case 24:Ia(t,Ct,e.memoizedState.cache)}return Ea(e,t,n)}function Lm(e,t,n){if(e!==null)if(e.memoizedProps!==t.pendingProps)wt=!0;else{if(!Go(e,n)&&(t.flags&128)===0)return wt=!1,Vg(e,t,n);wt=(e.flags&131072)!==0}else wt=!1,Ye&&(t.flags&1048576)!==0&&ff(t,es,t.index);switch(t.lanes=0,t.tag){case 16:e:{var a=t.pendingProps;if(e=Ll(t.elementType),t.type=e,typeof e=="function")Qr(e)?(a=ql(e,a),t.tag=1,t=Am(null,t,e,a,n)):(t.tag=0,t=Lo(null,t,e,a,n));else{if(e!=null){var i=e.$$typeof;if(i===oe){t.tag=11,t=_m(null,t,e,a,n);break e}else if(i===ie){t.tag=14,t=jm(null,t,e,a,n);break e}}throw t=he(e)||e,Error(u(306,t,""))}}return t;case 0:return Lo(e,t,t.type,t.pendingProps,n);case 1:return a=t.type,i=ql(a,t.pendingProps),Am(e,t,a,i,n);case 3:e:{if(Be(t,t.stateNode.containerInfo),e===null)throw Error(u(387));a=t.pendingProps;var r=t.memoizedState;i=r.element,so(e,t),rs(t,a,null,n);var f=t.memoizedState;if(a=f.cache,Ia(t,Ct,a),a!==r.cache&&eo(t,[Ct],n,!0),cs(),a=f.element,r.isDehydrated)if(r={element:a,isDehydrated:!1,cache:f.cache},t.updateQueue.baseState=r,t.memoizedState=r,t.flags&256){t=wm(e,t,a,n);break e}else if(a!==i){i=kn(Error(u(424)),t),ts(i),t=wm(e,t,a,n);break e}else for(e=t.stateNode.containerInfo,e.nodeType===9?e=e.body:e=e.nodeName==="HTML"?e.ownerDocument.body:e,it=zn(e.firstChild),Yt=t,Ye=!0,Ja=null,Ln=!0,n=Nf(t,null,a,n),t.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(wl(),a===i){t=Ea(e,t,n);break e}Qt(e,t,a,n)}t=t.child}return t;case 26:return wc(e,t),e===null?(n=Qh(t.type,null,t.pendingProps,null))?t.memoizedState=n:Ye||(n=t.type,e=t.pendingProps,a=Xc(I.current).createElement(n),a[Lt]=t,a[Ut]=e,$t(a,n,e),ut(a),t.stateNode=a):t.memoizedState=Qh(t.type,e.memoizedProps,t.pendingProps,e.memoizedState),null;case 27:return yt(t),e===null&&Ye&&(a=t.stateNode=Vh(t.type,t.pendingProps,I.current),Yt=t,Ln=!0,i=it,dl(t.type)?(xu=i,it=zn(a.firstChild)):it=i),Qt(e,t,t.pendingProps.children,n),wc(e,t),e===null&&(t.flags|=4194304),t.child;case 5:return e===null&&Ye&&((i=a=it)&&(a=yy(a,t.type,t.pendingProps,Ln),a!==null?(t.stateNode=a,Yt=t,it=zn(a.firstChild),Ln=!1,i=!0):i=!1),i||Fa(t)),yt(t),i=t.type,r=t.pendingProps,f=e!==null?e.memoizedProps:null,a=r.children,pu(i,r)?a=null:f!==null&&pu(i,f)&&(t.flags|=32),t.memoizedState!==null&&(i=ho(e,t,Dg,null,null,n),Cs._currentValue=i),wc(e,t),Qt(e,t,a,n),t.child;case 6:return e===null&&Ye&&((e=n=it)&&(n=by(n,t.pendingProps,Ln),n!==null?(t.stateNode=n,Yt=t,it=null,e=!0):e=!1),e||Fa(t)),null;case 13:return km(e,t,n);case 4:return Be(t,t.stateNode.containerInfo),a=t.pendingProps,e===null?t.child=zl(t,null,a,n):Qt(e,t,a,n),t.child;case 11:return _m(e,t,t.type,t.pendingProps,n);case 7:return Qt(e,t,t.pendingProps,n),t.child;case 8:return Qt(e,t,t.pendingProps.children,n),t.child;case 12:return Qt(e,t,t.pendingProps.children,n),t.child;case 10:return a=t.pendingProps,Ia(t,t.type,a.value),Qt(e,t,a.children,n),t.child;case 9:return i=t.type._context,a=t.pendingProps.children,Rl(t),i=Kt(i),a=a(i),t.flags|=1,Qt(e,t,a,n),t.child;case 14:return jm(e,t,t.type,t.pendingProps,n);case 15:return Mm(e,t,t.type,t.pendingProps,n);case 19:return Dm(e,t,n);case 31:return Gg(e,t,n);case 22:return Nm(e,t,n,t.pendingProps);case 24:return Rl(t),a=Kt(Ct),e===null?(i=ao(),i===null&&(i=at,r=to(),i.pooledCache=r,r.refCount++,r!==null&&(i.pooledCacheLanes|=n),i=r),t.memoizedState={parent:a,cache:i},io(t),Ia(t,Ct,i)):((e.lanes&n)!==0&&(so(e,t),rs(t,null,null,n),cs()),i=e.memoizedState,r=t.memoizedState,i.parent!==a?(i={parent:a,cache:a},t.memoizedState=i,t.lanes===0&&(t.memoizedState=t.updateQueue.baseState=i),Ia(t,Ct,a)):(a=r.cache,Ia(t,Ct,a),a!==i.cache&&eo(t,[Ct],n,!0))),Qt(e,t,t.pendingProps.children,n),t.child;case 29:throw t.pendingProps}throw Error(u(156,t.tag))}function Ta(e){e.flags|=4}function Vo(e,t,n,a,i){if((t=(e.mode&32)!==0)&&(t=!1),t){if(e.flags|=16777216,(i&335544128)===i)if(e.stateNode.complete)e.flags|=8192;else if(ch())e.flags|=8192;else throw Ol=pc,lo}else e.flags&=-16777217}function Om(e,t){if(t.type!=="stylesheet"||(t.state.loading&4)!==0)e.flags&=-16777217;else if(e.flags|=16777216,!Jh(t))if(ch())e.flags|=8192;else throw Ol=pc,lo}function Rc(e,t){t!==null&&(e.flags|=4),e.flags&16384&&(t=e.tag!==22?da():536870912,e.lanes|=t,_i|=t)}function hs(e,t){if(!Ye)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;t!==null;)t.alternate!==null&&(n=t),t=t.sibling;n===null?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var a=null;n!==null;)n.alternate!==null&&(a=n),n=n.sibling;a===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:a.sibling=null}}function st(e){var t=e.alternate!==null&&e.alternate.child===e.child,n=0,a=0;if(t)for(var i=e.child;i!==null;)n|=i.lanes|i.childLanes,a|=i.subtreeFlags&65011712,a|=i.flags&65011712,i.return=e,i=i.sibling;else for(i=e.child;i!==null;)n|=i.lanes|i.childLanes,a|=i.subtreeFlags,a|=i.flags,i.return=e,i=i.sibling;return e.subtreeFlags|=a,e.childLanes=n,t}function Yg(e,t,n){var a=t.pendingProps;switch(Zr(t),t.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return st(t),null;case 1:return st(t),null;case 3:return n=t.stateNode,a=null,e!==null&&(a=e.memoizedState.cache),t.memoizedState.cache!==a&&(t.flags|=2048),ja(Ct),ze(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),(e===null||e.child===null)&&(oi(t)?Ta(t):e===null||e.memoizedState.isDehydrated&&(t.flags&256)===0||(t.flags|=1024,Fr())),st(t),null;case 26:var i=t.type,r=t.memoizedState;return e===null?(Ta(t),r!==null?(st(t),Om(t,r)):(st(t),Vo(t,i,null,a,n))):r?r!==e.memoizedState?(Ta(t),st(t),Om(t,r)):(st(t),t.flags&=-16777217):(e=e.memoizedProps,e!==a&&Ta(t),st(t),Vo(t,i,e,a,n)),null;case 27:if(Oe(t),n=I.current,i=t.type,e!==null&&t.stateNode!=null)e.memoizedProps!==a&&Ta(t);else{if(!a){if(t.stateNode===null)throw Error(u(166));return st(t),null}e=te.current,oi(t)?hf(t):(e=Vh(i,a,n),t.stateNode=e,Ta(t))}return st(t),null;case 5:if(Oe(t),i=t.type,e!==null&&t.stateNode!=null)e.memoizedProps!==a&&Ta(t);else{if(!a){if(t.stateNode===null)throw Error(u(166));return st(t),null}if(r=te.current,oi(t))hf(t);else{var f=Xc(I.current);switch(r){case 1:r=f.createElementNS("http://www.w3.org/2000/svg",i);break;case 2:r=f.createElementNS("http://www.w3.org/1998/Math/MathML",i);break;default:switch(i){case"svg":r=f.createElementNS("http://www.w3.org/2000/svg",i);break;case"math":r=f.createElementNS("http://www.w3.org/1998/Math/MathML",i);break;case"script":r=f.createElement("div"),r.innerHTML="<script><\/script>",r=r.removeChild(r.firstChild);break;case"select":r=typeof a.is=="string"?f.createElement("select",{is:a.is}):f.createElement("select"),a.multiple?r.multiple=!0:a.size&&(r.size=a.size);break;default:r=typeof a.is=="string"?f.createElement(i,{is:a.is}):f.createElement(i)}}r[Lt]=t,r[Ut]=a;e:for(f=t.child;f!==null;){if(f.tag===5||f.tag===6)r.appendChild(f.stateNode);else if(f.tag!==4&&f.tag!==27&&f.child!==null){f.child.return=f,f=f.child;continue}if(f===t)break e;for(;f.sibling===null;){if(f.return===null||f.return===t)break e;f=f.return}f.sibling.return=f.return,f=f.sibling}t.stateNode=r;e:switch($t(r,i,a),i){case"button":case"input":case"select":case"textarea":a=!!a.autoFocus;break e;case"img":a=!0;break e;default:a=!1}a&&Ta(t)}}return st(t),Vo(t,t.type,e===null?null:e.memoizedProps,t.pendingProps,n),null;case 6:if(e&&t.stateNode!=null)e.memoizedProps!==a&&Ta(t);else{if(typeof a!="string"&&t.stateNode===null)throw Error(u(166));if(e=I.current,oi(t)){if(e=t.stateNode,n=t.memoizedProps,a=null,i=Yt,i!==null)switch(i.tag){case 27:case 5:a=i.memoizedProps}e[Lt]=t,e=!!(e.nodeValue===n||a!==null&&a.suppressHydrationWarning===!0||kh(e.nodeValue,n)),e||Fa(t,!0)}else e=Xc(e).createTextNode(a),e[Lt]=t,t.stateNode=e}return st(t),null;case 31:if(n=t.memoizedState,e===null||e.memoizedState!==null){if(a=oi(t),n!==null){if(e===null){if(!a)throw Error(u(318));if(e=t.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(u(557));e[Lt]=t}else wl(),(t.flags&128)===0&&(t.memoizedState=null),t.flags|=4;st(t),e=!1}else n=Fr(),e!==null&&e.memoizedState!==null&&(e.memoizedState.hydrationErrors=n),e=!0;if(!e)return t.flags&256?(Sn(t),t):(Sn(t),null);if((t.flags&128)!==0)throw Error(u(558))}return st(t),null;case 13:if(a=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(i=oi(t),a!==null&&a.dehydrated!==null){if(e===null){if(!i)throw Error(u(318));if(i=t.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(u(317));i[Lt]=t}else wl(),(t.flags&128)===0&&(t.memoizedState=null),t.flags|=4;st(t),i=!1}else i=Fr(),e!==null&&e.memoizedState!==null&&(e.memoizedState.hydrationErrors=i),i=!0;if(!i)return t.flags&256?(Sn(t),t):(Sn(t),null)}return Sn(t),(t.flags&128)!==0?(t.lanes=n,t):(n=a!==null,e=e!==null&&e.memoizedState!==null,n&&(a=t.child,i=null,a.alternate!==null&&a.alternate.memoizedState!==null&&a.alternate.memoizedState.cachePool!==null&&(i=a.alternate.memoizedState.cachePool.pool),r=null,a.memoizedState!==null&&a.memoizedState.cachePool!==null&&(r=a.memoizedState.cachePool.pool),r!==i&&(a.flags|=2048)),n!==e&&n&&(t.child.flags|=8192),Rc(t,t.updateQueue),st(t),null);case 4:return ze(),e===null&&uu(t.stateNode.containerInfo),st(t),null;case 10:return ja(t.type),st(t),null;case 19:if(B(_t),a=t.memoizedState,a===null)return st(t),null;if(i=(t.flags&128)!==0,r=a.rendering,r===null)if(i)hs(a,!1);else{if(gt!==0||e!==null&&(e.flags&128)!==0)for(e=t.child;e!==null;){if(r=bc(e),r!==null){for(t.flags|=128,hs(a,!1),e=r.updateQueue,t.updateQueue=e,Rc(t,e),t.subtreeFlags=0,e=n,n=t.child;n!==null;)of(n,e),n=n.sibling;return J(_t,_t.current&1|2),Ye&&Sa(t,a.treeForkCount),t.child}e=e.sibling}a.tail!==null&&ge()>Bc&&(t.flags|=128,i=!0,hs(a,!1),t.lanes=4194304)}else{if(!i)if(e=bc(r),e!==null){if(t.flags|=128,i=!0,e=e.updateQueue,t.updateQueue=e,Rc(t,e),hs(a,!0),a.tail===null&&a.tailMode==="hidden"&&!r.alternate&&!Ye)return st(t),null}else 2*ge()-a.renderingStartTime>Bc&&n!==536870912&&(t.flags|=128,i=!0,hs(a,!1),t.lanes=4194304);a.isBackwards?(r.sibling=t.child,t.child=r):(e=a.last,e!==null?e.sibling=r:t.child=r,a.last=r)}return a.tail!==null?(e=a.tail,a.rendering=e,a.tail=e.sibling,a.renderingStartTime=ge(),e.sibling=null,n=_t.current,J(_t,i?n&1|2:n&1),Ye&&Sa(t,a.treeForkCount),e):(st(t),null);case 22:case 23:return Sn(t),uo(),a=t.memoizedState!==null,e!==null?e.memoizedState!==null!==a&&(t.flags|=8192):a&&(t.flags|=8192),a?(n&536870912)!==0&&(t.flags&128)===0&&(st(t),t.subtreeFlags&6&&(t.flags|=8192)):st(t),n=t.updateQueue,n!==null&&Rc(t,n.retryQueue),n=null,e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(n=e.memoizedState.cachePool.pool),a=null,t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(a=t.memoizedState.cachePool.pool),a!==n&&(t.flags|=2048),e!==null&&B(Dl),null;case 24:return n=null,e!==null&&(n=e.memoizedState.cache),t.memoizedState.cache!==n&&(t.flags|=2048),ja(Ct),st(t),null;case 25:return null;case 30:return null}throw Error(u(156,t.tag))}function Kg(e,t){switch(Zr(t),t.tag){case 1:return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return ja(Ct),ze(),e=t.flags,(e&65536)!==0&&(e&128)===0?(t.flags=e&-65537|128,t):null;case 26:case 27:case 5:return Oe(t),null;case 31:if(t.memoizedState!==null){if(Sn(t),t.alternate===null)throw Error(u(340));wl()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 13:if(Sn(t),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(u(340));wl()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return B(_t),null;case 4:return ze(),null;case 10:return ja(t.type),null;case 22:case 23:return Sn(t),uo(),e!==null&&B(Dl),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 24:return ja(Ct),null;case 25:return null;default:return null}}function zm(e,t){switch(Zr(t),t.tag){case 3:ja(Ct),ze();break;case 26:case 27:case 5:Oe(t);break;case 4:ze();break;case 31:t.memoizedState!==null&&Sn(t);break;case 13:Sn(t);break;case 19:B(_t);break;case 10:ja(t.type);break;case 22:case 23:Sn(t),uo(),e!==null&&B(Dl);break;case 24:ja(Ct)}}function ps(e,t){try{var n=t.updateQueue,a=n!==null?n.lastEffect:null;if(a!==null){var i=a.next;n=i;do{if((n.tag&e)===e){a=void 0;var r=n.create,f=n.inst;a=r(),f.destroy=a}n=n.next}while(n!==i)}}catch(g){Fe(t,t.return,g)}}function ll(e,t,n){try{var a=t.updateQueue,i=a!==null?a.lastEffect:null;if(i!==null){var r=i.next;a=r;do{if((a.tag&e)===e){var f=a.inst,g=f.destroy;if(g!==void 0){f.destroy=void 0,i=t;var j=n,k=g;try{k()}catch(V){Fe(i,j,V)}}}a=a.next}while(a!==r)}}catch(V){Fe(t,t.return,V)}}function Bm(e){var t=e.updateQueue;if(t!==null){var n=e.stateNode;try{Tf(t,n)}catch(a){Fe(e,e.return,a)}}}function qm(e,t,n){n.props=ql(e.type,e.memoizedProps),n.state=e.memoizedState;try{n.componentWillUnmount()}catch(a){Fe(e,t,a)}}function vs(e,t){try{var n=e.ref;if(n!==null){switch(e.tag){case 26:case 27:case 5:var a=e.stateNode;break;case 30:a=e.stateNode;break;default:a=e.stateNode}typeof n=="function"?e.refCleanup=n(a):n.current=a}}catch(i){Fe(e,t,i)}}function sa(e,t){var n=e.ref,a=e.refCleanup;if(n!==null)if(typeof a=="function")try{a()}catch(i){Fe(e,t,i)}finally{e.refCleanup=null,e=e.alternate,e!=null&&(e.refCleanup=null)}else if(typeof n=="function")try{n(null)}catch(i){Fe(e,t,i)}else n.current=null}function Hm(e){var t=e.type,n=e.memoizedProps,a=e.stateNode;try{e:switch(t){case"button":case"input":case"select":case"textarea":n.autoFocus&&a.focus();break e;case"img":n.src?a.src=n.src:n.srcSet&&(a.srcset=n.srcSet)}}catch(i){Fe(e,e.return,i)}}function Yo(e,t,n){try{var a=e.stateNode;fy(a,e.type,n,t),a[Ut]=t}catch(i){Fe(e,e.return,i)}}function Um(e){return e.tag===5||e.tag===3||e.tag===26||e.tag===27&&dl(e.type)||e.tag===4}function Ko(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||Um(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.tag===27&&dl(e.type)||e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function Qo(e,t,n){var a=e.tag;if(a===5||a===6)e=e.stateNode,t?(n.nodeType===9?n.body:n.nodeName==="HTML"?n.ownerDocument.body:n).insertBefore(e,t):(t=n.nodeType===9?n.body:n.nodeName==="HTML"?n.ownerDocument.body:n,t.appendChild(e),n=n._reactRootContainer,n!=null||t.onclick!==null||(t.onclick=Yn));else if(a!==4&&(a===27&&dl(e.type)&&(n=e.stateNode,t=null),e=e.child,e!==null))for(Qo(e,t,n),e=e.sibling;e!==null;)Qo(e,t,n),e=e.sibling}function Dc(e,t,n){var a=e.tag;if(a===5||a===6)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(a!==4&&(a===27&&dl(e.type)&&(n=e.stateNode),e=e.child,e!==null))for(Dc(e,t,n),e=e.sibling;e!==null;)Dc(e,t,n),e=e.sibling}function Gm(e){var t=e.stateNode,n=e.memoizedProps;try{for(var a=e.type,i=t.attributes;i.length;)t.removeAttributeNode(i[0]);$t(t,a,n),t[Lt]=e,t[Ut]=n}catch(r){Fe(e,e.return,r)}}var Ca=!1,kt=!1,$o=!1,Vm=typeof WeakSet=="function"?WeakSet:Set,qt=null;function Qg(e,t){if(e=e.containerInfo,mu=er,e=Wd(e),qr(e)){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{n=(n=e.ownerDocument)&&n.defaultView||window;var a=n.getSelection&&n.getSelection();if(a&&a.rangeCount!==0){n=a.anchorNode;var i=a.anchorOffset,r=a.focusNode;a=a.focusOffset;try{n.nodeType,r.nodeType}catch{n=null;break e}var f=0,g=-1,j=-1,k=0,V=0,Q=e,D=null;t:for(;;){for(var z;Q!==n||i!==0&&Q.nodeType!==3||(g=f+i),Q!==r||a!==0&&Q.nodeType!==3||(j=f+a),Q.nodeType===3&&(f+=Q.nodeValue.length),(z=Q.firstChild)!==null;)D=Q,Q=z;for(;;){if(Q===e)break t;if(D===n&&++k===i&&(g=f),D===r&&++V===a&&(j=f),(z=Q.nextSibling)!==null)break;Q=D,D=Q.parentNode}Q=z}n=g===-1||j===-1?null:{start:g,end:j}}else n=null}n=n||{start:0,end:0}}else n=null;for(hu={focusedElem:e,selectionRange:n},er=!1,qt=t;qt!==null;)if(t=qt,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,qt=e;else for(;qt!==null;){switch(t=qt,r=t.alternate,e=t.flags,t.tag){case 0:if((e&4)!==0&&(e=t.updateQueue,e=e!==null?e.events:null,e!==null))for(n=0;n<e.length;n++)i=e[n],i.ref.impl=i.nextImpl;break;case 11:case 15:break;case 1:if((e&1024)!==0&&r!==null){e=void 0,n=t,i=r.memoizedProps,r=r.memoizedState,a=n.stateNode;try{var re=ql(n.type,i);e=a.getSnapshotBeforeUpdate(re,r),a.__reactInternalSnapshotBeforeUpdate=e}catch(Se){Fe(n,n.return,Se)}}break;case 3:if((e&1024)!==0){if(e=t.stateNode.containerInfo,n=e.nodeType,n===9)gu(e);else if(n===1)switch(e.nodeName){case"HEAD":case"HTML":case"BODY":gu(e);break;default:e.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((e&1024)!==0)throw Error(u(163))}if(e=t.sibling,e!==null){e.return=t.return,qt=e;break}qt=t.return}}function Ym(e,t,n){var a=n.flags;switch(n.tag){case 0:case 11:case 15:wa(e,n),a&4&&ps(5,n);break;case 1:if(wa(e,n),a&4)if(e=n.stateNode,t===null)try{e.componentDidMount()}catch(f){Fe(n,n.return,f)}else{var i=ql(n.type,t.memoizedProps);t=t.memoizedState;try{e.componentDidUpdate(i,t,e.__reactInternalSnapshotBeforeUpdate)}catch(f){Fe(n,n.return,f)}}a&64&&Bm(n),a&512&&vs(n,n.return);break;case 3:if(wa(e,n),a&64&&(e=n.updateQueue,e!==null)){if(t=null,n.child!==null)switch(n.child.tag){case 27:case 5:t=n.child.stateNode;break;case 1:t=n.child.stateNode}try{Tf(e,t)}catch(f){Fe(n,n.return,f)}}break;case 27:t===null&&a&4&&Gm(n);case 26:case 5:wa(e,n),t===null&&a&4&&Hm(n),a&512&&vs(n,n.return);break;case 12:wa(e,n);break;case 31:wa(e,n),a&4&&$m(e,n);break;case 13:wa(e,n),a&4&&Xm(e,n),a&64&&(e=n.memoizedState,e!==null&&(e=e.dehydrated,e!==null&&(n=ey.bind(null,n),xy(e,n))));break;case 22:if(a=n.memoizedState!==null||Ca,!a){t=t!==null&&t.memoizedState!==null||kt,i=Ca;var r=kt;Ca=a,(kt=t)&&!r?ka(e,n,(n.subtreeFlags&8772)!==0):wa(e,n),Ca=i,kt=r}break;case 30:break;default:wa(e,n)}}function Km(e){var t=e.alternate;t!==null&&(e.alternate=null,Km(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&Jl(t)),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}var ft=null,rn=!1;function Aa(e,t,n){for(n=n.child;n!==null;)Qm(e,t,n),n=n.sibling}function Qm(e,t,n){if(Ie&&typeof Ie.onCommitFiberUnmount=="function")try{Ie.onCommitFiberUnmount(It,n)}catch{}switch(n.tag){case 26:kt||sa(n,t),Aa(e,t,n),n.memoizedState?n.memoizedState.count--:n.stateNode&&(n=n.stateNode,n.parentNode.removeChild(n));break;case 27:kt||sa(n,t);var a=ft,i=rn;dl(n.type)&&(ft=n.stateNode,rn=!1),Aa(e,t,n),Ns(n.stateNode),ft=a,rn=i;break;case 5:kt||sa(n,t);case 6:if(a=ft,i=rn,ft=null,Aa(e,t,n),ft=a,rn=i,ft!==null)if(rn)try{(ft.nodeType===9?ft.body:ft.nodeName==="HTML"?ft.ownerDocument.body:ft).removeChild(n.stateNode)}catch(r){Fe(n,t,r)}else try{ft.removeChild(n.stateNode)}catch(r){Fe(n,t,r)}break;case 18:ft!==null&&(rn?(e=ft,Bh(e.nodeType===9?e.body:e.nodeName==="HTML"?e.ownerDocument.body:e,n.stateNode),wi(e)):Bh(ft,n.stateNode));break;case 4:a=ft,i=rn,ft=n.stateNode.containerInfo,rn=!0,Aa(e,t,n),ft=a,rn=i;break;case 0:case 11:case 14:case 15:ll(2,n,t),kt||ll(4,n,t),Aa(e,t,n);break;case 1:kt||(sa(n,t),a=n.stateNode,typeof a.componentWillUnmount=="function"&&qm(n,t,a)),Aa(e,t,n);break;case 21:Aa(e,t,n);break;case 22:kt=(a=kt)||n.memoizedState!==null,Aa(e,t,n),kt=a;break;default:Aa(e,t,n)}}function $m(e,t){if(t.memoizedState===null&&(e=t.alternate,e!==null&&(e=e.memoizedState,e!==null))){e=e.dehydrated;try{wi(e)}catch(n){Fe(t,t.return,n)}}}function Xm(e,t){if(t.memoizedState===null&&(e=t.alternate,e!==null&&(e=e.memoizedState,e!==null&&(e=e.dehydrated,e!==null))))try{wi(e)}catch(n){Fe(t,t.return,n)}}function $g(e){switch(e.tag){case 31:case 13:case 19:var t=e.stateNode;return t===null&&(t=e.stateNode=new Vm),t;case 22:return e=e.stateNode,t=e._retryCache,t===null&&(t=e._retryCache=new Vm),t;default:throw Error(u(435,e.tag))}}function Lc(e,t){var n=$g(e);t.forEach(function(a){if(!n.has(a)){n.add(a);var i=ty.bind(null,e,a);a.then(i,i)}})}function on(e,t){var n=t.deletions;if(n!==null)for(var a=0;a<n.length;a++){var i=n[a],r=e,f=t,g=f;e:for(;g!==null;){switch(g.tag){case 27:if(dl(g.type)){ft=g.stateNode,rn=!1;break e}break;case 5:ft=g.stateNode,rn=!1;break e;case 3:case 4:ft=g.stateNode.containerInfo,rn=!0;break e}g=g.return}if(ft===null)throw Error(u(160));Qm(r,f,i),ft=null,rn=!1,r=i.alternate,r!==null&&(r.return=null),i.return=null}if(t.subtreeFlags&13886)for(t=t.child;t!==null;)Pm(t,e),t=t.sibling}var Pn=null;function Pm(e,t){var n=e.alternate,a=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:on(t,e),un(e),a&4&&(ll(3,e,e.return),ps(3,e),ll(5,e,e.return));break;case 1:on(t,e),un(e),a&512&&(kt||n===null||sa(n,n.return)),a&64&&Ca&&(e=e.updateQueue,e!==null&&(a=e.callbacks,a!==null&&(n=e.shared.hiddenCallbacks,e.shared.hiddenCallbacks=n===null?a:n.concat(a))));break;case 26:var i=Pn;if(on(t,e),un(e),a&512&&(kt||n===null||sa(n,n.return)),a&4){var r=n!==null?n.memoizedState:null;if(a=e.memoizedState,n===null)if(a===null)if(e.stateNode===null){e:{a=e.type,n=e.memoizedProps,i=i.ownerDocument||i;t:switch(a){case"title":r=i.getElementsByTagName("title")[0],(!r||r[ta]||r[Lt]||r.namespaceURI==="http://www.w3.org/2000/svg"||r.hasAttribute("itemprop"))&&(r=i.createElement(a),i.head.insertBefore(r,i.querySelector("head > title"))),$t(r,a,n),r[Lt]=e,ut(r),a=r;break e;case"link":var f=Ph("link","href",i).get(a+(n.href||""));if(f){for(var g=0;g<f.length;g++)if(r=f[g],r.getAttribute("href")===(n.href==null||n.href===""?null:n.href)&&r.getAttribute("rel")===(n.rel==null?null:n.rel)&&r.getAttribute("title")===(n.title==null?null:n.title)&&r.getAttribute("crossorigin")===(n.crossOrigin==null?null:n.crossOrigin)){f.splice(g,1);break t}}r=i.createElement(a),$t(r,a,n),i.head.appendChild(r);break;case"meta":if(f=Ph("meta","content",i).get(a+(n.content||""))){for(g=0;g<f.length;g++)if(r=f[g],r.getAttribute("content")===(n.content==null?null:""+n.content)&&r.getAttribute("name")===(n.name==null?null:n.name)&&r.getAttribute("property")===(n.property==null?null:n.property)&&r.getAttribute("http-equiv")===(n.httpEquiv==null?null:n.httpEquiv)&&r.getAttribute("charset")===(n.charSet==null?null:n.charSet)){f.splice(g,1);break t}}r=i.createElement(a),$t(r,a,n),i.head.appendChild(r);break;default:throw Error(u(468,a))}r[Lt]=e,ut(r),a=r}e.stateNode=a}else Zh(i,e.type,e.stateNode);else e.stateNode=Xh(i,a,e.memoizedProps);else r!==a?(r===null?n.stateNode!==null&&(n=n.stateNode,n.parentNode.removeChild(n)):r.count--,a===null?Zh(i,e.type,e.stateNode):Xh(i,a,e.memoizedProps)):a===null&&e.stateNode!==null&&Yo(e,e.memoizedProps,n.memoizedProps)}break;case 27:on(t,e),un(e),a&512&&(kt||n===null||sa(n,n.return)),n!==null&&a&4&&Yo(e,e.memoizedProps,n.memoizedProps);break;case 5:if(on(t,e),un(e),a&512&&(kt||n===null||sa(n,n.return)),e.flags&32){i=e.stateNode;try{en(i,"")}catch(re){Fe(e,e.return,re)}}a&4&&e.stateNode!=null&&(i=e.memoizedProps,Yo(e,i,n!==null?n.memoizedProps:i)),a&1024&&($o=!0);break;case 6:if(on(t,e),un(e),a&4){if(e.stateNode===null)throw Error(u(162));a=e.memoizedProps,n=e.stateNode;try{n.nodeValue=a}catch(re){Fe(e,e.return,re)}}break;case 3:if(Jc=null,i=Pn,Pn=Pc(t.containerInfo),on(t,e),Pn=i,un(e),a&4&&n!==null&&n.memoizedState.isDehydrated)try{wi(t.containerInfo)}catch(re){Fe(e,e.return,re)}$o&&($o=!1,Zm(e));break;case 4:a=Pn,Pn=Pc(e.stateNode.containerInfo),on(t,e),un(e),Pn=a;break;case 12:on(t,e),un(e);break;case 31:on(t,e),un(e),a&4&&(a=e.updateQueue,a!==null&&(e.updateQueue=null,Lc(e,a)));break;case 13:on(t,e),un(e),e.child.flags&8192&&e.memoizedState!==null!=(n!==null&&n.memoizedState!==null)&&(zc=ge()),a&4&&(a=e.updateQueue,a!==null&&(e.updateQueue=null,Lc(e,a)));break;case 22:i=e.memoizedState!==null;var j=n!==null&&n.memoizedState!==null,k=Ca,V=kt;if(Ca=k||i,kt=V||j,on(t,e),kt=V,Ca=k,un(e),a&8192)e:for(t=e.stateNode,t._visibility=i?t._visibility&-2:t._visibility|1,i&&(n===null||j||Ca||kt||Hl(e)),n=null,t=e;;){if(t.tag===5||t.tag===26){if(n===null){j=n=t;try{if(r=j.stateNode,i)f=r.style,typeof f.setProperty=="function"?f.setProperty("display","none","important"):f.display="none";else{g=j.stateNode;var Q=j.memoizedProps.style,D=Q!=null&&Q.hasOwnProperty("display")?Q.display:null;g.style.display=D==null||typeof D=="boolean"?"":(""+D).trim()}}catch(re){Fe(j,j.return,re)}}}else if(t.tag===6){if(n===null){j=t;try{j.stateNode.nodeValue=i?"":j.memoizedProps}catch(re){Fe(j,j.return,re)}}}else if(t.tag===18){if(n===null){j=t;try{var z=j.stateNode;i?qh(z,!0):qh(j.stateNode,!1)}catch(re){Fe(j,j.return,re)}}}else if((t.tag!==22&&t.tag!==23||t.memoizedState===null||t===e)&&t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;n===t&&(n=null),t=t.return}n===t&&(n=null),t.sibling.return=t.return,t=t.sibling}a&4&&(a=e.updateQueue,a!==null&&(n=a.retryQueue,n!==null&&(a.retryQueue=null,Lc(e,n))));break;case 19:on(t,e),un(e),a&4&&(a=e.updateQueue,a!==null&&(e.updateQueue=null,Lc(e,a)));break;case 30:break;case 21:break;default:on(t,e),un(e)}}function un(e){var t=e.flags;if(t&2){try{for(var n,a=e.return;a!==null;){if(Um(a)){n=a;break}a=a.return}if(n==null)throw Error(u(160));switch(n.tag){case 27:var i=n.stateNode,r=Ko(e);Dc(e,r,i);break;case 5:var f=n.stateNode;n.flags&32&&(en(f,""),n.flags&=-33);var g=Ko(e);Dc(e,g,f);break;case 3:case 4:var j=n.stateNode.containerInfo,k=Ko(e);Qo(e,k,j);break;default:throw Error(u(161))}}catch(V){Fe(e,e.return,V)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function Zm(e){if(e.subtreeFlags&1024)for(e=e.child;e!==null;){var t=e;Zm(t),t.tag===5&&t.flags&1024&&t.stateNode.reset(),e=e.sibling}}function wa(e,t){if(t.subtreeFlags&8772)for(t=t.child;t!==null;)Ym(e,t.alternate,t),t=t.sibling}function Hl(e){for(e=e.child;e!==null;){var t=e;switch(t.tag){case 0:case 11:case 14:case 15:ll(4,t,t.return),Hl(t);break;case 1:sa(t,t.return);var n=t.stateNode;typeof n.componentWillUnmount=="function"&&qm(t,t.return,n),Hl(t);break;case 27:Ns(t.stateNode);case 26:case 5:sa(t,t.return),Hl(t);break;case 22:t.memoizedState===null&&Hl(t);break;case 30:Hl(t);break;default:Hl(t)}e=e.sibling}}function ka(e,t,n){for(n=n&&(t.subtreeFlags&8772)!==0,t=t.child;t!==null;){var a=t.alternate,i=e,r=t,f=r.flags;switch(r.tag){case 0:case 11:case 15:ka(i,r,n),ps(4,r);break;case 1:if(ka(i,r,n),a=r,i=a.stateNode,typeof i.componentDidMount=="function")try{i.componentDidMount()}catch(k){Fe(a,a.return,k)}if(a=r,i=a.updateQueue,i!==null){var g=a.stateNode;try{var j=i.shared.hiddenCallbacks;if(j!==null)for(i.shared.hiddenCallbacks=null,i=0;i<j.length;i++)Ef(j[i],g)}catch(k){Fe(a,a.return,k)}}n&&f&64&&Bm(r),vs(r,r.return);break;case 27:Gm(r);case 26:case 5:ka(i,r,n),n&&a===null&&f&4&&Hm(r),vs(r,r.return);break;case 12:ka(i,r,n);break;case 31:ka(i,r,n),n&&f&4&&$m(i,r);break;case 13:ka(i,r,n),n&&f&4&&Xm(i,r);break;case 22:r.memoizedState===null&&ka(i,r,n),vs(r,r.return);break;case 30:break;default:ka(i,r,n)}t=t.sibling}}function Xo(e,t){var n=null;e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(n=e.memoizedState.cachePool.pool),e=null,t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(e=t.memoizedState.cachePool.pool),e!==n&&(e!=null&&e.refCount++,n!=null&&ns(n))}function Po(e,t){e=null,t.alternate!==null&&(e=t.alternate.memoizedState.cache),t=t.memoizedState.cache,t!==e&&(t.refCount++,e!=null&&ns(e))}function Zn(e,t,n,a){if(t.subtreeFlags&10256)for(t=t.child;t!==null;)Jm(e,t,n,a),t=t.sibling}function Jm(e,t,n,a){var i=t.flags;switch(t.tag){case 0:case 11:case 15:Zn(e,t,n,a),i&2048&&ps(9,t);break;case 1:Zn(e,t,n,a);break;case 3:Zn(e,t,n,a),i&2048&&(e=null,t.alternate!==null&&(e=t.alternate.memoizedState.cache),t=t.memoizedState.cache,t!==e&&(t.refCount++,e!=null&&ns(e)));break;case 12:if(i&2048){Zn(e,t,n,a),e=t.stateNode;try{var r=t.memoizedProps,f=r.id,g=r.onPostCommit;typeof g=="function"&&g(f,t.alternate===null?"mount":"update",e.passiveEffectDuration,-0)}catch(j){Fe(t,t.return,j)}}else Zn(e,t,n,a);break;case 31:Zn(e,t,n,a);break;case 13:Zn(e,t,n,a);break;case 23:break;case 22:r=t.stateNode,f=t.alternate,t.memoizedState!==null?r._visibility&2?Zn(e,t,n,a):gs(e,t):r._visibility&2?Zn(e,t,n,a):(r._visibility|=2,bi(e,t,n,a,(t.subtreeFlags&10256)!==0||!1)),i&2048&&Xo(f,t);break;case 24:Zn(e,t,n,a),i&2048&&Po(t.alternate,t);break;default:Zn(e,t,n,a)}}function bi(e,t,n,a,i){for(i=i&&((t.subtreeFlags&10256)!==0||!1),t=t.child;t!==null;){var r=e,f=t,g=n,j=a,k=f.flags;switch(f.tag){case 0:case 11:case 15:bi(r,f,g,j,i),ps(8,f);break;case 23:break;case 22:var V=f.stateNode;f.memoizedState!==null?V._visibility&2?bi(r,f,g,j,i):gs(r,f):(V._visibility|=2,bi(r,f,g,j,i)),i&&k&2048&&Xo(f.alternate,f);break;case 24:bi(r,f,g,j,i),i&&k&2048&&Po(f.alternate,f);break;default:bi(r,f,g,j,i)}t=t.sibling}}function gs(e,t){if(t.subtreeFlags&10256)for(t=t.child;t!==null;){var n=e,a=t,i=a.flags;switch(a.tag){case 22:gs(n,a),i&2048&&Xo(a.alternate,a);break;case 24:gs(n,a),i&2048&&Po(a.alternate,a);break;default:gs(n,a)}t=t.sibling}}var ys=8192;function xi(e,t,n){if(e.subtreeFlags&ys)for(e=e.child;e!==null;)Fm(e,t,n),e=e.sibling}function Fm(e,t,n){switch(e.tag){case 26:xi(e,t,n),e.flags&ys&&e.memoizedState!==null&&Ry(n,Pn,e.memoizedState,e.memoizedProps);break;case 5:xi(e,t,n);break;case 3:case 4:var a=Pn;Pn=Pc(e.stateNode.containerInfo),xi(e,t,n),Pn=a;break;case 22:e.memoizedState===null&&(a=e.alternate,a!==null&&a.memoizedState!==null?(a=ys,ys=16777216,xi(e,t,n),ys=a):xi(e,t,n));break;default:xi(e,t,n)}}function Im(e){var t=e.alternate;if(t!==null&&(e=t.child,e!==null)){t.child=null;do t=e.sibling,e.sibling=null,e=t;while(e!==null)}}function bs(e){var t=e.deletions;if((e.flags&16)!==0){if(t!==null)for(var n=0;n<t.length;n++){var a=t[n];qt=a,eh(a,e)}Im(e)}if(e.subtreeFlags&10256)for(e=e.child;e!==null;)Wm(e),e=e.sibling}function Wm(e){switch(e.tag){case 0:case 11:case 15:bs(e),e.flags&2048&&ll(9,e,e.return);break;case 3:bs(e);break;case 12:bs(e);break;case 22:var t=e.stateNode;e.memoizedState!==null&&t._visibility&2&&(e.return===null||e.return.tag!==13)?(t._visibility&=-3,Oc(e)):bs(e);break;default:bs(e)}}function Oc(e){var t=e.deletions;if((e.flags&16)!==0){if(t!==null)for(var n=0;n<t.length;n++){var a=t[n];qt=a,eh(a,e)}Im(e)}for(e=e.child;e!==null;){switch(t=e,t.tag){case 0:case 11:case 15:ll(8,t,t.return),Oc(t);break;case 22:n=t.stateNode,n._visibility&2&&(n._visibility&=-3,Oc(t));break;default:Oc(t)}e=e.sibling}}function eh(e,t){for(;qt!==null;){var n=qt;switch(n.tag){case 0:case 11:case 15:ll(8,n,t);break;case 23:case 22:if(n.memoizedState!==null&&n.memoizedState.cachePool!==null){var a=n.memoizedState.cachePool.pool;a!=null&&a.refCount++}break;case 24:ns(n.memoizedState.cache)}if(a=n.child,a!==null)a.return=n,qt=a;else e:for(n=e;qt!==null;){a=qt;var i=a.sibling,r=a.return;if(Km(a),a===n){qt=null;break e}if(i!==null){i.return=r,qt=i;break e}qt=r}}}var Xg={getCacheForType:function(e){var t=Kt(Ct),n=t.data.get(e);return n===void 0&&(n=e(),t.data.set(e,n)),n},cacheSignal:function(){return Kt(Ct).controller.signal}},Pg=typeof WeakMap=="function"?WeakMap:Map,Ze=0,at=null,qe=null,Ue=0,Je=0,_n=null,il=!1,Si=!1,Zo=!1,Ra=0,gt=0,sl=0,Ul=0,Jo=0,jn=0,_i=0,xs=null,dn=null,Fo=!1,zc=0,th=0,Bc=1/0,qc=null,cl=null,Ot=0,rl=null,ji=null,Da=0,Io=0,Wo=null,nh=null,Ss=0,eu=null;function Mn(){return(Ze&2)!==0&&Ue!==0?Ue&-Ue:E.T!==null?su():Pl()}function ah(){if(jn===0)if((Ue&536870912)===0||Ye){var e=We;We<<=1,(We&3932160)===0&&(We=262144),jn=e}else jn=536870912;return e=xn.current,e!==null&&(e.flags|=32),jn}function fn(e,t,n){(e===at&&(Je===2||Je===9)||e.cancelPendingCommit!==null)&&(Mi(e,0),ol(e,Ue,jn,!1)),Pt(e,n),((Ze&2)===0||e!==at)&&(e===at&&((Ze&2)===0&&(Ul|=n),gt===4&&ol(e,Ue,jn,!1)),ca(e))}function lh(e,t,n){if((Ze&6)!==0)throw Error(u(327));var a=!n&&(t&127)===0&&(t&e.expiredLanes)===0||ln(e,t),i=a?Fg(e,t):nu(e,t,!0),r=a;do{if(i===0){Si&&!a&&ol(e,t,0,!1);break}else{if(n=e.current.alternate,r&&!Zg(n)){i=nu(e,t,!1),r=!1;continue}if(i===2){if(r=t,e.errorRecoveryDisabledLanes&r)var f=0;else f=e.pendingLanes&-536870913,f=f!==0?f:f&536870912?536870912:0;if(f!==0){t=f;e:{var g=e;i=xs;var j=g.current.memoizedState.isDehydrated;if(j&&(Mi(g,f).flags|=256),f=nu(g,f,!1),f!==2){if(Zo&&!j){g.errorRecoveryDisabledLanes|=r,Ul|=r,i=4;break e}r=dn,dn=i,r!==null&&(dn===null?dn=r:dn.push.apply(dn,r))}i=f}if(r=!1,i!==2)continue}}if(i===1){Mi(e,0),ol(e,t,0,!0);break}e:{switch(a=e,r=i,r){case 0:case 1:throw Error(u(345));case 4:if((t&4194048)!==t)break;case 6:ol(a,t,jn,!il);break e;case 2:dn=null;break;case 3:case 5:break;default:throw Error(u(329))}if((t&62914560)===t&&(i=zc+300-ge(),10<i)){if(ol(a,t,jn,!il),pt(a,0,!0)!==0)break e;Da=t,a.timeoutHandle=Oh(ih.bind(null,a,n,dn,qc,Fo,t,jn,Ul,_i,il,r,"Throttled",-0,0),i);break e}ih(a,n,dn,qc,Fo,t,jn,Ul,_i,il,r,null,-0,0)}}break}while(!0);ca(e)}function ih(e,t,n,a,i,r,f,g,j,k,V,Q,D,z){if(e.timeoutHandle=-1,Q=t.subtreeFlags,Q&8192||(Q&16785408)===16785408){Q={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:Yn},Fm(t,r,Q);var re=(r&62914560)===r?zc-ge():(r&4194048)===r?th-ge():0;if(re=Dy(Q,re),re!==null){Da=r,e.cancelPendingCommit=re(mh.bind(null,e,t,r,n,a,i,f,g,j,V,Q,null,D,z)),ol(e,r,f,!k);return}}mh(e,t,r,n,a,i,f,g,j)}function Zg(e){for(var t=e;;){var n=t.tag;if((n===0||n===11||n===15)&&t.flags&16384&&(n=t.updateQueue,n!==null&&(n=n.stores,n!==null)))for(var a=0;a<n.length;a++){var i=n[a],r=i.getSnapshot;i=i.value;try{if(!yn(r(),i))return!1}catch{return!1}}if(n=t.child,t.subtreeFlags&16384&&n!==null)n.return=t,t=n;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function ol(e,t,n,a){t&=~Jo,t&=~Ul,e.suspendedLanes|=t,e.pingedLanes&=~t,a&&(e.warmLanes|=t),a=e.expirationTimes;for(var i=t;0<i;){var r=31-xt(i),f=1<<r;a[r]=-1,i&=~f}n!==0&&Gn(e,n,t)}function Hc(){return(Ze&6)===0?(_s(0),!1):!0}function tu(){if(qe!==null){if(Je===0)var e=qe.return;else e=qe,_a=kl=null,go(e),hi=null,ls=0,e=qe;for(;e!==null;)zm(e.alternate,e),e=e.return;qe=null}}function Mi(e,t){var n=e.timeoutHandle;n!==-1&&(e.timeoutHandle=-1,py(n)),n=e.cancelPendingCommit,n!==null&&(e.cancelPendingCommit=null,n()),Da=0,tu(),at=e,qe=n=xa(e.current,null),Ue=t,Je=0,_n=null,il=!1,Si=ln(e,t),Zo=!1,_i=jn=Jo=Ul=sl=gt=0,dn=xs=null,Fo=!1,(t&8)!==0&&(t|=t&32);var a=e.entangledLanes;if(a!==0)for(e=e.entanglements,a&=t;0<a;){var i=31-xt(a),r=1<<i;t|=e[i],a&=~r}return Ra=t,sc(),n}function sh(e,t){De=null,E.H=fs,t===mi||t===hc?(t=_f(),Je=3):t===lo?(t=_f(),Je=4):Je=t===Do?8:t!==null&&typeof t=="object"&&typeof t.then=="function"?6:1,_n=t,qe===null&&(gt=1,Cc(e,kn(t,e.current)))}function ch(){var e=xn.current;return e===null?!0:(Ue&4194048)===Ue?On===null:(Ue&62914560)===Ue||(Ue&536870912)!==0?e===On:!1}function rh(){var e=E.H;return E.H=fs,e===null?fs:e}function oh(){var e=E.A;return E.A=Xg,e}function Uc(){gt=4,il||(Ue&4194048)!==Ue&&xn.current!==null||(Si=!0),(sl&134217727)===0&&(Ul&134217727)===0||at===null||ol(at,Ue,jn,!1)}function nu(e,t,n){var a=Ze;Ze|=2;var i=rh(),r=oh();(at!==e||Ue!==t)&&(qc=null,Mi(e,t)),t=!1;var f=gt;e:do try{if(Je!==0&&qe!==null){var g=qe,j=_n;switch(Je){case 8:tu(),f=6;break e;case 3:case 2:case 9:case 6:xn.current===null&&(t=!0);var k=Je;if(Je=0,_n=null,Ni(e,g,j,k),n&&Si){f=0;break e}break;default:k=Je,Je=0,_n=null,Ni(e,g,j,k)}}Jg(),f=gt;break}catch(V){sh(e,V)}while(!0);return t&&e.shellSuspendCounter++,_a=kl=null,Ze=a,E.H=i,E.A=r,qe===null&&(at=null,Ue=0,sc()),f}function Jg(){for(;qe!==null;)uh(qe)}function Fg(e,t){var n=Ze;Ze|=2;var a=rh(),i=oh();at!==e||Ue!==t?(qc=null,Bc=ge()+500,Mi(e,t)):Si=ln(e,t);e:do try{if(Je!==0&&qe!==null){t=qe;var r=_n;t:switch(Je){case 1:Je=0,_n=null,Ni(e,t,r,1);break;case 2:case 9:if(xf(r)){Je=0,_n=null,dh(t);break}t=function(){Je!==2&&Je!==9||at!==e||(Je=7),ca(e)},r.then(t,t);break e;case 3:Je=7;break e;case 4:Je=5;break e;case 7:xf(r)?(Je=0,_n=null,dh(t)):(Je=0,_n=null,Ni(e,t,r,7));break;case 5:var f=null;switch(qe.tag){case 26:f=qe.memoizedState;case 5:case 27:var g=qe;if(f?Jh(f):g.stateNode.complete){Je=0,_n=null;var j=g.sibling;if(j!==null)qe=j;else{var k=g.return;k!==null?(qe=k,Gc(k)):qe=null}break t}}Je=0,_n=null,Ni(e,t,r,5);break;case 6:Je=0,_n=null,Ni(e,t,r,6);break;case 8:tu(),gt=6;break e;default:throw Error(u(462))}}Ig();break}catch(V){sh(e,V)}while(!0);return _a=kl=null,E.H=a,E.A=i,Ze=n,qe!==null?0:(at=null,Ue=0,sc(),gt)}function Ig(){for(;qe!==null&&!se();)uh(qe)}function uh(e){var t=Lm(e.alternate,e,Ra);e.memoizedProps=e.pendingProps,t===null?Gc(e):qe=t}function dh(e){var t=e,n=t.alternate;switch(t.tag){case 15:case 0:t=Cm(n,t,t.pendingProps,t.type,void 0,Ue);break;case 11:t=Cm(n,t,t.pendingProps,t.type.render,t.ref,Ue);break;case 5:go(t);default:zm(n,t),t=qe=of(t,Ra),t=Lm(n,t,Ra)}e.memoizedProps=e.pendingProps,t===null?Gc(e):qe=t}function Ni(e,t,n,a){_a=kl=null,go(t),hi=null,ls=0;var i=t.return;try{if(Ug(e,i,t,n,Ue)){gt=1,Cc(e,kn(n,e.current)),qe=null;return}}catch(r){if(i!==null)throw qe=i,r;gt=1,Cc(e,kn(n,e.current)),qe=null;return}t.flags&32768?(Ye||a===1?e=!0:Si||(Ue&536870912)!==0?e=!1:(il=e=!0,(a===2||a===9||a===3||a===6)&&(a=xn.current,a!==null&&a.tag===13&&(a.flags|=16384))),fh(t,e)):Gc(t)}function Gc(e){var t=e;do{if((t.flags&32768)!==0){fh(t,il);return}e=t.return;var n=Yg(t.alternate,t,Ra);if(n!==null){qe=n;return}if(t=t.sibling,t!==null){qe=t;return}qe=t=e}while(t!==null);gt===0&&(gt=5)}function fh(e,t){do{var n=Kg(e.alternate,e);if(n!==null){n.flags&=32767,qe=n;return}if(n=e.return,n!==null&&(n.flags|=32768,n.subtreeFlags=0,n.deletions=null),!t&&(e=e.sibling,e!==null)){qe=e;return}qe=e=n}while(e!==null);gt=6,qe=null}function mh(e,t,n,a,i,r,f,g,j){e.cancelPendingCommit=null;do Vc();while(Ot!==0);if((Ze&6)!==0)throw Error(u(327));if(t!==null){if(t===e.current)throw Error(u(177));if(r=t.lanes|t.childLanes,r|=Yr,sn(e,n,r,f,g,j),e===at&&(qe=at=null,Ue=0),ji=t,rl=e,Da=n,Io=r,Wo=i,nh=a,(t.subtreeFlags&10256)!==0||(t.flags&10256)!==0?(e.callbackNode=null,e.callbackPriority=0,ny(A,function(){return yh(),null})):(e.callbackNode=null,e.callbackPriority=0),a=(t.flags&13878)!==0,(t.subtreeFlags&13878)!==0||a){a=E.T,E.T=null,i=P.p,P.p=2,f=Ze,Ze|=4;try{Qg(e,t,n)}finally{Ze=f,P.p=i,E.T=a}}Ot=1,hh(),ph(),vh()}}function hh(){if(Ot===1){Ot=0;var e=rl,t=ji,n=(t.flags&13878)!==0;if((t.subtreeFlags&13878)!==0||n){n=E.T,E.T=null;var a=P.p;P.p=2;var i=Ze;Ze|=4;try{Pm(t,e);var r=hu,f=Wd(e.containerInfo),g=r.focusedElem,j=r.selectionRange;if(f!==g&&g&&g.ownerDocument&&Id(g.ownerDocument.documentElement,g)){if(j!==null&&qr(g)){var k=j.start,V=j.end;if(V===void 0&&(V=k),"selectionStart"in g)g.selectionStart=k,g.selectionEnd=Math.min(V,g.value.length);else{var Q=g.ownerDocument||document,D=Q&&Q.defaultView||window;if(D.getSelection){var z=D.getSelection(),re=g.textContent.length,Se=Math.min(j.start,re),nt=j.end===void 0?Se:Math.min(j.end,re);!z.extend&&Se>nt&&(f=nt,nt=Se,Se=f);var C=Fd(g,Se),N=Fd(g,nt);if(C&&N&&(z.rangeCount!==1||z.anchorNode!==C.node||z.anchorOffset!==C.offset||z.focusNode!==N.node||z.focusOffset!==N.offset)){var w=Q.createRange();w.setStart(C.node,C.offset),z.removeAllRanges(),Se>nt?(z.addRange(w),z.extend(N.node,N.offset)):(w.setEnd(N.node,N.offset),z.addRange(w))}}}}for(Q=[],z=g;z=z.parentNode;)z.nodeType===1&&Q.push({element:z,left:z.scrollLeft,top:z.scrollTop});for(typeof g.focus=="function"&&g.focus(),g=0;g<Q.length;g++){var K=Q[g];K.element.scrollLeft=K.left,K.element.scrollTop=K.top}}er=!!mu,hu=mu=null}finally{Ze=i,P.p=a,E.T=n}}e.current=t,Ot=2}}function ph(){if(Ot===2){Ot=0;var e=rl,t=ji,n=(t.flags&8772)!==0;if((t.subtreeFlags&8772)!==0||n){n=E.T,E.T=null;var a=P.p;P.p=2;var i=Ze;Ze|=4;try{Ym(e,t.alternate,t)}finally{Ze=i,P.p=a,E.T=n}}Ot=3}}function vh(){if(Ot===4||Ot===3){Ot=0,ve();var e=rl,t=ji,n=Da,a=nh;(t.subtreeFlags&10256)!==0||(t.flags&10256)!==0?Ot=5:(Ot=0,ji=rl=null,gh(e,e.pendingLanes));var i=e.pendingLanes;if(i===0&&(cl=null),bl(n),t=t.stateNode,Ie&&typeof Ie.onCommitFiberRoot=="function")try{Ie.onCommitFiberRoot(It,t,void 0,(t.current.flags&128)===128)}catch{}if(a!==null){t=E.T,i=P.p,P.p=2,E.T=null;try{for(var r=e.onRecoverableError,f=0;f<a.length;f++){var g=a[f];r(g.value,{componentStack:g.stack})}}finally{E.T=t,P.p=i}}(Da&3)!==0&&Vc(),ca(e),i=e.pendingLanes,(n&261930)!==0&&(i&42)!==0?e===eu?Ss++:(Ss=0,eu=e):Ss=0,_s(0)}}function gh(e,t){(e.pooledCacheLanes&=t)===0&&(t=e.pooledCache,t!=null&&(e.pooledCache=null,ns(t)))}function Vc(){return hh(),ph(),vh(),yh()}function yh(){if(Ot!==5)return!1;var e=rl,t=Io;Io=0;var n=bl(Da),a=E.T,i=P.p;try{P.p=32>n?32:n,E.T=null,n=Wo,Wo=null;var r=rl,f=Da;if(Ot=0,ji=rl=null,Da=0,(Ze&6)!==0)throw Error(u(331));var g=Ze;if(Ze|=4,Wm(r.current),Jm(r,r.current,f,n),Ze=g,_s(0,!1),Ie&&typeof Ie.onPostCommitFiberRoot=="function")try{Ie.onPostCommitFiberRoot(It,r)}catch{}return!0}finally{P.p=i,E.T=a,gh(e,t)}}function bh(e,t,n){t=kn(n,t),t=Ro(e.stateNode,t,2),e=tl(e,t,2),e!==null&&(Pt(e,2),ca(e))}function Fe(e,t,n){if(e.tag===3)bh(e,e,n);else for(;t!==null;){if(t.tag===3){bh(t,e,n);break}else if(t.tag===1){var a=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof a.componentDidCatch=="function"&&(cl===null||!cl.has(a))){e=kn(n,e),n=xm(2),a=tl(t,n,2),a!==null&&(Sm(n,a,t,e),Pt(a,2),ca(a));break}}t=t.return}}function au(e,t,n){var a=e.pingCache;if(a===null){a=e.pingCache=new Pg;var i=new Set;a.set(t,i)}else i=a.get(t),i===void 0&&(i=new Set,a.set(t,i));i.has(n)||(Zo=!0,i.add(n),e=Wg.bind(null,e,t,n),t.then(e,e))}function Wg(e,t,n){var a=e.pingCache;a!==null&&a.delete(t),e.pingedLanes|=e.suspendedLanes&n,e.warmLanes&=~n,at===e&&(Ue&n)===n&&(gt===4||gt===3&&(Ue&62914560)===Ue&&300>ge()-zc?(Ze&2)===0&&Mi(e,0):Jo|=n,_i===Ue&&(_i=0)),ca(e)}function xh(e,t){t===0&&(t=da()),e=Cl(e,t),e!==null&&(Pt(e,t),ca(e))}function ey(e){var t=e.memoizedState,n=0;t!==null&&(n=t.retryLane),xh(e,n)}function ty(e,t){var n=0;switch(e.tag){case 31:case 13:var a=e.stateNode,i=e.memoizedState;i!==null&&(n=i.retryLane);break;case 19:a=e.stateNode;break;case 22:a=e.stateNode._retryCache;break;default:throw Error(u(314))}a!==null&&a.delete(t),xh(e,n)}function ny(e,t){return ot(e,t)}var Yc=null,Ei=null,lu=!1,Kc=!1,iu=!1,ul=0;function ca(e){e!==Ei&&e.next===null&&(Ei===null?Yc=Ei=e:Ei=Ei.next=e),Kc=!0,lu||(lu=!0,ly())}function _s(e,t){if(!iu&&Kc){iu=!0;do for(var n=!1,a=Yc;a!==null;){if(e!==0){var i=a.pendingLanes;if(i===0)var r=0;else{var f=a.suspendedLanes,g=a.pingedLanes;r=(1<<31-xt(42|e)+1)-1,r&=i&~(f&~g),r=r&201326741?r&201326741|1:r?r|2:0}r!==0&&(n=!0,Mh(a,r))}else r=Ue,r=pt(a,a===at?r:0,a.cancelPendingCommit!==null||a.timeoutHandle!==-1),(r&3)===0||ln(a,r)||(n=!0,Mh(a,r));a=a.next}while(n);iu=!1}}function ay(){Sh()}function Sh(){Kc=lu=!1;var e=0;ul!==0&&hy()&&(e=ul);for(var t=ge(),n=null,a=Yc;a!==null;){var i=a.next,r=_h(a,t);r===0?(a.next=null,n===null?Yc=i:n.next=i,i===null&&(Ei=n)):(n=a,(e!==0||(r&3)!==0)&&(Kc=!0)),a=i}Ot!==0&&Ot!==5||_s(e),ul!==0&&(ul=0)}function _h(e,t){for(var n=e.suspendedLanes,a=e.pingedLanes,i=e.expirationTimes,r=e.pendingLanes&-62914561;0<r;){var f=31-xt(r),g=1<<f,j=i[f];j===-1?((g&n)===0||(g&a)!==0)&&(i[f]=Va(g,t)):j<=t&&(e.expiredLanes|=g),r&=~g}if(t=at,n=Ue,n=pt(e,e===t?n:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),a=e.callbackNode,n===0||e===t&&(Je===2||Je===9)||e.cancelPendingCommit!==null)return a!==null&&a!==null&&U(a),e.callbackNode=null,e.callbackPriority=0;if((n&3)===0||ln(e,n)){if(t=n&-n,t===e.callbackPriority)return t;switch(a!==null&&U(a),bl(n)){case 2:case 8:n=Ce;break;case 32:n=A;break;case 268435456:n=Me;break;default:n=A}return a=jh.bind(null,e),n=ot(n,a),e.callbackPriority=t,e.callbackNode=n,t}return a!==null&&a!==null&&U(a),e.callbackPriority=2,e.callbackNode=null,2}function jh(e,t){if(Ot!==0&&Ot!==5)return e.callbackNode=null,e.callbackPriority=0,null;var n=e.callbackNode;if(Vc()&&e.callbackNode!==n)return null;var a=Ue;return a=pt(e,e===at?a:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),a===0?null:(lh(e,a,t),_h(e,ge()),e.callbackNode!=null&&e.callbackNode===n?jh.bind(null,e):null)}function Mh(e,t){if(Vc())return null;lh(e,t,!0)}function ly(){vy(function(){(Ze&6)!==0?ot(Ke,ay):Sh()})}function su(){if(ul===0){var e=di;e===0&&(e=le,le<<=1,(le&261888)===0&&(le=256)),ul=e}return ul}function Nh(e){return e==null||typeof e=="symbol"||typeof e=="boolean"?null:typeof e=="function"?e:_l(""+e)}function Eh(e,t){var n=t.ownerDocument.createElement("input");return n.name=t.name,n.value=t.value,e.id&&n.setAttribute("form",e.id),t.parentNode.insertBefore(n,t),e=new FormData(e),n.parentNode.removeChild(n),e}function iy(e,t,n,a,i){if(t==="submit"&&n&&n.stateNode===i){var r=Nh((i[Ut]||null).action),f=a.submitter;f&&(t=(t=f[Ut]||null)?Nh(t.formAction):f.getAttribute("formAction"),t!==null&&(r=t,f=null));var g=new Te("action","action",null,a,i);e.push({event:g,listeners:[{instance:null,listener:function(){if(a.defaultPrevented){if(ul!==0){var j=f?Eh(i,f):new FormData(i);Eo(n,{pending:!0,data:j,method:i.method,action:r},null,j)}}else typeof r=="function"&&(g.preventDefault(),j=f?Eh(i,f):new FormData(i),Eo(n,{pending:!0,data:j,method:i.method,action:r},r,j))},currentTarget:i}]})}}for(var cu=0;cu<Vr.length;cu++){var ru=Vr[cu],sy=ru.toLowerCase(),cy=ru[0].toUpperCase()+ru.slice(1);Xn(sy,"on"+cy)}Xn(nf,"onAnimationEnd"),Xn(af,"onAnimationIteration"),Xn(lf,"onAnimationStart"),Xn("dblclick","onDoubleClick"),Xn("focusin","onFocus"),Xn("focusout","onBlur"),Xn(jg,"onTransitionRun"),Xn(Mg,"onTransitionStart"),Xn(Ng,"onTransitionCancel"),Xn(sf,"onTransitionEnd"),q("onMouseEnter",["mouseout","mouseover"]),q("onMouseLeave",["mouseout","mouseover"]),q("onPointerEnter",["pointerout","pointerover"]),q("onPointerLeave",["pointerout","pointerover"]),Gt("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Gt("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Gt("onBeforeInput",["compositionend","keypress","textInput","paste"]),Gt("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Gt("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Gt("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var js="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),ry=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(js));function Th(e,t){t=(t&4)!==0;for(var n=0;n<e.length;n++){var a=e[n],i=a.event;a=a.listeners;e:{var r=void 0;if(t)for(var f=a.length-1;0<=f;f--){var g=a[f],j=g.instance,k=g.currentTarget;if(g=g.listener,j!==r&&i.isPropagationStopped())break e;r=g,i.currentTarget=k;try{r(i)}catch(V){ic(V)}i.currentTarget=null,r=j}else for(f=0;f<a.length;f++){if(g=a[f],j=g.instance,k=g.currentTarget,g=g.listener,j!==r&&i.isPropagationStopped())break e;r=g,i.currentTarget=k;try{r(i)}catch(V){ic(V)}i.currentTarget=null,r=j}}}}function He(e,t){var n=t[Ka];n===void 0&&(n=t[Ka]=new Set);var a=e+"__bubble";n.has(a)||(Ch(t,e,2,!1),n.add(a))}function ou(e,t,n){var a=0;t&&(a|=4),Ch(n,e,a,t)}var Qc="_reactListening"+Math.random().toString(36).slice(2);function uu(e){if(!e[Qc]){e[Qc]=!0,Fl.forEach(function(n){n!=="selectionchange"&&(ry.has(n)||ou(n,!1,e),ou(n,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[Qc]||(t[Qc]=!0,ou("selectionchange",!1,t))}}function Ch(e,t,n,a){switch(ap(t)){case 2:var i=zy;break;case 8:i=By;break;default:i=Nu}n=i.bind(null,t,n,e),i=void 0,!Qi||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(i=!0),a?i!==void 0?e.addEventListener(t,n,{capture:!0,passive:i}):e.addEventListener(t,n,!0):i!==void 0?e.addEventListener(t,n,{passive:i}):e.addEventListener(t,n,!1)}function du(e,t,n,a,i){var r=a;if((t&1)===0&&(t&2)===0&&a!==null)e:for(;;){if(a===null)return;var f=a.tag;if(f===3||f===4){var g=a.stateNode.containerInfo;if(g===i)break;if(f===4)for(f=a.return;f!==null;){var j=f.tag;if((j===3||j===4)&&f.stateNode.containerInfo===i)return;f=f.return}for(;g!==null;){if(f=ha(g),f===null)return;if(j=f.tag,j===5||j===6||j===26||j===27){a=r=f;continue e}g=g.parentNode}}a=a.return}ac(function(){var k=r,V=aa(n),Q=[];e:{var D=cf.get(e);if(D!==void 0){var z=Te,re=e;switch(e){case"keypress":if(_(n)===0)break e;case"keydown":case"keyup":z=tg;break;case"focusin":re="focus",z=Dr;break;case"focusout":re="blur",z=Dr;break;case"beforeblur":case"afterblur":z=Dr;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":z=Pi;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":z=Yv;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":z=lg;break;case nf:case af:case lf:z=$v;break;case sf:z=sg;break;case"scroll":case"scrollend":z=tn;break;case"wheel":z=rg;break;case"copy":case"cut":case"paste":z=Pv;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":z=Bd;break;case"toggle":case"beforetoggle":z=ug}var Se=(t&4)!==0,nt=!Se&&(e==="scroll"||e==="scrollend"),C=Se?D!==null?D+"Capture":null:D;Se=[];for(var N=k,w;N!==null;){var K=N;if(w=K.stateNode,K=K.tag,K!==5&&K!==26&&K!==27||w===null||C===null||(K=jl(N,C),K!=null&&Se.push(Ms(N,K,w))),nt)break;N=N.return}0<Se.length&&(D=new z(D,re,null,n,V),Q.push({event:D,listeners:Se}))}}if((t&7)===0){e:{if(D=e==="mouseover"||e==="pointerover",z=e==="mouseout"||e==="pointerout",D&&n!==ei&&(re=n.relatedTarget||n.fromElement)&&(ha(re)||re[hn]))break e;if((z||D)&&(D=V.window===V?V:(D=V.ownerDocument)?D.defaultView||D.parentWindow:window,z?(re=n.relatedTarget||n.toElement,z=k,re=re?ha(re):null,re!==null&&(nt=m(re),Se=re.tag,re!==nt||Se!==5&&Se!==27&&Se!==6)&&(re=null)):(z=null,re=k),z!==re)){if(Se=Pi,K="onMouseLeave",C="onMouseEnter",N="mouse",(e==="pointerout"||e==="pointerover")&&(Se=Bd,K="onPointerLeave",C="onPointerEnter",N="pointer"),nt=z==null?D:pn(z),w=re==null?D:pn(re),D=new Se(K,N+"leave",z,n,V),D.target=nt,D.relatedTarget=w,K=null,ha(V)===k&&(Se=new Se(C,N+"enter",re,n,V),Se.target=w,Se.relatedTarget=nt,K=Se),nt=K,z&&re)t:{for(Se=oy,C=z,N=re,w=0,K=C;K;K=Se(K))w++;K=0;for(var be=N;be;be=Se(be))K++;for(;0<w-K;)C=Se(C),w--;for(;0<K-w;)N=Se(N),K--;for(;w--;){if(C===N||N!==null&&C===N.alternate){Se=C;break t}C=Se(C),N=Se(N)}Se=null}else Se=null;z!==null&&Ah(Q,D,z,Se,!1),re!==null&&nt!==null&&Ah(Q,nt,re,Se,!0)}}e:{if(D=k?pn(k):window,z=D.nodeName&&D.nodeName.toLowerCase(),z==="select"||z==="input"&&D.type==="file")var Qe=Qd;else if(Yd(D))if($d)Qe=xg;else{Qe=yg;var fe=gg}else z=D.nodeName,!z||z.toLowerCase()!=="input"||D.type!=="checkbox"&&D.type!=="radio"?k&&Sl(k.elementType)&&(Qe=Qd):Qe=bg;if(Qe&&(Qe=Qe(e,k))){Kd(Q,Qe,n,V);break e}fe&&fe(e,D,k),e==="focusout"&&k&&D.type==="number"&&k.memoizedProps.value!=null&&xl(D,"number",D.value)}switch(fe=k?pn(k):window,e){case"focusin":(Yd(fe)||fe.contentEditable==="true")&&(ai=fe,Hr=k,Wi=null);break;case"focusout":Wi=Hr=ai=null;break;case"mousedown":Ur=!0;break;case"contextmenu":case"mouseup":case"dragend":Ur=!1,ef(Q,n,V);break;case"selectionchange":if(_g)break;case"keydown":case"keyup":ef(Q,n,V)}var Le;if(Or)e:{switch(e){case"compositionstart":var Ge="onCompositionStart";break e;case"compositionend":Ge="onCompositionEnd";break e;case"compositionupdate":Ge="onCompositionUpdate";break e}Ge=void 0}else ni?Gd(e,n)&&(Ge="onCompositionEnd"):e==="keydown"&&n.keyCode===229&&(Ge="onCompositionStart");Ge&&(qd&&n.locale!=="ko"&&(ni||Ge!=="onCompositionStart"?Ge==="onCompositionEnd"&&ni&&(Le=Xi()):(gn=V,$i="value"in gn?gn.value:gn.textContent,ni=!0)),fe=$c(k,Ge),0<fe.length&&(Ge=new zd(Ge,e,null,n,V),Q.push({event:Ge,listeners:fe}),Le?Ge.data=Le:(Le=Vd(n),Le!==null&&(Ge.data=Le)))),(Le=fg?mg(e,n):hg(e,n))&&(Ge=$c(k,"onBeforeInput"),0<Ge.length&&(fe=new zd("onBeforeInput","beforeinput",null,n,V),Q.push({event:fe,listeners:Ge}),fe.data=Le)),iy(Q,e,k,n,V)}Th(Q,t)})}function Ms(e,t,n){return{instance:e,listener:t,currentTarget:n}}function $c(e,t){for(var n=t+"Capture",a=[];e!==null;){var i=e,r=i.stateNode;if(i=i.tag,i!==5&&i!==26&&i!==27||r===null||(i=jl(e,n),i!=null&&a.unshift(Ms(e,i,r)),i=jl(e,t),i!=null&&a.push(Ms(e,i,r))),e.tag===3)return a;e=e.return}return[]}function oy(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5&&e.tag!==27);return e||null}function Ah(e,t,n,a,i){for(var r=t._reactName,f=[];n!==null&&n!==a;){var g=n,j=g.alternate,k=g.stateNode;if(g=g.tag,j!==null&&j===a)break;g!==5&&g!==26&&g!==27||k===null||(j=k,i?(k=jl(n,r),k!=null&&f.unshift(Ms(n,k,j))):i||(k=jl(n,r),k!=null&&f.push(Ms(n,k,j)))),n=n.return}f.length!==0&&e.push({event:t,listeners:f})}var uy=/\r\n?/g,dy=/\u0000|\uFFFD/g;function wh(e){return(typeof e=="string"?e:""+e).replace(uy,`
`).replace(dy,"")}function kh(e,t){return t=wh(t),wh(e)===t}function tt(e,t,n,a,i,r){switch(n){case"children":typeof a=="string"?t==="body"||t==="textarea"&&a===""||en(e,a):(typeof a=="number"||typeof a=="bigint")&&t!=="body"&&en(e,""+a);break;case"className":Cn(e,"class",a);break;case"tabIndex":Cn(e,"tabindex",a);break;case"dir":case"role":case"viewBox":case"width":case"height":Cn(e,n,a);break;case"style":tc(e,a,r);break;case"data":if(t!=="object"){Cn(e,"data",a);break}case"src":case"href":if(a===""&&(t!=="a"||n!=="href")){e.removeAttribute(n);break}if(a==null||typeof a=="function"||typeof a=="symbol"||typeof a=="boolean"){e.removeAttribute(n);break}a=_l(""+a),e.setAttribute(n,a);break;case"action":case"formAction":if(typeof a=="function"){e.setAttribute(n,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof r=="function"&&(n==="formAction"?(t!=="input"&&tt(e,t,"name",i.name,i,null),tt(e,t,"formEncType",i.formEncType,i,null),tt(e,t,"formMethod",i.formMethod,i,null),tt(e,t,"formTarget",i.formTarget,i,null)):(tt(e,t,"encType",i.encType,i,null),tt(e,t,"method",i.method,i,null),tt(e,t,"target",i.target,i,null)));if(a==null||typeof a=="symbol"||typeof a=="boolean"){e.removeAttribute(n);break}a=_l(""+a),e.setAttribute(n,a);break;case"onClick":a!=null&&(e.onclick=Yn);break;case"onScroll":a!=null&&He("scroll",e);break;case"onScrollEnd":a!=null&&He("scrollend",e);break;case"dangerouslySetInnerHTML":if(a!=null){if(typeof a!="object"||!("__html"in a))throw Error(u(61));if(n=a.__html,n!=null){if(i.children!=null)throw Error(u(60));e.innerHTML=n}}break;case"multiple":e.multiple=a&&typeof a!="function"&&typeof a!="symbol";break;case"muted":e.muted=a&&typeof a!="function"&&typeof a!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(a==null||typeof a=="function"||typeof a=="boolean"||typeof a=="symbol"){e.removeAttribute("xlink:href");break}n=_l(""+a),e.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",n);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":a!=null&&typeof a!="function"&&typeof a!="symbol"?e.setAttribute(n,""+a):e.removeAttribute(n);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":a&&typeof a!="function"&&typeof a!="symbol"?e.setAttribute(n,""):e.removeAttribute(n);break;case"capture":case"download":a===!0?e.setAttribute(n,""):a!==!1&&a!=null&&typeof a!="function"&&typeof a!="symbol"?e.setAttribute(n,a):e.removeAttribute(n);break;case"cols":case"rows":case"size":case"span":a!=null&&typeof a!="function"&&typeof a!="symbol"&&!isNaN(a)&&1<=a?e.setAttribute(n,a):e.removeAttribute(n);break;case"rowSpan":case"start":a==null||typeof a=="function"||typeof a=="symbol"||isNaN(a)?e.removeAttribute(n):e.setAttribute(n,a);break;case"popover":He("beforetoggle",e),He("toggle",e),ga(e,"popover",a);break;case"xlinkActuate":Zt(e,"http://www.w3.org/1999/xlink","xlink:actuate",a);break;case"xlinkArcrole":Zt(e,"http://www.w3.org/1999/xlink","xlink:arcrole",a);break;case"xlinkRole":Zt(e,"http://www.w3.org/1999/xlink","xlink:role",a);break;case"xlinkShow":Zt(e,"http://www.w3.org/1999/xlink","xlink:show",a);break;case"xlinkTitle":Zt(e,"http://www.w3.org/1999/xlink","xlink:title",a);break;case"xlinkType":Zt(e,"http://www.w3.org/1999/xlink","xlink:type",a);break;case"xmlBase":Zt(e,"http://www.w3.org/XML/1998/namespace","xml:base",a);break;case"xmlLang":Zt(e,"http://www.w3.org/XML/1998/namespace","xml:lang",a);break;case"xmlSpace":Zt(e,"http://www.w3.org/XML/1998/namespace","xml:space",a);break;case"is":ga(e,"is",a);break;case"innerText":case"textContent":break;default:(!(2<n.length)||n[0]!=="o"&&n[0]!=="O"||n[1]!=="n"&&n[1]!=="N")&&(n=Yi.get(n)||n,ga(e,n,a))}}function fu(e,t,n,a,i,r){switch(n){case"style":tc(e,a,r);break;case"dangerouslySetInnerHTML":if(a!=null){if(typeof a!="object"||!("__html"in a))throw Error(u(61));if(n=a.__html,n!=null){if(i.children!=null)throw Error(u(60));e.innerHTML=n}}break;case"children":typeof a=="string"?en(e,a):(typeof a=="number"||typeof a=="bigint")&&en(e,""+a);break;case"onScroll":a!=null&&He("scroll",e);break;case"onScrollEnd":a!=null&&He("scrollend",e);break;case"onClick":a!=null&&(e.onclick=Yn);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!pa.hasOwnProperty(n))e:{if(n[0]==="o"&&n[1]==="n"&&(i=n.endsWith("Capture"),t=n.slice(2,i?n.length-7:void 0),r=e[Ut]||null,r=r!=null?r[n]:null,typeof r=="function"&&e.removeEventListener(t,r,i),typeof a=="function")){typeof r!="function"&&r!==null&&(n in e?e[n]=null:e.hasAttribute(n)&&e.removeAttribute(n)),e.addEventListener(t,a,i);break e}n in e?e[n]=a:a===!0?e.setAttribute(n,""):ga(e,n,a)}}}function $t(e,t,n){switch(t){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":He("error",e),He("load",e);var a=!1,i=!1,r;for(r in n)if(n.hasOwnProperty(r)){var f=n[r];if(f!=null)switch(r){case"src":a=!0;break;case"srcSet":i=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(u(137,t));default:tt(e,t,r,f,n,null)}}i&&tt(e,t,"srcSet",n.srcSet,n,null),a&&tt(e,t,"src",n.src,n,null);return;case"input":He("invalid",e);var g=r=f=i=null,j=null,k=null;for(a in n)if(n.hasOwnProperty(a)){var V=n[a];if(V!=null)switch(a){case"name":i=V;break;case"type":f=V;break;case"checked":j=V;break;case"defaultChecked":k=V;break;case"value":r=V;break;case"defaultValue":g=V;break;case"children":case"dangerouslySetInnerHTML":if(V!=null)throw Error(u(137,t));break;default:tt(e,t,a,V,n,null)}}Ws(e,r,g,j,k,f,i,!1);return;case"select":He("invalid",e),a=f=r=null;for(i in n)if(n.hasOwnProperty(i)&&(g=n[i],g!=null))switch(i){case"value":r=g;break;case"defaultValue":f=g;break;case"multiple":a=g;default:tt(e,t,i,g,n,null)}t=r,n=f,e.multiple=!!a,t!=null?$a(e,!!a,t,!1):n!=null&&$a(e,!!a,n,!0);return;case"textarea":He("invalid",e),r=i=a=null;for(f in n)if(n.hasOwnProperty(f)&&(g=n[f],g!=null))switch(f){case"value":a=g;break;case"defaultValue":i=g;break;case"children":r=g;break;case"dangerouslySetInnerHTML":if(g!=null)throw Error(u(91));break;default:tt(e,t,f,g,n,null)}Vi(e,a,i,r);return;case"option":for(j in n)n.hasOwnProperty(j)&&(a=n[j],a!=null)&&(j==="selected"?e.selected=a&&typeof a!="function"&&typeof a!="symbol":tt(e,t,j,a,n,null));return;case"dialog":He("beforetoggle",e),He("toggle",e),He("cancel",e),He("close",e);break;case"iframe":case"object":He("load",e);break;case"video":case"audio":for(a=0;a<js.length;a++)He(js[a],e);break;case"image":He("error",e),He("load",e);break;case"details":He("toggle",e);break;case"embed":case"source":case"link":He("error",e),He("load",e);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(k in n)if(n.hasOwnProperty(k)&&(a=n[k],a!=null))switch(k){case"children":case"dangerouslySetInnerHTML":throw Error(u(137,t));default:tt(e,t,k,a,n,null)}return;default:if(Sl(t)){for(V in n)n.hasOwnProperty(V)&&(a=n[V],a!==void 0&&fu(e,t,V,a,n,void 0));return}}for(g in n)n.hasOwnProperty(g)&&(a=n[g],a!=null&&tt(e,t,g,a,n,null))}function fy(e,t,n,a){switch(t){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var i=null,r=null,f=null,g=null,j=null,k=null,V=null;for(z in n){var Q=n[z];if(n.hasOwnProperty(z)&&Q!=null)switch(z){case"checked":break;case"value":break;case"defaultValue":j=Q;default:a.hasOwnProperty(z)||tt(e,t,z,null,a,Q)}}for(var D in a){var z=a[D];if(Q=n[D],a.hasOwnProperty(D)&&(z!=null||Q!=null))switch(D){case"type":r=z;break;case"name":i=z;break;case"checked":k=z;break;case"defaultChecked":V=z;break;case"value":f=z;break;case"defaultValue":g=z;break;case"children":case"dangerouslySetInnerHTML":if(z!=null)throw Error(u(137,t));break;default:z!==Q&&tt(e,t,D,z,a,Q)}}Gi(e,f,g,j,k,V,r,i);return;case"select":z=f=g=D=null;for(r in n)if(j=n[r],n.hasOwnProperty(r)&&j!=null)switch(r){case"value":break;case"multiple":z=j;default:a.hasOwnProperty(r)||tt(e,t,r,null,a,j)}for(i in a)if(r=a[i],j=n[i],a.hasOwnProperty(i)&&(r!=null||j!=null))switch(i){case"value":D=r;break;case"defaultValue":g=r;break;case"multiple":f=r;default:r!==j&&tt(e,t,i,r,a,j)}t=g,n=f,a=z,D!=null?$a(e,!!n,D,!1):!!a!=!!n&&(t!=null?$a(e,!!n,t,!0):$a(e,!!n,n?[]:"",!1));return;case"textarea":z=D=null;for(g in n)if(i=n[g],n.hasOwnProperty(g)&&i!=null&&!a.hasOwnProperty(g))switch(g){case"value":break;case"children":break;default:tt(e,t,g,null,a,i)}for(f in a)if(i=a[f],r=n[f],a.hasOwnProperty(f)&&(i!=null||r!=null))switch(f){case"value":D=i;break;case"defaultValue":z=i;break;case"children":break;case"dangerouslySetInnerHTML":if(i!=null)throw Error(u(91));break;default:i!==r&&tt(e,t,f,i,a,r)}Vn(e,D,z);return;case"option":for(var re in n)D=n[re],n.hasOwnProperty(re)&&D!=null&&!a.hasOwnProperty(re)&&(re==="selected"?e.selected=!1:tt(e,t,re,null,a,D));for(j in a)D=a[j],z=n[j],a.hasOwnProperty(j)&&D!==z&&(D!=null||z!=null)&&(j==="selected"?e.selected=D&&typeof D!="function"&&typeof D!="symbol":tt(e,t,j,D,a,z));return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Se in n)D=n[Se],n.hasOwnProperty(Se)&&D!=null&&!a.hasOwnProperty(Se)&&tt(e,t,Se,null,a,D);for(k in a)if(D=a[k],z=n[k],a.hasOwnProperty(k)&&D!==z&&(D!=null||z!=null))switch(k){case"children":case"dangerouslySetInnerHTML":if(D!=null)throw Error(u(137,t));break;default:tt(e,t,k,D,a,z)}return;default:if(Sl(t)){for(var nt in n)D=n[nt],n.hasOwnProperty(nt)&&D!==void 0&&!a.hasOwnProperty(nt)&&fu(e,t,nt,void 0,a,D);for(V in a)D=a[V],z=n[V],!a.hasOwnProperty(V)||D===z||D===void 0&&z===void 0||fu(e,t,V,D,a,z);return}}for(var C in n)D=n[C],n.hasOwnProperty(C)&&D!=null&&!a.hasOwnProperty(C)&&tt(e,t,C,null,a,D);for(Q in a)D=a[Q],z=n[Q],!a.hasOwnProperty(Q)||D===z||D==null&&z==null||tt(e,t,Q,D,a,z)}function Rh(e){switch(e){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function my(){if(typeof performance.getEntriesByType=="function"){for(var e=0,t=0,n=performance.getEntriesByType("resource"),a=0;a<n.length;a++){var i=n[a],r=i.transferSize,f=i.initiatorType,g=i.duration;if(r&&g&&Rh(f)){for(f=0,g=i.responseEnd,a+=1;a<n.length;a++){var j=n[a],k=j.startTime;if(k>g)break;var V=j.transferSize,Q=j.initiatorType;V&&Rh(Q)&&(j=j.responseEnd,f+=V*(j<g?1:(g-k)/(j-k)))}if(--a,t+=8*(r+f)/(i.duration/1e3),e++,10<e)break}}if(0<e)return t/e/1e6}return navigator.connection&&(e=navigator.connection.downlink,typeof e=="number")?e:5}var mu=null,hu=null;function Xc(e){return e.nodeType===9?e:e.ownerDocument}function Dh(e){switch(e){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function Lh(e,t){if(e===0)switch(t){case"svg":return 1;case"math":return 2;default:return 0}return e===1&&t==="foreignObject"?0:e}function pu(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.children=="bigint"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var vu=null;function hy(){var e=window.event;return e&&e.type==="popstate"?e===vu?!1:(vu=e,!0):(vu=null,!1)}var Oh=typeof setTimeout=="function"?setTimeout:void 0,py=typeof clearTimeout=="function"?clearTimeout:void 0,zh=typeof Promise=="function"?Promise:void 0,vy=typeof queueMicrotask=="function"?queueMicrotask:typeof zh<"u"?function(e){return zh.resolve(null).then(e).catch(gy)}:Oh;function gy(e){setTimeout(function(){throw e})}function dl(e){return e==="head"}function Bh(e,t){var n=t,a=0;do{var i=n.nextSibling;if(e.removeChild(n),i&&i.nodeType===8)if(n=i.data,n==="/$"||n==="/&"){if(a===0){e.removeChild(i),wi(t);return}a--}else if(n==="$"||n==="$?"||n==="$~"||n==="$!"||n==="&")a++;else if(n==="html")Ns(e.ownerDocument.documentElement);else if(n==="head"){n=e.ownerDocument.head,Ns(n);for(var r=n.firstChild;r;){var f=r.nextSibling,g=r.nodeName;r[ta]||g==="SCRIPT"||g==="STYLE"||g==="LINK"&&r.rel.toLowerCase()==="stylesheet"||n.removeChild(r),r=f}}else n==="body"&&Ns(e.ownerDocument.body);n=i}while(n);wi(t)}function qh(e,t){var n=e;e=0;do{var a=n.nextSibling;if(n.nodeType===1?t?(n._stashedDisplay=n.style.display,n.style.display="none"):(n.style.display=n._stashedDisplay||"",n.getAttribute("style")===""&&n.removeAttribute("style")):n.nodeType===3&&(t?(n._stashedText=n.nodeValue,n.nodeValue=""):n.nodeValue=n._stashedText||""),a&&a.nodeType===8)if(n=a.data,n==="/$"){if(e===0)break;e--}else n!=="$"&&n!=="$?"&&n!=="$~"&&n!=="$!"||e++;n=a}while(n)}function gu(e){var t=e.firstChild;for(t&&t.nodeType===10&&(t=t.nextSibling);t;){var n=t;switch(t=t.nextSibling,n.nodeName){case"HTML":case"HEAD":case"BODY":gu(n),Jl(n);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(n.rel.toLowerCase()==="stylesheet")continue}e.removeChild(n)}}function yy(e,t,n,a){for(;e.nodeType===1;){var i=n;if(e.nodeName.toLowerCase()!==t.toLowerCase()){if(!a&&(e.nodeName!=="INPUT"||e.type!=="hidden"))break}else if(a){if(!e[ta])switch(t){case"meta":if(!e.hasAttribute("itemprop"))break;return e;case"link":if(r=e.getAttribute("rel"),r==="stylesheet"&&e.hasAttribute("data-precedence"))break;if(r!==i.rel||e.getAttribute("href")!==(i.href==null||i.href===""?null:i.href)||e.getAttribute("crossorigin")!==(i.crossOrigin==null?null:i.crossOrigin)||e.getAttribute("title")!==(i.title==null?null:i.title))break;return e;case"style":if(e.hasAttribute("data-precedence"))break;return e;case"script":if(r=e.getAttribute("src"),(r!==(i.src==null?null:i.src)||e.getAttribute("type")!==(i.type==null?null:i.type)||e.getAttribute("crossorigin")!==(i.crossOrigin==null?null:i.crossOrigin))&&r&&e.hasAttribute("async")&&!e.hasAttribute("itemprop"))break;return e;default:return e}}else if(t==="input"&&e.type==="hidden"){var r=i.name==null?null:""+i.name;if(i.type==="hidden"&&e.getAttribute("name")===r)return e}else return e;if(e=zn(e.nextSibling),e===null)break}return null}function by(e,t,n){if(t==="")return null;for(;e.nodeType!==3;)if((e.nodeType!==1||e.nodeName!=="INPUT"||e.type!=="hidden")&&!n||(e=zn(e.nextSibling),e===null))return null;return e}function Hh(e,t){for(;e.nodeType!==8;)if((e.nodeType!==1||e.nodeName!=="INPUT"||e.type!=="hidden")&&!t||(e=zn(e.nextSibling),e===null))return null;return e}function yu(e){return e.data==="$?"||e.data==="$~"}function bu(e){return e.data==="$!"||e.data==="$?"&&e.ownerDocument.readyState!=="loading"}function xy(e,t){var n=e.ownerDocument;if(e.data==="$~")e._reactRetry=t;else if(e.data!=="$?"||n.readyState!=="loading")t();else{var a=function(){t(),n.removeEventListener("DOMContentLoaded",a)};n.addEventListener("DOMContentLoaded",a),e._reactRetry=a}}function zn(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?"||t==="$~"||t==="&"||t==="F!"||t==="F")break;if(t==="/$"||t==="/&")return null}}return e}var xu=null;function Uh(e){e=e.nextSibling;for(var t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="/$"||n==="/&"){if(t===0)return zn(e.nextSibling);t--}else n!=="$"&&n!=="$!"&&n!=="$?"&&n!=="$~"&&n!=="&"||t++}e=e.nextSibling}return null}function Gh(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="$"||n==="$!"||n==="$?"||n==="$~"||n==="&"){if(t===0)return e;t--}else n!=="/$"&&n!=="/&"||t++}e=e.previousSibling}return null}function Vh(e,t,n){switch(t=Xc(n),e){case"html":if(e=t.documentElement,!e)throw Error(u(452));return e;case"head":if(e=t.head,!e)throw Error(u(453));return e;case"body":if(e=t.body,!e)throw Error(u(454));return e;default:throw Error(u(451))}}function Ns(e){for(var t=e.attributes;t.length;)e.removeAttributeNode(t[0]);Jl(e)}var Bn=new Map,Yh=new Set;function Pc(e){return typeof e.getRootNode=="function"?e.getRootNode():e.nodeType===9?e:e.ownerDocument}var La=P.d;P.d={f:Sy,r:_y,D:jy,C:My,L:Ny,m:Ey,X:Cy,S:Ty,M:Ay};function Sy(){var e=La.f(),t=Hc();return e||t}function _y(e){var t=Wt(e);t!==null&&t.tag===5&&t.type==="form"?sm(t):La.r(e)}var Ti=typeof document>"u"?null:document;function Kh(e,t,n){var a=Ti;if(a&&typeof t=="string"&&t){var i=Vt(t);i='link[rel="'+e+'"][href="'+i+'"]',typeof n=="string"&&(i+='[crossorigin="'+n+'"]'),Yh.has(i)||(Yh.add(i),e={rel:e,crossOrigin:n,href:t},a.querySelector(i)===null&&(t=a.createElement("link"),$t(t,"link",e),ut(t),a.head.appendChild(t)))}}function jy(e){La.D(e),Kh("dns-prefetch",e,null)}function My(e,t){La.C(e,t),Kh("preconnect",e,t)}function Ny(e,t,n){La.L(e,t,n);var a=Ti;if(a&&e&&t){var i='link[rel="preload"][as="'+Vt(t)+'"]';t==="image"&&n&&n.imageSrcSet?(i+='[imagesrcset="'+Vt(n.imageSrcSet)+'"]',typeof n.imageSizes=="string"&&(i+='[imagesizes="'+Vt(n.imageSizes)+'"]')):i+='[href="'+Vt(e)+'"]';var r=i;switch(t){case"style":r=Ci(e);break;case"script":r=Ai(e)}Bn.has(r)||(e=x({rel:"preload",href:t==="image"&&n&&n.imageSrcSet?void 0:e,as:t},n),Bn.set(r,e),a.querySelector(i)!==null||t==="style"&&a.querySelector(Es(r))||t==="script"&&a.querySelector(Ts(r))||(t=a.createElement("link"),$t(t,"link",e),ut(t),a.head.appendChild(t)))}}function Ey(e,t){La.m(e,t);var n=Ti;if(n&&e){var a=t&&typeof t.as=="string"?t.as:"script",i='link[rel="modulepreload"][as="'+Vt(a)+'"][href="'+Vt(e)+'"]',r=i;switch(a){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":r=Ai(e)}if(!Bn.has(r)&&(e=x({rel:"modulepreload",href:e},t),Bn.set(r,e),n.querySelector(i)===null)){switch(a){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(n.querySelector(Ts(r)))return}a=n.createElement("link"),$t(a,"link",e),ut(a),n.head.appendChild(a)}}}function Ty(e,t,n){La.S(e,t,n);var a=Ti;if(a&&e){var i=na(a).hoistableStyles,r=Ci(e);t=t||"default";var f=i.get(r);if(!f){var g={loading:0,preload:null};if(f=a.querySelector(Es(r)))g.loading=5;else{e=x({rel:"stylesheet",href:e,"data-precedence":t},n),(n=Bn.get(r))&&Su(e,n);var j=f=a.createElement("link");ut(j),$t(j,"link",e),j._p=new Promise(function(k,V){j.onload=k,j.onerror=V}),j.addEventListener("load",function(){g.loading|=1}),j.addEventListener("error",function(){g.loading|=2}),g.loading|=4,Zc(f,t,a)}f={type:"stylesheet",instance:f,count:1,state:g},i.set(r,f)}}}function Cy(e,t){La.X(e,t);var n=Ti;if(n&&e){var a=na(n).hoistableScripts,i=Ai(e),r=a.get(i);r||(r=n.querySelector(Ts(i)),r||(e=x({src:e,async:!0},t),(t=Bn.get(i))&&_u(e,t),r=n.createElement("script"),ut(r),$t(r,"link",e),n.head.appendChild(r)),r={type:"script",instance:r,count:1,state:null},a.set(i,r))}}function Ay(e,t){La.M(e,t);var n=Ti;if(n&&e){var a=na(n).hoistableScripts,i=Ai(e),r=a.get(i);r||(r=n.querySelector(Ts(i)),r||(e=x({src:e,async:!0,type:"module"},t),(t=Bn.get(i))&&_u(e,t),r=n.createElement("script"),ut(r),$t(r,"link",e),n.head.appendChild(r)),r={type:"script",instance:r,count:1,state:null},a.set(i,r))}}function Qh(e,t,n,a){var i=(i=I.current)?Pc(i):null;if(!i)throw Error(u(446));switch(e){case"meta":case"title":return null;case"style":return typeof n.precedence=="string"&&typeof n.href=="string"?(t=Ci(n.href),n=na(i).hoistableStyles,a=n.get(t),a||(a={type:"style",instance:null,count:0,state:null},n.set(t,a)),a):{type:"void",instance:null,count:0,state:null};case"link":if(n.rel==="stylesheet"&&typeof n.href=="string"&&typeof n.precedence=="string"){e=Ci(n.href);var r=na(i).hoistableStyles,f=r.get(e);if(f||(i=i.ownerDocument||i,f={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},r.set(e,f),(r=i.querySelector(Es(e)))&&!r._p&&(f.instance=r,f.state.loading=5),Bn.has(e)||(n={rel:"preload",as:"style",href:n.href,crossOrigin:n.crossOrigin,integrity:n.integrity,media:n.media,hrefLang:n.hrefLang,referrerPolicy:n.referrerPolicy},Bn.set(e,n),r||wy(i,e,n,f.state))),t&&a===null)throw Error(u(528,""));return f}if(t&&a!==null)throw Error(u(529,""));return null;case"script":return t=n.async,n=n.src,typeof n=="string"&&t&&typeof t!="function"&&typeof t!="symbol"?(t=Ai(n),n=na(i).hoistableScripts,a=n.get(t),a||(a={type:"script",instance:null,count:0,state:null},n.set(t,a)),a):{type:"void",instance:null,count:0,state:null};default:throw Error(u(444,e))}}function Ci(e){return'href="'+Vt(e)+'"'}function Es(e){return'link[rel="stylesheet"]['+e+"]"}function $h(e){return x({},e,{"data-precedence":e.precedence,precedence:null})}function wy(e,t,n,a){e.querySelector('link[rel="preload"][as="style"]['+t+"]")?a.loading=1:(t=e.createElement("link"),a.preload=t,t.addEventListener("load",function(){return a.loading|=1}),t.addEventListener("error",function(){return a.loading|=2}),$t(t,"link",n),ut(t),e.head.appendChild(t))}function Ai(e){return'[src="'+Vt(e)+'"]'}function Ts(e){return"script[async]"+e}function Xh(e,t,n){if(t.count++,t.instance===null)switch(t.type){case"style":var a=e.querySelector('style[data-href~="'+Vt(n.href)+'"]');if(a)return t.instance=a,ut(a),a;var i=x({},n,{"data-href":n.href,"data-precedence":n.precedence,href:null,precedence:null});return a=(e.ownerDocument||e).createElement("style"),ut(a),$t(a,"style",i),Zc(a,n.precedence,e),t.instance=a;case"stylesheet":i=Ci(n.href);var r=e.querySelector(Es(i));if(r)return t.state.loading|=4,t.instance=r,ut(r),r;a=$h(n),(i=Bn.get(i))&&Su(a,i),r=(e.ownerDocument||e).createElement("link"),ut(r);var f=r;return f._p=new Promise(function(g,j){f.onload=g,f.onerror=j}),$t(r,"link",a),t.state.loading|=4,Zc(r,n.precedence,e),t.instance=r;case"script":return r=Ai(n.src),(i=e.querySelector(Ts(r)))?(t.instance=i,ut(i),i):(a=n,(i=Bn.get(r))&&(a=x({},n),_u(a,i)),e=e.ownerDocument||e,i=e.createElement("script"),ut(i),$t(i,"link",a),e.head.appendChild(i),t.instance=i);case"void":return null;default:throw Error(u(443,t.type))}else t.type==="stylesheet"&&(t.state.loading&4)===0&&(a=t.instance,t.state.loading|=4,Zc(a,n.precedence,e));return t.instance}function Zc(e,t,n){for(var a=n.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),i=a.length?a[a.length-1]:null,r=i,f=0;f<a.length;f++){var g=a[f];if(g.dataset.precedence===t)r=g;else if(r!==i)break}r?r.parentNode.insertBefore(e,r.nextSibling):(t=n.nodeType===9?n.head:n,t.insertBefore(e,t.firstChild))}function Su(e,t){e.crossOrigin==null&&(e.crossOrigin=t.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=t.referrerPolicy),e.title==null&&(e.title=t.title)}function _u(e,t){e.crossOrigin==null&&(e.crossOrigin=t.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=t.referrerPolicy),e.integrity==null&&(e.integrity=t.integrity)}var Jc=null;function Ph(e,t,n){if(Jc===null){var a=new Map,i=Jc=new Map;i.set(n,a)}else i=Jc,a=i.get(n),a||(a=new Map,i.set(n,a));if(a.has(e))return a;for(a.set(e,null),n=n.getElementsByTagName(e),i=0;i<n.length;i++){var r=n[i];if(!(r[ta]||r[Lt]||e==="link"&&r.getAttribute("rel")==="stylesheet")&&r.namespaceURI!=="http://www.w3.org/2000/svg"){var f=r.getAttribute(t)||"";f=e+f;var g=a.get(f);g?g.push(r):a.set(f,[r])}}return a}function Zh(e,t,n){e=e.ownerDocument||e,e.head.insertBefore(n,t==="title"?e.querySelector("head > title"):null)}function ky(e,t,n){if(n===1||t.itemProp!=null)return!1;switch(e){case"meta":case"title":return!0;case"style":if(typeof t.precedence!="string"||typeof t.href!="string"||t.href==="")break;return!0;case"link":if(typeof t.rel!="string"||typeof t.href!="string"||t.href===""||t.onLoad||t.onError)break;return t.rel==="stylesheet"?(e=t.disabled,typeof t.precedence=="string"&&e==null):!0;case"script":if(t.async&&typeof t.async!="function"&&typeof t.async!="symbol"&&!t.onLoad&&!t.onError&&t.src&&typeof t.src=="string")return!0}return!1}function Jh(e){return!(e.type==="stylesheet"&&(e.state.loading&3)===0)}function Ry(e,t,n,a){if(n.type==="stylesheet"&&(typeof a.media!="string"||matchMedia(a.media).matches!==!1)&&(n.state.loading&4)===0){if(n.instance===null){var i=Ci(a.href),r=t.querySelector(Es(i));if(r){t=r._p,t!==null&&typeof t=="object"&&typeof t.then=="function"&&(e.count++,e=Fc.bind(e),t.then(e,e)),n.state.loading|=4,n.instance=r,ut(r);return}r=t.ownerDocument||t,a=$h(a),(i=Bn.get(i))&&Su(a,i),r=r.createElement("link"),ut(r);var f=r;f._p=new Promise(function(g,j){f.onload=g,f.onerror=j}),$t(r,"link",a),n.instance=r}e.stylesheets===null&&(e.stylesheets=new Map),e.stylesheets.set(n,t),(t=n.state.preload)&&(n.state.loading&3)===0&&(e.count++,n=Fc.bind(e),t.addEventListener("load",n),t.addEventListener("error",n))}}var ju=0;function Dy(e,t){return e.stylesheets&&e.count===0&&Wc(e,e.stylesheets),0<e.count||0<e.imgCount?function(n){var a=setTimeout(function(){if(e.stylesheets&&Wc(e,e.stylesheets),e.unsuspend){var r=e.unsuspend;e.unsuspend=null,r()}},6e4+t);0<e.imgBytes&&ju===0&&(ju=62500*my());var i=setTimeout(function(){if(e.waitingForImages=!1,e.count===0&&(e.stylesheets&&Wc(e,e.stylesheets),e.unsuspend)){var r=e.unsuspend;e.unsuspend=null,r()}},(e.imgBytes>ju?50:800)+t);return e.unsuspend=n,function(){e.unsuspend=null,clearTimeout(a),clearTimeout(i)}}:null}function Fc(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)Wc(this,this.stylesheets);else if(this.unsuspend){var e=this.unsuspend;this.unsuspend=null,e()}}}var Ic=null;function Wc(e,t){e.stylesheets=null,e.unsuspend!==null&&(e.count++,Ic=new Map,t.forEach(Ly,e),Ic=null,Fc.call(e))}function Ly(e,t){if(!(t.state.loading&4)){var n=Ic.get(e);if(n)var a=n.get(null);else{n=new Map,Ic.set(e,n);for(var i=e.querySelectorAll("link[data-precedence],style[data-precedence]"),r=0;r<i.length;r++){var f=i[r];(f.nodeName==="LINK"||f.getAttribute("media")!=="not all")&&(n.set(f.dataset.precedence,f),a=f)}a&&n.set(null,a)}i=t.instance,f=i.getAttribute("data-precedence"),r=n.get(f)||a,r===a&&n.set(null,i),n.set(f,i),this.count++,a=Fc.bind(this),i.addEventListener("load",a),i.addEventListener("error",a),r?r.parentNode.insertBefore(i,r.nextSibling):(e=e.nodeType===9?e.head:e,e.insertBefore(i,e.firstChild)),t.state.loading|=4}}var Cs={$$typeof:ee,Provider:null,Consumer:null,_currentValue:W,_currentValue2:W,_threadCount:0};function Oy(e,t,n,a,i,r,f,g,j){this.tag=1,this.containerInfo=e,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Un(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Un(0),this.hiddenUpdates=Un(null),this.identifierPrefix=a,this.onUncaughtError=i,this.onCaughtError=r,this.onRecoverableError=f,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=j,this.incompleteTransitions=new Map}function Fh(e,t,n,a,i,r,f,g,j,k,V,Q){return e=new Oy(e,t,n,f,j,k,V,Q,g),t=1,r===!0&&(t|=24),r=bn(3,null,null,t),e.current=r,r.stateNode=e,t=to(),t.refCount++,e.pooledCache=t,t.refCount++,r.memoizedState={element:a,isDehydrated:n,cache:t},io(r),e}function Ih(e){return e?(e=si,e):si}function Wh(e,t,n,a,i,r){i=Ih(i),a.context===null?a.context=i:a.pendingContext=i,a=el(t),a.payload={element:n},r=r===void 0?null:r,r!==null&&(a.callback=r),n=tl(e,a,t),n!==null&&(fn(n,e,t),ss(n,e,t))}function ep(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var n=e.retryLane;e.retryLane=n!==0&&n<t?n:t}}function Mu(e,t){ep(e,t),(e=e.alternate)&&ep(e,t)}function tp(e){if(e.tag===13||e.tag===31){var t=Cl(e,67108864);t!==null&&fn(t,e,67108864),Mu(e,67108864)}}function np(e){if(e.tag===13||e.tag===31){var t=Mn();t=Ya(t);var n=Cl(e,t);n!==null&&fn(n,e,t),Mu(e,t)}}var er=!0;function zy(e,t,n,a){var i=E.T;E.T=null;var r=P.p;try{P.p=2,Nu(e,t,n,a)}finally{P.p=r,E.T=i}}function By(e,t,n,a){var i=E.T;E.T=null;var r=P.p;try{P.p=8,Nu(e,t,n,a)}finally{P.p=r,E.T=i}}function Nu(e,t,n,a){if(er){var i=Eu(a);if(i===null)du(e,t,a,tr,n),lp(e,a);else if(Hy(i,e,t,n,a))a.stopPropagation();else if(lp(e,a),t&4&&-1<qy.indexOf(e)){for(;i!==null;){var r=Wt(i);if(r!==null)switch(r.tag){case 3:if(r=r.stateNode,r.current.memoizedState.isDehydrated){var f=St(r.pendingLanes);if(f!==0){var g=r;for(g.pendingLanes|=2,g.entangledLanes|=2;f;){var j=1<<31-xt(f);g.entanglements[1]|=j,f&=~j}ca(r),(Ze&6)===0&&(Bc=ge()+500,_s(0))}}break;case 31:case 13:g=Cl(r,2),g!==null&&fn(g,r,2),Hc(),Mu(r,2)}if(r=Eu(a),r===null&&du(e,t,a,tr,n),r===i)break;i=r}i!==null&&a.stopPropagation()}else du(e,t,a,null,n)}}function Eu(e){return e=aa(e),Tu(e)}var tr=null;function Tu(e){if(tr=null,e=ha(e),e!==null){var t=m(e);if(t===null)e=null;else{var n=t.tag;if(n===13){if(e=h(t),e!==null)return e;e=null}else if(n===31){if(e=v(t),e!==null)return e;e=null}else if(n===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null)}}return tr=e,null}function ap(e){switch(e){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Re()){case Ke:return 2;case Ce:return 8;case A:case Z:return 32;case Me:return 268435456;default:return 32}default:return 32}}var Cu=!1,fl=null,ml=null,hl=null,As=new Map,ws=new Map,pl=[],qy="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function lp(e,t){switch(e){case"focusin":case"focusout":fl=null;break;case"dragenter":case"dragleave":ml=null;break;case"mouseover":case"mouseout":hl=null;break;case"pointerover":case"pointerout":As.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":ws.delete(t.pointerId)}}function ks(e,t,n,a,i,r){return e===null||e.nativeEvent!==r?(e={blockedOn:t,domEventName:n,eventSystemFlags:a,nativeEvent:r,targetContainers:[i]},t!==null&&(t=Wt(t),t!==null&&tp(t)),e):(e.eventSystemFlags|=a,t=e.targetContainers,i!==null&&t.indexOf(i)===-1&&t.push(i),e)}function Hy(e,t,n,a,i){switch(t){case"focusin":return fl=ks(fl,e,t,n,a,i),!0;case"dragenter":return ml=ks(ml,e,t,n,a,i),!0;case"mouseover":return hl=ks(hl,e,t,n,a,i),!0;case"pointerover":var r=i.pointerId;return As.set(r,ks(As.get(r)||null,e,t,n,a,i)),!0;case"gotpointercapture":return r=i.pointerId,ws.set(r,ks(ws.get(r)||null,e,t,n,a,i)),!0}return!1}function ip(e){var t=ha(e.target);if(t!==null){var n=m(t);if(n!==null){if(t=n.tag,t===13){if(t=h(n),t!==null){e.blockedOn=t,Zl(e.priority,function(){np(n)});return}}else if(t===31){if(t=v(n),t!==null){e.blockedOn=t,Zl(e.priority,function(){np(n)});return}}else if(t===3&&n.stateNode.current.memoizedState.isDehydrated){e.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}e.blockedOn=null}function nr(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var n=Eu(e.nativeEvent);if(n===null){n=e.nativeEvent;var a=new n.constructor(n.type,n);ei=a,n.target.dispatchEvent(a),ei=null}else return t=Wt(n),t!==null&&tp(t),e.blockedOn=n,!1;t.shift()}return!0}function sp(e,t,n){nr(e)&&n.delete(t)}function Uy(){Cu=!1,fl!==null&&nr(fl)&&(fl=null),ml!==null&&nr(ml)&&(ml=null),hl!==null&&nr(hl)&&(hl=null),As.forEach(sp),ws.forEach(sp)}function ar(e,t){e.blockedOn===t&&(e.blockedOn=null,Cu||(Cu=!0,l.unstable_scheduleCallback(l.unstable_NormalPriority,Uy)))}var lr=null;function cp(e){lr!==e&&(lr=e,l.unstable_scheduleCallback(l.unstable_NormalPriority,function(){lr===e&&(lr=null);for(var t=0;t<e.length;t+=3){var n=e[t],a=e[t+1],i=e[t+2];if(typeof a!="function"){if(Tu(a||n)===null)continue;break}var r=Wt(n);r!==null&&(e.splice(t,3),t-=3,Eo(r,{pending:!0,data:i,method:n.method,action:a},a,i))}}))}function wi(e){function t(j){return ar(j,e)}fl!==null&&ar(fl,e),ml!==null&&ar(ml,e),hl!==null&&ar(hl,e),As.forEach(t),ws.forEach(t);for(var n=0;n<pl.length;n++){var a=pl[n];a.blockedOn===e&&(a.blockedOn=null)}for(;0<pl.length&&(n=pl[0],n.blockedOn===null);)ip(n),n.blockedOn===null&&pl.shift();if(n=(e.ownerDocument||e).$$reactFormReplay,n!=null)for(a=0;a<n.length;a+=3){var i=n[a],r=n[a+1],f=i[Ut]||null;if(typeof r=="function")f||cp(n);else if(f){var g=null;if(r&&r.hasAttribute("formAction")){if(i=r,f=r[Ut]||null)g=f.formAction;else if(Tu(i)!==null)continue}else g=f.action;typeof g=="function"?n[a+1]=g:(n.splice(a,3),a-=3),cp(n)}}}function rp(){function e(r){r.canIntercept&&r.info==="react-transition"&&r.intercept({handler:function(){return new Promise(function(f){return i=f})},focusReset:"manual",scroll:"manual"})}function t(){i!==null&&(i(),i=null),a||setTimeout(n,20)}function n(){if(!a&&!navigation.transition){var r=navigation.currentEntry;r&&r.url!=null&&navigation.navigate(r.url,{state:r.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var a=!1,i=null;return navigation.addEventListener("navigate",e),navigation.addEventListener("navigatesuccess",t),navigation.addEventListener("navigateerror",t),setTimeout(n,100),function(){a=!0,navigation.removeEventListener("navigate",e),navigation.removeEventListener("navigatesuccess",t),navigation.removeEventListener("navigateerror",t),i!==null&&(i(),i=null)}}}function Au(e){this._internalRoot=e}ir.prototype.render=Au.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(u(409));var n=t.current,a=Mn();Wh(n,a,e,t,null,null)},ir.prototype.unmount=Au.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;Wh(e.current,2,null,e,null,null),Hc(),t[hn]=null}};function ir(e){this._internalRoot=e}ir.prototype.unstable_scheduleHydration=function(e){if(e){var t=Pl();e={blockedOn:null,target:e,priority:t};for(var n=0;n<pl.length&&t!==0&&t<pl[n].priority;n++);pl.splice(n,0,e),n===0&&ip(e)}};var op=c.version;if(op!=="19.2.4")throw Error(u(527,op,"19.2.4"));P.findDOMNode=function(e){var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(u(188)):(e=Object.keys(e).join(","),Error(u(268,e)));return e=y(t),e=e!==null?S(e):null,e=e===null?null:e.stateNode,e};var Gy={bundleType:0,version:"19.2.4",rendererPackageName:"react-dom",currentDispatcherRef:E,reconcilerVersion:"19.2.4"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var sr=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!sr.isDisabled&&sr.supportsFiber)try{It=sr.inject(Gy),Ie=sr}catch{}}return Ds.createRoot=function(e,t){if(!d(e))throw Error(u(299));var n=!1,a="",i=vm,r=gm,f=ym;return t!=null&&(t.unstable_strictMode===!0&&(n=!0),t.identifierPrefix!==void 0&&(a=t.identifierPrefix),t.onUncaughtError!==void 0&&(i=t.onUncaughtError),t.onCaughtError!==void 0&&(r=t.onCaughtError),t.onRecoverableError!==void 0&&(f=t.onRecoverableError)),t=Fh(e,1,!1,null,null,n,a,null,i,r,f,rp),e[hn]=t.current,uu(e),new Au(t)},Ds.hydrateRoot=function(e,t,n){if(!d(e))throw Error(u(299));var a=!1,i="",r=vm,f=gm,g=ym,j=null;return n!=null&&(n.unstable_strictMode===!0&&(a=!0),n.identifierPrefix!==void 0&&(i=n.identifierPrefix),n.onUncaughtError!==void 0&&(r=n.onUncaughtError),n.onCaughtError!==void 0&&(f=n.onCaughtError),n.onRecoverableError!==void 0&&(g=n.onRecoverableError),n.formState!==void 0&&(j=n.formState)),t=Fh(e,1,!0,t,n??null,a,i,j,r,f,g,rp),t.context=Ih(null),n=t.current,a=Mn(),a=Ya(a),i=el(a),i.callback=null,tl(n,i,a),n=a,t.current.lanes=n,Pt(t,n),ca(t),e[hn]=t.current,uu(e),new ir(t)},Ds.version="19.2.4",Ds}var bp;function Iy(){if(bp)return Ru.exports;bp=1;function l(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(l)}catch(c){console.error(c)}}return l(),Ru.exports=Fy(),Ru.exports}var Wy=Iy();const eb=Zp(Wy);var xp="popstate";function Sp(l){return typeof l=="object"&&l!=null&&"pathname"in l&&"search"in l&&"hash"in l&&"state"in l&&"key"in l}function tb(l={}){function c(u,d){let m=d.state?.masked,{pathname:h,search:v,hash:b}=m||u.location;return td("",{pathname:h,search:v,hash:b},d.state&&d.state.usr||null,d.state&&d.state.key||"default",m?{pathname:u.location.pathname,search:u.location.search,hash:u.location.hash}:void 0)}function o(u,d){return typeof d=="string"?d:Hs(d)}return ab(c,o,null,l)}function Bt(l,c){if(l===!1||l===null||typeof l>"u")throw new Error(c)}function In(l,c){if(!l){typeof console<"u"&&console.warn(c);try{throw new Error(c)}catch{}}}function nb(){return Math.random().toString(36).substring(2,10)}function _p(l,c){return{usr:l.state,key:l.key,idx:c,masked:l.unstable_mask?{pathname:l.pathname,search:l.search,hash:l.hash}:void 0}}function td(l,c,o=null,u,d){return{pathname:typeof l=="string"?l:l.pathname,search:"",hash:"",...typeof c=="string"?Ks(c):c,state:o,key:c&&c.key||u||nb(),unstable_mask:d}}function Hs({pathname:l="/",search:c="",hash:o=""}){return c&&c!=="?"&&(l+=c.charAt(0)==="?"?c:"?"+c),o&&o!=="#"&&(l+=o.charAt(0)==="#"?o:"#"+o),l}function Ks(l){let c={};if(l){let o=l.indexOf("#");o>=0&&(c.hash=l.substring(o),l=l.substring(0,o));let u=l.indexOf("?");u>=0&&(c.search=l.substring(u),l=l.substring(0,u)),l&&(c.pathname=l)}return c}function ab(l,c,o,u={}){let{window:d=document.defaultView,v5Compat:m=!1}=u,h=d.history,v="POP",b=null,y=S();y==null&&(y=0,h.replaceState({...h.state,idx:y},""));function S(){return(h.state||{idx:null}).idx}function x(){v="POP";let R=S(),$=R==null?null:R-y;y=R,b&&b({action:v,location:Y.location,delta:$})}function O(R,$){v="PUSH";let F=Sp(R)?R:td(Y.location,R,$);y=S()+1;let ee=_p(F,y),oe=Y.createHref(F.unstable_mask||F);try{h.pushState(ee,"",oe)}catch(xe){if(xe instanceof DOMException&&xe.name==="DataCloneError")throw xe;d.location.assign(oe)}m&&b&&b({action:v,location:Y.location,delta:1})}function G(R,$){v="REPLACE";let F=Sp(R)?R:td(Y.location,R,$);y=S();let ee=_p(F,y),oe=Y.createHref(F.unstable_mask||F);h.replaceState(ee,"",oe),m&&b&&b({action:v,location:Y.location,delta:0})}function L(R){return lb(R)}let Y={get action(){return v},get location(){return l(d,h)},listen(R){if(b)throw new Error("A history only accepts one active listener");return d.addEventListener(xp,x),b=R,()=>{d.removeEventListener(xp,x),b=null}},createHref(R){return c(d,R)},createURL:L,encodeLocation(R){let $=L(R);return{pathname:$.pathname,search:$.search,hash:$.hash}},push:O,replace:G,go(R){return h.go(R)}};return Y}function lb(l,c=!1){let o="http://localhost";typeof window<"u"&&(o=window.location.origin!=="null"?window.location.origin:window.location.href),Bt(o,"No window.location.(origin|href) available to create URL");let u=typeof l=="string"?l:Hs(l);return u=u.replace(/ $/,"%20"),!c&&u.startsWith("//")&&(u=o+u),new URL(u,o)}function Jp(l,c,o="/"){return ib(l,c,o,!1)}function ib(l,c,o,u){let d=typeof c=="string"?Ks(c):c,m=qa(d.pathname||"/",o);if(m==null)return null;let h=Fp(l);sb(h);let v=null;for(let b=0;v==null&&b<h.length;++b){let y=gb(m);v=pb(h[b],y,u)}return v}function Fp(l,c=[],o=[],u="",d=!1){let m=(h,v,b=d,y)=>{let S={relativePath:y===void 0?h.path||"":y,caseSensitive:h.caseSensitive===!0,childrenIndex:v,route:h};if(S.relativePath.startsWith("/")){if(!S.relativePath.startsWith(u)&&b)return;Bt(S.relativePath.startsWith(u),`Absolute route path "${S.relativePath}" nested under path "${u}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),S.relativePath=S.relativePath.slice(u.length)}let x=oa([u,S.relativePath]),O=o.concat(S);h.children&&h.children.length>0&&(Bt(h.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${x}".`),Fp(h.children,c,O,x,b)),!(h.path==null&&!h.index)&&c.push({path:x,score:mb(x,h.index),routesMeta:O})};return l.forEach((h,v)=>{if(h.path===""||!h.path?.includes("?"))m(h,v);else for(let b of Ip(h.path))m(h,v,!0,b)}),c}function Ip(l){let c=l.split("/");if(c.length===0)return[];let[o,...u]=c,d=o.endsWith("?"),m=o.replace(/\?$/,"");if(u.length===0)return d?[m,""]:[m];let h=Ip(u.join("/")),v=[];return v.push(...h.map(b=>b===""?m:[m,b].join("/"))),d&&v.push(...h),v.map(b=>l.startsWith("/")&&b===""?"/":b)}function sb(l){l.sort((c,o)=>c.score!==o.score?o.score-c.score:hb(c.routesMeta.map(u=>u.childrenIndex),o.routesMeta.map(u=>u.childrenIndex)))}var cb=/^:[\w-]+$/,rb=3,ob=2,ub=1,db=10,fb=-2,jp=l=>l==="*";function mb(l,c){let o=l.split("/"),u=o.length;return o.some(jp)&&(u+=fb),c&&(u+=ob),o.filter(d=>!jp(d)).reduce((d,m)=>d+(cb.test(m)?rb:m===""?ub:db),u)}function hb(l,c){return l.length===c.length&&l.slice(0,-1).every((u,d)=>u===c[d])?l[l.length-1]-c[c.length-1]:0}function pb(l,c,o=!1){let{routesMeta:u}=l,d={},m="/",h=[];for(let v=0;v<u.length;++v){let b=u[v],y=v===u.length-1,S=m==="/"?c:c.slice(m.length)||"/",x=gr({path:b.relativePath,caseSensitive:b.caseSensitive,end:y},S),O=b.route;if(!x&&y&&o&&!u[u.length-1].route.index&&(x=gr({path:b.relativePath,caseSensitive:b.caseSensitive,end:!1},S)),!x)return null;Object.assign(d,x.params),h.push({params:d,pathname:oa([m,x.pathname]),pathnameBase:Sb(oa([m,x.pathnameBase])),route:O}),x.pathnameBase!=="/"&&(m=oa([m,x.pathnameBase]))}return h}function gr(l,c){typeof l=="string"&&(l={path:l,caseSensitive:!1,end:!0});let[o,u]=vb(l.path,l.caseSensitive,l.end),d=c.match(o);if(!d)return null;let m=d[0],h=m.replace(/(.)\/+$/,"$1"),v=d.slice(1);return{params:u.reduce((y,{paramName:S,isOptional:x},O)=>{if(S==="*"){let L=v[O]||"";h=m.slice(0,m.length-L.length).replace(/(.)\/+$/,"$1")}const G=v[O];return x&&!G?y[S]=void 0:y[S]=(G||"").replace(/%2F/g,"/"),y},{}),pathname:m,pathnameBase:h,pattern:l}}function vb(l,c=!1,o=!0){In(l==="*"||!l.endsWith("*")||l.endsWith("/*"),`Route path "${l}" will be treated as if it were "${l.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${l.replace(/\*$/,"/*")}".`);let u=[],d="^"+l.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(h,v,b,y,S)=>{if(u.push({paramName:v,isOptional:b!=null}),b){let x=S.charAt(y+h.length);return x&&x!=="/"?"/([^\\/]*)":"(?:/([^\\/]*))?"}return"/([^\\/]+)"}).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return l.endsWith("*")?(u.push({paramName:"*"}),d+=l==="*"||l==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):o?d+="\\/*$":l!==""&&l!=="/"&&(d+="(?:(?=\\/|$))"),[new RegExp(d,c?void 0:"i"),u]}function gb(l){try{return l.split("/").map(c=>decodeURIComponent(c).replace(/\//g,"%2F")).join("/")}catch(c){return In(!1,`The URL path "${l}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${c}).`),l}}function qa(l,c){if(c==="/")return l;if(!l.toLowerCase().startsWith(c.toLowerCase()))return null;let o=c.endsWith("/")?c.length-1:c.length,u=l.charAt(o);return u&&u!=="/"?null:l.slice(o)||"/"}var yb=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i;function bb(l,c="/"){let{pathname:o,search:u="",hash:d=""}=typeof l=="string"?Ks(l):l,m;return o?(o=o.replace(/\/\/+/g,"/"),o.startsWith("/")?m=Mp(o.substring(1),"/"):m=Mp(o,c)):m=c,{pathname:m,search:_b(u),hash:jb(d)}}function Mp(l,c){let o=c.replace(/\/+$/,"").split("/");return l.split("/").forEach(d=>{d===".."?o.length>1&&o.pop():d!=="."&&o.push(d)}),o.length>1?o.join("/"):"/"}function zu(l,c,o,u){return`Cannot include a '${l}' character in a manually specified \`to.${c}\` field [${JSON.stringify(u)}].  Please separate it out to the \`to.${o}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function xb(l){return l.filter((c,o)=>o===0||c.route.path&&c.route.path.length>0)}function Wp(l){let c=xb(l);return c.map((o,u)=>u===c.length-1?o.pathname:o.pathnameBase)}function hd(l,c,o,u=!1){let d;typeof l=="string"?d=Ks(l):(d={...l},Bt(!d.pathname||!d.pathname.includes("?"),zu("?","pathname","search",d)),Bt(!d.pathname||!d.pathname.includes("#"),zu("#","pathname","hash",d)),Bt(!d.search||!d.search.includes("#"),zu("#","search","hash",d)));let m=l===""||d.pathname==="",h=m?"/":d.pathname,v;if(h==null)v=o;else{let x=c.length-1;if(!u&&h.startsWith("..")){let O=h.split("/");for(;O[0]==="..";)O.shift(),x-=1;d.pathname=O.join("/")}v=x>=0?c[x]:"/"}let b=bb(d,v),y=h&&h!=="/"&&h.endsWith("/"),S=(m||h===".")&&o.endsWith("/");return!b.pathname.endsWith("/")&&(y||S)&&(b.pathname+="/"),b}var oa=l=>l.join("/").replace(/\/\/+/g,"/"),Sb=l=>l.replace(/\/+$/,"").replace(/^\/*/,"/"),_b=l=>!l||l==="?"?"":l.startsWith("?")?l:"?"+l,jb=l=>!l||l==="#"?"":l.startsWith("#")?l:"#"+l,Mb=class{constructor(l,c,o,u=!1){this.status=l,this.statusText=c||"",this.internal=u,o instanceof Error?(this.data=o.toString(),this.error=o):this.data=o}};function Nb(l){return l!=null&&typeof l.status=="number"&&typeof l.statusText=="string"&&typeof l.internal=="boolean"&&"data"in l}function Eb(l){return l.map(c=>c.route.path).filter(Boolean).join("/").replace(/\/\/*/g,"/")||"/"}var ev=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";function tv(l,c){let o=l;if(typeof o!="string"||!yb.test(o))return{absoluteURL:void 0,isExternal:!1,to:o};let u=o,d=!1;if(ev)try{let m=new URL(window.location.href),h=o.startsWith("//")?new URL(m.protocol+o):new URL(o),v=qa(h.pathname,c);h.origin===m.origin&&v!=null?o=v+h.search+h.hash:d=!0}catch{In(!1,`<Link to="${o}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}return{absoluteURL:u,isExternal:d,to:o}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");var nv=["POST","PUT","PATCH","DELETE"];new Set(nv);var Tb=["GET",...nv];new Set(Tb);var Bi=p.createContext(null);Bi.displayName="DataRouter";var Nr=p.createContext(null);Nr.displayName="DataRouterState";var Cb=p.createContext(!1),av=p.createContext({isTransitioning:!1});av.displayName="ViewTransition";var Ab=p.createContext(new Map);Ab.displayName="Fetchers";var wb=p.createContext(null);wb.displayName="Await";var qn=p.createContext(null);qn.displayName="Navigation";var Er=p.createContext(null);Er.displayName="Location";var Ua=p.createContext({outlet:null,matches:[],isDataRoute:!1});Ua.displayName="Route";var pd=p.createContext(null);pd.displayName="RouteError";var lv="REACT_ROUTER_ERROR",kb="REDIRECT",Rb="ROUTE_ERROR_RESPONSE";function Db(l){if(l.startsWith(`${lv}:${kb}:{`))try{let c=JSON.parse(l.slice(28));if(typeof c=="object"&&c&&typeof c.status=="number"&&typeof c.statusText=="string"&&typeof c.location=="string"&&typeof c.reloadDocument=="boolean"&&typeof c.replace=="boolean")return c}catch{}}function Lb(l){if(l.startsWith(`${lv}:${Rb}:{`))try{let c=JSON.parse(l.slice(40));if(typeof c=="object"&&c&&typeof c.status=="number"&&typeof c.statusText=="string")return new Mb(c.status,c.statusText,c.data)}catch{}}function Ob(l,{relative:c}={}){Bt(Qs(),"useHref() may be used only in the context of a <Router> component.");let{basename:o,navigator:u}=p.useContext(qn),{hash:d,pathname:m,search:h}=Xs(l,{relative:c}),v=m;return o!=="/"&&(v=m==="/"?o:oa([o,m])),u.createHref({pathname:v,search:h,hash:d})}function Qs(){return p.useContext(Er)!=null}function Wn(){return Bt(Qs(),"useLocation() may be used only in the context of a <Router> component."),p.useContext(Er).location}var iv="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function sv(l){p.useContext(qn).static||p.useLayoutEffect(l)}function $s(){let{isDataRoute:l}=p.useContext(Ua);return l?Pb():zb()}function zb(){Bt(Qs(),"useNavigate() may be used only in the context of a <Router> component.");let l=p.useContext(Bi),{basename:c,navigator:o}=p.useContext(qn),{matches:u}=p.useContext(Ua),{pathname:d}=Wn(),m=JSON.stringify(Wp(u)),h=p.useRef(!1);return sv(()=>{h.current=!0}),p.useCallback((b,y={})=>{if(In(h.current,iv),!h.current)return;if(typeof b=="number"){o.go(b);return}let S=hd(b,JSON.parse(m),d,y.relative==="path");l==null&&c!=="/"&&(S.pathname=S.pathname==="/"?c:oa([c,S.pathname])),(y.replace?o.replace:o.push)(S,y.state,y)},[c,o,m,d,l])}p.createContext(null);function Xs(l,{relative:c}={}){let{matches:o}=p.useContext(Ua),{pathname:u}=Wn(),d=JSON.stringify(Wp(o));return p.useMemo(()=>hd(l,JSON.parse(d),u,c==="path"),[l,d,u,c])}function Bb(l,c){return cv(l)}function cv(l,c,o){Bt(Qs(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:u}=p.useContext(qn),{matches:d}=p.useContext(Ua),m=d[d.length-1],h=m?m.params:{},v=m?m.pathname:"/",b=m?m.pathnameBase:"/",y=m&&m.route;{let R=y&&y.path||"";ov(v,!y||R.endsWith("*")||R.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${v}" (under <Route path="${R}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${R}"> to <Route path="${R==="/"?"*":`${R}/*`}">.`)}let S=Wn(),x;x=S;let O=x.pathname||"/",G=O;if(b!=="/"){let R=b.replace(/^\//,"").split("/");G="/"+O.replace(/^\//,"").split("/").slice(R.length).join("/")}let L=Jp(l,{pathname:G});return In(y||L!=null,`No routes matched location "${x.pathname}${x.search}${x.hash}" `),In(L==null||L[L.length-1].route.element!==void 0||L[L.length-1].route.Component!==void 0||L[L.length-1].route.lazy!==void 0,`Matched leaf route at location "${x.pathname}${x.search}${x.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`),Vb(L&&L.map(R=>Object.assign({},R,{params:Object.assign({},h,R.params),pathname:oa([b,u.encodeLocation?u.encodeLocation(R.pathname.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:R.pathname]),pathnameBase:R.pathnameBase==="/"?b:oa([b,u.encodeLocation?u.encodeLocation(R.pathnameBase.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:R.pathnameBase])})),d,o)}function qb(){let l=Xb(),c=Nb(l)?`${l.status} ${l.statusText}`:l instanceof Error?l.message:JSON.stringify(l),o=l instanceof Error?l.stack:null,u="rgba(200,200,200, 0.5)",d={padding:"0.5rem",backgroundColor:u},m={padding:"2px 4px",backgroundColor:u},h=null;return console.error("Error handled by React Router default ErrorBoundary:",l),h=p.createElement(p.Fragment,null,p.createElement("p",null," Hey developer "),p.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",p.createElement("code",{style:m},"ErrorBoundary")," or"," ",p.createElement("code",{style:m},"errorElement")," prop on your route.")),p.createElement(p.Fragment,null,p.createElement("h2",null,"Unexpected Application Error!"),p.createElement("h3",{style:{fontStyle:"italic"}},c),o?p.createElement("pre",{style:d},o):null,h)}var Hb=p.createElement(qb,null),rv=class extends p.Component{constructor(l){super(l),this.state={location:l.location,revalidation:l.revalidation,error:l.error}}static getDerivedStateFromError(l){return{error:l}}static getDerivedStateFromProps(l,c){return c.location!==l.location||c.revalidation!=="idle"&&l.revalidation==="idle"?{error:l.error,location:l.location,revalidation:l.revalidation}:{error:l.error!==void 0?l.error:c.error,location:c.location,revalidation:l.revalidation||c.revalidation}}componentDidCatch(l,c){this.props.onError?this.props.onError(l,c):console.error("React Router caught the following error during render",l)}render(){let l=this.state.error;if(this.context&&typeof l=="object"&&l&&"digest"in l&&typeof l.digest=="string"){const o=Lb(l.digest);o&&(l=o)}let c=l!==void 0?p.createElement(Ua.Provider,{value:this.props.routeContext},p.createElement(pd.Provider,{value:l,children:this.props.component})):this.props.children;return this.context?p.createElement(Ub,{error:l},c):c}};rv.contextType=Cb;var Bu=new WeakMap;function Ub({children:l,error:c}){let{basename:o}=p.useContext(qn);if(typeof c=="object"&&c&&"digest"in c&&typeof c.digest=="string"){let u=Db(c.digest);if(u){let d=Bu.get(c);if(d)throw d;let m=tv(u.location,o);if(ev&&!Bu.get(c))if(m.isExternal||u.reloadDocument)window.location.href=m.absoluteURL||m.to;else{const h=Promise.resolve().then(()=>window.__reactRouterDataRouter.navigate(m.to,{replace:u.replace}));throw Bu.set(c,h),h}return p.createElement("meta",{httpEquiv:"refresh",content:`0;url=${m.absoluteURL||m.to}`})}}return l}function Gb({routeContext:l,match:c,children:o}){let u=p.useContext(Bi);return u&&u.static&&u.staticContext&&(c.route.errorElement||c.route.ErrorBoundary)&&(u.staticContext._deepestRenderedBoundaryId=c.route.id),p.createElement(Ua.Provider,{value:l},o)}function Vb(l,c=[],o){let u=o?.state;if(l==null){if(!u)return null;if(u.errors)l=u.matches;else if(c.length===0&&!u.initialized&&u.matches.length>0)l=u.matches;else return null}let d=l,m=u?.errors;if(m!=null){let S=d.findIndex(x=>x.route.id&&m?.[x.route.id]!==void 0);Bt(S>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(m).join(",")}`),d=d.slice(0,Math.min(d.length,S+1))}let h=!1,v=-1;if(o&&u){h=u.renderFallback;for(let S=0;S<d.length;S++){let x=d[S];if((x.route.HydrateFallback||x.route.hydrateFallbackElement)&&(v=S),x.route.id){let{loaderData:O,errors:G}=u,L=x.route.loader&&!O.hasOwnProperty(x.route.id)&&(!G||G[x.route.id]===void 0);if(x.route.lazy||L){o.isStatic&&(h=!0),v>=0?d=d.slice(0,v+1):d=[d[0]];break}}}}let b=o?.onError,y=u&&b?(S,x)=>{b(S,{location:u.location,params:u.matches?.[0]?.params??{},unstable_pattern:Eb(u.matches),errorInfo:x})}:void 0;return d.reduceRight((S,x,O)=>{let G,L=!1,Y=null,R=null;u&&(G=m&&x.route.id?m[x.route.id]:void 0,Y=x.route.errorElement||Hb,h&&(v<0&&O===0?(ov("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),L=!0,R=null):v===O&&(L=!0,R=x.route.hydrateFallbackElement||null)));let $=c.concat(d.slice(0,O+1)),F=()=>{let ee;return G?ee=Y:L?ee=R:x.route.Component?ee=p.createElement(x.route.Component,null):x.route.element?ee=x.route.element:ee=S,p.createElement(Gb,{match:x,routeContext:{outlet:S,matches:$,isDataRoute:u!=null},children:ee})};return u&&(x.route.ErrorBoundary||x.route.errorElement||O===0)?p.createElement(rv,{location:u.location,revalidation:u.revalidation,component:Y,error:G,children:F(),routeContext:{outlet:null,matches:$,isDataRoute:!0},onError:y}):F()},null)}function vd(l){return`${l} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function Yb(l){let c=p.useContext(Bi);return Bt(c,vd(l)),c}function Kb(l){let c=p.useContext(Nr);return Bt(c,vd(l)),c}function Qb(l){let c=p.useContext(Ua);return Bt(c,vd(l)),c}function gd(l){let c=Qb(l),o=c.matches[c.matches.length-1];return Bt(o.route.id,`${l} can only be used on routes that contain a unique "id"`),o.route.id}function $b(){return gd("useRouteId")}function Xb(){let l=p.useContext(pd),c=Kb("useRouteError"),o=gd("useRouteError");return l!==void 0?l:c.errors?.[o]}function Pb(){let{router:l}=Yb("useNavigate"),c=gd("useNavigate"),o=p.useRef(!1);return sv(()=>{o.current=!0}),p.useCallback(async(d,m={})=>{In(o.current,iv),o.current&&(typeof d=="number"?await l.navigate(d):await l.navigate(d,{fromRouteId:c,...m}))},[l,c])}var Np={};function ov(l,c,o){!c&&!Np[l]&&(Np[l]=!0,In(!1,o))}p.memo(Zb);function Zb({routes:l,future:c,state:o,isStatic:u,onError:d}){return cv(l,void 0,{state:o,isStatic:u,onError:d})}function Jb({basename:l="/",children:c=null,location:o,navigationType:u="POP",navigator:d,static:m=!1,unstable_useTransitions:h}){Bt(!Qs(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let v=l.replace(/^\/*/,"/"),b=p.useMemo(()=>({basename:v,navigator:d,static:m,unstable_useTransitions:h,future:{}}),[v,d,m,h]);typeof o=="string"&&(o=Ks(o));let{pathname:y="/",search:S="",hash:x="",state:O=null,key:G="default",unstable_mask:L}=o,Y=p.useMemo(()=>{let R=qa(y,v);return R==null?null:{location:{pathname:R,search:S,hash:x,state:O,key:G,unstable_mask:L},navigationType:u}},[v,y,S,x,O,G,u,L]);return In(Y!=null,`<Router basename="${v}"> is not able to match the URL "${y}${S}${x}" because it does not start with the basename, so the <Router> won't render anything.`),Y==null?null:p.createElement(qn.Provider,{value:b},p.createElement(Er.Provider,{children:c,value:Y}))}var dr="get",fr="application/x-www-form-urlencoded";function Tr(l){return typeof HTMLElement<"u"&&l instanceof HTMLElement}function Fb(l){return Tr(l)&&l.tagName.toLowerCase()==="button"}function Ib(l){return Tr(l)&&l.tagName.toLowerCase()==="form"}function Wb(l){return Tr(l)&&l.tagName.toLowerCase()==="input"}function e0(l){return!!(l.metaKey||l.altKey||l.ctrlKey||l.shiftKey)}function t0(l,c){return l.button===0&&(!c||c==="_self")&&!e0(l)}function nd(l=""){return new URLSearchParams(typeof l=="string"||Array.isArray(l)||l instanceof URLSearchParams?l:Object.keys(l).reduce((c,o)=>{let u=l[o];return c.concat(Array.isArray(u)?u.map(d=>[o,d]):[[o,u]])},[]))}function n0(l,c){let o=nd(l);return c&&c.forEach((u,d)=>{o.has(d)||c.getAll(d).forEach(m=>{o.append(d,m)})}),o}var cr=null;function a0(){if(cr===null)try{new FormData(document.createElement("form"),0),cr=!1}catch{cr=!0}return cr}var l0=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function qu(l){return l!=null&&!l0.has(l)?(In(!1,`"${l}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${fr}"`),null):l}function i0(l,c){let o,u,d,m,h;if(Ib(l)){let v=l.getAttribute("action");u=v?qa(v,c):null,o=l.getAttribute("method")||dr,d=qu(l.getAttribute("enctype"))||fr,m=new FormData(l)}else if(Fb(l)||Wb(l)&&(l.type==="submit"||l.type==="image")){let v=l.form;if(v==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let b=l.getAttribute("formaction")||v.getAttribute("action");if(u=b?qa(b,c):null,o=l.getAttribute("formmethod")||v.getAttribute("method")||dr,d=qu(l.getAttribute("formenctype"))||qu(v.getAttribute("enctype"))||fr,m=new FormData(v,l),!a0()){let{name:y,type:S,value:x}=l;if(S==="image"){let O=y?`${y}.`:"";m.append(`${O}x`,"0"),m.append(`${O}y`,"0")}else y&&m.append(y,x)}}else{if(Tr(l))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');o=dr,u=null,d=fr,h=l}return m&&d==="text/plain"&&(h=m,m=void 0),{action:u,method:o.toLowerCase(),encType:d,formData:m,body:h}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function yd(l,c){if(l===!1||l===null||typeof l>"u")throw new Error(c)}function s0(l,c,o,u){let d=typeof l=="string"?new URL(l,typeof window>"u"?"server://singlefetch/":window.location.origin):l;return o?d.pathname.endsWith("/")?d.pathname=`${d.pathname}_.${u}`:d.pathname=`${d.pathname}.${u}`:d.pathname==="/"?d.pathname=`_root.${u}`:c&&qa(d.pathname,c)==="/"?d.pathname=`${c.replace(/\/$/,"")}/_root.${u}`:d.pathname=`${d.pathname.replace(/\/$/,"")}.${u}`,d}async function c0(l,c){if(l.id in c)return c[l.id];try{let o=await import(l.module);return c[l.id]=o,o}catch(o){return console.error(`Error loading route module \`${l.module}\`, reloading page...`),console.error(o),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function r0(l){return l==null?!1:l.href==null?l.rel==="preload"&&typeof l.imageSrcSet=="string"&&typeof l.imageSizes=="string":typeof l.rel=="string"&&typeof l.href=="string"}async function o0(l,c,o){let u=await Promise.all(l.map(async d=>{let m=c.routes[d.route.id];if(m){let h=await c0(m,o);return h.links?h.links():[]}return[]}));return m0(u.flat(1).filter(r0).filter(d=>d.rel==="stylesheet"||d.rel==="preload").map(d=>d.rel==="stylesheet"?{...d,rel:"prefetch",as:"style"}:{...d,rel:"prefetch"}))}function Ep(l,c,o,u,d,m){let h=(b,y)=>o[y]?b.route.id!==o[y].route.id:!0,v=(b,y)=>o[y].pathname!==b.pathname||o[y].route.path?.endsWith("*")&&o[y].params["*"]!==b.params["*"];return m==="assets"?c.filter((b,y)=>h(b,y)||v(b,y)):m==="data"?c.filter((b,y)=>{let S=u.routes[b.route.id];if(!S||!S.hasLoader)return!1;if(h(b,y)||v(b,y))return!0;if(b.route.shouldRevalidate){let x=b.route.shouldRevalidate({currentUrl:new URL(d.pathname+d.search+d.hash,window.origin),currentParams:o[0]?.params||{},nextUrl:new URL(l,window.origin),nextParams:b.params,defaultShouldRevalidate:!0});if(typeof x=="boolean")return x}return!0}):[]}function u0(l,c,{includeHydrateFallback:o}={}){return d0(l.map(u=>{let d=c.routes[u.route.id];if(!d)return[];let m=[d.module];return d.clientActionModule&&(m=m.concat(d.clientActionModule)),d.clientLoaderModule&&(m=m.concat(d.clientLoaderModule)),o&&d.hydrateFallbackModule&&(m=m.concat(d.hydrateFallbackModule)),d.imports&&(m=m.concat(d.imports)),m}).flat(1))}function d0(l){return[...new Set(l)]}function f0(l){let c={},o=Object.keys(l).sort();for(let u of o)c[u]=l[u];return c}function m0(l,c){let o=new Set;return new Set(c),l.reduce((u,d)=>{let m=JSON.stringify(f0(d));return o.has(m)||(o.add(m),u.push({key:m,link:d})),u},[])}function uv(){let l=p.useContext(Bi);return yd(l,"You must render this element inside a <DataRouterContext.Provider> element"),l}function h0(){let l=p.useContext(Nr);return yd(l,"You must render this element inside a <DataRouterStateContext.Provider> element"),l}var bd=p.createContext(void 0);bd.displayName="FrameworkContext";function dv(){let l=p.useContext(bd);return yd(l,"You must render this element inside a <HydratedRouter> element"),l}function p0(l,c){let o=p.useContext(bd),[u,d]=p.useState(!1),[m,h]=p.useState(!1),{onFocus:v,onBlur:b,onMouseEnter:y,onMouseLeave:S,onTouchStart:x}=c,O=p.useRef(null);p.useEffect(()=>{if(l==="render"&&h(!0),l==="viewport"){let Y=$=>{$.forEach(F=>{h(F.isIntersecting)})},R=new IntersectionObserver(Y,{threshold:.5});return O.current&&R.observe(O.current),()=>{R.disconnect()}}},[l]),p.useEffect(()=>{if(u){let Y=setTimeout(()=>{h(!0)},100);return()=>{clearTimeout(Y)}}},[u]);let G=()=>{d(!0)},L=()=>{d(!1),h(!1)};return o?l!=="intent"?[m,O,{}]:[m,O,{onFocus:Ls(v,G),onBlur:Ls(b,L),onMouseEnter:Ls(y,G),onMouseLeave:Ls(S,L),onTouchStart:Ls(x,G)}]:[!1,O,{}]}function Ls(l,c){return o=>{l&&l(o),o.defaultPrevented||c(o)}}function v0({page:l,...c}){let{router:o}=uv(),u=p.useMemo(()=>Jp(o.routes,l,o.basename),[o.routes,l,o.basename]);return u?p.createElement(y0,{page:l,matches:u,...c}):null}function g0(l){let{manifest:c,routeModules:o}=dv(),[u,d]=p.useState([]);return p.useEffect(()=>{let m=!1;return o0(l,c,o).then(h=>{m||d(h)}),()=>{m=!0}},[l,c,o]),u}function y0({page:l,matches:c,...o}){let u=Wn(),{future:d,manifest:m,routeModules:h}=dv(),{basename:v}=uv(),{loaderData:b,matches:y}=h0(),S=p.useMemo(()=>Ep(l,c,y,m,u,"data"),[l,c,y,m,u]),x=p.useMemo(()=>Ep(l,c,y,m,u,"assets"),[l,c,y,m,u]),O=p.useMemo(()=>{if(l===u.pathname+u.search+u.hash)return[];let Y=new Set,R=!1;if(c.forEach(F=>{let ee=m.routes[F.route.id];!ee||!ee.hasLoader||(!S.some(oe=>oe.route.id===F.route.id)&&F.route.id in b&&h[F.route.id]?.shouldRevalidate||ee.hasClientLoader?R=!0:Y.add(F.route.id))}),Y.size===0)return[];let $=s0(l,v,d.unstable_trailingSlashAwareDataRequests,"data");return R&&Y.size>0&&$.searchParams.set("_routes",c.filter(F=>Y.has(F.route.id)).map(F=>F.route.id).join(",")),[$.pathname+$.search]},[v,d.unstable_trailingSlashAwareDataRequests,b,u,m,S,c,l,h]),G=p.useMemo(()=>u0(x,m),[x,m]),L=g0(x);return p.createElement(p.Fragment,null,O.map(Y=>p.createElement("link",{key:Y,rel:"prefetch",as:"fetch",href:Y,...o})),G.map(Y=>p.createElement("link",{key:Y,rel:"modulepreload",href:Y,...o})),L.map(({key:Y,link:R})=>p.createElement("link",{key:Y,nonce:o.nonce,...R,crossOrigin:R.crossOrigin??o.crossOrigin})))}function b0(...l){return c=>{l.forEach(o=>{typeof o=="function"?o(c):o!=null&&(o.current=c)})}}var x0=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{x0&&(window.__reactRouterVersion="7.13.1")}catch{}function S0({basename:l,children:c,unstable_useTransitions:o,window:u}){let d=p.useRef();d.current==null&&(d.current=tb({window:u,v5Compat:!0}));let m=d.current,[h,v]=p.useState({action:m.action,location:m.location}),b=p.useCallback(y=>{o===!1?v(y):p.startTransition(()=>v(y))},[o]);return p.useLayoutEffect(()=>m.listen(b),[m,b]),p.createElement(Jb,{basename:l,children:c,location:h.location,navigationType:h.action,navigator:m,unstable_useTransitions:o})}var fv=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Us=p.forwardRef(function({onClick:c,discover:o="render",prefetch:u="none",relative:d,reloadDocument:m,replace:h,unstable_mask:v,state:b,target:y,to:S,preventScrollReset:x,viewTransition:O,unstable_defaultShouldRevalidate:G,...L},Y){let{basename:R,navigator:$,unstable_useTransitions:F}=p.useContext(qn),ee=typeof S=="string"&&fv.test(S),oe=tv(S,R);S=oe.to;let xe=Ob(S,{relative:d}),ue=Wn(),ie=null;if(v){let me=hd(v,[],ue.unstable_mask?ue.unstable_mask.pathname:"/",!0);R!=="/"&&(me.pathname=me.pathname==="/"?R:oa([R,me.pathname])),ie=$.createHref(me)}let[Ae,T,ye]=p0(u,L),X=M0(S,{replace:h,unstable_mask:v,state:b,target:y,preventScrollReset:x,relative:d,viewTransition:O,unstable_defaultShouldRevalidate:G,unstable_useTransitions:F});function ne(me){c&&c(me),me.defaultPrevented||X(me)}let pe=!(oe.isExternal||m),he=p.createElement("a",{...L,...ye,href:(pe?ie:void 0)||oe.absoluteURL||xe,onClick:pe?ne:c,ref:b0(Y,T),target:y,"data-discover":!ee&&o==="render"?"true":void 0});return Ae&&!ee?p.createElement(p.Fragment,null,he,p.createElement(v0,{page:xe})):he});Us.displayName="Link";var mv=p.forwardRef(function({"aria-current":c="page",caseSensitive:o=!1,className:u="",end:d=!1,style:m,to:h,viewTransition:v,children:b,...y},S){let x=Xs(h,{relative:y.relative}),O=Wn(),G=p.useContext(Nr),{navigator:L,basename:Y}=p.useContext(qn),R=G!=null&&A0(x)&&v===!0,$=L.encodeLocation?L.encodeLocation(x).pathname:x.pathname,F=O.pathname,ee=G&&G.navigation&&G.navigation.location?G.navigation.location.pathname:null;o||(F=F.toLowerCase(),ee=ee?ee.toLowerCase():null,$=$.toLowerCase()),ee&&Y&&(ee=qa(ee,Y)||ee);const oe=$!=="/"&&$.endsWith("/")?$.length-1:$.length;let xe=F===$||!d&&F.startsWith($)&&F.charAt(oe)==="/",ue=ee!=null&&(ee===$||!d&&ee.startsWith($)&&ee.charAt($.length)==="/"),ie={isActive:xe,isPending:ue,isTransitioning:R},Ae=xe?c:void 0,T;typeof u=="function"?T=u(ie):T=[u,xe?"active":null,ue?"pending":null,R?"transitioning":null].filter(Boolean).join(" ");let ye=typeof m=="function"?m(ie):m;return p.createElement(Us,{...y,"aria-current":Ae,className:T,ref:S,style:ye,to:h,viewTransition:v},typeof b=="function"?b(ie):b)});mv.displayName="NavLink";var _0=p.forwardRef(({discover:l="render",fetcherKey:c,navigate:o,reloadDocument:u,replace:d,state:m,method:h=dr,action:v,onSubmit:b,relative:y,preventScrollReset:S,viewTransition:x,unstable_defaultShouldRevalidate:O,...G},L)=>{let{unstable_useTransitions:Y}=p.useContext(qn),R=T0(),$=C0(v,{relative:y}),F=h.toLowerCase()==="get"?"get":"post",ee=typeof v=="string"&&fv.test(v),oe=xe=>{if(b&&b(xe),xe.defaultPrevented)return;xe.preventDefault();let ue=xe.nativeEvent.submitter,ie=ue?.getAttribute("formmethod")||h,Ae=()=>R(ue||xe.currentTarget,{fetcherKey:c,method:ie,navigate:o,replace:d,state:m,relative:y,preventScrollReset:S,viewTransition:x,unstable_defaultShouldRevalidate:O});Y&&o!==!1?p.startTransition(()=>Ae()):Ae()};return p.createElement("form",{ref:L,method:F,action:$,onSubmit:u?b:oe,...G,"data-discover":!ee&&l==="render"?"true":void 0})});_0.displayName="Form";function j0(l){return`${l} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function hv(l){let c=p.useContext(Bi);return Bt(c,j0(l)),c}function M0(l,{target:c,replace:o,unstable_mask:u,state:d,preventScrollReset:m,relative:h,viewTransition:v,unstable_defaultShouldRevalidate:b,unstable_useTransitions:y}={}){let S=$s(),x=Wn(),O=Xs(l,{relative:h});return p.useCallback(G=>{if(t0(G,c)){G.preventDefault();let L=o!==void 0?o:Hs(x)===Hs(O),Y=()=>S(l,{replace:L,unstable_mask:u,state:d,preventScrollReset:m,relative:h,viewTransition:v,unstable_defaultShouldRevalidate:b});y?p.startTransition(()=>Y()):Y()}},[x,S,O,o,u,d,c,l,m,h,v,b,y])}function pv(l){In(typeof URLSearchParams<"u","You cannot use the `useSearchParams` hook in a browser that does not support the URLSearchParams API. If you need to support Internet Explorer 11, we recommend you load a polyfill such as https://github.com/ungap/url-search-params.");let c=p.useRef(nd(l)),o=p.useRef(!1),u=Wn(),d=p.useMemo(()=>n0(u.search,o.current?null:c.current),[u.search]),m=$s(),h=p.useCallback((v,b)=>{const y=nd(typeof v=="function"?v(new URLSearchParams(d)):v);o.current=!0,m("?"+y,b)},[m,d]);return[d,h]}var N0=0,E0=()=>`__${String(++N0)}__`;function T0(){let{router:l}=hv("useSubmit"),{basename:c}=p.useContext(qn),o=$b(),u=l.fetch,d=l.navigate;return p.useCallback(async(m,h={})=>{let{action:v,method:b,encType:y,formData:S,body:x}=i0(m,c);if(h.navigate===!1){let O=h.fetcherKey||E0();await u(O,o,h.action||v,{unstable_defaultShouldRevalidate:h.unstable_defaultShouldRevalidate,preventScrollReset:h.preventScrollReset,formData:S,body:x,formMethod:h.method||b,formEncType:h.encType||y,flushSync:h.flushSync})}else await d(h.action||v,{unstable_defaultShouldRevalidate:h.unstable_defaultShouldRevalidate,preventScrollReset:h.preventScrollReset,formData:S,body:x,formMethod:h.method||b,formEncType:h.encType||y,replace:h.replace,state:h.state,fromRouteId:o,flushSync:h.flushSync,viewTransition:h.viewTransition})},[u,d,c,o])}function C0(l,{relative:c}={}){let{basename:o}=p.useContext(qn),u=p.useContext(Ua);Bt(u,"useFormAction must be used inside a RouteContext");let[d]=u.matches.slice(-1),m={...Xs(l||".",{relative:c})},h=Wn();if(l==null){m.search=h.search;let v=new URLSearchParams(m.search),b=v.getAll("index");if(b.some(S=>S==="")){v.delete("index"),b.filter(x=>x).forEach(x=>v.append("index",x));let S=v.toString();m.search=S?`?${S}`:""}}return(!l||l===".")&&d.route.index&&(m.search=m.search?m.search.replace(/^\?/,"?index&"):"?index"),o!=="/"&&(m.pathname=m.pathname==="/"?o:oa([o,m.pathname])),Hs(m)}function A0(l,{relative:c}={}){let o=p.useContext(av);Bt(o!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:u}=hv("useViewTransitionState"),d=Xs(l,{relative:c});if(!o.isTransitioning)return!1;let m=qa(o.currentLocation.pathname,u)||o.currentLocation.pathname,h=qa(o.nextLocation.pathname,u)||o.nextLocation.pathname;return gr(d.pathname,h)!=null||gr(d.pathname,m)!=null}const Cr={trainingModes:{scale_degree:!0,functional_interval:!0,functional_harmony:!1,timing_grid:!1,phrase_recall:!1},voiceExercises:{interval_echo:!0,degree_match:!0,motif_match:!1}};function Ql(){return Object.entries(Cr.trainingModes).filter(([,l])=>l).map(([l])=>l)}function yr(l){return Cr.trainingModes[l]}function Jn(l){const c=Ql(),o=(l??[]).filter(yr);return o.length>0?o:[c[0]??"scale_degree"]}function vv(){return Object.entries(Cr.voiceExercises).filter(([,l])=>l).map(([l])=>l)}function w0(l){return Cr.voiceExercises[l]}function k0(l){return l&&w0(l)?l:vv()[0]??"interval_echo"}const Ft=["C","Db","D","Eb","E","F","Gb","G","Ab","A","Bb","B"];function R0(l){return Ft.indexOf(l)}function Ne(l){return 440*Math.pow(2,(l-69)/12)}function D0(l){return 69+12*Math.log2(l/440)}function Ps(l,c){return 12*(c+1)+R0(l)}function L0(l,c){return l+c}function Mt(l){const c=Math.round(l),o=(c%12+12)%12,u=Math.floor(c/12)-1;return{name:Ft[o],octave:u}}function Ba(l){const c=Mt(l);return`${c.name}${c.octave}`}function O0(l,c){const o=c==="maj"?4:c==="min"||c==="dim"?3:4,u=c==="maj"||c==="min"?7:c==="dim"?6:8;return[l,l+o,l+u]}function z0(l){if(!l)return null;try{return JSON.parse(l)}catch{return null}}function $l(l,c){return z0(localStorage.getItem(l))??c}function mn(l,c){localStorage.setItem(l,JSON.stringify(c))}function B0(l){localStorage.removeItem(l)}function q0(l,c,o="application/json"){const u=new Blob([c],{type:o}),d=URL.createObjectURL(u),m=document.createElement("a");m.href=d,m.download=l,m.click(),URL.revokeObjectURL(d)}const gv="et_training_settings_v1",Oi={showAnswerNoteNames:!1,allowPromptReplay:!1,showExplainWhy:!0,showIntervalNames:!0,showSemitoneCount:!1,showSolfege:!1,enforceSinging:!1,requireMicForSinging:!1,droneEnabled:!1,allowKeyboardInput:!1,showChordTones:!1,showScaleMap:!1,showPianoStrip:!1},xd={freePracticePresets:[],freePracticeToggles:Oi};function br(){const l=$l(gv,xd);return{freePracticePresets:(l.freePracticePresets??[]).map((o,u)=>({id:o.id??`preset_${u}`,name:o.name??`Preset ${u+1}`,modePool:Jn(o.modePool),tonicMode:o.tonicMode??"random",fixedTonic:o.fixedTonic??"C",intervalLevel:o.intervalLevel??1,degreeLevel:o.degreeLevel??1,harmonyLevel:o.harmonyLevel??1,timingLevel:o.timingLevel??1,phraseLevel:o.phraseLevel??1,dictationInputMode:o.dictationInputMode??"multiple_choice",tonalMode:o.tonalMode??"major",intervalPlaybackVariant:o.intervalPlaybackVariant??"scale_context",harmonyPlaybackVariant:o.harmonyPlaybackVariant??"block",toggles:{...Oi,...o.toggles??{}}})),freePracticeToggles:{...Oi,...l.freePracticeToggles??{}}}}function Gs(l){mn(gv,l)}function H0(l){return{sessionType:"guided",modePool:Jn(l??Ql()),intervalLevel:1,degreeLevel:1,harmonyLevel:1,timingLevel:1,phraseLevel:1,dictationInputMode:"multiple_choice",tonalMode:"major",intervalPlaybackVariant:"scale_context",harmonyPlaybackVariant:"block",randomTonicEvery:3,singingQuota:.5,predictiveResolutionChance:.25}}const U0=[{mode:"functional_interval",title:"Intervals"},{mode:"scale_degree",title:"Scale Degrees"},{mode:"functional_harmony",title:"Harmony"},{mode:"timing_grid",title:"Rhythm"},{mode:"phrase_recall",title:"Phrases"}],rr={1:"Level 1: seconds only.",2:"Level 2: add 3rds.",3:"Level 3: add 4ths and 5ths.",4:"Level 4: add octaves."},G0={1:"Level 1: fixed tonic for the whole run.",2:"Level 2: limited tonic pool that rotates inside one 3-key set.",3:"Level 3: fully randomized across all 12 tonics."},Vl=["C","G","D","A","E","B","Gb","Db","Ab","Eb","Bb","F"],ad="quickplay_default",Tp={default:{id:ad,name:"Quickplay",settings:{modePool:Jn(["scale_degree","functional_interval"]),tonicMode:"random",fixedTonic:"C",tonicPool:void 0,intervalLevel:1,degreeLevel:1,harmonyLevel:1,timingLevel:1,phraseLevel:1,dictationInputMode:"multiple_choice",tonalMode:"major",intervalPlaybackVariant:"scale_context",harmonyPlaybackVariant:"block",toggles:{...Oi,showAnswerNoteNames:!0,allowPromptReplay:!0,droneEnabled:!0,enforceSinging:!0,requireMicForSinging:!1,showExplainWhy:!0,showIntervalNames:!0,showSolfege:!0,showScaleMap:!0,showPianoStrip:!0}}}};function yv(l="default"){return Tp[l??"default"]??Tp.default}function V0(){return Vl.map(l=>({value:l,label:bv(l).join(" / ")}))}function bv(l){const c=Vl.indexOf(l),o=Vl[(c+Vl.length-1)%Vl.length],u=Vl[(c+1)%Vl.length];return[l,u,o]}function ld(l){const c=Jn(l);return c.length>0?c:Jn(Ql())}function Y0(l,c){const o=yv(l),u=ld(c.modePool),d=c.tonicSourceLevel===2?bv(c.fixedPoolRoot):void 0,m=c.tonicSourceLevel===1?"fixed":"random",h=c.tonicSourceLevel===1?c.fixedTonic:d?.[0]??Ft[0];return{presetId:o.id,settings:{...o.settings,modePool:u,tonicMode:m,fixedTonic:h,tonicPool:d,intervalLevel:c.intervalLevel,degreeLevel:c.degreeLevel}}}const K0=[{mode:"functional_interval",title:"Intervals",description:"Functional movement against tonic."},{mode:"scale_degree",title:"Scale Degrees",description:"Anchored tonic hearing with stability feedback."}];function Q0(){const l=$s(),[c,o]=p.useState(null),u=p.useRef(null),d=p.useRef(null),m=p.useMemo(()=>c?`${c.title} Mode`:"",[c]);function h(){o(null)}function v(y){c&&(l(`${y}?mode=${c.mode}`),o(null))}function b(){if(!c)return;const y=new URLSearchParams({quickplay:"default",quickplayTopics:c.mode,quickplayTonicLevel:"1",quickplayFixedTonic:"C",quickplayFixedPool:"C",quickplayIntervalLevel:"1",quickplayDegreeLevel:"1"});l(`/practice?${y.toString()}`),o(null)}return p.useEffect(()=>{if(!c)return;function y(S){if(S.key==="Escape"){o(null);return}if(S.key!=="Tab")return;const x=d.current;if(!x)return;const O=x.querySelectorAll('button:not([disabled]), [href], input:not([disabled]), select:not([disabled]), textarea:not([disabled]), [tabindex]:not([tabindex="-1"])');if(O.length===0)return;const G=O[0],L=O[O.length-1],Y=document.activeElement;if(S.shiftKey){(Y===G||Y==null||!x.contains(Y))&&(S.preventDefault(),L.focus());return}(Y===L||Y==null||!x.contains(Y))&&(S.preventDefault(),G.focus())}return window.addEventListener("keydown",y),()=>window.removeEventListener("keydown",y)},[c]),p.useEffect(()=>{c&&u.current?.focus()},[c]),s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"split-grid",children:[K0.map(y=>s.jsxs("button",{type:"button",className:"mode-card mode-card--button mode-card--practice",onClick:()=>o(y),children:[s.jsx("div",{className:"kicker kicker--red",children:"Practice Track"}),s.jsx("div",{className:"mode-card__title",children:y.title}),s.jsx("div",{className:"mode-card__copy",children:y.description})]},y.mode)),s.jsxs(Us,{to:"/voice",className:"mode-card mode-card--voice",children:[s.jsx("div",{className:"kicker kicker--blue",children:"Voice Track"}),s.jsx("div",{className:"mode-card__title",children:"Voice Match"}),s.jsx("div",{className:"mode-card__copy",children:"Mic calibration, tuning feedback, and sing-back response drills."})]})]}),c&&s.jsx("div",{className:"mode-overlay",onClick:h,role:"presentation",children:s.jsxs("div",{ref:d,className:"mode-overlay__panel",onClick:y=>y.stopPropagation(),role:"dialog","aria-modal":"true","aria-labelledby":"mode-overlay-title",children:[s.jsx("div",{id:"mode-overlay-title",className:"panel-title",children:m}),s.jsxs("div",{className:"subtle",children:["Choose how you want to work on ",c.title.toLowerCase()," right now."]}),s.jsxs("div",{className:"mode-overlay__actions",children:[s.jsxs("button",{ref:u,type:"button",className:"mode-overlay__option",onClick:b,children:[s.jsx("span",{className:"mode-overlay__option-title",children:"Quickplay"}),s.jsx("span",{className:"mode-overlay__option-copy",children:"Jump straight into the quickplay preset with this topic preselected."})]}),s.jsxs("button",{type:"button",className:"mode-overlay__option",onClick:()=>v("/practice"),children:[s.jsx("span",{className:"mode-overlay__option-title",children:"Open Practice"}),s.jsx("span",{className:"mode-overlay__option-copy",children:"Custom drill mode with adjustable settings and a freer session flow."})]})]}),s.jsx("button",{type:"button",className:"mode-overlay__dismiss",onClick:h,children:"Cancel"})]})})]})}function $0(){const l=$s(),[c,o]=p.useState(!1),[u,d]=p.useState(!1),[m,h]=p.useState(ld(Ql().filter(T=>T==="scale_degree"||T==="functional_interval"))),[v,b]=p.useState(1),[y,S]=p.useState("C"),[x,O]=p.useState("C"),[G,L]=p.useState(1),[Y,R]=p.useState(1),$=m.includes("functional_interval"),F=m.includes("scale_degree"),ee=v===3,oe=v===2?"Fixed pool":"Fixed tonic";function xe(T){h(ye=>{if(ye.includes(T)){const X=ye.filter(ne=>ne!==T);return X.length>0?X:ye}return[...ye,T]})}function ue(T){l(T),o(!1),d(!1)}function ie(){o(!1),d(!0)}function Ae(){const T=new URLSearchParams({quickplay:"default",quickplayTopics:ld(m).join(","),quickplayTonicLevel:String(v),quickplayFixedTonic:y,quickplayFixedPool:x,quickplayIntervalLevel:String(G),quickplayDegreeLevel:String(Y)});l(`/practice?${T.toString()}`),d(!1)}return s.jsxs("div",{className:"page",children:[s.jsxs("section",{className:"page-header page-header--hero",children:[s.jsxs("div",{className:"page-header__copy",children:[s.jsx("div",{className:"eyebrow",children:"New Ultraviolet Systems Basic"}),s.jsx("h1",{className:"page-title home-page__title",children:"VI-V-i Trainer"}),s.jsx("div",{className:"page-lede",children:"Tonic-centered ear training for scale degrees, intervals, guided review, and voice work, built around repeatable drills and local-first progress."})]}),s.jsx("aside",{className:"page-header__aside",children:s.jsx("div",{className:"hero-note hero-note--poster",children:s.jsxs("div",{className:"hero-cta",children:[s.jsx("div",{className:"hero-cta__label",children:"Click here to choose how to begin"}),s.jsx("button",{type:"button",className:"hero-cta__button",onClick:()=>o(!0),children:"Start here"}),s.jsx("div",{className:"hero-cta__label",children:"Click Here to enter keyboard mode"}),s.jsx("button",{type:"button",className:"hero-cta__button",onClick:()=>l("/keyboard"),children:"Keyboard mode"})]})})})]}),s.jsx("section",{className:"panel panel--blue",children:s.jsxs("div",{className:"panel-header",children:[s.jsxs("div",{children:[s.jsx("div",{className:"section-label kicker kicker--blue",children:"Start Here"}),s.jsx("h2",{className:"panel-title",children:"Choose a practice mode"})]}),s.jsx("div",{className:"panel-copy",children:"Short paths, focused sessions, and voice work all share the same tonic-centered engine."})]})}),s.jsx(Q0,{}),c&&s.jsx("div",{className:"mode-overlay",onClick:()=>o(!1),role:"presentation",children:s.jsxs("div",{className:"mode-overlay__panel",onClick:T=>T.stopPropagation(),role:"dialog","aria-modal":"true","aria-labelledby":"path-overlay-title",children:[s.jsx("div",{id:"path-overlay-title",className:"panel-title",children:"Choose How to Begin"}),s.jsx("div",{className:"subtle",children:"Pick the starting route that matches how guided or customizable you want this session to be."}),s.jsxs("div",{className:"mode-overlay__actions",children:[s.jsxs("button",{type:"button",className:"mode-overlay__option",onClick:()=>ue("/beginner"),children:[s.jsx("span",{className:"mode-overlay__option-title",children:"Start from Basics"}),s.jsx("span",{className:"mode-overlay__option-copy",children:"A guided beginner on-ramp with tonic-first drills, singing prompts, and required review."})]}),s.jsxs("button",{type:"button",className:"mode-overlay__option",onClick:ie,children:[s.jsx("span",{className:"mode-overlay__option-title",children:"Quickplay"}),s.jsx("span",{className:"mode-overlay__option-copy",children:"Pick a few core session options, then jump straight into a preset-backed run."})]}),s.jsxs("button",{type:"button",className:"mode-overlay__option",onClick:()=>ue("/practice"),children:[s.jsx("span",{className:"mode-overlay__option-title",children:"Open Practice"}),s.jsx("span",{className:"mode-overlay__option-copy",children:"Go straight to the full practice builder with manual control over the session."})]}),s.jsxs("button",{type:"button",className:"mode-overlay__option",onClick:()=>ue("/custom-path"),children:[s.jsx("span",{className:"mode-overlay__option-title",children:"Custom path"}),s.jsx("span",{className:"mode-overlay__option-copy",children:"Take a short drill assessment, see what needs work, then save your own reusable preset."})]})]}),s.jsx("button",{type:"button",className:"mode-overlay__dismiss",onClick:()=>o(!1),children:"Cancel"})]})}),u&&s.jsx("div",{className:"mode-overlay",onClick:()=>d(!1),role:"presentation",children:s.jsxs("div",{className:"mode-overlay__panel mode-overlay__panel--wide mode-overlay__panel--compact",onClick:T=>T.stopPropagation(),role:"dialog","aria-modal":"true","aria-labelledby":"quickplay-overlay-title",children:[s.jsx("div",{id:"quickplay-overlay-title",className:"panel-title",children:"Quickplay"}),s.jsx("div",{className:"subtle",children:"Set the few options that should override the quickplay preset, then start immediately."}),s.jsxs("div",{className:"control-grid quickplay-control-grid",children:[s.jsxs("label",{className:"control-label",children:["Tonic source",s.jsxs("select",{value:v,onChange:T=>b(Number(T.target.value)),children:[s.jsx("option",{value:1,children:"Level 1: Fixed tonic"}),s.jsx("option",{value:2,children:"Level 2: Fixed pool"}),s.jsx("option",{value:3,children:"Level 3: Fully randomized"})]})]}),s.jsxs("label",{className:ee?"control-label control-label--disabled":"control-label",children:[oe,s.jsx("select",{value:v===2?x:y,disabled:ee,onChange:T=>{const ye=T.target.value;if(v===2){O(ye);return}S(ye)},children:v===2?V0().map(T=>s.jsx("option",{value:T.value,children:T.label},T.value)):Ft.map(T=>s.jsx("option",{value:T,children:T},T))})]}),s.jsxs("label",{className:$?"control-label":"control-label control-label--disabled",children:["Interval level",s.jsxs("select",{value:G,disabled:!$,onChange:T=>L(Number(T.target.value)),children:[s.jsx("option",{value:1,children:rr[1]}),s.jsx("option",{value:2,children:rr[2]}),s.jsx("option",{value:3,children:rr[3]}),s.jsx("option",{value:4,children:rr[4]})]})]}),s.jsxs("label",{className:F?"control-label":"control-label control-label--disabled",children:["Degree level",s.jsxs("select",{value:Y,disabled:!F,onChange:T=>R(Number(T.target.value)),children:[s.jsx("option",{value:1,children:"1-5"}),s.jsx("option",{value:2,children:"+6/7"}),s.jsx("option",{value:3,children:"+b3/#4/b7"})]})]}),s.jsx("div",{className:"subtle quickplay-control-grid__description",children:G0[v]})]}),s.jsxs("div",{className:"control-group",children:[s.jsx("div",{className:"subtle",children:"Topics"}),s.jsx("div",{className:"chip-row",children:U0.filter(T=>Ql().includes(T.mode)).map(T=>s.jsx("button",{type:"button",className:m.includes(T.mode)?"toggle-chip toggle-chip--active":"toggle-chip","aria-pressed":m.includes(T.mode),onClick:()=>xe(T.mode),children:T.title},T.mode))})]}),s.jsxs("div",{className:"button-row",children:[s.jsx("button",{type:"button",onClick:Ae,children:"Start quickplay"}),s.jsx("button",{type:"button",onClick:()=>d(!1),children:"Cancel"})]})]})})]})}function Cp(l,c){return 60/c*l}class X0{ctx=null;master=null;state="idle";preparedPlanCache=new Map;activeNodes=[];droneOsc=null;droneGain=null;getState(){return this.state}async init(){if(this.ctx)return;const c=window.AudioContext||window.webkitAudioContext;if(!c)throw new Error("Web Audio API is not available in this browser.");this.ctx=new c,this.master=this.ctx.createGain(),this.master.gain.value=.2,this.master.connect(this.ctx.destination),this.state="ready"}async ensureRunning(){await this.init(),this.ctx&&this.ctx.state!=="running"&&await this.ctx.resume()}async warm(){await this.init()}setMasterGain(c){this.master&&(this.master.gain.value=c)}stopAll(){for(const c of this.activeNodes){if(c instanceof OscillatorNode)try{c.stop()}catch{}try{c.disconnect()}catch{}}this.activeNodes=[],this.state=this.ctx?"ready":"idle"}makeVoice(c,o,u,d,m){if(!this.ctx||!this.master)return;const h=this.ctx.createOscillator();h.type=o,h.frequency.value=c;const v=this.ctx.createGain(),b=.008,y=.03;v.gain.setValueAtTime(0,u),v.gain.linearRampToValueAtTime(m,u+b),v.gain.setValueAtTime(m,Math.max(u+b,d-y)),v.gain.linearRampToValueAtTime(0,d),h.connect(v),v.connect(this.master),h.start(u),h.stop(d+.02),this.activeNodes.push(h,v)}async play(c,o){if(await this.ensureRunning(),!this.ctx)return;this.stopAll(),this.setMasterGain(o.masterGain),this.state="playing";const u=this.ctx.currentTime,d=o.tempoBpm,m=(v,b,y,S=.9)=>{const x=u+Cp(b,d),O=x+Cp(y,d);this.makeVoice(v,o.timbre,x,O,S)},h=(v,b,y,S=.75)=>{for(const x of v)m(x,b,y,S/Math.max(1,v.length*.75))};if(c.kind==="note"){m(Ne(c.midi),c.atBeats??0,c.durationBeats,c.gain??.9);return}if(c.kind==="chord"){h(c.midis.map(Ne),c.atBeats??0,c.durationBeats,c.gain??.75);return}if(c.kind==="sequence"){const v=this.prepareSequence(c);for(const b of v){const y=b.gain??.85;b.freqHz!=null?m(b.freqHz,b.atBeats,b.durationBeats,y):b.freqsHz&&h(b.freqsHz,b.atBeats,b.durationBeats,y)}return}if(c.kind==="drone"){this.setDrone(c.midi,o,c.gain??.18);return}}async setDrone(c,o,u=.18){if(await this.ensureRunning(),!this.ctx||!this.master)return;if(this.droneOsc&&this.droneGain){this.droneOsc.frequency.setValueAtTime(Ne(c),this.ctx.currentTime),this.droneGain.gain.setValueAtTime(u,this.ctx.currentTime);return}const d=this.ctx.createOscillator();d.type=o.timbre,d.frequency.value=Ne(c);const m=this.ctx.createGain();m.gain.value=0,m.gain.linearRampToValueAtTime(u,this.ctx.currentTime+.03),d.connect(m),m.connect(this.master),d.start(),this.droneOsc=d,this.droneGain=m}clearDrone(){if(this.ctx){if(this.droneGain){const c=this.ctx.currentTime;this.droneGain.gain.cancelScheduledValues(c),this.droneGain.gain.setValueAtTime(this.droneGain.gain.value,c),this.droneGain.gain.linearRampToValueAtTime(0,c+.05)}if(this.droneOsc){try{this.droneOsc.stop(this.ctx.currentTime+.06)}catch{}try{this.droneOsc.disconnect()}catch{}}if(this.droneGain)try{this.droneGain.disconnect()}catch{}this.droneOsc=null,this.droneGain=null}}prepareSequence(c){const o=JSON.stringify(c.events),u=this.preparedPlanCache.get(o);if(u)return u;const d=c.events.map(m=>({...m}));if(this.preparedPlanCache.set(o,d),this.preparedPlanCache.size>40){const m=this.preparedPlanCache.keys().next().value;m&&this.preparedPlanCache.delete(m)}return d}}const Xe=new X0;function P0(l){let c=0;for(let o=0;o<l.length;o++)c+=l[o]*l[o];return Math.sqrt(c/l.length)}function Z0(l,c,o=80,u=1200){const d=Math.floor(c/u),m=Math.floor(c/o);let h=-1,v=0;for(let b=d;b<=m;b++){let y=0,S=0,x=0;const O=l.length-b;for(let Y=0;Y<O;Y++){const R=l[Y],$=l[Y+b];y+=R*$,S+=R*R,x+=$*$}const G=Math.sqrt(S*x);if(G<=0)continue;const L=y/G;L>v&&(v=L,h=b)}return h<0||v<.82?null:{freqHz:c/h,clarity:v}}function Sd(l,c,o){const u=P0(l);if(!(u>=o))return{freqHz:null,midi:null,cents:null,clarity:0,rms:u,isSignal:!1,noteLabel:null};const m=Z0(l,c);if(!m)return{freqHz:null,midi:null,cents:null,clarity:0,rms:u,isSignal:!0,noteLabel:null};const h=D0(m.freqHz),v=Math.round(h),b=(h-v)*100;return{freqHz:m.freqHz,midi:h,cents:b,clarity:m.clarity,rms:u,isSignal:!0,noteLabel:Ba(v)}}const _d="et_progress_v1",xv=1e3*60*60*24,Hu=[1,3,7,14,30],xr={attempts:[],items:{},adaptive:{},totals:{attempts:0,correct:0,streak:0,bestStreak:0}};function Xl(){const l=$l(_d,xr);return{attempts:l.attempts??[],items:I0(l.items??{}),adaptive:F0(l.adaptive??{}),totals:l.totals??xr.totals}}function J0(l){const c=l.attempts>0?l.correct/l.attempts:0,o=Math.min(1,Math.log10(1+l.attempts)),u=l.rollingAccuracy*.6+c*.4;return jd(u*o)}function Sv(l){return l.startsWith("meter:")||l.startsWith("subdivision:")||l.startsWith("syncopation:")||l.startsWith("tap:")?"timing_grid":l.startsWith("phrase:")?"phrase_recall":l.startsWith("movement:")?"functional_interval":l.startsWith("quality:")||l.startsWith("function:")||l.startsWith("progression:")||l.startsWith("cadence:")||l.startsWith("changed_position:")?"functional_harmony":"scale_degree"}function jd(l){return Math.max(0,Math.min(1,l))}function _v(l,c){return`${l}::${c}`}function F0(l){const c={};for(const[o,u]of Object.entries(l)){if(!u)continue;const d="key"in u&&typeof u.key=="string"?u.key:o,m="context"in u&&typeof u.context=="string"?u.context:"global",h=u.attempts??0,v="wrong"in u&&typeof u.wrong=="number"?u.wrong:Math.max(0,h-(u.correct??0)),b="correct"in u&&typeof u.correct=="number"?u.correct:Math.max(0,h-v),y="rollingAccuracy"in u&&typeof u.rollingAccuracy=="number"?u.rollingAccuracy:h>0?b/h:0,S="mode"in u&&(u.mode==="scale_degree"||u.mode==="functional_interval"||u.mode==="functional_harmony"||u.mode==="timing_grid"||u.mode==="phrase_recall")?u.mode:Sv(d),x={id:o,key:d,context:m,mode:S,attempts:h,correct:b,wrong:v,lastSeen:u.lastSeen??0,rollingAccuracy:y,avgResponseMs:"avgResponseMs"in u&&typeof u.avgResponseMs=="number"?u.avgResponseMs:0,mastery:"mastery"in u&&typeof u.mastery=="number"?u.mastery:jd(y),intervalDays:"intervalDays"in u&&typeof u.intervalDays=="number"?u.intervalDays:0,dueAt:"dueAt"in u&&typeof u.dueAt=="number"?u.dueAt:0,lastOutcomeCorrect:"lastOutcomeCorrect"in u?!!u.lastOutcomeCorrect:!0};c[o]=x}return c}function I0(l){const c={};for(const[o,u]of Object.entries(l)){if(!u)continue;const d=u.attempts??0,m=u.correct??0;c[o]={attempts:d,correct:m,streak:u.streak??0,lastSeen:u.lastSeen??0,mastery:u.mastery??0,rollingAccuracy:u.rollingAccuracy??(d>0?m/d:0),avgResponseMs:u.avgResponseMs??0}}return c}function W0(l){for(const c of Hu)if(c>l)return c;return Hu[Hu.length-1]}function ex(l){return l.includes(":major")?"major":l.includes(":minor")?"minor":"mixed"}function tx(l){return l==="functional_interval"?"intervals":l==="functional_harmony"?"chords":l==="timing_grid"?"timing":l==="phrase_recall"?"phrases":"degrees"}function zi(l,c){const o=l.dueAt>0&&l.dueAt<=c?1.8:0,u=(1-l.mastery)*2.6,d=l.lastOutcomeCorrect?0:1.1,m=Math.max(0,(c-l.lastSeen)/xv),h=Math.min(.9,m*.08);return 1+o+u+d+h}function nx(l){return l.startsWith("degree:")?`Degree ${l.slice(7)}`:l.startsWith("movement:")?`Movement ${l.slice(9).replace("->"," -> ")}`:l.startsWith("phrase:voice_")?`Motif ${l.slice(13).replaceAll("-"," - ")}`:l}function Md(l){const c=Xl(),o=Date.now(),u={ts:o,itemId:l.itemId,mode:l.mode,correct:l.correct,responseMs:l.responseMs,contextKey:l.contextKey};c.attempts.push(u),c.totals.attempts+=1,l.correct?(c.totals.correct+=1,c.totals.streak+=1,c.totals.bestStreak=Math.max(c.totals.bestStreak,c.totals.streak)):c.totals.streak=0;const d=c.items[l.itemId]??{attempts:0,correct:0,streak:0,lastSeen:0,mastery:0,rollingAccuracy:0,avgResponseMs:0};d.attempts+=1,l.correct?(d.correct+=1,d.streak+=1):d.streak=0,d.lastSeen=o;const m=.35;d.rollingAccuracy=d.attempts===1?l.correct?1:0:m*(l.correct?1:0)+(1-m)*d.rollingAccuracy,d.avgResponseMs=d.attempts===1?l.responseMs:m*l.responseMs+(1-m)*d.avgResponseMs,d.mastery=J0(d),c.items[l.itemId]=d;for(const h of l.adaptiveKeys??[]){const v=l.contextKey??"global",b=_v(v,h),y=c.adaptive[b]??{id:b,key:h,context:v,mode:Sv(h),attempts:0,correct:0,wrong:0,lastSeen:0,rollingAccuracy:0,avgResponseMs:0,mastery:0,intervalDays:0,dueAt:0,lastOutcomeCorrect:!0};y.attempts+=1,l.correct?y.correct+=1:y.wrong+=1,y.lastSeen=o,y.lastOutcomeCorrect=l.correct;const S=.35;y.rollingAccuracy=y.attempts===1?l.correct?1:0:S*(l.correct?1:0)+(1-S)*y.rollingAccuracy,y.avgResponseMs=y.attempts===1?l.responseMs:S*l.responseMs+(1-S)*y.avgResponseMs;const x=y.attempts>0?y.correct/y.attempts:0,O=Math.min(1,y.attempts/10);y.mastery=jd((y.rollingAccuracy*.7+x*.3)*O),l.correct&&y.mastery>=.82?(y.intervalDays=W0(y.intervalDays),y.dueAt=o+y.intervalDays*xv):(y.intervalDays=0,y.dueAt=o),c.adaptive[b]=y}c.attempts.length>2e3&&(c.attempts=c.attempts.slice(-2e3)),mn(_d,c)}function mr(l,c){const o=Xl(),u=Date.now(),d=c?.contextKey;if(d){const h=o.adaptive[_v(d,l)];if(h)return zi(h,u)}const m=Object.values(o.adaptive).filter(h=>h.key===l);return m.length===0?1:m.reduce((h,v)=>h+zi(v,u),0)/m.length}function ax(l){const c=Xl(),o=Date.now(),u=new Set(l.modePool??["scale_degree","functional_interval","functional_harmony","timing_grid","phrase_recall"]);return Object.values(c.adaptive).filter(h=>{if(!(h.key.startsWith("degree:")||h.key.startsWith("movement:")||h.key.startsWith("quality:")||h.key.startsWith("progression:")||h.key.startsWith("cadence:")||h.key.startsWith("changed_position:")||h.key.startsWith("meter:")||h.key.startsWith("subdivision:")||h.key.startsWith("syncopation:")||h.key.startsWith("tap:")||h.key.startsWith("phrase:"))||!u.has(h.mode))return!1;if(l.tonalGroup!=="mixed"){const b=ex(h.context);if(b!=="mixed"&&b!==l.tonalGroup)return!1}return l.strategy==="due"?h.dueAt>0&&h.dueAt<=o:h.attempts>=2&&h.mastery<.72}).sort((h,v)=>l.strategy==="due"?h.dueAt-v.dueAt:zi(v,o)-zi(h,o)).slice(0,l.limit).map(h=>({key:h.key,context:h.context,mode:h.mode}))}function lx(){const l=Xl(),c=Date.now(),o=Object.values(l.adaptive),u=l.totals.attempts>0?l.totals.correct/l.totals.attempts:0,d=["degrees","intervals","chords","timing","phrases"].map(m=>{const h=o.filter(x=>tx(x.mode)===m),v=h.reduce((x,O)=>x+O.attempts,0),b=h.length>0?h.reduce((x,O)=>x+O.mastery,0)/h.length:0,y=h.filter(x=>x.dueAt>0&&x.dueAt<=c).length,S=h.filter(x=>x.attempts>=2&&x.mastery<.72).length;return{skill:m,mastery:b,attempts:v,dueCount:y,weakCount:S}});return{totals:{...l.totals,accuracy:u},skills:d,reviewCounts:{due:o.filter(m=>m.dueAt>0&&m.dueAt<=c).length,weak:o.filter(m=>m.attempts>=2&&m.mastery<.72).length}}}function jv(l){const c=Xl(),o=Date.now(),u=l?.modePool?new Set(l.modePool):null;return Object.values(c.adaptive).filter(m=>l?.contextPrefix&&!m.context.startsWith(l.contextPrefix)||u&&!u.has(m.mode)?!1:m.attempts>0).sort((m,h)=>{const v=m.mastery-h.mastery;return Math.abs(v)>.001?v:zi(h,o)-zi(m,o)}).slice(0,l?.limit??3).map(m=>({key:m.key,label:nx(m.key),mode:m.mode,mastery:m.mastery,attempts:m.attempts,dueNow:m.dueAt>0&&m.dueAt<=o,context:m.context}))}function Mv(){mn(_d,xr)}const Ar="et_authored_drills_v1",id="et_authored_drills_changed",Nd=[{id:"seed_movement_7_1",name:"Leading tone release",mode:"functional_interval",adaptiveKey:"movement:7->1",difficulty:2,tags:["cadence","resolution"],promptOverride:"Name the pull you hear after tonic is established.",explanationTitle:"Leading tone release",explanationBody:"This motion feels urgent because the upper note sits right next to tonic and resolves by shortest distance.",coachingNotes:["Hear the first note as unstable before you try to label the span.","If the landing feels complete, you are probably hearing the return to tonic."],moreBody:"This kind of motion is worth over-practicing because it appears across melodies, bass motion, and cadence hearing.",enabled:!0,updatedAt:Date.now()}];function Nv(){typeof window<"u"&&window.dispatchEvent(new Event(id))}function ix(){return`drill_${Math.random().toString(36).slice(2,10)}`}function Ev(l,c){return{id:l.id||`drill_${c}`,name:l.name||`Drill ${c+1}`,mode:l.mode,adaptiveKey:l.adaptiveKey,difficulty:l.difficulty??1,tags:l.tags??[],promptOverride:l.promptOverride??"",explanationTitle:l.explanationTitle??l.name,explanationBody:l.explanationBody??"",coachingNotes:l.coachingNotes??[],moreBody:l.moreBody??"",enabled:l.enabled??!0,updatedAt:l.updatedAt??Date.now()}}function Ha(){return $l(Ar,Nd).map(Ev).sort((c,o)=>o.updatedAt-c.updatedAt)}function sd(){return Ha().filter(l=>l.enabled)}function sx(l){const c=Ha(),o=Ev({...l,id:l.id??ix(),updatedAt:Date.now()},c.length),u=c.findIndex(d=>d.id===o.id);return u>=0?c[u]=o:c.unshift(o),mn(Ar,c),Nv(),o}function cx(l){mn(Ar,Ha().filter(c=>c.id!==l)),Nv()}function Ed(l){if(typeof window>"u")return()=>{};const c=u=>{u.key===Ar&&l()},o=()=>l();return window.addEventListener("storage",c),window.addEventListener(id,o),()=>{window.removeEventListener("storage",c),window.removeEventListener(id,o)}}function rx(l,c){return sd().find(o=>o.mode===l&&o.adaptiveKey===c)??null}function Ap(l){return l==="scale_degree"?["degree:3","degree:7"]:l==="functional_interval"?["movement:2->3","movement:7->1"]:l==="functional_harmony"?["progression:ii-V-I","cadence:authentic","changed_position:2"]:l==="timing_grid"?["meter:4/4","subdivision:triplet","tap:4/4:eighth:2"]:["phrase:stepwise","phrase:triadic"]}const ox=["Do","Re","Mi","Fa","So","La","Ti"],Sr=["1","2","3","4","5","6","7"],ux={major:[0,2,4,5,7,9,11],natural_minor:[0,2,3,5,7,8,10],harmonic_minor:[0,2,3,5,7,8,11],melodic_minor:[0,2,3,5,7,9,11],modal:[0,2,4,5,7,9,10]},dx={1:"stable",2:"moderately_unstable",3:"stable",4:"strong_tendency",5:"stable",6:"moderately_unstable",7:"strong_tendency",b3:"moderately_unstable","#4":"strong_tendency",b7:"moderately_unstable"},fx={1:"1 is stable because it is the tonal center.",2:"2 is unstable because it leans toward 1 or 3.",3:"3 is stable because it supports tonic color.",4:"4 is unstable because it forms tension against tonic.",5:"5 is stable because it reinforces tonic support.",6:"6 is moderately unstable because it tends to move to 5 or 7.",7:"7 is unstable because it resolves to 1.",b3:"b3 is unstable in major context because it colors toward minor.","#4":"#4 is unstable because it intensifies pull to 5.",b7:"b7 is moderately unstable because it tends toward 6 or 1."},mx={1:"m2",2:"M2",3:"m3",4:"M3",5:"P4",7:"P5",12:"P8"},hx={"7->1":"Leading tone resolves to tonic.","4->3":"Subdominant tension resolves downward.","2->1":"Supertonic relaxes to tonic."},px={major:"tonic",minor:"predominant",diminished:"dominant",augmented:"dominant",dominant7:"dominant",major7:"tonic",minor7:"predominant",half_diminished7:"dominant"};function Yl(l,c=Ft){const o=l?c.filter(u=>u!==l):[...c];return o[Math.floor(Math.random()*o.length)]}function gl(l,c){if(l==="b3")return 3;if(l==="#4")return 6;if(l==="b7")return 10;const o=Sr.indexOf(l);return o<0?0:ux[c][o]}function Xt(l,c,o,u){return Ps(l,c)+gl(o,u)}function Uu(l){const c=Sr.indexOf(l);return c>=0?ox[c]:l}function vx(l){return dx[l]??"moderately_unstable"}function wp(l){return fx[l]??`${l} carries tension relative to tonic.`}function kp(l){return mx[l]??`${l} semitones`}function Tv(l,c){return`${l}->${c}`}function gx(l,c){return hx[Tv(l,c)]??"Hear this as motion relative to tonic."}function yx(l){return px[l]}function Gl(l){switch(l){case"major":return"Major";case"minor":return"Minor";case"diminished":return"Diminished";case"augmented":return"Augmented";case"dominant7":return"Dominant 7";case"major7":return"Major 7";case"minor7":return"Minor 7";case"half_diminished7":return"Half-diminished 7";default:return l}}function bx(l){return l===1?["major","minor","diminished","augmented"]:["major","minor","diminished","augmented","dominant7","major7","minor7","half_diminished7"]}const zs=["1","2","3","4","5","6","7"],xx=["1","3","5","6"],Cv=["1","2","b3","3","4","#4","5","6","b7","7"];function Vs(l){return l[Math.floor(Math.random()*l.length)]}function Sx(l){const c=[...l];for(let o=c.length-1;o>0;o--){const u=Math.floor(Math.random()*(o+1));[c[o],c[u]]=[c[u],c[o]]}return c}function Rp(l){return l.map(c=>c.join(" ")).join(" | ")}function _x(l,c){const o=[...l],u=Math.floor(Math.random()*o.length),d=c==="major"?zs:Cv;let m=Vs(d);for(;m===o[u];)m=Vs(d);return o[u]=m,o}function Gu(l){return{kind:"sequence",events:l.degrees.map((o,u)=>({atBeats:l.startBeat+u,durationBeats:.8,freqHz:Ne(Xt(l.tonic,l.octave,o,l.tonalMode)),gain:.88}))}}function jx(l){return Array.from({length:l},(c,o)=>({atBeats:o,durationBeats:.18,freqHz:Ne(o%4===0?102:96),gain:o%4===0?.62:.48}))}function Mx(l,c){return l===1?"multiple_choice":c==="multiple_choice"?Math.random()<.5?"multiple_choice":"piano_grid":c}function Nx(l,c,o){const d=o*4;if(c==="stepwise"){const v=["1"];for(;v.length<d;){const b=v[v.length-1],y=zs.indexOf(b),S=Math.random()<.5?-1:1,x=Math.max(0,Math.min(zs.length-1,y+S));v.push(zs[x])}return v}if(c==="triadic"){const v=[];for(;v.length<d;)v.push(Vs(xx));return v}const m=[],h=l>=3?Cv:zs;for(;m.length<d;)m.push(Vs(h));return m}function Ex(l){const c=l.level===1?2:Math.min(4,2+l.level-1),o=Vs(l.level===1?["stepwise"]:l.level===2?["stepwise","triadic"]:["stepwise","triadic","chromatic"]),u=Nx(l.level,o,c),d=4,m=Array.from({length:c},(G,L)=>u.slice(L*d,L*d+d)),h=Rp(m),v=Array.from({length:3},()=>_x(u,l.tonalMode)),b=Sx([h,...v.map(G=>Rp(Array.from({length:c},(L,Y)=>G.slice(Y*d,Y*d+d))))]).slice(0,4),y=Gu({degrees:u,tonic:l.tonic,octave:l.octave,tonalMode:l.tonalMode,startBeat:0}),S=Gu({degrees:u,tonic:l.tonic,octave:l.octave,tonalMode:l.tonalMode,startBeat:4}),x={kind:"sequence",events:[...jx(4),...S.kind==="sequence"?S.events:[]]},O=m.map(G=>Gu({degrees:G,tonic:l.tonic,octave:l.octave,tonalMode:l.tonalMode,startBeat:0}));return{bars:c,tag:o,degrees:u,measureGroups:m,answerChoices:b,correctAnswer:h,playbackPlan:y,replayWithCountIn:x,measurePlaybackPlans:O,inputMode:Mx(l.level,l.preferredInputMode)}}const Tx=[{romanPath:["I","V"],cadenceType:"half",stage:1,tonalFamily:"major"},{romanPath:["I","IV"],cadenceType:"half",stage:1,tonalFamily:"major"},{romanPath:["I","IV","V"],cadenceType:"half",stage:2,tonalFamily:"major"},{romanPath:["ii","V","I"],cadenceType:"authentic",stage:2,tonalFamily:"major"},{romanPath:["I","IV","I"],cadenceType:"plagal",stage:2,tonalFamily:"major"},{romanPath:["I","ii","V","I"],cadenceType:"authentic",stage:3,tonalFamily:"major"},{romanPath:["I","IV","V","I"],cadenceType:"authentic",stage:3,tonalFamily:"major"},{romanPath:["i","iv","V"],cadenceType:"half",stage:2,tonalFamily:"minor"},{romanPath:["i","iv","i"],cadenceType:"plagal",stage:2,tonalFamily:"minor"},{romanPath:["i","iv","V","i"],cadenceType:"authentic",stage:3,tonalFamily:"minor"}];function Cx(l){return l.includes("minor")?"minor":"major"}function Ax(l){return l===1?1:3}function wx(l,c){return c==="major"?[l,l+4,l+7]:c==="minor"?[l,l+3,l+7]:[l,l+3,l+6]}function Av(l){return l.replace(/[0-9]/g,"")}function kx(l,c){const o=Av(l);if(c==="major"){const d={I:{rootOffset:0,quality:"major"},ii:{rootOffset:2,quality:"minor"},iii:{rootOffset:4,quality:"minor"},IV:{rootOffset:5,quality:"major"},V:{rootOffset:7,quality:"major"},vi:{rootOffset:9,quality:"minor"},vii:{rootOffset:11,quality:"diminished"}};return d[o]??d.I}const u={i:{rootOffset:0,quality:"minor"},ii:{rootOffset:2,quality:"diminished"},III:{rootOffset:3,quality:"major"},iv:{rootOffset:5,quality:"minor"},V:{rootOffset:7,quality:"major"},VI:{rootOffset:8,quality:"major"},VII:{rootOffset:10,quality:"major"}};return u[o]??u.i}function cd(l,c){const o=Cx(l),u=Ax(c);return Tx.filter(d=>d.tonalFamily===o&&d.stage<=u)}function Li(l){return l.join(" - ")}function hr(l){return l==="authentic"?"Authentic":l==="plagal"?"Plagal":"Half"}function Bs(l){const c=Av(l);return c==="I"||c==="i"||c==="vi"||c==="VI"||c==="iii"||c==="III"?"tonic":c==="ii"||c==="IV"||c==="iv"?"predominant":c==="V"||c==="vii"||c==="VII"?"dominant":"other"}function rd(l){return l==="tonic"?"rests and confirms the key center.":l==="predominant"?"moves away from rest and points toward dominant tension.":l==="dominant"?"creates strong pull back toward tonic.":"adds color without a strong directional pull."}function Vu(l){return l.map(c=>{const o=Bs(c);return`${c}: ${o} (${rd(o)})`}).join(" ")}function Yu(l,c,o){return o.map(u=>{const d=kx(u,c);return wx(l+d.rootOffset,d.quality)})}function ki(l,c,o){const u=[],d=[c,c+4,c+7];return u.push({atBeats:0,durationBeats:.8,freqsHz:d.map(Ne),gain:.62}),o.forEach((m,h)=>{const v=.95+h*.95;if(u.push({atBeats:v,durationBeats:.35,freqHz:Ne(c-12),gain:.4}),l==="block"){u.push({atBeats:v,durationBeats:.8,freqsHz:m.map(Ne),gain:.8});return}if(l==="arpeggiated"){u.push({atBeats:v,durationBeats:.24,freqHz:Ne(m[0]),gain:.82}),u.push({atBeats:v+.24,durationBeats:.24,freqHz:Ne(m[1]),gain:.82}),u.push({atBeats:v+.48,durationBeats:.24,freqHz:Ne(m[2]),gain:.84});return}u.push({atBeats:v,durationBeats:.22,freqHz:Ne(m[0]),gain:.82}),u.push({atBeats:v+.24,durationBeats:.52,freqsHz:m.map(Ne),gain:.78})}),{kind:"sequence",events:u}}function Rx(l){return l==="major"?["I","ii","iii","IV","V","vi","vii"]:["i","ii","III","iv","V","VI","VII"]}function Dx(l){const{tonalMode:c,romanPath:o}=l;if(o.length<2)return null;const u=1+Math.floor(Math.random()*(o.length-1)),d=o[u],m=Rx(c).filter(b=>b!==d);if(m.length===0)return null;const h=m[Math.floor(Math.random()*m.length)],v=[...o];return v[u]=h,{changedPath:v,index:u,from:d,to:h}}function wv(l){return l===1?2:l===2?3:4}function Ku(l){return l[Math.floor(Math.random()*l.length)]}function kv(l){return l==="quarter"?1:l==="eighth"?.5:l==="triplet"?1/3:.25}function _r(l){return l==="2/4"?2:l==="3/4"?3:4}function Rv(l,c){return Math.round(l/c)*c}function Dp(l,c,o,u){return{atBeats:c,durationBeats:o,freqHz:Ne(l),gain:u}}function Lp(l,c,o){const u=_r(c),d=Array.from({length:o},(h,v)=>Dp(v%u===0?102:96,v,.18,v%u===0?.62:.5)),m=l.map(h=>Dp(84,o+h,.12,.9));return{kind:"sequence",events:[...d,...m]}}function Lx(l,c,o,u){const d=_r(l),m=kv(c),h=d*o,v=Math.max(1,Math.round(h/m)),b=Math.max(4,Math.round(v*.35)),y=Math.max(b+1,Math.round(v*.6)),S=Math.floor(Math.random()*(y-b+1))+b,x=new Set([0]);for(;x.size<S;){const G=Math.floor(Math.random()*v)*m,L=Math.abs(G%1)<1e-4;!u&&!L&&Math.random()<.7||x.add(Rv(G,m))}return[...x].sort((O,G)=>O-G)}function Ox(l){const c=l===1?["2/4","4/4"]:["2/4","3/4","4/4"],o=l===1?["quarter","eighth"]:l===2?["eighth","triplet"]:["eighth","triplet","sixteenth"],u=Ku(l===1?["echo_pattern","meter_pick"]:l===2?["echo_pattern","meter_pick","subdivision_pick"]:["echo_pattern","meter_pick","subdivision_pick","offbeat_pick"]),d=Ku(c),m=Ku(o),h=l>=2?2:1,v=_r(d)*h,b=Lx(d,m,h,l>=2),y=_r(d),S=Lp(b,d,y),x=Lp(b,d,0);return{meter:d,subdivision:m,bars:h,questionKind:u,targetBeats:b,patternLengthBeats:v,quantizeStepBeats:kv(m),promptPlan:x,replayWithCountIn:S}}function zx(l,c,o){const u=new Set;for(const d of l){const m=Rv(d,c);m<0||m>o+c||u.add(m)}return[...u].sort((d,m)=>d-m)}function Bx(l){const c=l.toleranceBeats??.22,o=[],u=new Set;let d=0;for(const h of l.target){let v=-1,b=Number.POSITIVE_INFINITY;for(let y=0;y<l.taps.length;y++){if(u.has(y))continue;const S=Math.abs(l.taps[y]-h);S<b&&(b=S,v=y)}v>=0&&b<=c?(u.add(v),d+=1,o.push({targetBeat:h,tappedBeat:l.taps[v],deltaMs:(l.taps[v]-h)*6e4/l.bpm})):o.push({targetBeat:h,tappedBeat:null,deltaMs:null})}const m=l.target.length;return{matched:d,expected:m,accuracy:m>0?d/m:0,errors:o}}function qx(){return Math.random().toString(36).slice(2,10)}function Td(l,c){const o=l.map(m=>({item:m,weight:Math.max(.01,c(m))})),u=o.reduce((m,h)=>m+h.weight,0);let d=Math.random()*u;for(const m of o)if(d-=m.weight,d<=0)return m.item;return o[o.length-1].item}function pr(l,c,o){const u=l.find(c);return u||Td(l,o)}function Oa(l,c,o){const u=l.filter(m=>m!==o),d=[];for(;u.length>0&&d.length<c;){const m=Math.floor(Math.random()*u.length);d.push(u.splice(m,1)[0])}return d}function Hx(l){const c=l.length>0?l:["scale_degree","functional_interval","functional_harmony"];return Td(c,o=>o==="scale_degree"||o==="functional_interval"?4:o==="functional_harmony"?2:o==="timing_grid"?3:2.8)}function Ux(l){return l===1?["1","2","3","4","5"]:l===2?[...Sr]:[...Sr,"b3","#4","b7"]}function qs(l){return l===1?[["1","2"],["2","1"],["2","3"],["3","2"],["3","4"],["4","3"],["4","5"],["5","4"]]:l===2?[...qs(1),["1","3"],["3","1"],["2","4"],["4","2"],["3","5"],["5","3"]]:l===3?[...qs(2),["1","4"],["4","1"],["1","5"],["5","1"],["2","5"],["5","2"]]:[...qs(3),["1","1"]]}function Qu(l,c){const[o,u]=l,d=gl(o,c);return gl(u,c)<d?"descending":"ascending"}function Gx(l,c,o){const u=`${l[0]}->${l[1]}`,d=Qu(l,o),m=1,h=2,v=c.filter(S=>`${S[0]}->${S[1]}`!==u).filter(S=>Qu(S,o)===d).map(([S,x])=>`${S}->${x}`),b=c.filter(S=>Qu(S,o)!==d).map(([S,x])=>`${S}->${x}`);return[u,...Oa(v,m,u),...Oa(b,h,u)].sort(()=>Math.random()-.5)}function Op(l,c,o,u){return l==="harmonic_stack"?{kind:"chord",midis:[o,u],durationBeats:1.6,gain:.82}:l==="immediate_jump"?{kind:"sequence",events:[{atBeats:0,durationBeats:.5,freqHz:Ne(o),gain:.88},{atBeats:.55,durationBeats:.75,freqHz:Ne(u),gain:.9}]}:l==="sequential_pause"?{kind:"sequence",events:[{atBeats:0,durationBeats:.65,freqHz:Ne(o),gain:.88},{atBeats:1.2,durationBeats:.75,freqHz:Ne(u),gain:.9}]}:{kind:"sequence",events:[{atBeats:0,durationBeats:.7,freqHz:Ne(c),gain:.75},{atBeats:.85,durationBeats:.5,freqHz:Ne(o),gain:.86},{atBeats:1.45,durationBeats:.5,freqHz:Ne(u),gain:.9}]}}function zp(l,c){return c==="major"?[l,l+4,l+7]:c==="minor"?[l,l+3,l+7]:c==="diminished"?[l,l+3,l+6]:c==="augmented"?[l,l+4,l+8]:c==="dominant7"?[l,l+4,l+7,l+10]:c==="major7"?[l,l+4,l+7,l+11]:c==="minor7"?[l,l+3,l+7,l+10]:[l,l+3,l+6,l+10]}function Bp(l,c,o){const u=[c,c+4,c+7];if(l==="block")return{kind:"sequence",events:[{atBeats:0,durationBeats:1,freqsHz:u.map(Ne),gain:.68},{atBeats:1.2,durationBeats:1.2,freqsHz:o.map(Ne),gain:.78}]};if(l==="arpeggiated"){const d=o.map((m,h)=>({atBeats:1.05+h*.45,durationBeats:.35,freqHz:Ne(m),gain:.82}));return{kind:"sequence",events:[{atBeats:0,durationBeats:.8,freqsHz:u.map(Ne),gain:.66},...d]}}return{kind:"sequence",events:[{atBeats:0,durationBeats:.8,freqsHz:u.map(Ne),gain:.66},{atBeats:1,durationBeats:.35,freqHz:Ne(o[0]),gain:.8},{atBeats:1.45,durationBeats:.35,freqHz:Ne(o[1]),gain:.8},{atBeats:1.9,durationBeats:.35,freqHz:Ne(o[2]),gain:.8},{atBeats:2.4,durationBeats:.95,freqsHz:o.map(Ne),gain:.78}]}}function Vx(l,c,o){const u=c.filter(m=>m!==l);if(u.length===0)return null;const d=gl(l,o);return u.map(m=>({degree:m,distance:Math.abs(d-gl(m,o))})).sort((m,h)=>m.distance-h.distance)[0]?.degree??null}function Yx(l){return{major:"minor",minor:"major",diminished:"minor",augmented:"major",dominant7:"major7",major7:"dominant7",minor7:"dominant7",half_diminished7:"diminished"}[l]}function qp(l){return Li(l)}function Kx(l){const c=cd(l.config.tonalMode,l.config.harmonyLevel),o=l.forcedAdaptiveKey?.startsWith("progression:")?l.forcedAdaptiveKey.slice(12):null;return pr(c,u=>qp(u.romanPath)===o,u=>mr(`progression:${qp(u.romanPath)}`,{contextKey:l.adaptiveContextKey}))}function Qx(l){return l===1?Math.random()<.75?"roman_path":"cadence_type":l===2?Math.random()<.55?"roman_path":"cadence_type":Td(["roman_path","cadence_type","changed_chord"],c=>c==="changed_chord"?1.4:1)}function $x(l,c){const o=["Authentic","Plagal","Half"],u=hr(l);return[u,...Oa(o,(c===1?2:3)-1,u)].sort(()=>Math.random()-.5)}function Xx(l,c,o){const u=Array.from({length:l},(h,v)=>`Chord ${v+1}`),d=u[c],m=Math.min(wv(o),u.length);return[d,...Oa(u,m-1,d)].sort(()=>Math.random()-.5)}function Nn(l){return{id:`q_${qx()}`,...l}}function En(l){const c=rx(l.mode,l.adaptiveFocusKey);return c?{...l,prompt:c.promptOverride.trim()||l.prompt,feedback:{...l.feedback,title:c.explanationTitle.trim()||l.feedback.title,explanation:c.explanationBody.trim()||l.feedback.explanation},teaching:{...l.teaching,lines:c.coachingNotes.length>0?[c.coachingNotes[0],...c.coachingNotes.slice(1)]:l.teaching.lines,more:c.moreBody.trim()||l.teaching.more}}:l}function Cd(l){const{config:c,questionIndex:o,previousTonic:u,tonicOctave:d,shouldForceSinging:m,forcedMode:h,forcedAdaptiveKey:v,adaptiveContextKey:b}=l,S=c.randomTonicEvery>0&&o>0&&o%c.randomTonicEvery===0?Yl(u,c.tonicPool):u,x=Ps(S,d),O=h??Hx(c.modePool);if(O==="scale_degree"){const T=Ux(c.degreeLevel),ye=v?.startsWith("degree:")?v.slice(7):null,X=pr(T,W=>W===ye,W=>mr(`degree:${W}`,{contextKey:b})),ne=[X,...Oa(T,3,X)];if(Math.random()<c.predictiveResolutionChance&&T.includes("7")){const W=Xt(S,d,"7",c.tonalMode);return En({...Nn({mode:"scale_degree",tonic:S,tonicMidi:x,prompt:"Where does this unstable degree want to resolve?",playbackPlan:{kind:"sequence",events:[{atBeats:0,durationBeats:.7,freqHz:Ne(x),gain:.75},{atBeats:.9,durationBeats:.85,freqHz:Ne(W),gain:.86}]},answerChoices:["1","6","5","2"],correctAnswer:"1",enforceSinging:m,revealAfterSinging:m,adaptiveFocusKey:"resolution:7->1",feedback:{title:"7 -> 1",subtitle:"Leading tone resolves to tonic.",explanation:"7 is unstable because it resolves to 1."},teaching:{lines:["This pitch sits one semitone below tonic, so your ear expects closure.","When it rises to 1, tension drops immediately."],more:"In tonal melodies, this pull helps define the key center and makes cadences feel complete.",tendencyHint:"Leading tone tendency: 7 usually resolves up to 1."},compareAudio:{label:"Play nearby pull",description:"Compare 7 against 6 before hearing the tonic.",playbackPlan:{kind:"sequence",events:[{atBeats:0,durationBeats:.55,freqHz:Ne(x),gain:.72},{atBeats:.65,durationBeats:.55,freqHz:Ne(Xt(S,d,"6",c.tonalMode)),gain:.84},{atBeats:1.35,durationBeats:.55,freqHz:Ne(W),gain:.88},{atBeats:2.05,durationBeats:.75,freqHz:Ne(x),gain:.9}]}},metadata:{stability:"strong_tendency",solfege:"Ti -> Do",tonalMode:c.tonalMode,visualCue:{activeDegree:"7",movement:{from:"7",to:"1"},timelineMidis:[x,W]}}}),predictiveResolution:{isPredictiveResolution:!0,unstableDegree:"7",expectedResolution:"1"}})}const he=vx(X),me=Xt(S,d,X,c.tonalMode),E=Vx(X,T,c.tonalMode),P=E?Xt(S,d,E,c.tonalMode):null;return En(Nn({mode:"scale_degree",tonic:S,tonicMidi:x,prompt:"Identify the scale degree against tonic.",playbackPlan:{kind:"sequence",events:[{atBeats:0,durationBeats:.72,freqHz:Ne(x),gain:.76},{atBeats:.95,durationBeats:.95,freqHz:Ne(me),gain:.88}]},answerChoices:ne.sort(()=>Math.random()-.5),correctAnswer:X,enforceSinging:m,revealAfterSinging:m,adaptiveFocusKey:`degree:${X}`,feedback:{title:`Degree ${X}`,subtitle:he.replace("_"," "),explanation:wp(X)},teaching:{lines:[`Hear degree ${X} as a color measured from tonic.`,wp(X)],more:`In ${c.tonalMode.replace("_"," ")}, this degree gets its identity from distance to 1 and nearby tendency tones.`,tendencyHint:X==="7"?"Leading tone tendency: 7 leans up to 1.":X==="4"||X==="#4"?"Upper tendency: this color often settles toward 3 or 5.":void 0},compareAudio:E&&P!=null?{label:`Play neighbor (${E})`,description:`Contrast degree ${X} with the nearest nearby degree.`,playbackPlan:{kind:"sequence",events:[{atBeats:0,durationBeats:.6,freqHz:Ne(x),gain:.72},{atBeats:.75,durationBeats:.65,freqHz:Ne(me),gain:.9},{atBeats:1.6,durationBeats:.65,freqHz:Ne(P),gain:.86}]}}:void 0,metadata:{stability:he,solfege:Uu(X),tonalMode:c.tonalMode,visualCue:{activeDegree:X,timelineMidis:[x,me]}}}))}if(O==="functional_interval"){const T=v?.startsWith("movement:")?v.slice(9):null,ye=pr(qs(c.intervalLevel),([te,de])=>`${te}->${de}`===T,([te,de])=>mr(`movement:${Tv(te,de)}`,{contextKey:b})),[X,ne]=ye,pe=Xt(S,d,X,c.tonalMode);let he=Xt(S,d,ne,c.tonalMode);c.intervalLevel===4&&X==="1"&&ne==="1"&&(he+=12);const me=Math.abs(he-pe),E=kp(me),P=`${X}->${ne}`,W=Gx(ye,qs(c.intervalLevel),c.tonalMode),je=gx(X,ne),Ee=me>=11?me-1:me+1,M=pe+(he>=pe?Ee:-Ee),B=kp(Math.abs(M-pe)),J=me===6?"Tritone tendency: hear the two notes wanting to resolve inward or outward.":X==="7"&&ne==="1"?"Leading tone tendency: 7 usually rises to 1.":void 0;return En(Nn({mode:"functional_interval",tonic:S,tonicMidi:x,prompt:"Identify the scale-degree movement.",playbackPlan:Op(c.intervalPlaybackVariant,x,pe,he),answerChoices:W,correctAnswer:P,enforceSinging:m,revealAfterSinging:m,adaptiveFocusKey:`movement:${P}`,feedback:{title:`${X} -> ${ne}`,subtitle:E,note:je,explanation:je},teaching:{lines:["Intervals are heard as direction and distance from the start tone.",`This one is ${E}, so keep that span in memory before naming the motion.`],more:"If two options feel close, focus on how strongly the second pitch pushes toward rest or away from it.",tendencyHint:J},compareAudio:{label:`Play neighbor (${B})`,description:`Compare ${E} against a one-semitone neighbor.`,playbackPlan:Op(c.intervalPlaybackVariant,x,pe,M)},metadata:{intervalName:E,semitones:me,solfege:`${Uu(X)} -> ${Uu(ne)}`,tonalMode:c.tonalMode,visualCue:{movement:{from:X,to:ne},timelineMidis:[pe,he]}}}))}if(O==="timing_grid"){const T=Ox(c.timingLevel),ye=v?.startsWith("syncopation:")?v.slice(12):null,X=T.targetBeats.some(pe=>Math.abs(pe%1)>1e-4);if(T.questionKind==="meter_pick"){const pe=["2/4","3/4","4/4"],he=[T.meter,...Oa(pe,3,T.meter)].sort(()=>Math.random()-.5);return En(Nn({mode:"timing_grid",tonic:S,tonicMidi:x,prompt:"Identify the meter from the pulse pattern.",playbackPlan:T.promptPlan,answerChoices:he,correctAnswer:T.meter,enforceSinging:!1,revealAfterSinging:!1,adaptiveFocusKey:`meter:${T.meter}`,feedback:{title:T.meter,subtitle:T.subdivision,explanation:`The accents cycle every ${T.meter}.`},teaching:{lines:["Hear where the stronger beat returns, then count the distance between accents.",`Subdivision is ${T.subdivision}, but meter comes from recurring beat groups.`],more:"If two choices feel close, track the downbeat reset over at least two bars."},compareAudio:{label:"Replay with count-in",description:"Adds a lead-in click so the pulse settles first.",playbackPlan:T.replayWithCountIn},metadata:{tonalMode:c.tonalMode,countInBeats:T.meter==="2/4"?2:T.meter==="3/4"?3:4,timing:{questionKind:T.questionKind,meter:T.meter,subdivision:T.subdivision,quantizeStepBeats:T.quantizeStepBeats,bars:T.bars,targetBeats:T.targetBeats,patternLengthBeats:T.patternLengthBeats,supportsTapPad:!1,showErrorOverlay:!1}}}))}if(T.questionKind==="subdivision_pick"){const pe=["quarter","eighth","triplet","sixteenth"],he=[T.subdivision,...Oa(pe,3,T.subdivision)].sort(()=>Math.random()-.5);return En(Nn({mode:"timing_grid",tonic:S,tonicMidi:x,prompt:"Identify the subdivision.",playbackPlan:T.promptPlan,answerChoices:he,correctAnswer:T.subdivision,enforceSinging:!1,revealAfterSinging:!1,adaptiveFocusKey:`subdivision:${T.subdivision}`,feedback:{title:T.subdivision,subtitle:T.meter,explanation:`Smallest regular grid is ${T.subdivision}.`},teaching:{lines:["Subdivision is the smallest repeating slice between beats.","Count one beat and listen for equally spaced internal pulses."],tendencyHint:"Triplet hearing often feels rounder than straight eighths."},compareAudio:{label:"Replay with count-in",description:"Adds count-in clicks before the target pattern.",playbackPlan:T.replayWithCountIn},metadata:{tonalMode:c.tonalMode,countInBeats:T.meter==="2/4"?2:T.meter==="3/4"?3:4,timing:{questionKind:T.questionKind,meter:T.meter,subdivision:T.subdivision,quantizeStepBeats:T.quantizeStepBeats,bars:T.bars,targetBeats:T.targetBeats,patternLengthBeats:T.patternLengthBeats,supportsTapPad:!1,showErrorOverlay:!1}}}))}if(T.questionKind==="offbeat_pick"){const pe=["syncopated","on beat only"];return En(Nn({mode:"timing_grid",tonic:S,tonicMidi:x,prompt:"Does the pattern use syncopation?",playbackPlan:T.promptPlan,answerChoices:pe,correctAnswer:ye==="yes"?"syncopated":ye==="no"?"on beat only":X?"syncopated":"on beat only",enforceSinging:!1,revealAfterSinging:!1,adaptiveFocusKey:`syncopation:${X?"yes":"no"}`,feedback:{title:X?"syncopated":"on beat only",subtitle:T.meter,explanation:X?"Several hits land between main beats.":"Hits align to beat anchors only."},teaching:{lines:["Syncopation means stress on weak parts of the beat.","If taps feel pulled forward between beats, the line is syncopated."]},compareAudio:{label:"Replay with count-in",description:"Listen again with a stronger beat frame first.",playbackPlan:T.replayWithCountIn},metadata:{tonalMode:c.tonalMode,countInBeats:T.meter==="2/4"?2:T.meter==="3/4"?3:4,timing:{questionKind:T.questionKind,meter:T.meter,subdivision:T.subdivision,quantizeStepBeats:T.quantizeStepBeats,bars:T.bars,targetBeats:T.targetBeats,patternLengthBeats:T.patternLengthBeats,supportsTapPad:!1,showErrorOverlay:!1}}}))}const ne=`${T.meter}:${T.subdivision}:${T.bars}`;return En(Nn({mode:"timing_grid",tonic:S,tonicMidi:x,prompt:"Tap the pattern back on the pad, then submit your timing.",playbackPlan:T.promptPlan,answerChoices:["tap_capture"],correctAnswer:"tap_capture",enforceSinging:!1,revealAfterSinging:!1,adaptiveFocusKey:`tap:${ne}`,feedback:{title:"Timing capture",subtitle:`${T.meter} / ${T.subdivision}`,explanation:"Quantized tap timing is compared against the source rhythm."},teaching:{lines:["Lock to the internal pulse before tapping.","Stay on the same grid size you heard in the prompt."]},compareAudio:{label:"Replay with count-in",description:"Count-in plus pattern for another attempt.",playbackPlan:T.replayWithCountIn},metadata:{tonalMode:c.tonalMode,countInBeats:T.meter==="2/4"?2:T.meter==="3/4"?3:4,timing:{questionKind:T.questionKind,meter:T.meter,subdivision:T.subdivision,quantizeStepBeats:T.quantizeStepBeats,bars:T.bars,targetBeats:T.targetBeats,patternLengthBeats:T.patternLengthBeats,supportsTapPad:!0,showErrorOverlay:!0}}}))}if(O==="phrase_recall"){const T=Ex({level:c.phraseLevel,preferredInputMode:c.dictationInputMode,tonic:S,octave:d,tonalMode:c.tonalMode}),ye=T.measureGroups.map(X=>X.join(" ")).join(" | ");return En(Nn({mode:"phrase_recall",tonic:S,tonicMidi:x,prompt:"Recreate the melodic line.",playbackPlan:T.playbackPlan,answerChoices:T.answerChoices,correctAnswer:T.correctAnswer,enforceSinging:!1,revealAfterSinging:!1,adaptiveFocusKey:`phrase:${T.tag}`,feedback:{title:`${T.tag} line`,subtitle:`${T.bars} bars`,explanation:`Correct line: ${ye}`},teaching:{lines:["Hold contour first, then fill exact degrees.","Split the phrase into bars before naming details."],tendencyHint:T.tag==="stepwise"?"Stepwise lines usually move by adjacent scale steps.":T.tag==="triadic"?"Triadic lines outline chord tones (1-3-5 family).":"Chromatic lines include altered scale colors."},compareAudio:{label:"Replay with count-in",description:"Count-in first, then the full line.",playbackPlan:T.replayWithCountIn},metadata:{tonalMode:c.tonalMode,countInBeats:4,phrase:{bars:T.bars,tag:T.tag,inputMode:T.inputMode,expectedDegrees:T.degrees,measureGroups:T.measureGroups,measurePlaybackPlans:T.measurePlaybackPlans,replayWithCountIn:T.replayWithCountIn}}}))}if(v?.startsWith("quality:")){const T=bx(c.harmonyLevel),ye=v?.slice(8)??null,X=pr(T,W=>W===ye,W=>mr(`quality:${W}`,{contextKey:b})),ne=yx(X),pe=zp(x,X),he=Yx(X),me=zp(x,he),E=[Gl(X),...Oa(T.map(Gl),3,Gl(X))].sort(()=>Math.random()-.5),P=X==="dominant7"?"Dominant tendency: this quality strongly wants to resolve to tonic harmony.":X==="half_diminished7"||X==="diminished"?"Diminished color usually sounds unstable and points toward resolution.":void 0;return En(Nn({mode:"functional_harmony",tonic:S,tonicMidi:x,prompt:"Identify the chord quality in context (I -> ?).",playbackPlan:Bp(c.harmonyPlaybackVariant,x,pe),answerChoices:E,correctAnswer:Gl(X),enforceSinging:m,revealAfterSinging:m,adaptiveFocusKey:`quality:${X}`,feedback:{title:Gl(X),subtitle:ne,explanation:`Heard as ${ne} function relative to tonic.`},teaching:{lines:[`${Gl(X)} is a chord-color, not just a shape.`,`${ne[0].toUpperCase()}${ne.slice(1)} function tells you how strongly it feels at rest versus in motion.`],more:"As you replay, compare third and seventh placement because they usually define quality and pull.",tendencyHint:P},compareAudio:{label:`Play neighbor (${Gl(he)})`,description:"Hear a closely related quality in the same tonic context.",playbackPlan:Bp(c.harmonyPlaybackVariant,x,me)},metadata:{chordQuality:X,functionLabel:ne,chordTones:pe.map(W=>`${W}`),harmonyQuestionKind:"quality",tonalMode:c.tonalMode,visualCue:{timelineMidis:pe}}}))}const L=Kx({config:c,forcedAdaptiveKey:v,adaptiveContextKey:b}),Y=Li(L.romanPath),R=Yu(x,c.tonalMode,L.romanPath),$=L.romanPath.map(Bs),F=Vu(L.romanPath),oe=(v?.startsWith("cadence:")?"cadence_type":v?.startsWith("changed_position:")?"changed_chord":v?.startsWith("progression:")?"roman_path":null)??Qx(L.stage),xe=wv(L.stage);if(oe==="roman_path"){const T=cd(c.tonalMode,c.harmonyLevel).filter(ne=>ne.stage<=L.stage).map(ne=>Li(ne.romanPath)),ye=[Y,...Oa(T,xe-1,Y)].sort(()=>Math.random()-.5),X=cd(c.tonalMode,c.harmonyLevel).find(ne=>ne.romanPath.length===L.romanPath.length&&Li(ne.romanPath)!==Y);return En(Nn({mode:"functional_harmony",tonic:S,tonicMidi:x,prompt:"Identify the Roman-numeral path.",playbackPlan:ki(c.harmonyPlaybackVariant,x,R),answerChoices:ye,correctAnswer:Y,enforceSinging:m,revealAfterSinging:m,adaptiveFocusKey:`progression:${Y}`,feedback:{title:Y,subtitle:`${hr(L.cadenceType)} cadence`,explanation:F},teaching:{lines:["Hear each chord as function, not as an isolated sonority.",F],more:"Track the dominant arrival and whether it resolves or suspends, then map that direction onto the full path.",tendencyHint:`Cadence cue: ${hr(L.cadenceType)} endings are shaped by the last chord's function.`},compareAudio:X?{label:`Play contrast (${Li(X.romanPath)})`,description:"Compare against another path with the same number of chords.",playbackPlan:ki(c.harmonyPlaybackVariant,x,Yu(x,c.tonalMode,X.romanPath))}:void 0,metadata:{harmonyQuestionKind:"roman_path",romanPath:L.romanPath,cadenceType:L.cadenceType,functionLabels:$,functionLabel:$[$.length-1],pullSummary:F,chordTones:R.flat().map(ne=>`${ne}`),tonalMode:c.tonalMode,visualCue:{timelineMidis:R.flat()}}}))}if(oe==="cadence_type"){const T=hr(L.cadenceType),ye=L.romanPath[L.romanPath.length-1],X=Bs(ye);return En(Nn({mode:"functional_harmony",tonic:S,tonicMidi:x,prompt:"Identify the cadence type.",playbackPlan:ki(c.harmonyPlaybackVariant,x,R),answerChoices:$x(L.cadenceType,L.stage),correctAnswer:T,enforceSinging:m,revealAfterSinging:m,adaptiveFocusKey:`cadence:${L.cadenceType}`,feedback:{title:T,subtitle:Y,explanation:`Final ${ye} sounds ${X} and ${rd(X)}`},teaching:{lines:[`Cadence hearing starts at the end: this path lands on ${ye}.`,`That ending functions as ${X}, so notice how complete or suspended it feels.`],more:"Authentic closes on tonic after dominant pull, plagal returns from IV/iv to tonic, and half cadences pause on dominant.",tendencyHint:`Function path: ${F}`},metadata:{harmonyQuestionKind:"cadence_type",romanPath:L.romanPath,cadenceType:L.cadenceType,functionLabels:$,functionLabel:X,pullSummary:F,chordTones:R.flat().map(ne=>`${ne}`),tonalMode:c.tonalMode,visualCue:{timelineMidis:R.flat()}}}))}const ue=Dx({tonalMode:c.tonalMode,romanPath:L.romanPath});if(!ue)return En(Nn({mode:"functional_harmony",tonic:S,tonicMidi:x,prompt:"Identify the Roman-numeral path.",playbackPlan:ki(c.harmonyPlaybackVariant,x,R),answerChoices:[Y],correctAnswer:Y,enforceSinging:m,revealAfterSinging:m,adaptiveFocusKey:`progression:${Y}`,feedback:{title:Y,explanation:F},teaching:{lines:["Hear function and direction as a sequence."]},metadata:{harmonyQuestionKind:"roman_path",romanPath:L.romanPath,functionLabels:$,functionLabel:$[$.length-1],pullSummary:F,tonalMode:c.tonalMode}}));const ie=Yu(x,c.tonalMode,ue.changedPath),Ae=Bs(ue.to);return En(Nn({mode:"functional_harmony",tonic:S,tonicMidi:x,prompt:"Compare with the reference and identify which chord position changed.",playbackPlan:ki(c.harmonyPlaybackVariant,x,ie),answerChoices:Xx(ue.changedPath.length,ue.index,L.stage),correctAnswer:`Chord ${ue.index+1}`,enforceSinging:m,revealAfterSinging:m,adaptiveFocusKey:`changed_position:${ue.index+1}`,feedback:{title:`Chord ${ue.index+1}`,subtitle:`${ue.from} -> ${ue.to}`,explanation:`${ue.to} is ${Ae} and ${rd(Ae)}`},teaching:{lines:["Listen for where the function track shifts, not just where a single pitch differs.",`${ue.from} changed to ${ue.to}, changing the directional pull at that moment.`],more:`Reference path: ${Y}. Changed path: ${Li(ue.changedPath)}.`,tendencyHint:`Function path now: ${Vu(ue.changedPath)}`},compareAudio:{label:"Play reference path",description:`Reference: ${Y}`,playbackPlan:ki(c.harmonyPlaybackVariant,x,R)},metadata:{harmonyQuestionKind:"changed_chord",romanPath:ue.changedPath,cadenceType:L.cadenceType,changedChordIndex:ue.index,changedFromRoman:ue.from,changedToRoman:ue.to,functionLabels:ue.changedPath.map(Bs),functionLabel:Ae,pullSummary:Vu(ue.changedPath),chordTones:ie.flat().map(T=>`${T}`),tonalMode:c.tonalMode,visualCue:{timelineMidis:ie.flat()}}}))}function Px(l){const c=[...l];for(let o=c.length-1;o>0;o--){const u=Math.floor(Math.random()*(o+1));[c[o],c[u]]=[c[u],c[o]]}return c}function Zx(l){return l==="scale_degree"||l==="functional_interval"?4:l==="functional_harmony"?2:l==="timing_grid"?3:2.8}function Jx(l,c){const u=(c.length>0?c:["scale_degree","functional_interval","functional_harmony"]).flatMap(m=>Array.from({length:Math.max(1,Math.round(Zx(m)))},()=>m)),d=Array.from({length:l},()=>u[Math.floor(Math.random()*u.length)]);return Px(d)}function jr(l){const{config:c,questionCount:o,startTonic:u,tonicOctave:d,reviewStrategy:m}=l,h=c.sessionType==="guided"?Jx(o,c.modePool):[],v=Math.ceil(o*c.singingQuota),b=m==null?[]:ax({strategy:m,limit:o,modePool:c.modePool,tonalGroup:c.tonalMode==="major"?"major":c.tonalMode.includes("minor")?"minor":"mixed"});let y=u;const S=[];for(let x=0;x<o;x++){const O=x<v?!0:c.sessionType==="free"&&c.singingQuota>0,G=b[x],L=Cd({config:c,questionIndex:x,previousTonic:y,tonicOctave:d,shouldForceSinging:O,forcedMode:G?.mode??h[x],forcedAdaptiveKey:G?.key,adaptiveContextKey:G?.context});y=L.tonic,S.push(L)}return S}function Fx(l){return l==="major"?"major":l!=null&&l.includes("minor")?"minor":"mixed"}function Ix(l){return l.mode==="functional_harmony"?"harmonic":l.mode==="timing_grid"?"melodic":l.mode==="functional_interval"&&l.playbackPlan.kind==="chord"?"harmonic":"melodic"}function Ad(l){const c=l.question,o=[c.adaptiveFocusKey];c.mode==="functional_harmony"&&c.metadata.functionLabel&&o.push(`function:${c.metadata.functionLabel}`);const u=`${c.mode}:${Ix(c)}:${Fx(c.metadata.tonalMode)}`;Md({itemId:c.id,mode:c.mode,correct:l.correct,responseMs:l.responseMs,contextKey:u,adaptiveKeys:o})}function Wx(l){const c=Math.max(1,l.questionCount),o=[];let u=l.startTonic;for(let d=0;d<c;d++){const m=Cd({config:l.config,questionIndex:d,previousTonic:u,tonicOctave:l.tonicOctave,shouldForceSinging:!1,forcedMode:l.sourceQuestion.mode,forcedAdaptiveKey:l.sourceQuestion.adaptiveFocusKey});u=m.tonic,o.push(m)}return o}function e1(l){let c=l.startTonic;return l.drills.map((o,u)=>{const d=Cd({config:l.config,questionIndex:u,previousTonic:c,tonicOctave:l.tonicOctave,shouldForceSinging:!1,forcedMode:o.mode,forcedAdaptiveKey:o.adaptiveKey});return c=d.tonic,d})}const t1=[["1","2","3"],["3","2","1"],["1","3","2","1"],["5","6","5","3"],["1","2","4","3"]],n1=["2","3","4","5","6","7"],a1=["2","3","4","5","6","7"];function $u(){return Math.random().toString(36).slice(2,10)}function Xu(l){return l[Math.floor(Math.random()*l.length)]}function od(l,c,o,u=.84){return{atBeats:c,durationBeats:o,freqHz:Ne(l),gain:u}}function Hp(l,c=!0){const o=[];let u=0;c&&l.length>0&&(o.push(od(l[0],u,.7,.74)),u+=.9);const d=c?1:0;for(let m=d;m<l.length;m++)o.push(od(l[m],u,.62,.88)),u+=.75;return{kind:"sequence",events:o}}function Pu(l){return l==="major"?"major":l.includes("minor")?"minor":"mixed"}function l1(l,c){let o=c,u=Math.abs(l-c);for(const d of[-24,-12,12,24]){const m=c+d,h=Math.abs(l-m);h<u&&(o=m,u=h)}return o}function za(l,c){return(l-l1(l,c))*100}function i1(l){const{kind:c,tonicMidi:o,tonalMode:u}=l;if(c==="interval_echo"){const h=Xu(n1),v=o+gl(h,u);return{id:`voice_${$u()}`,kind:c,label:`Echo ${h}`,instructions:`Hear tonic to ${h}, then sing the target note back.`,targetMidis:[v],targetLabels:[h],promptPlan:Hp([o,v]),tonicMidi:o,progressMode:"functional_interval",progressItemId:`voice:functional_interval:1->${h}`,adaptiveKeys:[`movement:1->${h}`],contextKey:`voice:functional_interval:${Pu(u)}`}}if(c==="degree_match"){const h=Xu(a1),v=o+gl(h,u);return{id:`voice_${$u()}`,kind:c,label:`Hold ${h} over the drone`,instructions:`Keep the tonic drone in your ear and hold degree ${h} until the tuner settles.`,targetMidis:[v],targetLabels:[h],promptPlan:{kind:"sequence",events:[od(o,0,.8,.72)]},droneMidi:o,tonicMidi:o,progressMode:"scale_degree",progressItemId:`voice:scale_degree:${h}`,adaptiveKeys:[`degree:${h}`],contextKey:`voice:scale_degree:${Pu(u)}`}}const d=Xu(t1),m=d.map(h=>o+gl(h,u));return{id:`voice_${$u()}`,kind:c,label:`Echo motif ${d.join("-")}`,instructions:"Listen once, then sing the full response in the same order.",targetMidis:m,targetLabels:[...d],promptPlan:Hp([o,...m]),tonicMidi:o,progressMode:"phrase_recall",progressItemId:`voice:phrase_recall:${d.join("-")}`,adaptiveKeys:[`phrase:voice_${d.join("-")}`],contextKey:`voice:phrase_recall:${Pu(u)}`}}function wr(l){if(l.length===0)return[];const c=[];let o=0;for(let u=1;u<=l.length;u++){const d=l[u],m=l[u-1];if(!(u===l.length||d.atMs-m.atMs>220||Math.abs(d.midi-m.midi)>1.35))continue;const v=l.slice(o,u),b=v[0].atMs,y=v[v.length-1].atMs,S=y-b;if(S>=180){const x=v.reduce((O,G)=>O+G.midi,0)/v.length;c.push({startMs:b,endMs:y,durationMs:S,avgMidi:x})}o=u}return c}function s1(l){const c=wr(l);if(c.length===0)return null;const o=[...c].sort((u,d)=>d.durationMs-u.durationMs)[0];return Math.round(o.avgMidi)}function c1(l,c,o){if(c.length===0)return{correct:!1,summary:`No stable pitch detected near ${Ba(l)}.`,matched:0,expected:1,centsOff:[],scoredMidis:[]};const u=[...c].sort((v,b)=>b.durationMs-v.durationMs)[0],d=za(u.avgMidi,l),m=Math.abs(d)<=o,h=d>0?"sharp":"flat";return{correct:m,summary:m?`Stable and centered on ${Ba(l)}.`:`${Ba(l)} was ${Math.round(Math.abs(d))} cents ${h}.`,matched:m?1:0,expected:1,centsOff:[d],scoredMidis:[u.avgMidi]}}function r1(l,c){let o=0;for(let u=0;u<l.length;u++)o+=Math.abs(za(c[u].avgMidi,l[u]));return o}function o1(l){const{exercise:c,samples:o,toleranceCents:u}=l,d=wr(o);if(c.targetMidis.length===1)return c1(c.targetMidis[0],d,u);if(d.length<c.targetMidis.length)return{correct:!1,summary:`Captured ${d.length} stable notes out of ${c.targetMidis.length}.`,matched:0,expected:c.targetMidis.length,centsOff:[],scoredMidis:d.map(x=>x.avgMidi)};let m=0,h=Number.POSITIVE_INFINITY;for(let x=0;x<=d.length-c.targetMidis.length;x++){const O=d.slice(x,x+c.targetMidis.length),G=r1(c.targetMidis,O);G<h&&(h=G,m=x)}const v=d.slice(m,m+c.targetMidis.length),b=v.map((x,O)=>za(x.avgMidi,c.targetMidis[O])),y=b.filter(x=>Math.abs(x)<=u).length,S=y===c.targetMidis.length;return{correct:S,summary:S?"Contour and pitch centers matched the response.":`Matched ${y}/${c.targetMidis.length} notes inside tolerance.`,matched:y,expected:c.targetMidis.length,centsOff:b,scoredMidis:v.map(x=>x.avgMidi)}}const wd="et_settings_v1",ud="et_settings_changed",Kl={keyRoot:"C",octave:3,tempoBpm:90,masterGain:.25,timbre:"triangle",keyboardMiddleCMapping:"B",keyboardAccidentalStyle:"flat",droneEnabled:!1,visualsEnabled:!0,range:{lowMidi:48,highMidi:72}};function Nt(){const l=$l(wd,Kl);return{...Kl,...l,range:{...Kl.range,...l.range??{}}}}function Ys(l){mn(wd,l),typeof window<"u"&&window.dispatchEvent(new Event(ud))}function yl(l){if(typeof window>"u")return()=>{};const c=u=>{u.key===wd&&l()},o=()=>l();return window.addEventListener("storage",c),window.addEventListener(ud,o),()=>{window.removeEventListener("storage",c),window.removeEventListener(ud,o)}}const Dv="et_voice_settings_v1",u1={toleranceCents:25,noiseGate:.018,holdDurationMs:900,exerciseKind:"interval_echo"};function kd(){const l=$l(Dv,u1);return{...l,exerciseKind:k0(l.exerciseKind)}}function d1(l){mn(Dv,l)}const Rd="et_analytics_v1",f1="et_analytics_changed";function m1(){return`evt_${Math.random().toString(36).slice(2,10)}`}function Lv(){typeof window<"u"&&window.dispatchEvent(new Event(f1))}function Dd(){return $l(Rd,[])}function Tn(l,c,o){const u=Dd();u.push({id:m1(),name:l,route:c,data:o,ts:Date.now()}),mn(Rd,u.slice(-600)),Lv()}function Ld(){mn(Rd,[]),Lv()}function h1(){const l=Dd(),c=l.filter(y=>y.name==="page_view").length,o=l.filter(y=>y.name==="session_complete").length,u=l.filter(y=>y.name==="session_abandon").length,d=l.filter(y=>y.name==="question_answered").length,m=new Map,h=new Map;for(const y of l)m.set(y.route,(m.get(y.route)??0)+1),y.name==="session_abandon"&&h.set(y.route,(h.get(y.route)??0)+1);const v=y=>[...y.entries()].map(([S,x])=>({route:S,count:x})).sort((S,x)=>x.count-S.count).slice(0,5),b=o+u;return{totalEvents:l.length,pageViews:c,completedSessions:o,abandonedSessions:u,answerCount:d,completionRate:b>0?o/b:0,topRoutes:v(m),dropOffRoutes:v(h)}}const p1=new Set([1,3,6,8,10]);function Up(l){return p1.has((l%12+12)%12)}function v1(l){const c=(l%12+12)%12;return l-c}function g1(l){const c=(l%12+12)%12;return l+(11-c)}function Ov({midis:l,tonicMidi:c,width:o=320,height:u=120}){if(l.length===0)return null;const d=Math.min(...l,c??127),m=Math.max(...l,c??0),h=Math.max(24,v1(d-1)),v=Math.min(96,g1(m+1)),b=Array.from({length:v-h+1},(R,$)=>h+$),y=b.filter(R=>!Up(R)),S=o/Math.max(1,y.length),x=S*.62,O=u*.62,G=new Set(l),L=[];let Y=0;for(const R of b){if(!Up(R)){L.push({midi:R,x:Y*S,width:S,isBlack:!1}),Y+=1;continue}L.push({midi:R,x:Math.max(0,Y*S-x*.5),width:x,isBlack:!0})}return s.jsxs("svg",{width:o,height:u,viewBox:`0 0 ${o} ${u}`,role:"img","aria-label":"Keyboard view",children:[s.jsx("rect",{x:0,y:0,width:o,height:u,rx:10,fill:"rgba(0,0,0,0.03)"}),L.filter(R=>!R.isBlack).map(R=>{const $=G.has(R.midi),F=c===R.midi;return s.jsx("rect",{x:R.x,y:0,width:R.width,height:u,fill:$?"rgba(199,91,18,0.22)":"rgba(255,255,255,0.96)",stroke:F?"rgba(24,95,220,0.75)":"rgba(0,0,0,0.18)",strokeWidth:F?2:1},`white_${R.midi}`)}),L.filter(R=>R.isBlack).map(R=>{const $=G.has(R.midi),F=c===R.midi;return s.jsx("rect",{x:R.x,y:0,width:R.width,height:O,rx:4,fill:$?"rgba(199,91,18,0.78)":"rgba(20,33,61,0.9)",stroke:F?"rgba(24,95,220,0.9)":"rgba(0,0,0,0.45)",strokeWidth:F?2:1},`black_${R.midi}`)})]})}const y1=["1","2","3","4","5","6","7"],b1={freqHz:null,midi:null,cents:null,clarity:0,rms:0,isSignal:!1,noteLabel:null};function x1(l,c){const o=u=>6e4/c*u;if(l.kind==="note"||l.kind==="chord")return o((l.atBeats??0)+l.durationBeats);if(l.kind==="sequence"){const u=l.events.reduce((d,m)=>Math.max(d,m.atBeats+m.durationBeats),0);return o(u)}return 0}const Gp=[{key:"showAnswerNoteNames",title:"Note name answers",description:"Adds note names like 2 (F) or 3->2 (G-F) to answer buttons."},{key:"allowPromptReplay",title:"Replay prompt",description:"Shows a replay button so the current prompt can be heard more than once."},{key:"droneEnabled",title:"Drone",description:"Plays a steady, sustained tonic underneath each prompt."},{key:"enforceSinging",title:"Sing before reveal",description:"Holds back the final pitch on sing-back prompts until you reveal it manually."},{key:"requireMicForSinging",title:"Mic answer input",description:"Registers your sung note or sung interval as the answer on supported pitch prompts."},{key:"allowKeyboardInput",title:"Keyboard input",description:"Adds a text box so you can type the exact answer label."}],Vp=[{key:"showExplainWhy",title:"Show 'Explain Why' Button",description:"Lets the user open the post-answer explanation panel."},{key:"showIntervalNames",title:"Interval names",description:"Shows labels like m3, P5, or M6 in the explanation panel."},{key:"showSemitoneCount",title:"Semitone count",description:"Shows the raw semitone distance in the explanation panel."},{key:"showSolfege",title:"Solfege",description:"Shows movable-do syllables when that prompt includes them."},{key:"showScaleMap",title:"Degree map",description:"Shows a 1-7 degree strip with the active movement highlighted."},{key:"showPianoStrip",title:"Keyboard Excerpt",description:"Shows a small keyboard view of the notes involved."}];function Zu(l){return{sessionType:"free",modePool:l.modePool.length>0?l.modePool:["scale_degree"],tonicPool:l.tonicPool,intervalLevel:l.intervalLevel,degreeLevel:l.degreeLevel,harmonyLevel:l.harmonyLevel,timingLevel:l.timingLevel,phraseLevel:l.phraseLevel,dictationInputMode:l.dictationInputMode,tonalMode:l.tonalMode,intervalPlaybackVariant:l.intervalVariant,harmonyPlaybackVariant:l.harmonyVariant,randomTonicEvery:l.tonicMode==="random"?3:-1,singingQuota:l.enforceSinging?1:0,predictiveResolutionChance:.2}}function S1(){const[l,c]=pv(),[o,u]=p.useState(Nt()),[d,m]=p.useState(br()),[h]=p.useState(kd()),[v,b]=p.useState(Ql()),[y,S]=p.useState("random"),[x,O]=p.useState(Nt().keyRoot),[G,L]=p.useState(void 0),[Y,R]=p.useState(1),[$,F]=p.useState(1),[ee,oe]=p.useState(1),[xe,ue]=p.useState(1),[ie,Ae]=p.useState(1),[T,ye]=p.useState("multiple_choice"),[X,ne]=p.useState("scale_context"),[pe,he]=p.useState("block"),[me,E]=p.useState("major"),[P,W]=p.useState([]),[je,Ee]=p.useState(0),[M,B]=p.useState(null),[J,te]=p.useState(!1),[de,I]=p.useState(""),[_e,Be]=p.useState(!1),[ze,yt]=p.useState(null),[Oe,ct]=p.useState(b1),[Rt,rt]=p.useState(null),[mt,Pe]=p.useState(0),[ht,Dt]=p.useState(!1),[an,ot]=p.useState(0),[U,se]=p.useState({attempts:0,correct:0}),[ve,ge]=p.useState(null),[Re,Ke]=p.useState(0),[Ce,A]=p.useState(null),[Z,Me]=p.useState(null),[bt,lt]=p.useState(null),[It,Ie]=p.useState(0),[Ht,xt]=p.useState(0),[Ga,Hn]=p.useState(0),[ua,le]=p.useState(!1),[We,Et]=p.useState(!1),[St,pt]=p.useState(null),[ln,Va]=p.useState(!1),[da,Un]=p.useState(null),[Pt,sn]=p.useState([]),[Gn,fa]=p.useState([]),[ma,Ya]=p.useState([]),[bl,Pl]=p.useState(""),[Zl,ea]=p.useState(sd()),[Lt,Ut]=p.useState("free"),hn=p.useRef(!1),Ka=p.useRef(null),qi=p.useRef(null),Js=p.useRef(null),Hi=p.useRef(null),ta=p.useRef(null),Jl=p.useRef(null),ha=p.useRef(0),Wt=p.useRef(null),pn=p.useRef(null),na=p.useRef(!1),ut=p.useRef([]),Fl=p.useRef(!1),pa=p.useRef(null);p.useEffect(()=>yl(()=>u(Nt())),[]),p.useEffect(()=>Ed(()=>ea(sd())),[]),p.useEffect(()=>()=>{hn.current&&U.attempts>0&&Tn("session_abandon","/practice",{attempts:U.attempts,modeCount:v.length})},[v.length,U.attempts]);const Gt=Z!=null,q=Gt?Z[It]:P[je],dt=d.freePracticeToggles,va=P.length>0||Gt||Ce!=null,Qa=v.includes("scale_degree"),vn=v.includes("functional_interval"),ga=y==="random",Cn=p.useMemo(()=>{if(!q||q.metadata.phrase||q.metadata.timing?.supportsTapPad)return[];const _=q.metadata.tonalMode??me,H=Mt(q.tonicMidi).octave;return q.mode==="scale_degree"?q.answerChoices.map(ae=>({answer:ae,targetMidis:[Xt(q.tonic,H,ae,_)],label:Ba(Xt(q.tonic,H,ae,_))})):q.mode==="functional_interval"?q.answerChoices.map(ae=>{const[ce,we]=ae.split("->");if(!ce||!we)return null;const Te=Xt(q.tonic,H,ce,_);let Ve=Xt(q.tonic,H,we,_);return ae===q.correctAnswer&&q.metadata.semitones===12&&ce==="1"&&we==="1"&&(Ve+=12),{answer:ae,targetMidis:[Te,Ve],label:`${Ba(Te)} -> ${Ba(Ve)}`}}).filter(ae=>ae!=null):[]},[q,me]),Zt=dt.requireMicForSinging&&!J&&!ht&&M===null&&Cn.length>0,cn=dt.requireMicForSinging&&!J&&!ht&&M===null&&q!=null&&!q.metadata.phrase&&!q.metadata.timing?.supportsTapPad&&Cn.length===0,ya=Rt==null?null:Cn.find(_=>_.answer===Rt)??null,Fs=ya!=null&&Oe.midi!=null?za(Oe.midi,ya.targetMidis[ya.targetMidis.length-1]):null,Ui=q!=null&&M!==null&&(q.mode==="scale_degree"&&Qa||q.mode==="functional_interval"&&vn),Is=p.useMemo(()=>U.attempts<10?!1:U.correct/U.attempts>=.8,[U.attempts,U.correct]),Il=Gt?Math.max(0,60-Math.floor((Ga-Ht)/1e3)):0;p.useEffect(()=>{Fl.current=Zt},[Zt]),p.useEffect(()=>{if(!Gt)return;Hn(Date.now());const _=window.setInterval(()=>Hn(Date.now()),250);return()=>window.clearInterval(_)},[Gt]),p.useEffect(()=>{if(le(!1),Un(null),sn([]),fa([]),Ya([]),Pl(""),rt(null),Pe(0),ut.current=[],Wt.current=null,pn.current=null,na.current=!1,!!q){if(B(null),pt(null),I(""),ot(Date.now()),dt.droneEnabled&&!dt.requireMicForSinging?Xe.setDrone(q.tonicMidi,{tempoBpm:o.tempoBpm,masterGain:o.masterGain,timbre:o.timbre},.16):Xe.clearDrone(),q.enforceSinging&&q.playbackPlan.kind==="sequence"&&q.playbackPlan.events.length>1){const _=q.playbackPlan.events.slice(0,q.playbackPlan.events.length-1);te(!0),en({kind:"sequence",events:_});return}te(!1),en(q.playbackPlan)}},[q,o.masterGain,o.tempoBpm,o.timbre,dt.droneEnabled,dt.requireMicForSinging]),p.useEffect(()=>()=>{Xe.clearDrone(),Xe.stopAll(),pa.current!=null&&window.clearTimeout(pa.current),ta.current!=null&&window.cancelAnimationFrame(ta.current),Hi.current?.getTracks().forEach(_=>_.stop()),Js.current?.disconnect(),qi.current?.disconnect(),Ka.current!=null&&Ka.current.close()},[]),p.useEffect(()=>{if(!Zt||na.current){Wt.current=null,pn.current=null,rt(null),Pe(0);return}const _=wr(ut.current);let H;if(q?.mode==="scale_degree"){if(Oe.midi==null||!Oe.isSignal){Wt.current=null,pn.current=null,rt(null),Pe(0);return}const we=Oe.midi;H=Cn.map(Te=>({...Te,cents:za(we,Te.targetMidis[0])})).filter(Te=>Math.abs(Te.cents)<=h.toleranceCents).sort((Te,Ve)=>Math.abs(Te.cents)-Math.abs(Ve.cents))[0]}else if(q?.mode==="functional_interval"&&_.length>=2){const we=_.slice(-2);H=Cn.filter(Te=>Te.targetMidis.length===2).map(Te=>{const Ve=za(we[0].avgMidi,Te.targetMidis[0]),tn=za(we[1].avgMidi,Te.targetMidis[1]);return{...Te,cents:(Math.abs(Ve)+Math.abs(tn))/2,firstCents:Ve,secondCents:tn}}).filter(Te=>Math.abs(Te.firstCents)<=h.toleranceCents&&Math.abs(Te.secondCents)<=h.toleranceCents).sort((Te,Ve)=>Te.cents-Ve.cents)[0]}if(!H){Wt.current=null,pn.current=null,rt(null),Pe(0);return}const ae=performance.now();if(pn.current!==H.answer){pn.current=H.answer,Wt.current=ae,rt(H.answer),Pe(0);return}Wt.current??=ae,rt(H.answer);const ce=Math.max(0,Math.round(ae-Wt.current));Pe(ce),ce>=h.holdDurationMs&&(na.current=!0,aa(H.answer))},[q?.mode,Zt,Cn,Oe,h.holdDurationMs,h.toleranceCents]),p.useEffect(()=>{!ln||!va||(Va(!1),$a())},[ln,va,v,y,x,G,Y,$,me,X]);function Wl(_){const H={...d,freePracticeToggles:_};m(H),Gs(H)}function Vt(_,H,ae,ce=!1,we,Te=!1){const Ve=dt[_];return s.jsx("button",{type:"button","aria-pressed":Ve,className:Ve?`checkbox-chip checkbox-chip--stacked checkbox-chip--selected${Te?" checkbox-chip--compact":""}`:`checkbox-chip checkbox-chip--stacked${Te?" checkbox-chip--compact":""}`,disabled:ce,onClick:()=>{const tn=!Ve;if(we){we(tn);return}Wl({...dt,[_]:tn})},children:s.jsxs("span",{className:"checkbox-chip__body",children:[s.jsx("span",{className:"checkbox-chip__title",children:H}),!Te&&s.jsx("span",{className:"checkbox-chip__copy",children:ae})]})},_)}function Gi(_){const H=_.metadata.tonalMode??me,ae=Mt(_.tonicMidi).octave;if(_.mode==="scale_degree"){const ce=Xt(_.tonic,ae,_.correctAnswer,H);return`${_.correctAnswer} (${Mt(ce).name})`}if(_.mode==="functional_interval"){const[ce,we]=_.correctAnswer.split("->");if(ce&&we){const Te=Xt(_.tonic,ae,ce,H),Ve=Xt(_.tonic,ae,we,H);return`${ce}-${we} (${Mt(Te).name}-${Mt(Ve).name})`}}return _.correctAnswer}function Ws(_,H){const ae=_.metadata.tonalMode??me,ce=Mt(_.tonicMidi).octave;if(_.mode==="scale_degree"){const we=Xt(_.tonic,ce,H,ae);return{label:H,noteText:`(${Mt(we).name})`}}if(_.mode==="functional_interval"){const[we,Te]=H.split("->");if(we&&Te){const Ve=Xt(_.tonic,ce,we,ae),tn=Xt(_.tonic,ce,Te,ae);return{label:H,noteText:`(${Mt(Ve).name}-${Mt(tn).name})`}}}return{label:H,noteText:null}}function xl(_=Lt){if(_==="authored"){_l();return}if(_==="due"||_==="weak"){ba(_);return}ba()}function $a(){Et(!1),le(!1),B(null),pt(null),A(null),Me(null),lt(null),Ie(0),Un(null),sn([]),fa([]),Ya([]),Pl(""),Xe.clearDrone(),Xe.stopAll(),xl()}function Vn(_){_(),va&&Va(!0)}function Vi(_,H,ae){let ce={...dt,[_]:H};_==="requireMicForSinging"&&H&&(ce={...ce,enforceSinging:!0}),_==="enforceSinging"&&!H&&(ce={...ce,requireMicForSinging:!1}),Wl(ce),ae&&va&&Va(!0)}function en(_){pa.current!=null&&window.clearTimeout(pa.current);const H=x1(_,o.tempoBpm);Dt(H>0),Xe.play(_,{tempoBpm:o.tempoBpm,masterGain:o.masterGain,timbre:o.timbre}),!(H<=0)&&(pa.current=window.setTimeout(()=>{Dt(!1),pa.current=null},H+120))}function Rr(){if(q){if(J&&q.playbackPlan.kind==="sequence"&&q.playbackPlan.events.length>1){en({kind:"sequence",events:q.playbackPlan.events.slice(0,q.playbackPlan.events.length-1)});return}en(q.playbackPlan)}}async function ec(){if(!_e){if(!navigator.mediaDevices?.getUserMedia){yt("This browser does not expose microphone input.");return}try{const _=await navigator.mediaDevices.getUserMedia({audio:{echoCancellation:!1,noiseSuppression:!1,autoGainControl:!1}}),H=new AudioContext;await H.resume();const ae=H.createAnalyser();ae.fftSize=2048,ae.smoothingTimeConstant=.12;const ce=H.createMediaStreamSource(_);ce.connect(ae);const we=new Float32Array(new ArrayBuffer(ae.fftSize*Float32Array.BYTES_PER_ELEMENT));Ka.current=H,qi.current=ae,Js.current=ce,Hi.current=_,Jl.current=we,Be(!0),yt(null);const Te=()=>{const Ve=qi.current,tn=Ka.current,Qn=Jl.current;if(!Ve||!tn||!Qn)return;Ve.getFloatTimeDomainData(Qn);const $n=Sd(Qn,tn.sampleRate,h.noiseGate);if(Fl.current&&$n.midi!=null){const An=[...ut.current,{atMs:performance.now(),midi:$n.midi,rms:$n.rms}];ut.current=An.slice(-160)}else Fl.current||(ut.current=[]);const Tt=performance.now();Tt-ha.current>70&&(ha.current=Tt,ct($n)),ta.current=window.requestAnimationFrame(Te)};ta.current=window.requestAnimationFrame(Te)}catch(_){const H=_ instanceof Error?_.message:"Microphone permission failed.";yt(H),Be(!1)}}}function tc(){if(!q||!J||q.playbackPlan.kind!=="sequence")return;const _=q.playbackPlan.events[q.playbackPlan.events.length-1];te(!1),Pe(0),Wt.current=null,en({kind:"sequence",events:[{..._,atBeats:0}]})}function Sl(){return{modePool:Jn(v),tonicMode:y,fixedTonic:x,tonicPool:G,intervalLevel:Y,degreeLevel:$,harmonyLevel:ee,timingLevel:xe,phraseLevel:ie,dictationInputMode:T,tonalMode:me,intervalPlaybackVariant:X,harmonyPlaybackVariant:pe,toggles:dt}}function Yi(_){b(Jn(_.modePool)),S(_.tonicMode),O(_.fixedTonic),L(_.tonicPool),R(_.intervalLevel),F(_.degreeLevel),oe(_.harmonyLevel),ue(_.timingLevel),Ae(_.phraseLevel),ye(_.dictationInputMode),E(_.tonalMode),ne(_.intervalPlaybackVariant),he(_.harmonyPlaybackVariant),Wl(_.toggles)}function ba(_,H=Sl()){const ae=Zu({modePool:H.modePool,tonicMode:H.tonicMode,tonicPool:H.tonicPool,intervalLevel:H.intervalLevel,degreeLevel:H.degreeLevel,harmonyLevel:H.harmonyLevel,timingLevel:H.timingLevel,phraseLevel:H.phraseLevel,dictationInputMode:H.dictationInputMode,tonalMode:H.tonalMode,intervalVariant:H.intervalPlaybackVariant,harmonyVariant:H.harmonyPlaybackVariant,enforceSinging:H.toggles.enforceSinging}),ce=jr({config:ae,questionCount:15,startTonic:H.tonicMode==="random"?Yl(void 0,H.tonicPool??Ft):H.fixedTonic,tonicOctave:o.octave,reviewStrategy:_});W(ce),Ee(0),se({attempts:0,correct:0}),ge(_??null),Ke(0),A(null),Me(null),lt(null),Ie(0),pt(null),Ut(_??"free"),hn.current=!0,Tn("session_start","/practice",{review:_??"none",questionCount:ce.length,modeCount:H.modePool.length})}function _l(_=Sl()){const H=Zu({modePool:_.modePool,tonicMode:_.tonicMode,tonicPool:_.tonicPool,intervalLevel:_.intervalLevel,degreeLevel:_.degreeLevel,harmonyLevel:_.harmonyLevel,timingLevel:_.timingLevel,phraseLevel:_.phraseLevel,dictationInputMode:_.dictationInputMode,tonalMode:_.tonalMode,intervalVariant:_.intervalPlaybackVariant,harmonyVariant:_.harmonyPlaybackVariant,enforceSinging:!1}),ae=Zl.filter(we=>_.modePool.includes(we.mode));if(ae.length===0)return;const ce=e1({config:H,drills:ae.slice(0,12),startTonic:_.tonicMode==="random"?Yl(void 0,_.tonicPool??Ft):_.fixedTonic,tonicOctave:o.octave});W(ce),Ee(0),se({attempts:0,correct:0}),ge(null),Ke(0),A(null),Me(null),lt(null),Ie(0),pt(null),Ut("authored"),hn.current=!0,Tn("session_start","/practice",{review:"authored",questionCount:ce.length})}function Yn(_,H=Sl()){ba(void 0,H)}p.useEffect(()=>{const _=l.get("review"),H=l.get("mode"),ae=l.get("preset"),ce=l.get("quickplay"),we=l.get("quickplayTopics"),Te=l.get("quickplayTonicLevel"),Ve=l.get("quickplayFixedTonic"),tn=l.get("quickplayFixedPool"),Qn=l.get("quickplayIntervalLevel"),$n=l.get("quickplayDegreeLevel"),Tt=new URLSearchParams(l);let An=!1;if(ce){const Pi=Y0(ce,{modePool:Jn((we??"").split(",").filter(Nl=>Nl==="scale_degree"||Nl==="functional_interval"||Nl==="functional_harmony"||Nl==="timing_grid"||Nl==="phrase_recall")),tonicSourceLevel:Te==="3"?3:Te==="2"?2:1,fixedTonic:Ft.includes(Ve??o.keyRoot)?Ve:o.keyRoot,fixedPoolRoot:Ft.includes(tn??"C")?tn:"C",intervalLevel:Qn==="4"?4:Qn==="3"?3:Qn==="2"?2:1,degreeLevel:$n==="3"?3:$n==="2"?2:1});Yi(Pi.settings),Yn("free",Pi.settings),Tt.delete("quickplay"),Tt.delete("quickplayTopics"),Tt.delete("quickplayTonicLevel"),Tt.delete("quickplayFixedTonic"),Tt.delete("quickplayFixedPool"),Tt.delete("quickplayIntervalLevel"),Tt.delete("quickplayDegreeLevel"),An=!0}(H==="scale_degree"||H==="functional_interval")&&yr(H)&&(b([H]),Tt.delete("mode"),An=!0),(_==="due"||_==="weak")&&(ba(_),Tt.delete("review"),An=!0),ae&&(Xi(ae),Tt.delete("preset"),An=!0),An&&c(Tt,{replace:!0})},[l,c]);function ei(_,H){if(!q)return;const ae=Math.max(1,Date.now()-an);if(rt(null),Pe(0),pn.current=null,B(_),Ad({question:q,correct:H,responseMs:ae}),Tn("question_answered","/practice",{mode:q.mode,correct:H,responseMs:ae}),Gt){if(!Z||It+1>=Z.length){pt({kind:"finish_focus_set"});return}pt({kind:"next_focus_question"});return}const ce=H?0:Re+1,we=ce>=3;if(se(Te=>({attempts:Te.attempts+1,correct:Te.correct+(H?1:0)})),Ke(we?0:ce),we){A(q),lt(je+1),pt({kind:"pause_for_focus_offer"});return}if(je+1>=P.length){pt({kind:"restart_session"});return}pt({kind:"next_question"})}function aa(_){q&&ei(_,_===q.correctAnswer)}function Xa(){if(St){if(pt(null),B(null),St.kind==="next_focus_question"){Ie(_=>_+1);return}if(St.kind==="finish_focus_set"){Me(null),Ie(0),bt!=null&&(bt>=P.length?(hn.current=!1,Tn("session_complete","/practice",{attempts:U.attempts,accuracy:U.correct/Math.max(1,U.attempts)}),xl()):Ee(bt)),lt(null);return}if(St.kind!=="pause_for_focus_offer"){if(St.kind==="restart_session"){hn.current=!1,Tn("session_complete","/practice",{attempts:U.attempts,accuracy:U.correct/Math.max(1,U.attempts)}),xl();return}Ee(_=>_+1)}}}function Pa(){if(!q?.metadata.timing?.supportsTapPad)return;Un(Date.now()),sn([]),fa([]);const _=q.compareAudio?.playbackPlan??q.playbackPlan;en(_)}function nc(){if(!q?.metadata.timing?.supportsTapPad||da==null)return;const _=6e4/o.tempoBpm,H=q.metadata.countInBeats??0,ae=(Date.now()-da)/_-H;ae<-.4||sn(ce=>[...ce,ae])}function Ki(){if(!q?.metadata.timing?.supportsTapPad)return;const _=q.metadata.timing,H=zx(Pt,_.quantizeStepBeats,_.patternLengthBeats),ae=Bx({taps:H,target:_.targetBeats,bpm:o.tempoBpm}),ce=ae.errors.map((we,Te)=>{if(we.deltaMs==null||we.tappedBeat==null)return`Hit ${Te+1}: missed`;const Ve=we.deltaMs>0?"+":"";return`Hit ${Te+1}: ${Ve}${Math.round(we.deltaMs)}ms`});fa(ce),ei(`tap:${ae.matched}/${ae.expected}`,ae.accuracy>=.72)}function ac(_){if(!q?.metadata.phrase)return;const H=q.metadata.phrase.expectedDegrees.length;Ya(ae=>ae.length>=H?ae:[...ae,_])}function jl(){Ya([])}function Kn(){if(!q?.metadata.phrase)return;const _=q.metadata.phrase.measureGroups,H=_[0]?.length??4,ae=_.length,ce=ma.slice(0,H*ae),we=Array.from({length:ae},(Te,Ve)=>ce.slice(Ve*H,Ve*H+H).join(" ")).join(" | ");aa(we)}function Qi(){if(!q?.metadata.phrase)return;const _=bl.trim().replace(/\s*\|\s*/g," | ").replace(/\s+/g," ");aa(_)}function Ml(){if(!Ce)return;const _=Zu({modePool:v,tonicMode:y,tonicPool:G,intervalLevel:Y,degreeLevel:$,harmonyLevel:ee,timingLevel:xe,phraseLevel:ie,dictationInputMode:T,tonalMode:me,intervalVariant:X,harmonyVariant:pe,enforceSinging:!1});Me(Wx({config:_,sourceQuestion:Ce,startTonic:y==="random"?Yl(Ce.tonic,G??Ft):x,tonicOctave:o.octave,questionCount:5})),Ie(0),xt(Date.now()),Hn(Date.now()),A(null)}function gn(_){yr(_)&&b(H=>{if(H.includes(_)){const ae=H.filter(ce=>ce!==_);return ae.length>0?ae:H}return[...H,_]})}function $i(){const H={id:`preset_${Math.random().toString(36).slice(2,9)}`,name:`Preset ${d.freePracticePresets.length+1}`,modePool:Jn(v),tonicMode:y,fixedTonic:x,intervalLevel:Y,degreeLevel:$,harmonyLevel:ee,timingLevel:xe,phraseLevel:ie,dictationInputMode:T,tonalMode:me,intervalPlaybackVariant:X,harmonyPlaybackVariant:pe,toggles:dt},ae={...d,freePracticePresets:[...d.freePracticePresets,H]};m(ae),Gs(ae),Tn("authoring_saved","/practice",{surface:"preset",modeCount:H.modePool.length})}function ti(){S("random"),O(o.keyRoot),L(void 0),R(1),F(1),oe(1),ue(1),Ae(1),ye("multiple_choice"),E("major"),ne("scale_context"),he("block"),Wl(Oi)}function Xi(_){if(_===ad){const ae=yv();Yi(ae.settings);return}const H=d.freePracticePresets.find(ae=>ae.id===_);H&&Yi({modePool:H.modePool,tonicMode:H.tonicMode,fixedTonic:H.fixedTonic,tonicPool:void 0,intervalLevel:H.intervalLevel,degreeLevel:H.degreeLevel,harmonyLevel:H.harmonyLevel,timingLevel:H.timingLevel,phraseLevel:H.phraseLevel,dictationInputMode:H.dictationInputMode,tonalMode:H.tonalMode,intervalPlaybackVariant:H.intervalPlaybackVariant,harmonyPlaybackVariant:H.harmonyPlaybackVariant,toggles:H.toggles})}return s.jsxs("div",{className:"page",children:[va?s.jsxs("div",{style:{display:"flex",justifyContent:"space-between",gap:"1rem",alignItems:"center",flexWrap:"wrap"},children:[s.jsxs("div",{style:{display:"grid",gap:"0.35rem"},children:[s.jsx("h2",{style:{margin:0},children:"Free Practice"}),s.jsx("div",{className:"subtle",children:"Question view only. Use the setup screen again if you want to change the session configuration."})]}),s.jsxs("div",{className:"button-row",children:[s.jsx("button",{type:"button",onClick:()=>Et(!0),children:"Session settings"}),s.jsx("button",{type:"button",onClick:()=>{W([]),Ee(0),B(null),pt(null),A(null),Me(null),lt(null),Ie(0),se({attempts:0,correct:0}),Ke(0),ge(null),Et(!1),L(void 0),hn.current=!1,Xe.clearDrone(),Xe.stopAll()},children:"Back to setup"})]})]}):s.jsxs(s.Fragment,{children:[s.jsxs("div",{style:{display:"grid",gap:"0.45rem"},children:[s.jsx("h2",{style:{margin:0},children:"Practice"}),s.jsx("div",{className:"subtle",children:"Choose any mode subset, save presets, and toggle the training aids you want in play."})]}),s.jsxs("section",{className:"panel panel--accent",children:[s.jsxs("div",{className:"panel-header",children:[s.jsxs("div",{children:[s.jsx("div",{className:"kicker kicker--red",children:"Session Builder"}),s.jsx("h2",{className:"panel-title",children:"Mode subset"})]}),s.jsx("div",{className:"panel-copy",children:"Set up the run here, then the session opens on its own screen."})]}),s.jsxs("div",{className:"chip-row",children:[s.jsx("button",{type:"button",className:v.includes("scale_degree")?"toggle-chip toggle-chip--active":"toggle-chip","aria-pressed":v.includes("scale_degree"),onClick:()=>gn("scale_degree"),children:"Scale Degree"}),s.jsx("button",{type:"button",className:v.includes("functional_interval")?"toggle-chip toggle-chip--active":"toggle-chip","aria-pressed":v.includes("functional_interval"),onClick:()=>gn("functional_interval"),children:"Functional Interval"})]}),s.jsxs("div",{className:"control-grid",children:[s.jsxs("label",{className:"control-label",children:["Tonic source",s.jsxs("select",{value:y,onChange:_=>S(_.target.value),children:[s.jsx("option",{value:"random",children:"Randomize tonic"}),s.jsx("option",{value:"fixed",children:"Fixed tonic"})]})]}),s.jsxs("label",{className:ga?"control-label control-label--disabled":"control-label",children:["Fixed tonic",s.jsx("select",{value:x,disabled:ga,onChange:_=>O(_.target.value),children:Ft.map(_=>s.jsx("option",{value:_,children:_},_))})]}),s.jsxs("label",{className:vn?"control-label":"control-label control-label--disabled",children:["Interval level",s.jsxs("select",{value:Y,disabled:!vn,onChange:_=>R(Number(_.target.value)),children:[s.jsx("option",{value:1,children:"Level 1 (2nds, 1-5)"}),s.jsx("option",{value:2,children:"Level 2 (+3rds)"}),s.jsx("option",{value:3,children:"Level 3 (+P4/P5)"}),s.jsx("option",{value:4,children:"Level 4 (+Octave)"})]})]}),s.jsxs("label",{className:Qa?"control-label":"control-label control-label--disabled",children:["Degree level",s.jsxs("select",{value:$,disabled:!Qa,onChange:_=>F(Number(_.target.value)),children:[s.jsx("option",{value:1,children:"1-5"}),s.jsx("option",{value:2,children:"+6/7"}),s.jsx("option",{value:3,children:"+b3/#4/b7"})]})]}),s.jsxs("label",{className:"control-label",children:["Tonal mode",s.jsxs("select",{value:me,onChange:_=>E(_.target.value),children:[s.jsx("option",{value:"major",children:"Major"}),s.jsx("option",{value:"natural_minor",children:"Natural Minor"}),s.jsx("option",{value:"harmonic_minor",children:"Harmonic Minor"}),s.jsx("option",{value:"melodic_minor",children:"Melodic Minor"}),s.jsx("option",{value:"modal",children:"Modal"})]})]})]}),s.jsx("div",{className:"control-grid",children:s.jsxs("label",{className:vn?"control-label":"control-label control-label--disabled",children:["Interval playback",s.jsxs("select",{value:X,disabled:!vn,onChange:_=>ne(_.target.value),children:[s.jsx("option",{value:"scale_context",children:"Scale-context"}),s.jsx("option",{value:"sequential_pause",children:"Sequential pause"}),s.jsx("option",{value:"immediate_jump",children:"Immediate jump"}),s.jsx("option",{value:"harmonic_stack",children:"Harmonic stack"})]})]})}),s.jsxs("div",{className:"control-group",children:[s.jsx("div",{className:"subtle",children:"Session controls"}),s.jsx("div",{className:"checkbox-grid",children:Gp.map(_=>Vt(_.key,_.title,_.description))})]}),s.jsxs("div",{className:"control-group",children:[s.jsx("div",{className:"subtle",children:'"Explain Why" Features'}),s.jsx("div",{className:"panel-copy",children:"These options only affect the post-answer explanation view."}),s.jsx("div",{className:"checkbox-grid",children:Vp.map(_=>Vt(_.key,_.title,_.description,(_.key==="showIntervalNames"||_.key==="showSemitoneCount")&&!vn))})]}),s.jsxs("div",{className:"button-row",children:[s.jsx("button",{onClick:()=>ba(),children:"Start free practice"}),s.jsx("button",{onClick:()=>ba("due"),children:"Start due set"}),s.jsx("button",{onClick:()=>ba("weak"),children:"Start focus set"}),s.jsx("button",{onClick:()=>_l(),disabled:Zl.length===0,children:"Start authored run"}),s.jsx("button",{onClick:$i,children:"Save preset"}),s.jsxs("select",{defaultValue:"",onChange:_=>Xi(_.target.value),children:[s.jsx("option",{value:"",disabled:!0,children:"Load preset"}),s.jsx("option",{value:ad,children:"Quickplay"}),d.freePracticePresets.map(_=>s.jsx("option",{value:_.id,children:_.name},_.id))]}),s.jsx("button",{onClick:ti,children:"Reset settings"})]}),s.jsxs("div",{className:"subtle",children:["Live authored drills available: ",Zl.length]})]})]}),Ce&&!Gt&&s.jsxs("div",{className:"notice notice--alert",children:[s.jsx("div",{className:"kicker kicker--red",children:"Recovery Triggered"}),s.jsx("div",{className:"panel-title",children:"Focused recovery required"}),s.jsx("div",{className:"panel-copy",children:"Three misses in a row detected. Complete the targeted set (5 questions) to continue this session."}),s.jsx("div",{className:"button-row",children:s.jsx("button",{onClick:Ml,children:"Start focused set"})})]}),q&&s.jsxs("section",{className:"panel panel--blue question-card",children:[s.jsx("div",{className:"kicker kicker--blue",children:"Current Prompt"}),s.jsx("div",{className:"prompt-title",children:q.prompt}),dt.allowPromptReplay&&s.jsx("div",{className:"button-row",children:s.jsx("button",{type:"button",onClick:Rr,disabled:M!==null||ht,children:ht?"Playing...":"Replay prompt"})}),s.jsxs("div",{className:"meta-strip",children:[s.jsxs("div",{className:"meta-pill",children:["Tonic ",s.jsx("strong",{children:q.tonic})]}),s.jsxs("div",{className:"meta-pill",children:["Session score ",s.jsxs("strong",{children:[(U.correct/Math.max(1,U.attempts)*100).toFixed(0),"%"]})]}),ve&&s.jsx("div",{className:"meta-pill",children:ve==="due"?"Due-focus run":"Weak-focus run"}),!Gt&&s.jsxs("div",{className:"meta-pill",children:["Miss streak ",s.jsxs("strong",{children:[Re,"/3"]})]}),Gt&&s.jsxs("div",{className:"meta-pill",children:["Focus set ",s.jsxs("strong",{children:[It+1,"/",Z?.length??0]})," ",Il,"s"]})]}),Ui&&s.jsxs("div",{className:M===q.correctAnswer?"answer-line answer-line--correct":"answer-line answer-line--wrong",children:["Answer: ",Gi(q)]}),J?s.jsxs("div",{className:"notice",children:[s.jsx("div",{className:"panel-copy",children:"Sing the next pitch first."}),s.jsx("button",{onClick:tc,style:{width:200},children:"I sang it, reveal"})]}):q.metadata.timing?.supportsTapPad?s.jsxs("div",{className:"panel",children:[s.jsxs("div",{className:"button-row",children:[s.jsx("button",{onClick:Pa,disabled:M!==null,children:"Start tap capture"}),s.jsx("button",{onClick:nc,disabled:da==null||M!==null,children:"Tap pad"}),s.jsx("button",{onClick:Ki,disabled:Pt.length===0||M!==null,children:"Score taps"})]}),s.jsxs("div",{className:"subtle",children:["Recorded taps: ",Pt.length," | Grid: ",q.metadata.timing.subdivision," (",q.metadata.timing.meter,")"]}),q.metadata.timing.showErrorOverlay&&Gn.length>0&&s.jsx("div",{className:"chip-row",children:Gn.map((_,H)=>s.jsx("div",{className:"chip",children:_},`${q.id}_tap_${H}`))})]}):q.metadata.phrase?.inputMode==="piano_grid"?s.jsxs("div",{className:"panel",children:[s.jsx("div",{className:"button-row",children:["1","2","3","4","5","6","7","b3","#4","b7"].map(_=>s.jsx("button",{onClick:()=>ac(_),disabled:M!==null,children:_},_))}),s.jsxs("div",{className:"subtle",children:["Draft: ",ma.join(" ")||"none"]}),s.jsxs("div",{className:"button-row",children:[s.jsx("button",{onClick:jl,disabled:M!==null,children:"Clear"}),s.jsx("button",{onClick:Kn,disabled:ma.length===0||M!==null,children:"Submit phrase"})]})]}):q.metadata.phrase?.inputMode==="staff_entry"?s.jsxs("div",{className:"panel",children:[s.jsx("input",{value:bl,onChange:_=>Pl(_.target.value),placeholder:"Example: 1 2 3 4 | 5 4 3 2"}),s.jsx("button",{onClick:Qi,disabled:bl.trim().length===0||M!==null,style:{width:160},children:"Submit phrase"})]}):s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"answer-grid",children:q.answerChoices.map(_=>s.jsx("button",{onClick:()=>aa(_),disabled:M!==null,children:dt.showAnswerNoteNames&&(q.mode==="scale_degree"||q.mode==="functional_interval")?(()=>{const H=Ws(q,_);return s.jsxs("span",{className:"answer-choice-label",children:[s.jsx("span",{children:H.label}),H.noteText&&s.jsxs("span",{className:"answer-choice-note",children:[" ",H.noteText]})]})})():_},_))}),(Zt||cn)&&s.jsx("div",{className:"panel",style:{marginTop:16},children:Zt?s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"panel-copy",children:q.mode==="functional_interval"?"After revealing the prompt, sing both notes of the interval in order. The mic can submit the matching movement automatically.":"After revealing the prompt, sing the answer note and hold it steady. The mic can submit the matching degree automatically."}),s.jsx("div",{className:"subtle",children:"Drone playback is paused while mic answer input is on, and mic listening pauses whenever the app is playing audio."}),s.jsxs("div",{className:"subtle",children:["Choices ",Cn.map(_=>`${_.answer} (${_.label})`).join(" | ")]}),s.jsxs("div",{className:"subtle",children:["Detected ",Oe.noteLabel??"none",ya?` | Matching ${ya.answer} (${ya.label})`:"",Fs!=null?` | ${Math.round(Fs)} cents`:"",_e?` | Hold ${Math.min(mt,h.holdDurationMs)}/${h.holdDurationMs} ms`:"",ze?` | ${ze}`:""]}),s.jsxs("div",{className:"button-row",children:[s.jsx("button",{onClick:ec,disabled:_e,style:{width:180},children:"Enable mic"}),s.jsx("button",{onClick:()=>{Rt&&aa(Rt)},disabled:!Rt,style:{width:180},children:"Submit detected note"})]})]}):s.jsx("div",{className:"subtle",children:"Mic answer input is not available for this prompt, so standard answer controls stay active."})})]}),dt.allowKeyboardInput&&!q.metadata.phrase&&!q.metadata.timing?.supportsTapPad&&s.jsxs("div",{className:"compact-row",children:[s.jsx("input",{value:de,onChange:_=>I(_.target.value),placeholder:"Type exact answer label"}),s.jsx("button",{onClick:()=>aa(de),disabled:de.length===0||M!==null,children:"Submit typed"})]}),M&&St&&s.jsxs("div",{className:"button-row",children:[s.jsx("button",{style:{width:190},onClick:Xa,children:"Continue"}),dt.showExplainWhy&&s.jsx("button",{type:"button",style:{width:210},onClick:()=>le(!0),children:"Explain why"})]})]}),M&&q&&ua&&dt.showExplainWhy&&s.jsx("div",{className:"mode-overlay",onClick:()=>le(!1),role:"presentation",children:s.jsxs("div",{className:"mode-overlay__panel",onClick:_=>_.stopPropagation(),role:"dialog","aria-modal":"true","aria-labelledby":"practice-feedback-title",children:[s.jsx("div",{id:"practice-feedback-title",className:"panel-title",children:q.feedback.title}),q.feedback.subtitle&&s.jsx("div",{className:"panel-copy",children:q.feedback.subtitle}),q.mode==="functional_interval"&&dt.showIntervalNames&&q.metadata.intervalName&&s.jsxs("div",{className:"teaching-line",children:["Interval: ",q.metadata.intervalName]}),q.mode==="functional_interval"&&dt.showSemitoneCount&&q.metadata.semitones!=null&&s.jsxs("div",{className:"teaching-line",children:["Semitones: ",q.metadata.semitones]}),dt.showSolfege&&q.metadata.solfege&&s.jsxs("div",{className:"teaching-line",children:["Solfege: ",q.metadata.solfege]}),q.mode==="functional_harmony"&&dt.showChordTones&&q.metadata.chordTones&&s.jsxs("div",{className:"teaching-line",children:["Chord tones (MIDI): ",q.metadata.chordTones.join(", ")]}),q.mode==="functional_harmony"&&Is&&q.metadata.functionLabel&&s.jsxs("div",{className:"teaching-line",children:["Function: ",q.metadata.functionLabel]}),q.mode==="timing_grid"&&q.metadata.timing&&s.jsxs("div",{className:"teaching-line",children:["Meter ",q.metadata.timing.meter," | Subdivision ",q.metadata.timing.subdivision]}),q.mode==="phrase_recall"&&q.metadata.phrase&&s.jsxs("div",{className:"teaching-line",children:["Tag ",q.metadata.phrase.tag," | Bars ",q.metadata.phrase.bars," | Correct ",q.correctAnswer]}),s.jsx("div",{className:"panel-copy",children:q.feedback.explanation}),q.teaching.lines.map((_,H)=>s.jsx("div",{className:"teaching-line",children:_},`${q.id}_line_${H}`)),q.teaching.tendencyHint&&s.jsxs("div",{className:"teaching-line",children:["Hint: ",q.teaching.tendencyHint]}),q.teaching.more&&s.jsx("div",{className:"teaching-line",children:q.teaching.more}),q.compareAudio&&s.jsxs(s.Fragment,{children:[s.jsx("button",{style:{width:230},onClick:()=>{en(q.compareAudio.playbackPlan)},children:q.compareAudio.label}),s.jsx("div",{style:{opacity:.74,fontSize:12},children:q.compareAudio.description})]}),q.metadata.phrase?.measurePlaybackPlans&&q.metadata.phrase.measurePlaybackPlans.length>0&&s.jsx("div",{className:"button-row",children:q.metadata.phrase.measurePlaybackPlans.map((_,H)=>s.jsxs("button",{onClick:()=>{en(_)},children:["Play bar ",H+1]},`${q.id}_measure_${H}`))}),o.visualsEnabled&&dt.showScaleMap&&s.jsxs("div",{className:"control-group",children:[s.jsx("div",{className:"subtle",children:"Degree map"}),s.jsx("div",{className:"chip-row",children:y1.map(_=>{const H=q.metadata.visualCue?.activeDegree===_,ae=q.metadata.visualCue?.movement?.from===_,ce=q.metadata.visualCue?.movement?.to===_;return s.jsx("div",{style:{minWidth:36,textAlign:"center",padding:"6px 8px",borderRadius:999,border:"2px solid var(--ink)",background:H||ae||ce?"var(--accent-yellow)":"rgba(255,252,247,0.92)",fontWeight:H||ae||ce?700:500},children:_},`${q.id}_d_${_}`)})})]}),o.visualsEnabled&&dt.showPianoStrip&&q.metadata.visualCue?.timelineMidis&&s.jsxs("div",{className:"control-group",children:[s.jsx("div",{className:"subtle",children:"Keyboard"}),s.jsx(Ov,{midis:q.metadata.visualCue.timelineMidis,tonicMidi:q.tonicMidi})]}),s.jsx("button",{type:"button",className:"mode-overlay__dismiss",onClick:()=>le(!1),children:"Close explanation"})]})}),va&&We&&s.jsx("div",{className:"mode-overlay",onClick:()=>Et(!1),role:"presentation",children:s.jsxs("div",{className:"mode-overlay__panel mode-overlay__panel--wide mode-overlay__panel--compact",onClick:_=>_.stopPropagation(),role:"dialog","aria-modal":"true","aria-labelledby":"practice-session-settings-title",children:[s.jsx("div",{id:"practice-session-settings-title",className:"panel-title",children:"Session settings"}),s.jsxs("div",{className:"chip-row",children:[s.jsx("button",{type:"button",className:v.includes("scale_degree")?"toggle-chip toggle-chip--active":"toggle-chip","aria-pressed":v.includes("scale_degree"),onClick:()=>Vn(()=>gn("scale_degree")),children:"Scale Degree"}),s.jsx("button",{type:"button",className:v.includes("functional_interval")?"toggle-chip toggle-chip--active":"toggle-chip","aria-pressed":v.includes("functional_interval"),onClick:()=>Vn(()=>gn("functional_interval")),children:"Functional Interval"})]}),s.jsxs("div",{className:"control-grid",children:[s.jsxs("label",{className:"control-label",children:["Tonic source",s.jsxs("select",{value:y,onChange:_=>Vn(()=>S(_.target.value)),children:[s.jsx("option",{value:"random",children:"Randomize tonic"}),s.jsx("option",{value:"fixed",children:"Fixed tonic"})]})]}),s.jsxs("label",{className:ga?"control-label control-label--disabled":"control-label",children:["Fixed tonic",s.jsx("select",{value:x,disabled:ga,onChange:_=>Vn(()=>O(_.target.value)),children:Ft.map(_=>s.jsx("option",{value:_,children:_},_))})]}),s.jsxs("label",{className:vn?"control-label":"control-label control-label--disabled",children:["Interval level",s.jsxs("select",{value:Y,disabled:!vn,onChange:_=>Vn(()=>R(Number(_.target.value))),children:[s.jsx("option",{value:1,children:"Level 1"}),s.jsx("option",{value:2,children:"Level 2"}),s.jsx("option",{value:3,children:"Level 3"}),s.jsx("option",{value:4,children:"Level 4"})]})]}),s.jsxs("label",{className:Qa?"control-label":"control-label control-label--disabled",children:["Degree level",s.jsxs("select",{value:$,disabled:!Qa,onChange:_=>Vn(()=>F(Number(_.target.value))),children:[s.jsx("option",{value:1,children:"1-5"}),s.jsx("option",{value:2,children:"+6/7"}),s.jsx("option",{value:3,children:"+b3/#4/b7"})]})]}),s.jsxs("label",{className:"control-label",children:["Tonal mode",s.jsxs("select",{value:me,onChange:_=>Vn(()=>E(_.target.value)),children:[s.jsx("option",{value:"major",children:"Major"}),s.jsx("option",{value:"natural_minor",children:"Natural minor"}),s.jsx("option",{value:"harmonic_minor",children:"Harmonic minor"}),s.jsx("option",{value:"melodic_minor",children:"Melodic minor"}),s.jsx("option",{value:"modal",children:"Modal"})]})]}),s.jsxs("label",{className:vn?"control-label":"control-label control-label--disabled",children:["Interval playback",s.jsxs("select",{value:X,disabled:!vn,onChange:_=>Vn(()=>ne(_.target.value)),children:[s.jsx("option",{value:"scale_context",children:"Scale-context"}),s.jsx("option",{value:"sequential_pause",children:"Sequential pause"}),s.jsx("option",{value:"immediate_jump",children:"Immediate jump"}),s.jsx("option",{value:"harmonic_stack",children:"Harmonic stack"})]})]})]}),s.jsxs("div",{className:"control-group",children:[s.jsx("div",{className:"subtle",children:"Session controls"}),s.jsx("div",{className:"checkbox-grid checkbox-grid--compact",children:Gp.map(_=>Vt(_.key,_.title,_.description,!1,H=>Vi(_.key,H,!1),!0))})]}),s.jsxs("div",{className:"control-group",children:[s.jsx("div",{className:"subtle",children:'"Explain Why" Features'}),s.jsx("div",{className:"checkbox-grid checkbox-grid--compact",children:Vp.map(_=>Vt(_.key,_.title,_.description,(_.key==="showIntervalNames"||_.key==="showSemitoneCount")&&!vn,H=>Vi(_.key,H,!0),!0))})]}),s.jsx("button",{type:"button",className:"mode-overlay__dismiss",onClick:()=>Et(!1),children:"Close settings"})]})})]})}function _1(){return 10+Math.floor(Math.random()*6)}function j1(){const[l]=pv(),[c,o]=p.useState(Nt()),[u,d]=p.useState("random"),[m,h]=p.useState(Nt().keyRoot),[v,b]=p.useState([]),[y,S]=p.useState(0),[x,O]=p.useState(null),[G,L]=p.useState([]),Y=p.useRef(0),[R,$]=p.useState(null),[F,ee]=p.useState([]),[oe,xe]=p.useState(0),[ue,ie]=p.useState(!1),[Ae,T]=p.useState(!1),[ye,X]=p.useState(!1),[ne,pe]=p.useState(null),[he,me]=p.useState("idle");p.useEffect(()=>yl(()=>o(Nt())),[]);const E=he==="review"?F[oe]?.question:v[y],P=!!(E&&E.enforceSinging&&E.playbackPlan.kind==="sequence"&&E.playbackPlan.events.length>1&&R!==E.id),W=p.useMemo(()=>he==="review"?`Review ${oe+1}/${F.length}`:he!=="running"?"Not started":`Question ${y+1}/${v.length}`,[y,oe,F.length,v.length,he]),je=p.useMemo(()=>{const I=l.get("mode");if(I!=null&&(I==="scale_degree"||I==="functional_interval")&&yr(I))return I},[l]);p.useEffect(()=>{E&&Xe.setDrone(E.tonicMidi,{tempoBpm:c.tempoBpm,masterGain:c.masterGain,timbre:c.timbre},.16)},[E,c.masterGain,c.tempoBpm,c.timbre]),p.useEffect(()=>()=>{Xe.clearDrone(),Xe.stopAll()},[]),p.useEffect(()=>{if(!(!E||he!=="running"&&he!=="review")){if(Y.current=performance.now(),P&&E.playbackPlan.kind==="sequence"){const I=E.playbackPlan.events.slice(0,E.playbackPlan.events.length-1);Xe.play({kind:"sequence",events:I},{tempoBpm:c.tempoBpm,masterGain:c.masterGain,timbre:c.timbre});return}Xe.play(E.playbackPlan,{tempoBpm:c.tempoBpm,masterGain:c.masterGain,timbre:c.timbre})}},[P,E,c.masterGain,c.tempoBpm,c.timbre,he]);function Ee(){const I={...H0(je==null?void 0:[je]),randomTonicEvery:u==="random"?3:-1},_e=jr({config:I,questionCount:_1(),startTonic:u==="random"?Yl():m,tonicOctave:c.octave});b(_e),S(0),L([]),O(null),$(null),ee([]),xe(0),X(!1),pe(null),me("running")}function M(){if(!E||E.playbackPlan.kind!=="sequence")return;const I=E.playbackPlan.events[E.playbackPlan.events.length-1];$(E.id),Xe.play({kind:"sequence",events:[{...I,atBeats:0}]},{tempoBpm:c.tempoBpm,masterGain:c.masterGain,timbre:c.timbre})}function B(I,_e){if(!E)return;const Be=I===E.correctAnswer,ze=Math.max(1,_e-Y.current);if(O(I),he==="running"){const yt={question:E,selected:I,correct:Be,responseMs:ze};Ad({question:E,correct:Be,responseMs:ze});const Oe=[...G,yt];if(L(Oe),y+1<v.length){pe({kind:"next_question"});return}const ct=Oe.filter(Rt=>!Rt.correct);if(ct.length>0){pe({kind:"start_review",mistakes:ct});return}pe({kind:"complete_session"});return}if(he==="review"){if(!Be||!ue||!Ae)return;if(oe+1<F.length){pe({kind:"next_review"});return}pe({kind:"complete_review"})}}function J(){if(ne){if(O(null),pe(null),X(!1),ne.kind==="next_question"){S(I=>I+1);return}if(ne.kind==="start_review"){ee(ne.mistakes),xe(0),ie(!1),T(!1),me("review");return}if(ne.kind==="complete_session"||ne.kind==="complete_review"){me("done");return}xe(I=>I+1),ie(!1),T(!1)}}function te(){E&&Xe.play(E.playbackPlan,{tempoBpm:c.tempoBpm,masterGain:c.masterGain,timbre:c.timbre})}const de=G.length>0?G.filter(I=>I.correct).length/G.length*100:0;return s.jsxs("div",{className:"page",children:[s.jsxs("div",{style:{display:"grid",gap:"0.45rem"},children:[s.jsx("h2",{style:{margin:0},children:"Start from Basics"}),s.jsx("div",{className:"subtle",children:"Guided beginner on-ramp with tonic-anchored mixed drills, mandatory singing prediction, and required mistake review."})]}),s.jsxs("section",{className:"panel",children:[s.jsxs("div",{className:"control-grid",children:[s.jsxs("label",{className:"control-label",children:["Tonic source",s.jsxs("select",{value:u,onChange:I=>d(I.target.value),children:[s.jsx("option",{value:"random",children:"Randomize tonic"}),s.jsx("option",{value:"fixed",children:"Fixed tonic"})]})]}),u==="fixed"&&s.jsxs("label",{className:"control-label",children:["Fixed tonic",s.jsx("select",{value:m,onChange:I=>h(I.target.value),children:Ft.map(I=>s.jsx("option",{value:I,children:I},I))})]})]}),s.jsxs("div",{className:"button-row",children:[s.jsx("button",{onClick:Ee,children:he==="idle"?"Start basics session":"Restart basics session"}),s.jsx("button",{onClick:te,disabled:!E,children:"Replay"}),s.jsx("div",{className:"meta-pill",children:W})]})]}),E&&(he==="running"||he==="review")&&s.jsxs("section",{className:"panel panel--blue question-card",children:[s.jsx("div",{className:"kicker kicker--blue",children:"Guided Prompt"}),s.jsx("div",{className:"prompt-title",children:E.prompt}),s.jsxs("div",{className:"meta-strip",children:[s.jsxs("div",{className:"meta-pill",children:["Tonic ",s.jsx("strong",{children:E.tonic})]}),s.jsxs("div",{className:"meta-pill",children:["Mode ",s.jsx("strong",{children:E.mode.replace("_"," ")})]})]}),P&&s.jsxs("div",{className:"notice notice--blue",children:[s.jsx("div",{className:"panel-copy",children:"Sing the next pitch, then reveal it."}),s.jsx("button",{onClick:M,style:{width:220},children:"I sang it, reveal pitch"})]}),!P&&s.jsx("div",{className:"answer-grid",children:E.answerChoices.map(I=>{const _e=x===I;return s.jsx("button",{onClick:Be=>B(I,Be.timeStamp),disabled:x!==null&&he==="running",style:{padding:"8px 10px",borderRadius:10,border:"1px solid rgba(0,0,0,0.2)",background:_e?"rgba(0,0,0,0.1)":"white"},children:I},I)})}),x&&s.jsxs("div",{className:"button-row",children:[ne&&s.jsx("button",{style:{width:220},onClick:J,children:"Continue"}),ne&&s.jsx("button",{type:"button",style:{width:220},onClick:()=>X(!0),children:"Explain why"})]}),he==="review"&&s.jsxs("div",{className:"notice",children:[s.jsx("div",{className:"kicker kicker--red",children:"Review requirements"}),s.jsxs("div",{className:"button-row",children:[s.jsx("button",{onClick:()=>{Xe.play(E.playbackPlan,{tempoBpm:c.tempoBpm,masterGain:c.masterGain,timbre:c.timbre}),ie(!0)},children:"Play correct answer"}),s.jsx("button",{onClick:()=>T(!0),children:"I sang correct answer"})]}),s.jsx("div",{className:"subtle",children:"Required: play + sing + answer correctly to continue."})]})]}),he==="done"&&s.jsxs("section",{className:"panel panel--accent",children:[s.jsx("div",{className:"panel-title",children:"Session complete"}),s.jsxs("div",{className:"metric-grid",children:[s.jsxs("div",{className:"metric-card",children:[s.jsx("div",{className:"metric-card__label",children:"Questions"}),s.jsx("div",{className:"metric-card__value",children:v.length})]}),s.jsxs("div",{className:"metric-card",children:[s.jsx("div",{className:"metric-card__label",children:"Accuracy"}),s.jsxs("div",{className:"metric-card__value",children:[de.toFixed(1),"%"]})]})]}),s.jsx("div",{className:"subtle",children:"Adaptive reinforcement has updated weak scale degrees, movements, and chord/function areas."})]}),x&&E&&ye&&s.jsx("div",{className:"mode-overlay",onClick:()=>X(!1),role:"presentation",children:s.jsxs("div",{className:"mode-overlay__panel",onClick:I=>I.stopPropagation(),role:"dialog","aria-modal":"true","aria-labelledby":"beginner-feedback-title",children:[s.jsx("div",{id:"beginner-feedback-title",className:"panel-title",children:E.feedback.title}),E.feedback.subtitle&&s.jsx("div",{className:"teaching-line",children:E.feedback.subtitle}),E.feedback.note&&s.jsx("div",{className:"teaching-line",children:E.feedback.note}),s.jsx("div",{className:"panel-copy",children:E.feedback.explanation}),E.teaching.lines.map((I,_e)=>s.jsx("div",{className:"teaching-line",children:I},`${E.id}_teach_${_e}`)),E.teaching.tendencyHint&&s.jsxs("div",{className:"teaching-line",children:["Hint: ",E.teaching.tendencyHint]}),E.compareAudio&&s.jsx("button",{style:{width:220},onClick:()=>{Xe.play(E.compareAudio.playbackPlan,{tempoBpm:c.tempoBpm,masterGain:c.masterGain,timbre:c.timbre})},children:E.compareAudio.label}),c.visualsEnabled&&E.metadata.visualCue?.timelineMidis&&s.jsx(Ov,{midis:E.metadata.visualCue.timelineMidis,tonicMidi:E.tonicMidi}),s.jsx("button",{type:"button",className:"mode-overlay__dismiss",onClick:()=>X(!1),children:"Close explanation"})]})})]})}const M1=.8,Ri={scale_degree:{title:"Scale Degree",description:"Hear pitches against the tonic and name the exact degree."},functional_interval:{title:"Functional Interval",description:"Track movement between degrees and hear where lines want to resolve."},functional_harmony:{title:"Functional Harmony",description:"Identify chord quality and harmonic pull inside the key."},timing_grid:{title:"Timing Grid",description:"Recognize meter, subdivision, and rhythmic placement."},phrase_recall:{title:"Phrase Recall",description:"Retain and identify short tonal patterns over multiple beats."}},N1=[{key:"showAnswerNoteNames",title:"Answer note names",description:"Show note names next to scale-degree and interval answers."},{key:"allowPromptReplay",title:"Replay prompt",description:"Show a replay button so the current prompt can be heard more than once."},{key:"droneEnabled",title:"Drone",description:"Keep a tonic drone under each prompt."},{key:"enforceSinging",title:"Sing before reveal",description:"Hold back the last pitch until you sing it and reveal it manually."},{key:"requireMicForSinging",title:"Mic answer input",description:"Use the microphone to register sung pitches as answers on supported prompts."},{key:"allowKeyboardInput",title:"Keyboard input",description:"Allow typed answers when a topic supports it."},{key:"showExplainWhy",title:"Explain why",description:"Keep the post-answer explanation panel available."},{key:"showScaleMap",title:"Degree map",description:"Show the highlighted scale-degree strip in explanations."},{key:"showPianoStrip",title:"Keyboard excerpt",description:"Show the keyboard strip in explanations when available."}];function zt(l){return l==="scale_degree"?[{mode:l,level:1,shortLabel:"L1",title:"Core tonic map",description:"Stable 1-5 scale-degree hearing around tonic.",overrides:{degreeLevel:1,tonalMode:"major"}},{mode:l,level:2,shortLabel:"L2",title:"Upper extensions",description:"Adds 6 and 7 so the user has to hear true scale pull.",overrides:{degreeLevel:2,tonalMode:"major"}},{mode:l,level:3,shortLabel:"L3",title:"Chromatic colors",description:"Tests altered colors and less stable scale-degree identities.",overrides:{degreeLevel:3,tonalMode:"major"}}]:l==="functional_interval"?[{mode:l,level:1,shortLabel:"L1",title:"Step motion",description:"Adjacent scale-degree movement in context.",overrides:{intervalLevel:1,intervalPlaybackVariant:"scale_context",tonalMode:"major"}},{mode:l,level:2,shortLabel:"L2",title:"Skips",description:"Adds 3rds and wider movement with a pause to compare endpoints.",overrides:{intervalLevel:2,intervalPlaybackVariant:"sequential_pause",tonalMode:"major"}},{mode:l,level:3,shortLabel:"L3",title:"Wide functional leaps",description:"Adds 4ths and 5ths with less stepwise support.",overrides:{intervalLevel:3,intervalPlaybackVariant:"immediate_jump",tonalMode:"major"}},{mode:l,level:4,shortLabel:"L4",title:"Compressed pressure",description:"Adds the hardest movement set with harmonic-stack playback.",overrides:{intervalLevel:4,intervalPlaybackVariant:"harmonic_stack",tonalMode:"major"}}]:l==="functional_harmony"?[{mode:l,level:1,shortLabel:"L1",title:"Quality anchors",description:"Quality and cadence hearing with simpler harmonic motion.",overrides:{harmonyLevel:1,harmonyPlaybackVariant:"block",tonalMode:"major"}},{mode:l,level:2,shortLabel:"L2",title:"Function paths",description:"Roman paths, cadence type, and changed-chord recognition.",overrides:{harmonyLevel:2,harmonyPlaybackVariant:"mixed",tonalMode:"major"}}]:l==="timing_grid"?[{mode:l,level:1,shortLabel:"L1",title:"Pulse lock",description:"Meter and basic pulse recognition.",overrides:{timingLevel:1}},{mode:l,level:2,shortLabel:"L2",title:"Subdivision control",description:"Separates straight subdivisions and basic syncopation.",overrides:{timingLevel:2}},{mode:l,level:3,shortLabel:"L3",title:"Rhythmic detail",description:"More complex rhythmic detail and syncopation pressure.",overrides:{timingLevel:3}}]:[{mode:l,level:1,shortLabel:"L1",title:"Short contour",description:"Small phrase shapes and short memory spans.",overrides:{phraseLevel:1,dictationInputMode:"multiple_choice"}},{mode:l,level:2,shortLabel:"L2",title:"Phrase memory",description:"Longer recall with clearer internal grouping.",overrides:{phraseLevel:2,dictationInputMode:"multiple_choice"}},{mode:l,level:3,shortLabel:"L3",title:"Dense recall",description:"Harder phrase retention and recognition.",overrides:{phraseLevel:3,dictationInputMode:"multiple_choice"}}]}function Yp(l,c={}){return{sessionType:"free",modePool:l,intervalLevel:c.intervalLevel??1,degreeLevel:c.degreeLevel??1,harmonyLevel:c.harmonyLevel??1,timingLevel:c.timingLevel??1,phraseLevel:c.phraseLevel??1,dictationInputMode:c.dictationInputMode??"multiple_choice",tonalMode:c.tonalMode??"major",intervalPlaybackVariant:c.intervalPlaybackVariant??"scale_context",harmonyPlaybackVariant:c.harmonyPlaybackVariant??"block",randomTonicEvery:2,singingQuota:0,predictiveResolutionChance:.2}}function zv(l){return`${(l*100).toFixed(0)}%`}function Kp(l,c){return c===0?"Not tested":`${l}/${c} (${zv(l/c)})`}function E1(l){const c=Xl(),o=Object.values(c.adaptive).filter(m=>m.mode===l),u=o.reduce((m,h)=>m+h.attempts,0),d=u>0?o.reduce((m,h)=>m+h.mastery*h.attempts,0)/u:0;return{attempts:u,weightedMastery:d}}function T1(l){const c=zt(l),{attempts:o,weightedMastery:u}=E1(l);if(o<6)return 0;const d=o>=24?c.length-1:o>=14?Math.min(c.length-1,2):Math.min(c.length-1,1),m=Math.round(u*d);return Math.max(0,Math.min(d,m))}function Ju(l){return Object.fromEntries(l.map(c=>{const o=T1(c);return[c,{mode:c,startStageIndex:o,currentStageIndex:o,recommendedStageIndex:Math.max(0,o-1),complete:!1,totalAttempts:0,totalCorrect:0,stageStats:zt(c).map(()=>({attempts:0,correct:0}))}]}))}function C1(l){return l.metadata.timing?.supportsTapPad||l.metadata.phrase&&l.metadata.phrase.inputMode!=="multiple_choice"?!1:l.answerChoices.length>0&&!l.answerChoices.includes("tap_capture")}function A1(l,c,o){for(let u=0;u<8;u+=1){const d=jr({config:Yp([l],c.overrides),questionCount:1,startTonic:Yl(),tonicOctave:o})[0];if(d&&C1(d))return d}return jr({config:Yp([l],{...c.overrides,dictationInputMode:"multiple_choice",timingLevel:1,phraseLevel:1}),questionCount:1,startTonic:Yl(),tonicOctave:o})[0]}function Fu(l,c,o,u){return{question:A1(l,zt(l)[c],o),mode:l,stageIndex:c,ordinal:u}}function w1(l){return Object.values(l).reduce((c,o)=>{if(o.complete)return c;const u=o.stageStats[o.currentStageIndex],d=u.attempts<2?2-u.attempts:u.correct===1&&u.attempts===2?1:0;return c+d+Math.max(0,zt(o.mode).length-o.currentStageIndex-1)*2},0)}function k1(l,c,o,u){if(u&&!l[o].complete)return o;const d=c.indexOf(o);for(let m=1;m<=c.length;m+=1){const h=c[(d+m)%c.length];if(!l[h].complete)return h}return null}function R1(l,c){return l.map(o=>{const u=c[o],d=zt(o);return{mode:o,attempts:u.totalAttempts,correct:u.totalCorrect,accuracy:u.totalAttempts>0?u.totalCorrect/u.totalAttempts:0,recommendedStage:d[u.recommendedStageIndex],stageBreakdown:d.map((m,h)=>{const v=u.stageStats[h];return{stage:m,attempts:v.attempts,correct:v.correct,accuracy:v.attempts>0?v.correct/v.attempts:null}}),startedHigher:u.startStageIndex>0}})}function D1(){const l=$s(),c=p.useMemo(()=>Jn(Ql()),[]),[o,u]=p.useState(Nt()),[d,m]=p.useState("assessment"),[h,v]=p.useState(()=>Ju(c)),[b,y]=p.useState(null),[S,x]=p.useState(null),[O,G]=p.useState([]),[L,Y]=p.useState(!1),[R,$]=p.useState([]),[F,ee]=p.useState(`Custom Path ${br().freePracticePresets.length+1}`),[oe,xe]=p.useState("random"),[ue,ie]=p.useState(Nt().keyRoot),[Ae,T]=p.useState(1),[ye,X]=p.useState(1),[ne,pe]=p.useState(1),[he,me]=p.useState(1),[E,P]=p.useState(1),[W,je]=p.useState("multiple_choice"),[Ee,M]=p.useState("major"),[B,J]=p.useState("scale_context"),[te,de]=p.useState("block"),[I,_e]=p.useState({...Oi,showExplainWhy:!0}),[Be,ze]=p.useState(null),yt=p.useRef(0);p.useEffect(()=>yl(()=>u(Nt())),[]);const Oe=b?.question??null,ct=b?zt(b.mode)[b.stageIndex]:null,Rt=p.useMemo(()=>Object.values(h).filter(A=>A.complete).length,[h]),rt=p.useMemo(()=>w1(h),[h]),mt=p.useMemo(()=>R1(c,h),[c,h]),Pe=p.useMemo(()=>jv({limit:8,modePool:c}),[O.length,c]),ht=p.useMemo(()=>{const A=new Set;for(const Z of mt){const Me=Pe.some(lt=>lt.mode===Z.mode),bt=Z.recommendedStage.level<zt(Z.mode).at(-1).level;(Z.accuracy<M1||Me||bt)&&A.add(Z.mode)}if(A.size===0&&mt.length>0){const Z=[...mt].sort((Me,bt)=>Me.accuracy-bt.accuracy)[0];Z&&A.add(Z.mode)}return c.filter(Z=>A.has(Z))},[c,mt,Pe]),Dt=p.useMemo(()=>new Set(ht),[ht]),an=p.useMemo(()=>{const A=new Map;for(const Z of Pe){const Me=A.get(Z.mode)??[];Me.push(`${Z.label} (${zv(Z.mastery)})`),A.set(Z.mode,Me)}return A},[Pe]);p.useEffect(()=>{!L||!Oe||(yt.current=performance.now(),Xe.play(Oe.playbackPlan,{tempoBpm:o.tempoBpm,masterGain:o.masterGain,timbre:o.timbre}))},[L,Oe,o.masterGain,o.tempoBpm,o.timbre]),p.useEffect(()=>{if(d!=="assessment"||L||b!=null)return;const A=Ju(c),Z=c[0];Z&&(v(A),x(null),G([]),ze(null),Y(!0),y(Fu(Z,A[Z].currentStageIndex,o.octave,1)))},[L,c,b,o.octave,d]),p.useEffect(()=>{d==="topics"&&$(A=>A.length>0?A:ht.length>0?ht:[c[0]])},[c,ht,d]),p.useEffect(()=>()=>{Xe.clearDrone(),Xe.stopAll()},[]);function ot(A){if(A.scale_degree){const Z=zt("scale_degree")[A.scale_degree.recommendedStageIndex];T(Z.overrides.degreeLevel??1)}if(A.functional_interval){const Z=zt("functional_interval")[A.functional_interval.recommendedStageIndex];X(Z.overrides.intervalLevel??1),J(Z.overrides.intervalPlaybackVariant??"scale_context")}if(A.functional_harmony){const Z=zt("functional_harmony")[A.functional_harmony.recommendedStageIndex];pe(Z.overrides.harmonyLevel??1),de(Z.overrides.harmonyPlaybackVariant??"block")}if(A.timing_grid){const Z=zt("timing_grid")[A.timing_grid.recommendedStageIndex];me(Z.overrides.timingLevel??1)}if(A.phrase_recall){const Z=zt("phrase_recall")[A.phrase_recall.recommendedStageIndex];P(Z.overrides.phraseLevel??1),je(Z.overrides.dictationInputMode??"multiple_choice")}}function U(){Oe&&Xe.play(Oe.playbackPlan,{tempoBpm:o.tempoBpm,masterGain:o.masterGain,timbre:o.timbre})}function se(A){if(!b||!Oe||S!==null)return;const Z=Math.max(1,performance.now()-yt.current),Me=A===Oe.correctAnswer,bt=zt(b.mode)[b.stageIndex];x(A),Ad({question:Oe,correct:Me,responseMs:Z}),G(lt=>[...lt,{question:Oe,mode:b.mode,stageIndex:b.stageIndex,stageLabel:bt.shortLabel,selected:A,correct:Me,responseMs:Z}])}function ve(){if(!b||!Oe||S==null)return;const A=S===Oe.correctAnswer,Z={...h},Me=Z[b.mode],bt=[...Me.stageStats],lt={...bt[b.stageIndex]};lt.attempts+=1,lt.correct+=A?1:0,bt[b.stageIndex]=lt;let It=Me.complete,Ie=Me.recommendedStageIndex,Ht=Me.currentStageIndex,xt=!1;const Ga=zt(b.mode);if(lt.attempts>=2){const ua=lt.correct>=2,le=lt.correct===0||lt.attempts===3&&lt.correct<2;ua?(Ie=Math.max(Ie,b.stageIndex),b.stageIndex+1<Ga.length?Ht=b.stageIndex+1:(It=!0,Ht=b.stageIndex)):le?(Ie=Math.max(0,b.stageIndex-1),Ht=b.stageIndex,It=!0):xt=!0}else xt=!0;if(Z[b.mode]={...Me,currentStageIndex:Ht,recommendedStageIndex:Ie,complete:It,totalAttempts:Me.totalAttempts+1,totalCorrect:Me.totalCorrect+(A?1:0),stageStats:bt},v(Z),x(null),c.every(ua=>Z[ua].complete)){Y(!1),y(null),ot(Z),m("results");return}const Hn=k1(Z,c,b.mode,xt);if(!Hn){Y(!1),y(null),ot(Z),m("results");return}y(Fu(Hn,Z[Hn].currentStageIndex,o.octave,O.length+2))}function ge(A){$(Z=>Z.includes(A)?Z.length===1?Z:Z.filter(Me=>Me!==A):[...Z,A])}function Re(A,Z){_e(Me=>A==="requireMicForSinging"?{...Me,requireMicForSinging:Z,enforceSinging:Z?!0:Me.enforceSinging}:A==="enforceSinging"&&!Z?{...Me,enforceSinging:!1,requireMicForSinging:!1}:{...Me,[A]:Z})}function Ke(){const A=br(),Z=`preset_${Math.random().toString(36).slice(2,9)}`,Me={id:Z,name:F.trim()||`Custom Path ${A.freePracticePresets.length+1}`,modePool:Jn(R),tonicMode:oe,fixedTonic:ue,intervalLevel:ye,degreeLevel:Ae,harmonyLevel:ne,timingLevel:he,phraseLevel:E,dictationInputMode:W,tonalMode:Ee,intervalPlaybackVariant:B,harmonyPlaybackVariant:te,toggles:I};Gs({...A,freePracticePresets:[...A.freePracticePresets,Me]}),ze(Z),m("saved")}function Ce(){const A=Ju(c),Z=c[0];m("assessment"),v(A),y(Z?Fu(Z,A[Z].currentStageIndex,o.octave,1):null),x(null),G([]),Y(Z!=null),$([]),ze(null)}return s.jsxs("div",{className:"page",children:[s.jsxs("div",{style:{display:"flex",justifyContent:"space-between",gap:"1rem",alignItems:"center",flexWrap:"wrap"},children:[s.jsxs("div",{style:{display:"grid",gap:"0.35rem"},children:[s.jsx("h2",{style:{margin:0},children:"Custom Path"}),s.jsxs("div",{className:"subtle",children:["Step ",d==="assessment"?"1":d==="results"?"2":d==="topics"?"3":"4"," of 4"]}),s.jsxs("div",{className:"chip-row",children:[s.jsxs("div",{className:"chip",children:["Placed ",Rt,"/",c.length]}),s.jsxs("div",{className:"chip",children:["Answered ",O.length]}),d==="assessment"&&s.jsxs("div",{className:"chip",children:["At least ",rt," left"]})]})]}),s.jsx("div",{className:"button-row",children:s.jsx("button",{type:"button",onClick:()=>l("/"),children:"Back home"})})]}),d==="assessment"&&Oe&&ct&&s.jsxs("section",{className:"panel question-card",children:[s.jsx("div",{className:"kicker kicker--red",children:"Adaptive assessment"}),s.jsx("div",{className:"prompt-title",children:Oe.prompt}),s.jsxs("div",{className:"meta-strip",children:[s.jsxs("div",{className:"meta-pill",children:["Topic ",s.jsx("strong",{children:Ri[b.mode].title})]}),s.jsxs("div",{className:"meta-pill",children:["Placement ",s.jsx("strong",{children:ct.shortLabel})]}),s.jsxs("div",{className:"meta-pill",children:["Stage ",s.jsx("strong",{children:ct.title})]}),s.jsxs("div",{className:"meta-pill",children:["Prompt ",s.jsx("strong",{children:b.ordinal})]})]}),s.jsx("div",{className:"panel-copy",children:ct.description}),s.jsx("div",{className:"answer-grid",children:Oe.answerChoices.map(A=>s.jsx("button",{type:"button",onClick:()=>se(A),disabled:S!==null,children:A},A))}),s.jsxs("div",{className:"button-row",children:[s.jsx("button",{type:"button",onClick:U,children:"Replay prompt"}),S&&s.jsx("button",{type:"button",onClick:ve,children:"Continue"})]}),S&&s.jsx("div",{className:S===Oe.correctAnswer?"answer-line answer-line--correct":"answer-line answer-line--wrong",children:S===Oe.correctAnswer?"Correct":`Correct answer: ${Oe.correctAnswer}`})]}),d==="results"&&s.jsxs(s.Fragment,{children:[s.jsxs("section",{className:"panel panel--accent",children:[s.jsxs("div",{className:"panel-header",children:[s.jsxs("div",{children:[s.jsx("div",{className:"kicker kicker--red",children:"Results screen"}),s.jsx("div",{className:"panel-title",children:"Placement and weak areas"})]}),s.jsx("div",{className:"panel-copy",children:"Each topic now has a placement level. The app used that plus your stored weak areas to decide what should be emphasized."})]}),s.jsx("div",{className:"custom-grid",children:mt.map(A=>s.jsxs("article",{className:Dt.has(A.mode)?"topic-card topic-card--recommended":"topic-card",children:[s.jsxs("div",{className:"topic-card__header",children:[s.jsxs("div",{children:[s.jsx("div",{className:"topic-card__title",children:Ri[A.mode].title}),s.jsx("div",{className:"topic-card__copy",children:Ri[A.mode].description})]}),s.jsx("div",{className:"topic-card__metric",children:A.recommendedStage.shortLabel})]}),s.jsxs("div",{className:"chip-row",children:[s.jsxs("div",{className:"chip",children:["Placement ",A.recommendedStage.title]}),s.jsx("div",{className:"chip",children:Kp(A.correct,A.attempts)}),s.jsx("div",{className:"chip chip--quiet",children:Dt.has(A.mode)?"Needs work":"Stable for now"})]}),A.startedHigher&&s.jsx("div",{className:"mini-stat",children:"Started above level 1 from prior progress, then verified with this assessment."}),s.jsx("div",{className:"list-stack",children:A.stageBreakdown.filter(Z=>Z.attempts>0).map(Z=>s.jsxs("div",{className:"mini-stat",children:[Z.stage.shortLabel," ",Z.stage.title,": ",Kp(Z.correct,Z.attempts)]},`${A.mode}_${Z.stage.shortLabel}`))}),(an.get(A.mode)??[]).length>0&&s.jsx("div",{className:"list-stack",children:(an.get(A.mode)??[]).slice(0,3).map(Z=>s.jsx("div",{className:"mini-stat",children:Z},`${A.mode}_${Z}`))})]},A.mode))})]}),s.jsxs("div",{className:"button-row",children:[s.jsx("button",{type:"button",onClick:Ce,children:"Re-run assessment"}),s.jsx("button",{type:"button",onClick:()=>m("topics"),children:"Continue to topic selection"})]})]}),d==="topics"&&s.jsxs(s.Fragment,{children:[s.jsx("section",{className:"panel panel--blue",children:s.jsxs("div",{className:"panel-header",children:[s.jsxs("div",{children:[s.jsx("div",{className:"kicker kicker--blue",children:"Topic selection"}),s.jsx("div",{className:"panel-title",children:"Pick what you actually want to focus on"})]}),s.jsx("div",{className:"panel-copy",children:"Needs-work topics stay on top, but the rest of the available topics are still selectable underneath."})]})}),s.jsxs("section",{className:"panel",children:[s.jsx("div",{className:"subtle",children:"Needs work"}),s.jsx("div",{className:"custom-grid",children:ht.map(A=>{const Z=mt.find(Me=>Me.mode===A);return s.jsxs("button",{type:"button",className:R.includes(A)?"topic-card topic-card--selected topic-card--recommended":"topic-card topic-card--recommended",onClick:()=>ge(A),children:[s.jsxs("div",{className:"topic-card__header",children:[s.jsxs("div",{children:[s.jsx("div",{className:"topic-card__title",children:Ri[A].title}),s.jsx("div",{className:"topic-card__copy",children:Z?.recommendedStage.title})]}),s.jsx("div",{className:"topic-card__metric",children:Z?.recommendedStage.shortLabel})]}),s.jsx("div",{className:"chip-row",children:s.jsx("div",{className:"chip",children:R.includes(A)?"Included":"Tap to include"})})]},A)})})]}),s.jsxs("section",{className:"panel",children:[s.jsx("div",{className:"subtle",children:"Other topics available"}),s.jsx("div",{className:"custom-grid",children:c.filter(A=>!Dt.has(A)).map(A=>{const Z=mt.find(Me=>Me.mode===A);return s.jsxs("button",{type:"button",className:R.includes(A)?"topic-card topic-card--selected":"topic-card",onClick:()=>ge(A),children:[s.jsxs("div",{className:"topic-card__header",children:[s.jsxs("div",{children:[s.jsx("div",{className:"topic-card__title",children:Ri[A].title}),s.jsx("div",{className:"topic-card__copy",children:Z?.recommendedStage.title})]}),s.jsx("div",{className:"topic-card__metric",children:Z?.recommendedStage.shortLabel})]}),s.jsx("div",{className:"chip-row",children:s.jsx("div",{className:"chip",children:R.includes(A)?"Included":"Tap to include"})})]},A)})})]}),s.jsxs("div",{className:"button-row",children:[s.jsx("button",{type:"button",onClick:()=>m("results"),children:"Back to results"}),s.jsx("button",{type:"button",onClick:()=>m("settings"),disabled:R.length===0,children:"Continue to settings"})]})]}),d==="settings"&&s.jsxs(s.Fragment,{children:[s.jsx("section",{className:"panel panel--accent",children:s.jsxs("div",{className:"panel-header",children:[s.jsxs("div",{children:[s.jsx("div",{className:"kicker kicker--red",children:"Settings screen"}),s.jsx("div",{className:"panel-title",children:"Save your custom preset"})]}),s.jsx("div",{className:"panel-copy",children:"The recommended levels found in the assessment are already loaded here. Change anything you want before saving."})]})}),s.jsx("section",{className:"panel",children:s.jsxs("div",{className:"control-grid",children:[s.jsxs("label",{className:"control-label",children:["Preset name",s.jsx("input",{value:F,onChange:A=>ee(A.target.value),placeholder:"My custom path"})]}),s.jsxs("label",{className:"control-label",children:["Tonic source",s.jsxs("select",{value:oe,onChange:A=>xe(A.target.value),children:[s.jsx("option",{value:"random",children:"Randomize tonic"}),s.jsx("option",{value:"fixed",children:"Fixed tonic"})]})]}),oe==="fixed"&&s.jsxs("label",{className:"control-label",children:["Fixed tonic",s.jsx("select",{value:ue,onChange:A=>ie(A.target.value),children:Ft.map(A=>s.jsx("option",{value:A,children:A},A))})]}),s.jsxs("label",{className:"control-label",children:["Tonal mode",s.jsxs("select",{value:Ee,onChange:A=>M(A.target.value),children:[s.jsx("option",{value:"major",children:"Major"}),s.jsx("option",{value:"natural_minor",children:"Natural minor"}),s.jsx("option",{value:"harmonic_minor",children:"Harmonic minor"}),s.jsx("option",{value:"melodic_minor",children:"Melodic minor"}),s.jsx("option",{value:"modal",children:"Modal"})]})]})]})}),s.jsxs("section",{className:"panel",children:[s.jsx("div",{className:"subtle",children:"Chosen topics"}),s.jsxs("div",{className:"custom-grid",children:[R.includes("scale_degree")&&s.jsxs("div",{className:"topic-card topic-card--static",children:[s.jsx("div",{className:"topic-card__title",children:"Scale Degree settings"}),s.jsxs("div",{className:"topic-card__copy",children:["Recommended from placement: ",zt("scale_degree")[h.scale_degree.recommendedStageIndex].title]}),s.jsxs("label",{className:"control-label",children:["Degree level",s.jsxs("select",{value:Ae,onChange:A=>T(Number(A.target.value)),children:[s.jsx("option",{value:1,children:"1-5"}),s.jsx("option",{value:2,children:"+6/7"}),s.jsx("option",{value:3,children:"+b3/#4/b7"})]})]})]}),R.includes("functional_interval")&&s.jsxs("div",{className:"topic-card topic-card--static",children:[s.jsx("div",{className:"topic-card__title",children:"Functional Interval settings"}),s.jsxs("div",{className:"topic-card__copy",children:["Recommended from placement: ",zt("functional_interval")[h.functional_interval.recommendedStageIndex].title]}),s.jsxs("label",{className:"control-label",children:["Interval level",s.jsxs("select",{value:ye,onChange:A=>X(Number(A.target.value)),children:[s.jsx("option",{value:1,children:"Level 1"}),s.jsx("option",{value:2,children:"Level 2"}),s.jsx("option",{value:3,children:"Level 3"}),s.jsx("option",{value:4,children:"Level 4"})]})]}),s.jsxs("label",{className:"control-label",children:["Interval playback",s.jsxs("select",{value:B,onChange:A=>J(A.target.value),children:[s.jsx("option",{value:"scale_context",children:"Scale-context"}),s.jsx("option",{value:"sequential_pause",children:"Sequential pause"}),s.jsx("option",{value:"immediate_jump",children:"Immediate jump"}),s.jsx("option",{value:"harmonic_stack",children:"Harmonic stack"})]})]})]}),R.includes("functional_harmony")&&s.jsxs("div",{className:"topic-card topic-card--static",children:[s.jsx("div",{className:"topic-card__title",children:"Functional Harmony settings"}),s.jsxs("div",{className:"topic-card__copy",children:["Recommended from placement: ",zt("functional_harmony")[h.functional_harmony.recommendedStageIndex].title]}),s.jsxs("label",{className:"control-label",children:["Harmony level",s.jsxs("select",{value:ne,onChange:A=>pe(Number(A.target.value)),children:[s.jsx("option",{value:1,children:"Level 1"}),s.jsx("option",{value:2,children:"Level 2"})]})]}),s.jsxs("label",{className:"control-label",children:["Harmony playback",s.jsxs("select",{value:te,onChange:A=>de(A.target.value),children:[s.jsx("option",{value:"block",children:"Block"}),s.jsx("option",{value:"arpeggiated",children:"Arpeggiated"}),s.jsx("option",{value:"mixed",children:"Mixed"})]})]})]}),R.includes("timing_grid")&&s.jsxs("div",{className:"topic-card topic-card--static",children:[s.jsx("div",{className:"topic-card__title",children:"Timing Grid settings"}),s.jsxs("div",{className:"topic-card__copy",children:["Recommended from placement: ",zt("timing_grid")[h.timing_grid.recommendedStageIndex].title]}),s.jsxs("label",{className:"control-label",children:["Timing level",s.jsxs("select",{value:he,onChange:A=>me(Number(A.target.value)),children:[s.jsx("option",{value:1,children:"Level 1"}),s.jsx("option",{value:2,children:"Level 2"}),s.jsx("option",{value:3,children:"Level 3"})]})]})]}),R.includes("phrase_recall")&&s.jsxs("div",{className:"topic-card topic-card--static",children:[s.jsx("div",{className:"topic-card__title",children:"Phrase Recall settings"}),s.jsxs("div",{className:"topic-card__copy",children:["Recommended from placement: ",zt("phrase_recall")[h.phrase_recall.recommendedStageIndex].title]}),s.jsxs("label",{className:"control-label",children:["Phrase level",s.jsxs("select",{value:E,onChange:A=>P(Number(A.target.value)),children:[s.jsx("option",{value:1,children:"Level 1"}),s.jsx("option",{value:2,children:"Level 2"}),s.jsx("option",{value:3,children:"Level 3"})]})]}),s.jsxs("label",{className:"control-label",children:["Input mode",s.jsxs("select",{value:W,onChange:A=>je(A.target.value),children:[s.jsx("option",{value:"multiple_choice",children:"Multiple choice"}),s.jsx("option",{value:"piano_grid",children:"Piano grid"}),s.jsx("option",{value:"staff_entry",children:"Staff entry"})]})]})]})]})]}),s.jsxs("section",{className:"panel",children:[s.jsx("div",{className:"subtle",children:"Session aids"}),s.jsx("div",{className:"checkbox-grid",children:N1.map(A=>s.jsx("button",{type:"button",className:I[A.key]?"checkbox-chip checkbox-chip--stacked checkbox-chip--selected":"checkbox-chip checkbox-chip--stacked",onClick:()=>Re(A.key,!I[A.key]),children:s.jsxs("span",{className:"checkbox-chip__body",children:[s.jsx("span",{className:"checkbox-chip__title",children:A.title}),s.jsx("span",{className:"checkbox-chip__copy",children:A.description})]})},A.key))})]}),s.jsxs("div",{className:"button-row",children:[s.jsx("button",{type:"button",onClick:()=>m("topics"),children:"Back to topics"}),s.jsx("button",{type:"button",onClick:Ke,disabled:R.length===0,children:"Save preset"})]})]}),d==="saved"&&s.jsxs("section",{className:"panel panel--blue",children:[s.jsx("div",{className:"kicker kicker--blue",children:"Preset ready"}),s.jsx("div",{className:"panel-title",children:F.trim()||"Custom Path"}),s.jsx("div",{className:"panel-copy",children:"Your custom preset has been saved with the assessed levels you selected. You can use it for any future session."}),s.jsx("div",{className:"chip-row",children:R.map(A=>{const Z=mt.find(Me=>Me.mode===A);return s.jsxs("div",{className:"chip",children:[Ri[A].title," ",Z?.recommendedStage.shortLabel]},A)})}),s.jsxs("div",{className:"button-row",children:[s.jsx("button",{type:"button",onClick:()=>l(Be?`/practice?preset=${Be}`:"/practice"),children:"Open in practice"}),s.jsx("button",{type:"button",onClick:Ce,children:"Build another custom path"})]})]})]})}const kr="et_profile_v1",dd="et_profile_changed",Od="et_cloud_snapshot_v1:",Mr={userId:null,displayName:"",deviceLabel:typeof navigator>"u"?"This device":navigator.userAgent.includes("Mobile")?"Mobile device":"Desktop device",syncEnabled:!1,lastSyncedAt:null,syncState:"signed_out",syncError:null};function Bv(){typeof window<"u"&&window.dispatchEvent(new Event(dd))}function L1(l){return`${l.trim().toLowerCase().replace(/[^a-z0-9]+/g,"-").replace(/^-+|-+$/g,"")||"learner"}_${Math.random().toString(36).slice(2,8)}`}function Fn(){const l=$l(kr,Mr);return{...Mr,...l}}function Zs(l){mn(kr,l),Bv()}function fd(l){Zs({...Fn(),...l})}function O1(l){const c=l.trim(),o=Fn(),u={...o,userId:o.userId??L1(c),displayName:c,syncEnabled:!0,syncState:"ready",syncError:null};return Zs(u),u}function z1(){B0(kr),Bv()}function vr(l,c=null){const o=Fn();Zs({...o,syncState:l,syncError:c})}function B1(l,c){localStorage.setItem(`${Od}${l}`,c),fd({lastSyncedAt:Date.now(),syncState:"ready",syncError:null})}function q1(l){return localStorage.getItem(`${Od}${l}`)}function qv(l){if(typeof window>"u")return()=>{};const c=u=>{(u.key===kr||u.key?.startsWith(Od))&&l()},o=()=>l();return window.addEventListener("storage",c),window.addEventListener(dd,o),()=>{window.removeEventListener("storage",c),window.removeEventListener(dd,o)}}const H1="et_progress_v1",Hv="et_authored_drills_v1";function Uv(){return{version:1,exportedAt:Date.now(),profile:Fn(),settings:Nt(),training:br(),progress:Xl(),analytics:Dd(),authoredDrills:Ha()}}function U1(l){return typeof l!="object"||l==null?!1:"version"in l&&"settings"in l&&"training"in l&&"progress"in l}function G1(){const l=Uv();q0(`ear-trainer-backup-${l.exportedAt}.json`,JSON.stringify(l,null,2)),Tn("export_snapshot","/settings",{authoredCount:l.authoredDrills.length})}function Gv(l){const c=JSON.parse(l);if(!U1(c))throw new Error("Backup file is missing required fields.");const o=c;Zs({...Mr,...o.profile}),Ys({...Kl,...o.settings}),Gs({...xd,...o.training}),mn(H1,{...xr,...o.progress}),Ld(),mn(Hv,[...Nd,...o.authoredDrills??[]]),mn("et_analytics_v1",o.analytics??[]),Tn("import_snapshot","/settings",{exportedAt:o.exportedAt})}function V1(){Zs(Mr),Ys(Kl),Gs(xd),Mv(),Ld(),mn(Hv,Nd)}async function Y1(){const l=Fn();if(!l.userId||!l.syncEnabled)throw new Error("Sign in before syncing.");vr("syncing");const c=JSON.stringify(Uv());B1(l.userId,c),Tn("sync_push","/settings",{authoredCount:Ha().length})}async function K1(){const l=Fn();if(!l.userId||!l.syncEnabled)throw new Error("Sign in before syncing.");vr("syncing");const c=q1(l.userId);if(!c)throw vr("error","No synced data found for this profile."),new Error("No synced data found for this profile.");Gv(c),vr("ready"),Tn("sync_pull","/settings",{source:"local-cloud"})}function Q1(){const[l,c]=p.useState(Fn()),[o,u]=p.useState(Nt()),[d,m]=p.useState(Fn().displayName),[h,v]=p.useState(Ha().length),[b,y]=p.useState(null),S=p.useRef(null);p.useEffect(()=>qv(()=>c(Fn())),[]),p.useEffect(()=>yl(()=>u(Nt())),[]),p.useEffect(()=>Ed(()=>v(Ha().length)),[]);async function x(G){try{y(G==="push"?"Syncing local snapshot...":"Restoring latest synced snapshot..."),G==="push"?await Y1():await K1(),y(G==="push"?"Snapshot saved to synced storage.":"Synced snapshot restored.")}catch(L){y(L instanceof Error?L.message:"Sync failed.")}}async function O(G){try{const L=await G.text();Gv(L),y("Backup imported.")}catch(L){y(L instanceof Error?L.message:"Import failed.")}}return s.jsxs("div",{style:{display:"grid",gap:16},children:[s.jsxs("div",{style:{display:"grid",gap:6},children:[s.jsx("h2",{children:"Settings"}),s.jsx("p",{className:"subtle",children:"Manage your local profile, backup snapshots, and the data layers that power practice, authored content, and telemetry."})]}),s.jsxs("section",{className:"card",style:{display:"grid",gap:12},children:[s.jsx("h3",{children:"Profile"}),s.jsxs("label",{children:["Display name",s.jsx("input",{value:d,onChange:G=>m(G.target.value),"aria-label":"Display name"})]}),s.jsxs("label",{children:["Device label",s.jsx("input",{value:l.deviceLabel,onChange:G=>fd({deviceLabel:G.target.value}),"aria-label":"Device label"})]}),s.jsx("div",{className:"subtle",children:l.userId?`Signed in as ${l.displayName||"Learner"} (${l.userId})`:"Running in local-only mode."}),s.jsxs("div",{style:{display:"flex",gap:10,flexWrap:"wrap"},children:[s.jsx("button",{onClick:()=>O1(d||"Learner"),children:l.userId?"Refresh profile":"Create profile"}),s.jsx("button",{onClick:()=>z1(),children:"Sign out"}),s.jsxs("label",{style:{display:"flex",alignItems:"center",gap:10},children:[s.jsx("input",{type:"checkbox",checked:l.syncEnabled,onChange:G=>fd({syncEnabled:G.target.checked}),style:{width:18,minHeight:18},"aria-label":"Enable sync"}),"Keep a synced backup"]})]})]}),s.jsxs("section",{className:"card",style:{display:"grid",gap:12},children:[s.jsx("h3",{children:"Data flow"}),s.jsxs("div",{className:"subtle",children:["Last sync: ",l.lastSyncedAt?new Date(l.lastSyncedAt).toLocaleString():"Never"," | State: ",l.syncState]}),s.jsxs("div",{style:{display:"flex",gap:10,flexWrap:"wrap"},children:[s.jsx("button",{onClick:()=>x("push"),disabled:!l.userId||!l.syncEnabled,children:"Save synced copy"}),s.jsx("button",{onClick:()=>x("pull"),disabled:!l.userId||!l.syncEnabled,children:"Restore synced copy"}),s.jsx("button",{onClick:()=>G1(),children:"Download backup"}),s.jsx("button",{onClick:()=>S.current?.click(),children:"Import backup"})]}),s.jsx("input",{ref:S,type:"file",accept:"application/json",onChange:G=>{const L=G.target.files?.[0];L&&O(L),G.currentTarget.value=""},className:"sr-only","aria-label":"Import backup file"}),s.jsxs("div",{style:{display:"grid",gap:4},className:"subtle",children:[s.jsxs("div",{children:["Saved drills: ",h]}),s.jsxs("div",{children:["Tempo: ",o.tempoBpm," BPM"]}),s.jsxs("div",{children:["Visual aids: ",o.visualsEnabled?"On":"Off"]})]}),b&&s.jsx("div",{style:{padding:12,borderRadius:14,background:"var(--surface-muted)"},children:b})]}),s.jsxs("section",{className:"card",style:{display:"grid",gap:12},children:[s.jsx("h3",{children:"Reset"}),s.jsx("p",{className:"subtle",children:"This clears local progress, authored drills, settings, telemetry, and the current profile. It does not erase any synced copy saved under the same profile id."}),s.jsx("button",{onClick:()=>{V1(),y("Local data cleared.")},children:"Clear local data"})]})]})}function $1(l){return s.jsx("div",{style:{height:10,borderRadius:999,background:"rgba(0,0,0,0.08)",overflow:"hidden"},children:s.jsx("div",{style:{height:"100%",width:`${Math.round(l*100)}%`,background:"linear-gradient(90deg,#0b8f5a,#2ab37a)"}})})}function X1(){const l=lx(),c=h1(),o={intervals:"Intervals",degrees:"Degrees",chords:"Chords",timing:"Timing",phrases:"Phrases"};return s.jsxs("div",{style:{display:"grid",gap:12},children:[s.jsx("h2",{style:{margin:0},children:"Progress"}),s.jsxs("div",{style:{display:"grid",gap:6},children:[s.jsxs("div",{children:["Total attempts: ",s.jsx("b",{children:l.totals.attempts})]}),s.jsxs("div",{children:["Accuracy: ",s.jsxs("b",{children:[(l.totals.accuracy*100).toFixed(1),"%"]})]}),s.jsxs("div",{children:["Current streak: ",s.jsx("b",{children:l.totals.streak})," (best ",l.totals.bestStreak,")"]})]}),s.jsx("div",{style:{display:"grid",gap:10,padding:12,borderRadius:12,background:"white",border:"1px solid rgba(0,0,0,0.12)"},children:l.skills.map(u=>s.jsxs("div",{style:{display:"grid",gap:4},children:[s.jsxs("div",{style:{display:"flex",justifyContent:"space-between",fontSize:13},children:[s.jsx("div",{style:{fontWeight:700},children:o[u.skill]}),s.jsxs("div",{children:[Math.round(u.mastery*100),"%"]})]}),$1(u.mastery),s.jsxs("div",{style:{opacity:.7,fontSize:12},children:["Attempts ",u.attempts," | Due ",u.dueCount," | Weak ",u.weakCount]})]},u.skill))}),s.jsxs("div",{className:"card",style:{display:"grid",gap:10},children:[s.jsx("div",{style:{fontWeight:700},children:"Flow diagnostics"}),s.jsxs("div",{children:["Total events: ",s.jsx("b",{children:c.totalEvents})]}),s.jsxs("div",{children:["Page views: ",s.jsx("b",{children:c.pageViews})]}),s.jsxs("div",{children:["Finished runs: ",s.jsx("b",{children:c.completedSessions})]}),s.jsxs("div",{children:["Abandoned runs: ",s.jsx("b",{children:c.abandonedSessions})]}),s.jsxs("div",{children:["Completion rate: ",s.jsxs("b",{children:[(c.completionRate*100).toFixed(1),"%"]})]}),s.jsxs("div",{className:"subtle",style:{fontSize:13},children:["Top drop-off routes: ",c.dropOffRoutes.length>0?c.dropOffRoutes.map(u=>`${u.route} (${u.count})`).join(", "):"none yet"]})]}),s.jsxs("div",{style:{display:"flex",gap:8,flexWrap:"wrap"},children:[s.jsxs(Us,{to:"/practice?review=due",style:{padding:"8px 12px",borderRadius:10,border:"1px solid rgba(0,0,0,0.2)",color:"inherit",textDecoration:"none",background:"white"},children:["Start due session (",l.reviewCounts.due,")"]}),s.jsxs(Us,{to:"/practice?review=weak",style:{padding:"8px 12px",borderRadius:10,border:"1px solid rgba(0,0,0,0.2)",color:"inherit",textDecoration:"none",background:"white"},children:["Start focus session (",l.reviewCounts.weak,")"]}),s.jsx("div",{style:{opacity:.7,fontSize:12,alignSelf:"center"},children:"Launches a targeted run using your recent performance and scheduling data."})]}),s.jsx("button",{onClick:()=>{Mv(),location.reload()},style:{width:180},children:"Reset progress"}),s.jsx("button",{onClick:()=>{Ld(),location.reload()},style:{width:180},children:"Reset diagnostics"})]})}const Iu=[{kind:"interval",id:"int_m2",label:"m2",semitones:1,difficulty:2,tags:["interval"]},{kind:"interval",id:"int_M2",label:"M2",semitones:2,difficulty:1,tags:["interval"]},{kind:"interval",id:"int_m3",label:"m3",semitones:3,difficulty:2,tags:["interval"]},{kind:"interval",id:"int_M3",label:"M3",semitones:4,difficulty:1,tags:["interval"]},{kind:"interval",id:"int_P4",label:"P4",semitones:5,difficulty:2,tags:["interval"]},{kind:"interval",id:"int_TT",label:"Tritone",semitones:6,difficulty:4,tags:["interval"]},{kind:"interval",id:"int_P5",label:"P5",semitones:7,difficulty:2,tags:["interval"]},{kind:"interval",id:"int_m6",label:"m6",semitones:8,difficulty:3,tags:["interval"]},{kind:"interval",id:"int_M6",label:"M6",semitones:9,difficulty:3,tags:["interval"]},{kind:"interval",id:"int_m7",label:"m7",semitones:10,difficulty:4,tags:["interval"]},{kind:"interval",id:"int_M7",label:"M7",semitones:11,difficulty:4,tags:["interval"]},{kind:"interval",id:"int_P8",label:"Octave",semitones:12,difficulty:2,tags:["interval"]},{kind:"degree",id:"deg_1",label:"1 (Do)",degree:1,difficulty:1,tags:["degree"]},{kind:"degree",id:"deg_3",label:"3 (Mi)",degree:3,difficulty:2,tags:["degree"]},{kind:"degree",id:"deg_5",label:"5 (So)",degree:5,difficulty:1,tags:["degree"]},{kind:"degree",id:"deg_7",label:"7 (Ti)",degree:7,difficulty:4,tags:["degree"]},{kind:"chord",id:"triad_maj",label:"Major triad",quality:"maj",difficulty:1,tags:["chord"]},{kind:"chord",id:"triad_min",label:"Minor triad",quality:"min",difficulty:2,tags:["chord"]},{kind:"chord",id:"triad_dim",label:"Diminished triad",quality:"dim",difficulty:4,tags:["chord"]},{kind:"chord",id:"triad_aug",label:"Augmented triad",quality:"aug",difficulty:4,tags:["chord"]}];function Wu(){return Math.random().toString(36).slice(2,10)}function Di(l){const c=[...l];for(let o=c.length-1;o>0;o--){const u=Math.floor(Math.random()*(o+1));[c[o],c[u]]=[c[u],c[o]]}return c}function P1(l,c){const o=Ps(c.keyRoot,c.octave);if(l.kind==="interval"){const b=o,y=L0(b,l.semitones),S={kind:"sequence",events:[{atBeats:0,durationBeats:1,freqHz:Ne(b),gain:.9},{atBeats:1,durationBeats:1,freqHz:Ne(y),gain:.9}]},x=Di(["m2","M2","m3","M3","P4","Tritone","P5","m6","M6","m7","M7","Octave"]).slice(0,3),O=l.label==="Octave"?"Octave":l.label,G=Di(Array.from(new Set([O,...x]))).slice(0,4);return{id:`q_${Wu()}`,prompt:"Identify the interval (melodic, ascending).",correctAnswer:O,answerChoices:G,playbackPlan:S,metadata:{itemId:l.id,itemKind:l.kind,difficulty:l.difficulty,tags:l.tags}}}if(l.kind==="degree"){const y=[0,2,4,5,7,9,11][l.degree-1],S=o+y,x={kind:"sequence",events:[{atBeats:0,durationBeats:1,freqHz:Ne(o),gain:.9},{atBeats:1,durationBeats:1,freqHz:Ne(S),gain:.9}]},O=["1 (Do)","2 (Re)","3 (Mi)","4 (Fa)","5 (So)","6 (La)","7 (Ti)"],G=l.label,L=Di(O.filter(R=>R!==G)).slice(0,3),Y=Di([G,...L]);return{id:`q_${Wu()}`,prompt:`Which scale degree is this (in ${c.keyRoot} major)?`,correctAnswer:G,answerChoices:Y,playbackPlan:x,metadata:{itemId:l.id,itemKind:l.kind,difficulty:l.difficulty,tags:l.tags}}}const d={kind:"chord",midis:O0(o,l.quality),durationBeats:2},m=["Major triad","Minor triad","Diminished triad","Augmented triad"],h=l.label,v=Di(m.filter(b=>b!==h)).slice(0,3);return{id:`q_${Wu()}`,prompt:"Identify the chord quality.",correctAnswer:h,answerChoices:Di([h,...v]),playbackPlan:d,metadata:{itemId:l.id,itemKind:l.kind,difficulty:l.difficulty,tags:l.tags}}}function Z1(){const[l,c]=p.useState(Iu[0]?.id??""),[o,u]=p.useState(Nt());p.useEffect(()=>yl(()=>u(Nt())),[]);const d=p.useMemo(()=>Iu.find(b=>b.id===l),[l]),m=p.useMemo(()=>d?P1(d,o):null,[d,o]);async function h(){m&&await Xe.play(m.playbackPlan,{tempoBpm:o.tempoBpm,masterGain:o.masterGain,timbre:o.timbre})}function v(b){m&&(Md({itemId:m.metadata.itemId,mode:m.metadata.itemKind,correct:b,responseMs:0}),alert(b?"Logged: correct":"Logged: incorrect"))}return s.jsxs("div",{style:{display:"grid",gap:12},children:[s.jsx("h2",{style:{margin:0},children:"Debug Mode"}),s.jsx("div",{style:{opacity:.75},children:"Pick any item, generate the standardized Question JSON, and play it through the shared PlaybackEngine."}),s.jsxs("div",{style:{display:"flex",gap:10,alignItems:"end",flexWrap:"wrap"},children:[s.jsxs("label",{style:{display:"grid",gap:4},children:[s.jsx("div",{children:"Item"}),s.jsx("select",{value:l,onChange:b=>c(b.target.value),style:{minWidth:280},children:Iu.map(b=>s.jsxs("option",{value:b.id,children:["[",b.kind,"] ",b.label," (d",b.difficulty,")"]},b.id))})]}),s.jsx("button",{onClick:h,style:{padding:"10px 12px",borderRadius:10},children:"Play"}),s.jsx("button",{onClick:()=>Xe.stopAll(),style:{padding:"10px 12px",borderRadius:10},children:"Stop"}),s.jsx("button",{onClick:()=>v(!0),style:{padding:"10px 12px",borderRadius:10},children:"Log Correct"}),s.jsx("button",{onClick:()=>v(!1),style:{padding:"10px 12px",borderRadius:10},children:"Log Incorrect"})]}),s.jsxs("div",{style:{display:"grid",gap:10,gridTemplateColumns:"1fr 1fr"},children:[s.jsxs("div",{style:{padding:12,borderRadius:12,background:"white",border:"1px solid rgba(0,0,0,0.12)"},children:[s.jsx("div",{style:{fontWeight:700,marginBottom:8},children:"Selected Item"}),s.jsx("pre",{style:{margin:0,fontSize:12,overflow:"auto"},children:JSON.stringify(d,null,2)})]}),s.jsxs("div",{style:{padding:12,borderRadius:12,background:"white",border:"1px solid rgba(0,0,0,0.12)"},children:[s.jsx("div",{style:{fontWeight:700,marginBottom:8},children:"Generated Question JSON"}),s.jsx("pre",{style:{margin:0,fontSize:12,overflow:"auto"},children:JSON.stringify(m,null,2)})]})]})]})}function J1({samples:l,targetMidis:c,scoredMidis:o=[],height:u=180}){if(l.length===0&&c.length===0)return s.jsx("div",{style:{height:u,borderRadius:10,background:"rgba(0,0,0,0.04)",display:"grid",placeItems:"center",fontSize:13,opacity:.72},children:"No pitch trace yet"});const m=[...l.map($=>$.midi),...c,...o],h=Math.floor(Math.min(...m))-1,v=Math.ceil(Math.max(...m))+1,b=Math.max(1,v-h),y=560,S=l[0]?.atMs??0,x=l.at(-1)?.atMs??S+Math.max(1,c.length-1)*550,O=Math.max(1,x-S),G=$=>($-S)/O*y,L=$=>u-($-h)/b*u,Y=l.map(($,F)=>`${F===0?"M":"L"} ${G($.atMs).toFixed(1)} ${L($.midi).toFixed(1)}`).join(" "),R=O/Math.max(1,c.length);return s.jsxs("div",{style:{display:"grid",gap:6},children:[s.jsxs("svg",{viewBox:`0 0 ${y} ${u}`,style:{width:"100%",height:u,borderRadius:10,background:"rgba(0,0,0,0.04)"},children:[Array.from({length:b+1},($,F)=>{const ee=h+F,oe=L(ee);return s.jsx("line",{x1:0,y1:oe,x2:y,y2:oe,stroke:"rgba(0,0,0,0.08)",strokeWidth:ee%12===0?1.2:.6},`grid_${ee}`)}),c.map(($,F)=>{const ee=F*R,oe=Math.min(y,ee+R*.9),xe=L($);return s.jsx("line",{x1:ee,y1:xe,x2:oe,y2:xe,stroke:"rgba(37, 99, 235, 0.75)",strokeWidth:3,strokeLinecap:"round"},`target_${F}`)}),Y.length>0&&s.jsx("path",{d:Y,fill:"none",stroke:"rgba(24, 120, 63, 0.95)",strokeWidth:2.4,strokeLinecap:"round",strokeLinejoin:"round"}),o.map(($,F)=>{const ee=Math.min(y-10,F*R+R*.45),oe=L($);return s.jsx("circle",{cx:ee,cy:oe,r:4.5,fill:"rgba(180, 110, 18, 0.95)"},`scored_${F}`)})]}),s.jsxs("div",{style:{display:"flex",gap:10,flexWrap:"wrap",fontSize:12,opacity:.72},children:[s.jsx("div",{children:"Blue: target"}),s.jsx("div",{children:"Green: sung pitch"}),s.jsx("div",{children:"Amber: scored centers"})]})]})}const F1=[{value:"interval_echo",label:"Interval echo"},{value:"degree_match",label:"Degree over drone"}],I1=F1.filter(l=>vv().includes(l.value)),W1=["major","natural_minor","harmonic_minor","melodic_minor","modal"],Qp={freqHz:null,midi:null,cents:null,clarity:0,rms:0,isSignal:!1,noteLabel:null};function eS(l,c,o){if(c==null||l.midi==null)return{label:l.isSignal?"Searching for pitch":"Below gate",cents:null,tone:"neutral"};const u=za(l.midi,c);return Math.abs(u)<=o?{label:"In tune",cents:u,tone:"good"}:{label:u>0?"Sharp":"Flat",cents:u,tone:"warn"}}function tS(l){return l.kind==="interval_echo"?"Hear the two-note move, then sing the same motion back in order.":"Lock into the drone, then sing the target degree and hold it steady."}function nS(l){return l.targetLabels.length>1?`Targets ${l.targetLabels.join(" -> ")}`:`Target ${l.targetLabels[0]}`}function aS(l){const c=Math.round(l.mastery*100);return l.mode==="functional_interval"?`${l.label} is still unstable. You are averaging ${c}% mastery across ${l.attempts} scored interval attempts.`:l.mode==="scale_degree"?`${l.label} is lagging behind. You are averaging ${c}% mastery across ${l.attempts} scored degree matches.`:`${l.label} is one of the weakest recent voice buckets at ${c}% mastery over ${l.attempts} attempts.`}function lS(l){return l.mode==="functional_interval"?"Replay the prompt once, sing the first note clearly, then exaggerate the motion into the destination note before tightening the pitch.":l.mode==="scale_degree"?"Stay on the drone longer before responding and aim for a stable center pitch before trying to finish the hold timer.":"Slow the response down, use the prompt as a reference, and prioritize pitch stability before speed."}function iS(){const[l,c]=p.useState(Nt()),[o,u]=p.useState(kd()),[d,m]=p.useState("major"),[h,v]=p.useState(null),[b,y]=p.useState(null),[S,x]=p.useState(!1),[O,G]=p.useState(null),[L,Y]=p.useState(Qp),[R,$]=p.useState(!1),[F,ee]=p.useState("Not set"),[oe,xe]=p.useState(!1),[ue,ie]=p.useState(0),[Ae,T]=p.useState(0),[ye,X]=p.useState(null),[ne,pe]=p.useState([]),[he,me]=p.useState([]),[E,P]=p.useState(null),[W,je]=p.useState({attempts:0,correct:0}),[Ee,M]=p.useState([]),[B,J]=p.useState(!1),[te,de]=p.useState(!1),[I,_e]=p.useState(!1),Be=p.useRef(null),ze=p.useRef(null),yt=p.useRef(null),Oe=p.useRef(null),ct=p.useRef(null),Rt=p.useRef(null),rt=p.useRef(0),mt=p.useRef([]),Pe=p.useRef([]),ht=p.useRef(null),Dt=p.useRef(o),an=p.useRef(R),ot=p.useRef(oe),U=p.useRef(b),se=p.useRef(null),ve=p.useRef(!1),ge=p.useRef(0);p.useEffect(()=>yl(()=>c(Nt())),[]),p.useEffect(()=>{Dt.current=o},[o]),p.useEffect(()=>{an.current=R},[R]),p.useEffect(()=>{ot.current=oe},[oe]),p.useEffect(()=>{U.current=b},[b]);const Re=h??Ps(l.keyRoot,l.octave),Ke=b==null||b.targetMidis.length<=1?0:Math.min(ue,b.targetMidis.length-1),Ce=b?.targetMidis[Ke]??null,A=p.useMemo(()=>eS(L,Ce,o.toleranceCents),[Ce,L,o.toleranceCents]),Z=W.attempts===0?null:Math.round(W.correct/W.attempts*100);function Me(le){u(le),d1(le)}function bt(){M(jv({contextPrefix:"voice:",limit:3,modePool:["scale_degree","functional_interval"]}))}function lt(le=o.exerciseKind,We=Re,Et=d){xe(!1),ot.current=!1,se.current=null,ve.current=!1,Pe.current=[],ie(0),T(0),X(null),pe([]),me([]),P(null),y(i1({kind:le,tonicMidi:We,tonalMode:Et}))}p.useEffect(()=>{lt(o.exerciseKind,Re,d)},[Re,d,o.exerciseKind]),p.useEffect(()=>{bt()},[]),p.useEffect(()=>{if(!b?.droneMidi){Xe.clearDrone();return}Xe.setDrone(b.droneMidi,{tempoBpm:l.tempoBpm,masterGain:l.masterGain,timbre:l.timbre},.14)},[b,l.masterGain,l.tempoBpm,l.timbre]),p.useEffect(()=>()=>{ct.current!=null&&window.cancelAnimationFrame(ct.current),ht.current!=null&&window.clearTimeout(ht.current),Xe.clearDrone(),Xe.stopAll(),Oe.current?.getTracks().forEach(le=>le.stop()),yt.current?.disconnect(),ze.current?.disconnect(),Be.current!=null&&Be.current.close()},[]);async function It(){if(!S){if(!navigator.mediaDevices?.getUserMedia){G("This browser does not expose microphone input.");return}try{const le=await navigator.mediaDevices.getUserMedia({audio:{echoCancellation:!1,noiseSuppression:!1,autoGainControl:!1}}),We=new AudioContext;await We.resume();const Et=We.createAnalyser();Et.fftSize=2048,Et.smoothingTimeConstant=.12;const St=We.createMediaStreamSource(le);St.connect(Et);const pt=new Float32Array(new ArrayBuffer(Et.fftSize*Float32Array.BYTES_PER_ELEMENT));Be.current=We,ze.current=Et,yt.current=St,Oe.current=le,Rt.current=pt,x(!0),G(null);const ln=()=>{const Va=ze.current,da=Be.current,Un=Rt.current;if(!Va||!da||!Un)return;Va.getFloatTimeDomainData(Un);const Pt=Sd(Un,da.sampleRate,Dt.current.noiseGate),sn=performance.now();if(Pt.midi!=null){const Gn={atMs:sn,midi:Pt.midi,rms:Pt.rms};an.current&&mt.current.push(Gn),ot.current&&Pe.current.push(Gn)}if(ot.current){const Gn=wr(Pe.current);if(ie(Gn.length),U.current?.targetMidis.length===1&&Pt.midi!=null){const fa=za(Pt.midi,U.current.targetMidis[0]),ma=Math.abs(fa)<=Dt.current.toleranceCents?(Pe.current.at(-1)?.atMs??sn)-(Gn.at(-1)?.startMs??sn):0;T(Math.max(0,Math.round(ma))),ma>=Dt.current.holdDurationMs&&!ve.current&&window.setTimeout(()=>Ga("auto"),0)}else T(0);sn-ge.current>110&&(ge.current=sn,pe([...Pe.current]))}else ie(0),T(0);sn-rt.current>70&&(rt.current=sn,Y(Pt)),ct.current=window.requestAnimationFrame(ln)};ct.current=window.requestAnimationFrame(ln)}catch(le){const We=le instanceof Error?le.message:"Microphone permission failed.";G(We),x(!1)}}}async function Ie(){ct.current!=null&&(window.cancelAnimationFrame(ct.current),ct.current=null),Oe.current?.getTracks().forEach(le=>le.stop()),Oe.current=null,yt.current?.disconnect(),yt.current=null,ze.current?.disconnect(),ze.current=null,Rt.current=null,Be.current!=null&&(await Be.current.close(),Be.current=null),x(!1),G(null),$(!1),Y(Qp),xe(!1),ot.current=!1}function Ht(){b&&Xe.play(b.promptPlan,{tempoBpm:l.tempoBpm,masterGain:l.masterGain,timbre:l.timbre})}function xt(){!S||!b||(Pe.current=[],se.current=performance.now(),ve.current=!1,ge.current=0,xe(!0),ot.current=!0,ie(0),T(0),X(null),pe([]),me([]),P(null))}function Ga(le="manual"){const We=U.current;if(!We||ve.current)return;ve.current=!0,xe(!1),ot.current=!1;const Et=Math.max(1,Math.round(performance.now()-(se.current??performance.now()))),St=[...Pe.current],pt=o1({exercise:We,samples:St,toleranceCents:Dt.current.toleranceCents});X(pt),pe(St),me(St),P(le==="auto"?"Hold target reached. Attempt scored automatically.":null),Md({itemId:We.progressItemId,mode:We.progressMode,correct:pt.correct,responseMs:Et,contextKey:We.contextKey,adaptiveKeys:We.adaptiveKeys}),je(ln=>({attempts:ln.attempts+1,correct:ln.correct+(pt.correct?1:0)})),bt()}function Hn(){S&&(mt.current=[],$(!0),ee("Listening for a steady tonic..."),ht.current!=null&&window.clearTimeout(ht.current),ht.current=window.setTimeout(()=>{const le=s1(mt.current);if($(!1),le==null){ee("No stable tonic captured");return}v(le),ee(Ba(le)),lt(Dt.current.exerciseKind,le,d)},2200))}const ua=A.tone==="good"?"rgba(24, 120, 63, 0.12)":A.tone==="warn"?"rgba(180, 110, 18, 0.14)":"rgba(0,0,0,0.05)";return s.jsxs("div",{className:"page",children:[s.jsxs("div",{style:{display:"grid",gap:"0.45rem"},children:[s.jsx("h2",{style:{margin:0},children:"Voice Practice"}),s.jsx("div",{className:"subtle",children:"Focus on the sung prompt, then use the live feedback panel to correct the response in real time."})]}),s.jsxs("div",{className:"voice-layout",children:[s.jsx("div",{className:"voice-prompt-shell",children:s.jsxs("div",{className:"voice-prompt-shell__tools",children:[s.jsx("button",{type:"button",onClick:()=>{S?Ie():It()},children:S?"Disable mic":"Enable mic"}),s.jsx("button",{type:"button",onClick:()=>J(!0),children:"Settings"}),s.jsx("button",{type:"button",onClick:()=>de(!0),children:"Topic mode"}),s.jsx("button",{type:"button",onClick:()=>_e(!0),children:"Reinforcement"})]})}),s.jsxs("section",{className:"panel panel--accent voice-feedback-panel",children:[s.jsxs("div",{className:"voice-feedback-panel__header",children:[s.jsxs("div",{className:"voice-feedback-panel__copy",children:[s.jsx("div",{className:"panel-title",children:b?.label??"Voice Practice"}),s.jsx("div",{className:"subtle",children:b?tS(b):"Load a voice prompt to begin."})]}),s.jsxs("div",{className:"voice-feedback-panel__stats",children:[s.jsxs("div",{className:"metric-card",children:[s.jsx("div",{className:"metric-card__label",children:"Target"}),s.jsx("div",{className:"metric-card__value",children:b?nS(b).replace("Targets ","").replace("Target ",""):"--"})]}),s.jsxs("div",{className:"metric-card",children:[s.jsx("div",{className:"metric-card__label",children:"Tonic"}),s.jsx("div",{className:"metric-card__value",children:b?Ba(b.tonicMidi):"--"})]}),s.jsxs("div",{className:"metric-card",children:[s.jsx("div",{className:"metric-card__label",children:"Mode"}),s.jsx("div",{className:"metric-card__value",children:d.replace("_"," ")})]}),s.jsxs("div",{className:"metric-card",children:[s.jsx("div",{className:"metric-card__label",children:"Accuracy"}),s.jsxs("div",{className:"metric-card__value",children:[W.correct,"/",W.attempts,Z!=null?` (${Z}%)`:""]})]})]})]}),s.jsx(J1,{samples:ne,targetMidis:b?.targetMidis??[],scoredMidis:ye?.scoredMidis}),s.jsxs("div",{className:"notice voice-feedback-panel__notice voice-feedback-panel__notice--compact",style:{background:ua},children:[s.jsxs("div",{className:"voice-feedback-panel__notice-row",children:[s.jsx("div",{className:"voice-feedback-panel__headline voice-feedback-panel__headline--small",children:A.cents!=null?`${Math.round(A.cents)} cents`:A.label}),oe&&b?.targetMidis.length===1&&s.jsxs("div",{className:"chip",children:["Hold ",Math.min(Ae,o.holdDurationMs)," / ",o.holdDurationMs," ms"]}),E&&s.jsx("div",{className:"chip",children:E})]}),s.jsx("div",{className:"subtle",children:A.cents==null?"No stable pitch is being tracked yet.":`Tracking ${b?.targetLabels[Ke]??"target"} at ${o.toleranceCents}-cent tolerance.`})]}),s.jsxs("div",{className:"button-row",children:[s.jsx("button",{onClick:Ht,children:"Play prompt"}),s.jsx("button",{onClick:()=>lt(),children:"New prompt"}),s.jsx("button",{onClick:xt,disabled:!S||oe,children:"Start attempt"}),s.jsx("button",{onClick:()=>Ga("manual"),disabled:!oe,children:"Finish attempt"})]}),ye?s.jsxs("div",{className:"feedback-block voice-result-card",children:[s.jsxs("div",{className:"voice-result-card__header",children:[s.jsx("div",{className:"panel-title",children:ye.correct?"Matched":"Try again"}),s.jsx("div",{className:"subtle",children:ye.summary})]}),s.jsxs("div",{className:"metric-grid",children:[s.jsxs("div",{className:"metric-card",children:[s.jsx("div",{className:"metric-card__label",children:"Hits in tolerance"}),s.jsxs("div",{className:"metric-card__value",children:[ye.matched,"/",ye.expected]})]}),s.jsxs("div",{className:"metric-card",children:[s.jsx("div",{className:"metric-card__label",children:"Captured samples"}),s.jsx("div",{className:"metric-card__value",children:he.length})]}),s.jsxs("div",{className:"metric-card",children:[s.jsx("div",{className:"metric-card__label",children:"Reinforcement queue"}),s.jsx("div",{className:"metric-card__value",children:Ee.length})]})]}),ye.centsOff.length>0&&s.jsx("div",{className:"chip-row",children:ye.centsOff.map((le,We)=>s.jsxs("div",{className:"chip",children:[b?.targetLabels[We]??We+1,": ",Math.round(le)," cents"]},`${b?.id??"voice"}_${We}`))})]}):s.jsxs("div",{className:"feedback-block voice-result-card",children:[s.jsx("div",{className:"panel-title",children:"Awaiting scored attempt"}),s.jsx("div",{className:"subtle",children:"The scored summary appears here after you finish an attempt. Use the prompt card to replay or generate a new cue if needed."})]})]})]}),B&&s.jsx("div",{className:"mode-overlay",onClick:()=>J(!1),role:"presentation",children:s.jsxs("div",{className:"mode-overlay__panel mode-overlay__panel--wide mode-overlay__panel--compact",onClick:le=>le.stopPropagation(),role:"dialog","aria-modal":"true","aria-labelledby":"voice-input-settings-title",children:[s.jsx("div",{id:"voice-input-settings-title",className:"panel-title",children:"Input settings"}),s.jsx("div",{className:"subtle",children:"Configure the microphone and tracking thresholds here so the main screen can stay focused on the prompt and response."}),s.jsxs("div",{className:"button-row",children:[s.jsx("button",{onClick:Hn,disabled:!S||R,children:"Calibrate tonic"}),s.jsxs("div",{className:"meta-pill",children:[S?"Microphone ready":"Microphone required",O?` | ${O}`:"",R?" | capturing...":""]})]}),s.jsxs("div",{className:"metric-grid",children:[s.jsxs("div",{className:"metric-card",children:[s.jsx("div",{className:"metric-card__label",children:"Tonic"}),s.jsx("div",{className:"metric-card__value",children:h==null?`${l.keyRoot}${l.octave}`:F})]}),s.jsxs("div",{className:"metric-card",children:[s.jsx("div",{className:"metric-card__label",children:"Detected"}),s.jsx("div",{className:"metric-card__value",children:L.noteLabel??"none"})]}),s.jsxs("div",{className:"metric-card",children:[s.jsx("div",{className:"metric-card__label",children:"Clarity"}),s.jsxs("div",{className:"metric-card__value",children:[Math.round(L.clarity*100),"%"]})]}),s.jsxs("div",{className:"metric-card",children:[s.jsx("div",{className:"metric-card__label",children:"Level"}),s.jsx("div",{className:"metric-card__value",children:L.rms.toFixed(3)})]})]}),s.jsxs("div",{className:"control-grid",children:[s.jsxs("label",{className:"control-label",children:["Noise gate",s.jsx("input",{type:"range",min:.005,max:.05,step:.001,value:o.noiseGate,onChange:le=>Me({...o,noiseGate:Number(le.target.value)})}),s.jsx("span",{children:o.noiseGate.toFixed(3)})]}),s.jsxs("label",{className:"control-label",children:["Tolerance",s.jsx("input",{type:"range",min:10,max:50,step:1,value:o.toleranceCents,onChange:le=>Me({...o,toleranceCents:Number(le.target.value)})}),s.jsxs("span",{children:[o.toleranceCents," cents"]})]}),s.jsxs("label",{className:"control-label",children:["Steady hold",s.jsx("input",{type:"range",min:400,max:1600,step:100,value:o.holdDurationMs,onChange:le=>Me({...o,holdDurationMs:Number(le.target.value)})}),s.jsxs("span",{children:[o.holdDurationMs," ms"]})]})]}),s.jsx("button",{type:"button",className:"mode-overlay__dismiss",onClick:()=>J(!1),children:"Close input settings"})]})}),te&&s.jsx("div",{className:"mode-overlay",onClick:()=>de(!1),role:"presentation",children:s.jsxs("div",{className:"mode-overlay__panel mode-overlay__panel--wide mode-overlay__panel--compact",onClick:le=>le.stopPropagation(),role:"dialog","aria-modal":"true","aria-labelledby":"voice-topic-settings-title",children:[s.jsx("div",{id:"voice-topic-settings-title",className:"panel-title",children:"Topic mode"}),s.jsx("div",{className:"subtle",children:"Choose the voice exercise and tonal context here without crowding the main response screen."}),s.jsx("div",{className:"chip-row",children:I1.map(le=>s.jsx("button",{type:"button",className:o.exerciseKind===le.value?"toggle-chip toggle-chip--active":"toggle-chip","aria-pressed":o.exerciseKind===le.value,onClick:()=>{const We={...o,exerciseKind:le.value};Me(We),lt(le.value,Re,d)},children:le.label},le.value))}),s.jsx("div",{className:"control-grid",children:s.jsxs("label",{className:"control-label",children:["Tonal mode",s.jsx("select",{value:d,onChange:le=>m(le.target.value),children:W1.map(le=>s.jsx("option",{value:le,children:le.replace("_"," ")},le))})]})}),s.jsx("button",{type:"button",className:"mode-overlay__dismiss",onClick:()=>de(!1),children:"Close topic mode"})]})}),I&&s.jsx("div",{className:"mode-overlay",onClick:()=>_e(!1),role:"presentation",children:s.jsxs("div",{className:"mode-overlay__panel mode-overlay__panel--wide mode-overlay__panel--compact",onClick:le=>le.stopPropagation(),role:"dialog","aria-modal":"true","aria-labelledby":"voice-reinforcement-title",children:[s.jsx("div",{id:"voice-reinforcement-title",className:"panel-title",children:"Reinforcement"}),s.jsx("div",{className:"subtle",children:"These are the voice areas the tracker currently considers least stable. Use them to decide what to repeat before chasing more speed."}),Ee.length===0?s.jsx("div",{className:"panel-copy",children:"No weak voice buckets yet. Complete a few scored attempts and this overlay will start prioritizing what needs extra reps."}):s.jsx("div",{className:"list-stack",children:Ee.map(le=>s.jsxs("div",{className:"list-row voice-reinforcement-row",children:[s.jsxs("div",{className:"voice-reinforcement-row__header",children:[s.jsx("div",{style:{fontWeight:700},children:le.label}),s.jsxs("div",{className:"chip-row",children:[s.jsxs("div",{className:"chip",children:["Mastery ",Math.round(le.mastery*100),"%"]}),s.jsxs("div",{className:"chip",children:["Attempts ",le.attempts]}),s.jsxs("div",{className:"chip",children:["Mode ",le.mode.replace("_"," ")]}),le.dueNow&&s.jsx("div",{className:"chip",children:"Due now"})]})]}),s.jsx("div",{className:"subtle",children:aS(le)}),s.jsx("div",{className:"panel-copy",children:lS(le)})]},le.context+le.key))}),s.jsx("button",{type:"button",className:"mode-overlay__dismiss",onClick:()=>_e(!1),children:"Close reinforcement"})]})})]})}const or={name:"",mode:"scale_degree",adaptiveKey:"degree:3",difficulty:2,tags:"warmup",promptOverride:"",explanationTitle:"",explanationBody:"",coachingNotes:"",moreBody:"",enabled:!0};function sS(l){return{id:l.id,name:l.name,mode:l.mode,adaptiveKey:l.adaptiveKey,difficulty:l.difficulty,tags:l.tags.join(", "),promptOverride:l.promptOverride,explanationTitle:l.explanationTitle,explanationBody:l.explanationBody,coachingNotes:l.coachingNotes.join(`
`),moreBody:l.moreBody,enabled:l.enabled}}function cS(){const[l,c]=p.useState(Ha()),[o,u]=p.useState(or);p.useEffect(()=>Ed(()=>c(Ha())),[]);const d=p.useMemo(()=>Ap(o.mode),[o.mode]);function m(v,b){u(y=>({...y,[v]:b}))}function h(){!o.name.trim()||!o.adaptiveKey.trim()||(sx({id:o.id,name:o.name.trim(),mode:o.mode,adaptiveKey:o.adaptiveKey.trim(),difficulty:o.difficulty,tags:o.tags.split(",").map(v=>v.trim()).filter(Boolean),promptOverride:o.promptOverride.trim(),explanationTitle:o.explanationTitle.trim()||o.name.trim(),explanationBody:o.explanationBody.trim(),coachingNotes:o.coachingNotes.split(`
`).map(v=>v.trim()).filter(Boolean),moreBody:o.moreBody.trim(),enabled:o.enabled}),Tn("authoring_saved","/studio",{mode:o.mode,difficulty:o.difficulty}),u({...or,mode:o.mode,adaptiveKey:d[0]??o.adaptiveKey}))}return s.jsxs("div",{style:{display:"grid",gap:16},children:[s.jsxs("div",{style:{display:"grid",gap:6},children:[s.jsx("h2",{children:"Studio"}),s.jsx("p",{className:"subtle",children:"Build reusable drill overlays, tag them for sequencing, and tune the explanatory copy that appears after each answer."})]}),s.jsxs("section",{className:"card",style:{display:"grid",gap:12},children:[s.jsxs("div",{style:{display:"grid",gap:4},children:[s.jsx("h3",{children:o.id?"Edit drill":"Create drill"}),s.jsx("p",{className:"subtle",children:"The adaptive key should match a supported concept so practice sessions can generate it on demand."})]}),s.jsxs("div",{style:{display:"grid",gap:12,gridTemplateColumns:"repeat(auto-fit, minmax(220px, 1fr))"},children:[s.jsxs("label",{children:["Name",s.jsx("input",{value:o.name,onChange:v=>m("name",v.target.value),"aria-label":"Drill name"})]}),s.jsxs("label",{children:["Mode",s.jsxs("select",{value:o.mode,onChange:v=>{const b=v.target.value;u(y=>({...y,mode:b,adaptiveKey:Ap(b)[0]??y.adaptiveKey}))},"aria-label":"Drill mode",children:[s.jsx("option",{value:"scale_degree",children:"Scale degree"}),s.jsx("option",{value:"functional_interval",children:"Functional interval"}),s.jsx("option",{value:"functional_harmony",children:"Functional harmony"}),s.jsx("option",{value:"timing_grid",children:"Timing grid"}),s.jsx("option",{value:"phrase_recall",children:"Phrase recall"})]})]}),s.jsxs("label",{children:["Difficulty",s.jsx("select",{value:o.difficulty,onChange:v=>m("difficulty",Number(v.target.value)),"aria-label":"Drill difficulty",children:[1,2,3,4,5].map(v=>s.jsxs("option",{value:v,children:["Level ",v]},v))})]})]}),s.jsxs("label",{children:["Adaptive key",s.jsx("input",{value:o.adaptiveKey,onChange:v=>m("adaptiveKey",v.target.value),"aria-label":"Adaptive key"})]}),s.jsxs("div",{className:"subtle",style:{fontSize:13},children:["Examples: ",d.join(", ")]}),s.jsxs("label",{children:["Prompt override",s.jsx("input",{value:o.promptOverride,onChange:v=>m("promptOverride",v.target.value),"aria-label":"Prompt override"})]}),s.jsxs("label",{children:["Explanation heading",s.jsx("input",{value:o.explanationTitle,onChange:v=>m("explanationTitle",v.target.value),"aria-label":"Explanation heading"})]}),s.jsxs("label",{children:["Explanation",s.jsx("textarea",{value:o.explanationBody,onChange:v=>m("explanationBody",v.target.value),"aria-label":"Explanation body"})]}),s.jsxs("label",{children:["Coaching notes",s.jsx("textarea",{value:o.coachingNotes,onChange:v=>m("coachingNotes",v.target.value),"aria-label":"Coaching notes"})]}),s.jsxs("label",{children:["Extended notes",s.jsx("textarea",{value:o.moreBody,onChange:v=>m("moreBody",v.target.value),"aria-label":"Extended notes"})]}),s.jsxs("label",{children:["Tags",s.jsx("input",{value:o.tags,onChange:v=>m("tags",v.target.value),"aria-label":"Tags"})]}),s.jsxs("label",{style:{display:"flex",alignItems:"center",gap:10},children:[s.jsx("input",{type:"checkbox",checked:o.enabled,onChange:v=>m("enabled",v.target.checked),style:{width:18,minHeight:18},"aria-label":"Enabled"}),"Include in live sessions"]}),s.jsxs("div",{style:{display:"flex",gap:10,flexWrap:"wrap"},children:[s.jsx("button",{onClick:h,children:o.id?"Update drill":"Save drill"}),s.jsx("button",{onClick:()=>u({...or,mode:o.mode,adaptiveKey:d[0]??or.adaptiveKey}),children:"Reset form"})]})]}),s.jsxs("section",{className:"card",style:{display:"grid",gap:12},children:[s.jsxs("div",{style:{display:"flex",justifyContent:"space-between",gap:12,alignItems:"center",flexWrap:"wrap"},children:[s.jsx("h3",{children:"Saved drills"}),s.jsxs("div",{className:"subtle",children:[l.length," total"]})]}),s.jsx("div",{style:{display:"grid",gap:10},children:l.map(v=>s.jsxs("article",{style:{padding:14,borderRadius:16,border:"1px solid var(--border)",background:"var(--surface-strong)",display:"grid",gap:8},children:[s.jsxs("div",{style:{display:"flex",justifyContent:"space-between",gap:12,flexWrap:"wrap"},children:[s.jsxs("div",{children:[s.jsx("div",{style:{fontWeight:700},children:v.name}),s.jsxs("div",{className:"subtle",style:{fontSize:13},children:[v.mode.replace("_"," ")," | ",v.adaptiveKey," | level ",v.difficulty]})]}),s.jsx("div",{className:"subtle",style:{fontSize:13},children:v.enabled?"Live":"Disabled"})]}),s.jsx("div",{children:v.explanationBody||"No explanation body yet."}),s.jsx("div",{className:"subtle",style:{fontSize:13},children:v.tags.join(", ")||"No tags"}),s.jsxs("div",{style:{display:"flex",gap:10,flexWrap:"wrap"},children:[s.jsx("button",{onClick:()=>u(sS(v)),children:"Edit"}),s.jsx("button",{onClick:()=>cx(v.id),children:"Delete"})]})]},v.id))})]})]})}const ed=60,rS=4,ur={freqHz:null,midi:null,cents:null,clarity:0,rms:0,isSignal:!1,noteLabel:null},$p=[{shortcut:"z",midi:53},{shortcut:"s",midi:54},{shortcut:"x",midi:55},{shortcut:"d",midi:56},{shortcut:"c",midi:57},{shortcut:"f",midi:58},{shortcut:"v",midi:59},{shortcut:"b",midi:60},{shortcut:"h",midi:61},{shortcut:"n",midi:62},{shortcut:"j",midi:63},{shortcut:"m",midi:64},{shortcut:",",midi:65},{shortcut:"l",midi:66},{shortcut:".",midi:67},{shortcut:";",midi:68},{shortcut:"/",midi:69},{shortcut:"'",midi:70},{shortcut:"q",midi:71},{shortcut:"w",midi:72},{shortcut:"3",midi:73},{shortcut:"e",midi:74},{shortcut:"4",midi:75},{shortcut:"r",midi:76},{shortcut:"t",midi:77},{shortcut:"6",midi:78},{shortcut:"y",midi:79},{shortcut:"7",midi:80},{shortcut:"u",midi:81},{shortcut:"8",midi:82},{shortcut:"i",midi:83},{shortcut:"o",midi:84},{shortcut:"0",midi:85},{shortcut:"p",midi:86},{shortcut:"-",midi:87},{shortcut:"[",midi:88},{shortcut:"]",midi:89}],oS={B:$p,W:$p.map(l=>({shortcut:l.shortcut,midi:l.midi-12}))},uS=[{intervals:[0,3],quality:"minor dyad"},{intervals:[0,4],quality:"major dyad"},{intervals:[0,7],quality:"fifth dyad"},{intervals:[0,3,6],quality:"diminished triad"},{intervals:[0,3,7],quality:"minor triad"},{intervals:[0,4,7],quality:"major triad"},{intervals:[0,4,8],quality:"augmented triad"},{intervals:[0,2,7],quality:"sus2"},{intervals:[0,5,7],quality:"sus4"},{intervals:[0,4,7,10],quality:"dominant 7"},{intervals:[0,4,7,11],quality:"major 7"},{intervals:[0,3,7,10],quality:"minor 7"},{intervals:[0,3,7,11],quality:"minor-major 7"},{intervals:[0,3,6,9],quality:"diminished 7"},{intervals:[0,3,6,10],quality:"half-diminished 7"}],dS={0:"P1",1:"m2",2:"M2",3:"m3",4:"M3",5:"P4",6:"TT",7:"P5",8:"m6",9:"M6",10:"m7",11:"M7",12:"P8",13:"m9",14:"M9",15:"m10",16:"M10",17:"P11",18:"TT+8",19:"P12",20:"m13",21:"M13",22:"m14",23:"M14",24:"P15"},Os=["#df4638","#245db7","#efc133","#3d8a5f"],fS={C:"C",Db:"C#",D:"D",Eb:"D#",E:"E",F:"F",Gb:"F#",G:"G",Ab:"G#",A:"A",Bb:"A#",B:"B"};function mS(l,c){let o=0;const u=[];for(let d=l;d<=c;d+=1){const m=Mt(d),h=m.name.includes("b");u.push({midi:d,name:m.name,octave:m.octave,isBlack:h,whiteIndex:o}),h||(o+=1)}return u}function hS(l,c){return l.length===c.length&&l.every((o,u)=>o===c[u])}function Xp(l){return l.toUpperCase()}function Pp(l){return Ft[(l%12+12)%12]}function ra(l,c){return c==="sharp"?fS[l]:l}function pS(l,c){const o=Mt(l);return`${ra(o.name,c)}${o.octave}`}function Vv(l){return dS[l]??`${l} st`}function vS(l,c){if(l.length===0)return"No notes pressed";if(l.length===1)return"Single note";const o=Array.from(new Set(l.map(b=>(b%12+12)%12))).sort((b,y)=>b-y),u=(l[0]%12+12)%12,d=o.flatMap(b=>{const y=o.map(S=>(S-b+12)%12).sort((S,x)=>S-x);return uS.filter(S=>hS(S.intervals,y)).map(S=>({rootPitchClass:b,quality:S.quality}))}),m=d.find(b=>b.rootPitchClass===u)??d[0];if(!m)return l.length===2?`${Vv(l[1]-l[0])} interval`:"Unrecognized chord shape";const h=ra(Pp(m.rootPitchClass),c),v=ra(Pp(u),c);return v===h?`${h} ${m.quality}`:`${h} ${m.quality} / ${v}`}function gS(l){return l.length<2?[]:l.slice(1).map((c,o)=>({fromMidi:l[o],toMidi:c,intervalLabel:Vv(c-l[o])}))}function yS(){const[l,c]=p.useState(Nt()),[o,u]=p.useState([]),[d,m]=p.useState(null),[h,v]=p.useState(!1),[b,y]=p.useState(null),[S,x]=p.useState(ur),[O,G]=p.useState(()=>Math.max(.001,kd().noiseGate/4)),L=p.useRef(null),Y=p.useRef(null),R=p.useRef(new Map),$=p.useRef(new Map),F=p.useRef(new Map),ee=p.useRef(null),oe=p.useRef(null),xe=p.useRef(null),ue=p.useRef(null),ie=p.useRef(null),Ae=p.useRef(null),T=p.useRef(0),ye=p.useRef(O),X=p.useMemo(()=>[...o].sort((U,se)=>U-se),[o]),ne=p.useMemo(()=>oS[l.keyboardMiddleCMapping],[l.keyboardMiddleCMapping]),pe=ne[0]?.midi??ed,he=ne[ne.length-1]?.midi??ed,me=p.useMemo(()=>mS(pe,he),[he,pe]),E=p.useMemo(()=>me.filter(U=>!U.isBlack),[me]),P=p.useMemo(()=>ne.reduce((U,se)=>{const ve=U.get(se.midi)??[];return ve.push(se.shortcut),U.set(se.midi,ve),U},new Map),[ne]),W=p.useMemo(()=>new Map(ne.map(U=>[U.shortcut,U.midi])),[ne]),je=p.useMemo(()=>new Map(X.map((U,se)=>[U,Os[se]??Os[0]])),[X]),Ee=vS(X,l.keyboardAccidentalStyle),M=p.useMemo(()=>gS(X),[X]),B=S.midi==null?null:Math.round(S.midi),J=B!=null&&B>=pe&&B<=he?B:null,te=B==null?"Waiting for stable pitch":pS(B,l.keyboardAccidentalStyle),de=B==null?"--":ra(Mt(B).name,l.keyboardAccidentalStyle),I=B==null||S.cents==null?null:Math.round(S.cents),_e=I!=null&&I>0?`+${I}`:null,Be=I!=null&&I<0?`${I}`:null,ze=h?B==null?S.isSignal?"Searching for pitch":"Below gate":S.cents==null?"Tracking pitch":`${S.cents>=0?"+":""}${Math.round(S.cents)} cents`:"Microphone off",yt=B==null?"Sing a steady pitch and the nearest note in the excerpt will highlight.":`Clarity ${Math.round(S.clarity*100)}% | Level ${S.rms.toFixed(3)}`;p.useEffect(()=>yl(()=>c(Nt())),[]),p.useEffect(()=>{ye.current=O},[O]),p.useEffect(()=>{Y.current&&(Y.current.gain.value=l.masterGain),R.current.forEach(({oscillator:U})=>{U.type=l.timbre})},[l.masterGain,l.timbre]),p.useEffect(()=>{const U=()=>{ht()},se=Re=>{ot(Re.pointerId)},ve=Re=>{if(Re.repeat||Re.altKey||Re.ctrlKey||Re.metaKey)return;const Ke=Re.key.toLowerCase(),Ce=W.get(Ke);Ce!=null&&(Re.preventDefault(),mt(Ce,`kbd:${Ke}`))},ge=Re=>{const Ke=Re.key.toLowerCase(),Ce=W.get(Ke);Ce!=null&&(Re.preventDefault(),Pe(Ce,`kbd:${Ke}`))};return window.addEventListener("blur",U),window.addEventListener("pointerup",se),window.addEventListener("pointercancel",se),window.addEventListener("keydown",ve),window.addEventListener("keyup",ge),()=>{window.removeEventListener("blur",U),window.removeEventListener("pointerup",se),window.removeEventListener("pointercancel",se),window.removeEventListener("keydown",ve),window.removeEventListener("keyup",ge),ht()}},[W,l.masterGain,l.timbre]),p.useEffect(()=>()=>{Ae.current!=null&&window.cancelAnimationFrame(Ae.current),ue.current?.getTracks().forEach(U=>U.stop()),xe.current?.disconnect(),oe.current?.disconnect(),ee.current!=null&&ee.current.close()},[]);async function Oe(){if(L.current&&Y.current)return L.current.state!=="running"&&await L.current.resume(),{context:L.current,master:Y.current};const U=window.AudioContext||window.webkitAudioContext;if(!U){const ge="This browser does not support Web Audio.";throw m(ge),new Error(ge)}const se=new U,ve=se.createGain();return ve.gain.value=l.masterGain,ve.connect(se.destination),L.current=se,Y.current=ve,se.state!=="running"&&await se.resume(),m(null),{context:se,master:ve}}async function ct(){if(!h){if(!navigator.mediaDevices?.getUserMedia){y("This browser does not expose microphone input.");return}try{const U=await navigator.mediaDevices.getUserMedia({audio:{echoCancellation:!1,noiseSuppression:!1,autoGainControl:!1}}),se=new AudioContext;await se.resume();const ve=se.createAnalyser();ve.fftSize=2048,ve.smoothingTimeConstant=.12;const ge=se.createMediaStreamSource(U);ge.connect(ve);const Re=new Float32Array(new ArrayBuffer(ve.fftSize*Float32Array.BYTES_PER_ELEMENT));ee.current=se,oe.current=ve,xe.current=ge,ue.current=U,ie.current=Re,v(!0),y(null),x(ur);const Ke=()=>{const Ce=oe.current,A=ee.current,Z=ie.current;if(!Ce||!A||!Z)return;Ce.getFloatTimeDomainData(Z);const Me=Sd(Z,A.sampleRate,ye.current),bt=performance.now();bt-T.current>70&&(T.current=bt,x(Me)),Ae.current=window.requestAnimationFrame(Ke)};Ae.current=window.requestAnimationFrame(Ke)}catch(U){y(U instanceof Error?U.message:"Microphone permission failed."),v(!1),x(ur)}}}async function Rt(){Ae.current!=null&&(window.cancelAnimationFrame(Ae.current),Ae.current=null),ue.current?.getTracks().forEach(U=>U.stop()),ue.current=null,xe.current?.disconnect(),xe.current=null,oe.current?.disconnect(),oe.current=null,ie.current=null,ee.current!=null&&(await ee.current.close(),ee.current=null),v(!1),y(null),x(ur)}function rt(){u(Array.from($.current.keys()).sort((U,se)=>U-se))}async function mt(U,se){const ve=$.current.get(U);if(ve?.has(se)||!ve&&$.current.size>=rS)return;const ge=ve??new Set;if(ge.add(se),$.current.set(U,ge),rt(),!R.current.has(U))try{const{context:Re,master:Ke}=await Oe(),Ce=Re.createOscillator();Ce.type=l.timbre,Ce.frequency.value=Ne(U);const A=Re.createGain(),Z=Re.currentTime;A.gain.setValueAtTime(0,Z),A.gain.linearRampToValueAtTime(.36,Z+.01),Ce.connect(A),A.connect(Ke),Ce.start(Z),R.current.set(U,{oscillator:Ce,gain:A})}catch(Re){$.current.delete(U),rt(),m(Re instanceof Error?Re.message:"Unable to start audio.")}}function Pe(U,se){const ve=$.current.get(U);if(!ve||(ve.delete(se),ve.size>0))return;$.current.delete(U),rt();const ge=R.current.get(U),Re=L.current;if(!ge||!Re){R.current.delete(U);return}const Ke=Re.currentTime;ge.gain.gain.cancelScheduledValues(Ke),ge.gain.gain.setValueAtTime(ge.gain.gain.value,Ke),ge.gain.gain.linearRampToValueAtTime(0,Ke+.06);try{ge.oscillator.stop(Ke+.08)}catch{}ge.oscillator.onended=()=>{ge.gain.disconnect(),ge.oscillator.disconnect()},R.current.delete(U)}function ht(){Array.from($.current.entries()).forEach(([U,se])=>{Array.from(se).forEach(ve=>Pe(U,ve))}),F.current.clear()}function Dt(U,se){const ve=`ptr:${U}`,ge=F.current.get(U);ge&&ge.midi!==se&&Pe(ge.midi,ge.sourceId),F.current.set(U,{sourceId:ve,midi:se}),mt(se,ve)}function an(U,se){const ve=F.current.get(U);!ve||ve.midi===se||(Pe(ve.midi,ve.sourceId),F.current.set(U,{sourceId:ve.sourceId,midi:se}),mt(se,ve.sourceId))}function ot(U){const se=F.current.get(U);se&&(Pe(se.midi,se.sourceId),F.current.delete(U))}return s.jsxs("div",{className:"page keyboard-mode-page",children:[s.jsxs("section",{className:"panel panel--blue keyboard-analysis-panel",children:[s.jsxs("div",{className:"keyboard-analysis-header",children:[s.jsxs("div",{className:"keyboard-analysis-line",children:[s.jsx("span",{className:"section-label kicker kicker--red",children:"Pressed Notes"}),s.jsx("div",{className:"keyboard-analysis-notes",children:X.length>0?X.map(U=>{const se=Mt(U),ve=je.get(U)??Os[0];return s.jsx("span",{className:"keyboard-note-pill",style:{"--keyboard-note-color":ve},children:s.jsx("span",{className:"keyboard-note-pill__text",children:ra(se.name,l.keyboardAccidentalStyle)})},U)}):s.jsx("div",{className:"keyboard-analysis-value",children:"Press notes"})})]}),s.jsx("button",{type:"button",className:"keyboard-analysis__mic-button",onClick:()=>{h?Rt():ct()},children:h?"Disable mic":"Enable mic"})]}),s.jsxs("div",{className:"keyboard-analysis-grid",children:[s.jsxs("div",{className:"mini-stat keyboard-analysis-card",children:[s.jsx("div",{className:"metric-card__label",children:"Chord Type"}),s.jsx("div",{className:"keyboard-analysis-card__value",children:Ee})]}),s.jsxs("div",{className:"mini-stat keyboard-analysis-card",children:[s.jsx("div",{className:"metric-card__label",children:"Adjacent Intervals"}),s.jsx("div",{className:"keyboard-analysis-card__value",children:M.length>0?s.jsx("div",{className:"keyboard-interval-list",children:M.map(U=>{const se=ra(Mt(U.fromMidi).name,l.keyboardAccidentalStyle),ve=ra(Mt(U.toMidi).name,l.keyboardAccidentalStyle),ge=je.get(U.fromMidi)??Os[0],Re=je.get(U.toMidi)??Os[0];return s.jsxs("span",{className:"keyboard-interval-item",children:[s.jsx("span",{className:"keyboard-interval-note",style:{"--keyboard-note-color":ge},children:se}),s.jsx("span",{className:"keyboard-interval-separator",children:"-"}),s.jsx("span",{className:"keyboard-interval-note",style:{"--keyboard-note-color":Re},children:ve}),s.jsx("span",{className:"keyboard-interval-separator",children:":"}),s.jsx("span",{children:U.intervalLabel})]},`${U.fromMidi}-${U.toMidi}`)})}):"Add another note to see intervals"})]})]}),h&&s.jsxs("div",{className:"mini-stat keyboard-analysis-card keyboard-analysis-card--mic",children:[s.jsx("div",{className:"metric-card__label",children:"Sung Note"}),s.jsx("div",{className:"keyboard-analysis-card__value keyboard-analysis-card__value--large",children:te}),s.jsx("div",{className:"subtle",children:ze}),s.jsx("div",{className:"subtle",children:yt}),s.jsxs("label",{className:"control-label keyboard-analysis-card__slider",children:[s.jsx("span",{children:"Mic sensitivity"}),s.jsx("input",{type:"range",min:.001,max:.02,step:.001,value:O,onChange:U=>G(Number(U.target.value))}),s.jsxs("span",{className:"subtle",children:["Gate ",O.toFixed(3)," | lower = more sensitive"]})]})]}),d&&s.jsx("div",{className:"notice notice--alert",children:d}),b&&s.jsx("div",{className:"notice notice--alert",children:b})]}),s.jsxs("section",{className:"panel keyboard-surface",children:[s.jsxs("div",{className:"panel-header",children:[s.jsxs("div",{children:[s.jsxs("div",{className:"section-label kicker kicker--blue keyboard-surface__kicker",children:[Mt(pe).name,Mt(pe).octave," ","to"," ",Mt(he).name,Mt(he).octave," excerpt"]}),s.jsx("h2",{className:"panel-title keyboard-surface__title",children:"Keyboard"})]}),s.jsxs("div",{className:"keyboard-surface__controls",children:[s.jsxs("label",{className:"control-label keyboard-surface__mapping",children:[s.jsx("span",{children:"Middle C mapping"}),s.jsxs("select",{value:l.keyboardMiddleCMapping,onChange:U=>Ys({...l,keyboardMiddleCMapping:U.target.value}),children:[s.jsx("option",{value:"B",children:"Middle C = B"}),s.jsx("option",{value:"W",children:"Middle C = W"})]})]}),s.jsxs("label",{className:"control-label keyboard-surface__mapping",children:[s.jsx("span",{children:"Black keys"}),s.jsxs("select",{value:l.keyboardAccidentalStyle,onChange:U=>Ys({...l,keyboardAccidentalStyle:U.target.value}),children:[s.jsx("option",{value:"flat",children:"Flats (b)"}),s.jsx("option",{value:"sharp",children:"Sharps (#)"})]})]})]})]}),s.jsx("div",{className:"keyboard-shell",children:s.jsxs("div",{className:"keyboard-stage","aria-label":"Three-octave keyboard",children:[s.jsx("div",{className:"keyboard-whites",style:{gridTemplateColumns:`repeat(${E.length}, minmax(0, 1fr))`},children:E.map(U=>{const se=P.get(U.midi)??[],ve=o.includes(U.midi),ge=J===U.midi,Re=U.midi===ed,Ke=je.get(U.midi),Ce=["keyboard-key","keyboard-key--white",ve?"keyboard-key--active":"",ge?"keyboard-key--mic-active":"",Re?"keyboard-key--middle-c":""].filter(Boolean).join(" ");return s.jsxs("button",{type:"button",className:Ce,style:Ke?{"--keyboard-note-color":Ke}:void 0,onPointerDown:A=>Dt(A.pointerId,U.midi),onPointerEnter:A=>{A.buttons>0&&an(A.pointerId,U.midi)},onPointerLeave:A=>{A.buttons===0&&ot(A.pointerId)},onPointerUp:A=>ot(A.pointerId),onPointerCancel:A=>ot(A.pointerId),children:[s.jsxs("span",{className:"keyboard-key__note",children:[ra(U.name,l.keyboardAccidentalStyle),U.octave]}),s.jsx("span",{className:"keyboard-key__shortcut",children:se.map(A=>Xp(A)).join(" / ")})]},U.midi)})}),s.jsx("div",{className:"keyboard-blacks",children:me.filter(U=>U.isBlack).map(U=>{const se=P.get(U.midi)??[],ve=o.includes(U.midi),ge=J===U.midi,Re=je.get(U.midi),Ke=["keyboard-key","keyboard-key--black",ve?"keyboard-key--active":"",ge?"keyboard-key--mic-active":""].filter(Boolean).join(" ");return s.jsxs("button",{type:"button",className:Ke,style:{left:`calc(${U.whiteIndex/E.length*100}% - 1.9rem)`,...Re?{"--keyboard-note-color":Re}:{}},onPointerDown:Ce=>Dt(Ce.pointerId,U.midi),onPointerEnter:Ce=>{Ce.buttons>0&&an(Ce.pointerId,U.midi)},onPointerLeave:Ce=>{Ce.buttons===0&&ot(Ce.pointerId)},onPointerUp:Ce=>ot(Ce.pointerId),onPointerCancel:Ce=>ot(Ce.pointerId),children:[s.jsx("span",{className:"keyboard-key__note",children:ra(U.name,l.keyboardAccidentalStyle)}),s.jsx("span",{className:"keyboard-key__shortcut",children:se.map(Ce=>Xp(Ce)).join(" / ")})]},U.midi)})})]})})]}),s.jsx("button",{type:"button",className:h?"keyboard-mic-overlay keyboard-mic-overlay--active":"keyboard-mic-overlay",onClick:()=>{h?Rt():ct()},"aria-label":h?"Disable microphone tracking":"Enable microphone tracking",children:h?s.jsxs(s.Fragment,{children:[s.jsx("span",{className:"keyboard-mic-overlay__header",children:"Mic"}),s.jsx("span",{className:"keyboard-mic-overlay__cents keyboard-mic-overlay__cents--up",children:_e??""}),s.jsx("span",{className:"keyboard-mic-overlay__note",children:de}),s.jsx("span",{className:"keyboard-mic-overlay__cents keyboard-mic-overlay__cents--down",children:Be??""})]}):s.jsxs(s.Fragment,{children:[s.jsx("span",{className:"keyboard-mic-overlay__header",children:"Mic"}),s.jsx("span",{className:"keyboard-mic-overlay__enable",children:"Enable mic"})]})}),s.jsxs("div",{className:"keyboard-notes-overlay","aria-hidden":"true",children:[s.jsx("span",{className:"keyboard-notes-overlay__header",children:"Notes"}),s.jsx("span",{className:"keyboard-notes-overlay__value",children:X.length>0?X.map(U=>ra(Mt(U).name,l.keyboardAccidentalStyle)).join(" - "):"Press notes"}),s.jsx("span",{className:"keyboard-notes-overlay__meta",children:M.length>0?M.map(U=>U.intervalLabel).join(" | "):"Intervals"})]})]})}const bS=[{path:"/",element:s.jsx($0,{})},{path:"/practice",element:s.jsx(S1,{})},{path:"/beginner",element:s.jsx(j1,{})},{path:"/custom-path",element:s.jsx(D1,{})},{path:"/settings",element:s.jsx(Q1,{})},{path:"/progress",element:s.jsx(X1,{})},{path:"/studio",element:s.jsx(cS,{})},{path:"/voice",element:s.jsx(iS,{})},{path:"/keyboard",element:s.jsx(yS,{})},{path:"/debug",element:s.jsx(Z1,{})}];function xS({onOpenSettings:l}){const[c,o]=p.useState(Fn()),[u,d]=p.useState(!1),m=Wn(),h=[{to:"/",label:"Home"},{to:"/practice",label:"Practice"},{to:"/keyboard",label:"Keyboard"},{to:"/voice",label:"Voice"},{to:"/beginner",label:"Basics"},{to:"/progress",label:"Progress"},{to:"/studio",label:"Studio"},{to:"/debug",label:"Debug"}];return p.useEffect(()=>qv(()=>o(Fn())),[]),p.useEffect(()=>{d(!1)},[m.pathname]),s.jsxs("nav",{"aria-label":"Primary",className:"topnav",children:[s.jsxs("div",{className:"topnav__brand",children:[s.jsx("div",{className:"topnav__eyebrow",children:"New Ultraviolet Systems Basic"}),s.jsx("div",{className:"topnav__title",children:"VI-V-i Trainer"}),s.jsx("div",{className:"topnav__status",children:c.userId?`${c.displayName||"Learner"} | ${c.syncState}`:"Local mode"})]}),s.jsxs("div",{className:"topnav__actions",children:[s.jsxs("button",{type:"button",className:u?"topnav__menu-button topnav__menu-button--open":"topnav__menu-button","aria-expanded":u,"aria-controls":"topnav-links",onClick:()=>d(v=>!v),children:[s.jsxs("span",{className:"topnav__menu-mark","aria-hidden":"true",children:[s.jsx("span",{className:"topnav__menu-bar topnav__menu-bar--red"}),s.jsx("span",{className:"topnav__menu-bar topnav__menu-bar--blue"}),s.jsx("span",{className:"topnav__menu-bar topnav__menu-bar--yellow"})]}),s.jsx("span",{children:"Menu"})]}),s.jsx("button",{type:"button",className:"topnav__settings-button",onClick:l,"aria-label":"Open quick settings",children:"Quick settings"})]}),s.jsx("div",{id:"topnav-links",className:u?"topnav__nav topnav__nav--open":"topnav__nav",children:h.map(v=>s.jsx(mv,{to:v.to,className:({isActive:b})=>b?"topnav__link topnav__link--active":"topnav__link",children:v.label},v.to))})]})}function SS({open:l,onClose:c}){const[o,u]=p.useState(Kl);p.useEffect(()=>{if(!l)return;const h=window.setTimeout(()=>u(Nt()),0);return()=>window.clearTimeout(h)},[l]);const d=p.useMemo(()=>l?"settings-drawer settings-drawer--open":"settings-drawer",[l]);function m(h){u(h),Ys(h)}return s.jsxs(s.Fragment,{children:[l&&s.jsx("div",{onClick:c,"aria-hidden":"true",className:"settings-scrim"}),s.jsxs("div",{className:d,role:"dialog","aria-modal":"true","aria-label":"Quick settings",children:[s.jsxs("div",{className:"settings-drawer__header",children:[s.jsxs("div",{children:[s.jsx("div",{className:"kicker kicker--red",children:"Quick Controls"}),s.jsx("div",{className:"panel-title",children:"Settings"})]}),s.jsx("div",{style:{flex:1}}),s.jsx("button",{onClick:c,children:"Close"})]}),s.jsxs("div",{className:"settings-drawer__body",children:[s.jsxs("label",{className:"control-label",children:[s.jsx("div",{children:"Key"}),s.jsx("select",{value:o.keyRoot,onChange:h=>m({...o,keyRoot:h.target.value}),children:Ft.map(h=>s.jsx("option",{value:h,children:h},h))})]}),s.jsxs("label",{className:"control-label",children:[s.jsx("div",{children:"Tonic octave"}),s.jsx("input",{type:"number",min:1,max:6,value:o.octave,onChange:h=>m({...o,octave:Number(h.target.value)})})]}),s.jsxs("label",{className:"control-label",children:[s.jsx("div",{children:"Tempo (BPM)"}),s.jsx("input",{type:"number",min:40,max:220,value:o.tempoBpm,onChange:h=>m({...o,tempoBpm:Number(h.target.value)})})]}),s.jsxs("label",{className:"control-label",children:[s.jsx("div",{children:"Master volume"}),s.jsx("input",{type:"range",min:0,max:1,step:.01,value:o.masterGain,onChange:h=>m({...o,masterGain:Number(h.target.value)})}),s.jsx("div",{className:"subtle",children:o.masterGain.toFixed(2)})]}),s.jsxs("label",{className:"control-label",children:[s.jsx("div",{children:"Timbre"}),s.jsxs("select",{value:o.timbre,onChange:h=>m({...o,timbre:h.target.value}),children:[s.jsx("option",{value:"sine",children:"sine"}),s.jsx("option",{value:"triangle",children:"triangle"}),s.jsx("option",{value:"square",children:"square"}),s.jsx("option",{value:"sawtooth",children:"sawtooth"})]})]}),s.jsxs("label",{className:"checkbox-chip",children:[s.jsx("input",{type:"checkbox",checked:o.droneEnabled,onChange:h=>m({...o,droneEnabled:h.target.checked})}),s.jsx("div",{children:"Tonic drone enabled"})]}),s.jsxs("label",{className:"checkbox-chip",children:[s.jsx("input",{type:"checkbox",checked:o.visualsEnabled,onChange:h=>m({...o,visualsEnabled:h.target.checked})}),s.jsx("div",{children:"Visual aids enabled"})]}),s.jsx("div",{className:"settings-drawer__footer",children:s.jsx("button",{onClick:()=>m(Kl),style:{width:"100%"},children:"Reset settings"})})]})]})]})}function _S({children:l}){const c=Wn(),[o,u]=p.useState(!1),[d,m]=p.useState(Nt());return p.useEffect(()=>yl(()=>m(Nt())),[]),p.useEffect(()=>{Tn("page_view",c.pathname)},[c.pathname]),p.useEffect(()=>{const h=()=>{Xe.warm(),window.removeEventListener("pointerdown",h),window.removeEventListener("keydown",h)};return window.addEventListener("pointerdown",h),window.addEventListener("keydown",h),()=>{window.removeEventListener("pointerdown",h),window.removeEventListener("keydown",h)}},[]),p.useEffect(()=>{if(d.droneEnabled){Xe.setDrone(Ps(d.keyRoot,d.octave),{tempoBpm:d.tempoBpm,masterGain:d.masterGain,timbre:d.timbre},.16);return}Xe.clearDrone()},[d]),s.jsxs("div",{className:"app-shell",children:[s.jsx("a",{href:"#main-content",className:"sr-only",children:"Skip to content"}),s.jsx(xS,{onOpenSettings:()=>u(!0)}),s.jsx("main",{id:"main-content",className:"shell-main",children:l}),s.jsx(SS,{open:o,onClose:()=>u(!1)})]})}function jS(){const l=Bb(bS);return s.jsx(_S,{children:l})}"serviceWorker"in navigator&&window.addEventListener("load",()=>{const l=new URL("/ear-trainer/",window.location.origin).href,c="/ear-trainer/sw.js";navigator.serviceWorker.getRegistrations().then(o=>Promise.all(o.map(u=>u.scope===l?Promise.resolve(!1):u.unregister()))),navigator.serviceWorker.register(c)});eb.createRoot(document.getElementById("root")).render(s.jsx($y.StrictMode,{children:s.jsx(S0,{basename:"/ear-trainer/",children:s.jsx(jS,{})})}));
